<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Gmet&#39;s Blog</title>
  
  <subtitle>Eureka!</subtitle>
  <link href="https://gmet233.gitee.io/atom.xml" rel="self"/>
  
  <link href="https://gmet233.gitee.io/"/>
  <updated>2022-04-12T14:57:08.874Z</updated>
  <id>https://gmet233.gitee.io/</id>
  
  <author>
    <name>Met Guo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç»å…¸å†…æ’åºç®—æ³•æ±‡æ€»</title>
    <link href="https://gmet233.gitee.io/2022/05/18/%E7%BB%8F%E5%85%B8%E5%86%85%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%B1%87%E6%80%BB/"/>
    <id>https://gmet233.gitee.io/2022/05/18/%E7%BB%8F%E5%85%B8%E5%86%85%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E6%B1%87%E6%80%BB/</id>
    <published>2022-05-18T14:46:51.772Z</published>
    <updated>2022-04-12T14:57:08.874Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡ä»‹ç»å‡ ç§ç»å…¸ã€å¸¸è€ƒçš„å†…æ’åºç®—æ³•ã€‚</p><p>æœ¬æ–‡è¯•å›¾å»ºç«‹ä¸€ä¸ªæ¯”è¾ƒæ ‡å‡†çš„å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å †æ’åºç®—æ³•ä»£ç ã€‚</p><h1 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h1><p>äº†è§£ã€‚</p><h2 id="ç®—æ³•æ€æƒ³"><a href="#ç®—æ³•æ€æƒ³" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>æ¯ä¸€è½®é€‰å–æœªæ’å®šçš„éƒ¨åˆ†ä¸­<strong>æœ€å°</strong>çš„éƒ¨åˆ†äº¤æ¢åˆ°æœªæ’å®šéƒ¨åˆ†çš„æœ€å¼€å¤´ï¼Œç»è¿‡è‹¥å¹²ä¸ªæ­¥éª¤ï¼Œå°±èƒ½æ’å®šæ•´ä¸ªæ•°ç»„ã€‚å³ï¼šå…ˆé€‰å‡ºæœ€å°çš„ï¼Œå†é€‰å‡ºç¬¬ 2 å°çš„ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><h2 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç•¥</p><h1 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h1><p>äº†è§£</p><h2 id="ç®—æ³•æ€æƒ³-1"><a href="#ç®—æ³•æ€æƒ³-1" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>æ¯æ¬¡å°†ä¸€ä¸ªæ•°å­—æ’å…¥ä¸€ä¸ªæœ‰åºçš„æ•°ç»„é‡Œï¼Œæˆä¸ºä¸€ä¸ªé•¿åº¦æ›´é•¿çš„æœ‰åºæ•°ç»„ï¼Œæœ‰é™æ¬¡æ“ä½œä»¥åï¼Œæ•°ç»„æ•´ä½“æœ‰åºã€‚</p><p><img src="æ’å…¥æ’åº.gif" alt="æ’å…¥æ’åºæ’åº"></p><h2 id="å®ç°-1"><a href="#å®ç°-1" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç•¥</p><h1 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h1><p>äº†è§£</p><h2 id="ç®—æ³•æ€æƒ³-2"><a href="#ç®—æ³•æ€æƒ³-2" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>å¤–å±‚å¾ªç¯æ¯ä¸€æ¬¡ç»è¿‡ä¸¤ä¸¤æ¯”è¾ƒï¼ŒæŠŠæ¯ä¸€è½®æœªæ’å®šéƒ¨åˆ†æœ€å¤§çš„å…ƒç´ æ”¾åˆ°äº†æ•°ç»„çš„æœ«å°¾ï¼›<br>ã€Œå†’æ³¡æ’åºã€æœ‰ä¸ªç‰¹ç‚¹ï¼šåœ¨éå†çš„è¿‡ç¨‹ä¸­ï¼Œæå‰æ£€æµ‹åˆ°æ•°ç»„æ˜¯æœ‰åºçš„ï¼Œä»è€Œç»“æŸæ’åºï¼Œè€Œä¸åƒã€Œé€‰æ‹©æ’åºã€é‚£æ ·ï¼Œå³ä½¿è¾“å…¥æ•°æ®æ˜¯æœ‰åºçš„ï¼Œã€Œé€‰æ‹©æ’åºã€ä¾ç„¶éœ€è¦ã€Œå‚»ä¹ä¹ã€åœ°èµ°å®Œæ‰€æœ‰çš„æµç¨‹ã€‚</p><h2 id="å®ç°-2"><a href="#å®ç°-2" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç•¥</p><h1 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h1><p>äº†è§£</p><h2 id="ç®—æ³•æ€æƒ³-3"><a href="#ç®—æ³•æ€æƒ³-3" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>æ’å…¥æ’åºçš„ä¼˜åŒ–ã€‚åœ¨æ’å…¥æ’åºé‡Œï¼Œå¦‚æœé åçš„æ•°å­—è¾ƒå°ï¼Œå®ƒæ¥åˆ°å‰é¢å°±å¾—äº¤æ¢å¤šæ¬¡ã€‚ã€Œå¸Œå°”æ’åºã€æ”¹è¿›äº†è¿™ç§åšæ³•ã€‚å¸¦é—´éš”åœ°ä½¿ç”¨æ’å…¥æ’åºï¼Œç›´åˆ°æœ€åã€Œé—´éš”ã€ä¸º 11 çš„æ—¶å€™ï¼Œå°±æ˜¯æ ‡å‡†çš„ã€Œæ’å…¥æ’åºã€ï¼Œæ­¤æ—¶æ•°ç»„é‡Œçš„å…ƒç´ å·²ç»ã€Œå‡ ä¹æœ‰åºã€äº†ã€‚</p><h2 id="å®ç°-3"><a href="#å®ç°-3" class="headerlink" title="å®ç°"></a>å®ç°</h2><p>ç•¥</p><h1 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h1><p>é‡è¦</p><h2 id="ç®—æ³•æ€æƒ³-4"><a href="#ç®—æ³•æ€æƒ³-4" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>å¿«é€Ÿæ’åºæ¯ä¸€æ¬¡éƒ½æ’å®šä¸€ä¸ªå…ƒç´ ï¼ˆè¿™ä¸ªå…ƒç´ å‘†åœ¨äº†å®ƒæœ€ç»ˆåº”è¯¥å‘†çš„ä½ç½®ï¼‰ï¼Œç„¶åé€’å½’åœ°å»æ’å®ƒå·¦è¾¹çš„éƒ¨åˆ†å’Œå³è¾¹çš„éƒ¨åˆ†ï¼Œä¾æ¬¡è¿›è¡Œä¸‹å»ï¼Œç›´åˆ°æ•°ç»„æœ‰åºã€‚</p><h2 id="å®ç°ï¼ˆé€’å½’ï¼‰"><a href="#å®ç°ï¼ˆé€’å½’ï¼‰" class="headerlink" title="å®ç°ï¼ˆé€’å½’ï¼‰"></a>å®ç°ï¼ˆé€’å½’ï¼‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//https://mp.weixin.qq.com/s/8ZTMhvHJK_He48PpSt_AmQ</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Quick</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// ä¸ºäº†é¿å…å‡ºç°è€—æ—¶çš„æç«¯æƒ…å†µï¼Œå…ˆéšæœºæ‰“ä¹±</span></span><br><span class="line">        shuffle(nums);</span><br><span class="line">        <span class="comment">// æ’åºæ•´ä¸ªæ•°ç»„ï¼ˆåŸåœ°ä¿®æ”¹ï¼‰</span></span><br><span class="line">        sort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (lo &gt;= hi) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å¯¹ nums[lo..hi] è¿›è¡Œåˆ‡åˆ†</span></span><br><span class="line">        <span class="comment">// ä½¿å¾— nums[lo..p-1] &lt;= nums[p] &lt; nums[p+1..hi]</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> partition(nums, lo, hi);</span><br><span class="line"></span><br><span class="line">        sort(nums, lo, p - <span class="number">1</span>);</span><br><span class="line">        sort(nums, p + <span class="number">1</span>, hi);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¯¹ nums[lo..hi] è¿›è¡Œåˆ‡åˆ†</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">partition</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pivot</span> <span class="operator">=</span> nums[lo];</span><br><span class="line">        <span class="comment">// å…³äºåŒºé—´çš„è¾¹ç•Œæ§åˆ¶éœ€æ ¼å¤–å°å¿ƒï¼Œç¨æœ‰ä¸æ…å°±ä¼šå‡ºé”™</span></span><br><span class="line">        <span class="comment">// æˆ‘è¿™é‡ŒæŠŠ i, j å®šä¹‰ä¸ºå¼€åŒºé—´ï¼ŒåŒæ—¶å®šä¹‰ï¼š</span></span><br><span class="line">        <span class="comment">// [lo, i) &lt;= pivotï¼›(j, hi] &gt; pivot</span></span><br><span class="line">        <span class="comment">// ä¹‹åéƒ½è¦æ­£ç¡®ç»´æŠ¤è¿™ä¸ªè¾¹ç•ŒåŒºé—´çš„å®šä¹‰</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo + <span class="number">1</span>, j = hi;</span><br><span class="line">        <span class="comment">// å½“ i &gt; j æ—¶ç»“æŸå¾ªç¯ï¼Œä»¥ä¿è¯åŒºé—´ [lo, hi] éƒ½è¢«è¦†ç›–</span></span><br><span class="line">        <span class="keyword">while</span> (i &lt;= j) &#123;</span><br><span class="line">            <span class="keyword">while</span> (i &lt; hi &amp;&amp; nums[i] &lt;= pivot) &#123;</span><br><span class="line">                i++;</span><br><span class="line">                <span class="comment">// æ­¤ while ç»“æŸæ—¶æ°å¥½ nums[i] &gt; pivot</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">while</span> (j &gt; lo &amp;&amp; nums[j] &gt; pivot) &#123;</span><br><span class="line">                j--;</span><br><span class="line">                <span class="comment">// æ­¤ while ç»“æŸæ—¶æ°å¥½ nums[j] &lt;= pivot</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// æ­¤æ—¶ [lo, i) &lt;= pivot &amp;&amp; (j, hi] &gt; pivot</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (i &gt;= j) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            swap(nums, i, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// å°† pivot æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œå³ pivot å·¦è¾¹å…ƒç´ è¾ƒå°ï¼Œå³è¾¹å…ƒç´ è¾ƒå¤§</span></span><br><span class="line">        swap(nums, lo, j);</span><br><span class="line">        <span class="keyword">return</span> j;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ´—ç‰Œç®—æ³•ï¼Œå°†è¾“å…¥çš„æ•°ç»„éšæœºæ‰“ä¹±</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shuffle</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">Random</span> <span class="variable">rand</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Random</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span> ; i &lt; n; i++) &#123;</span><br><span class="line">            <span class="comment">// ç”Ÿæˆ [i, n - 1] çš„éšæœºæ•°</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">r</span> <span class="operator">=</span> i + rand.nextInt(n - i);</span><br><span class="line">            swap(nums, i, r);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// åŸåœ°äº¤æ¢æ•°ç»„ä¸­çš„ä¸¤ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> i, <span class="type">int</span> j)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> nums[i];</span><br><span class="line">        nums[i] = nums[j];</span><br><span class="line">        nums[j] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°ï¼ˆéé€’å½’ï¼‰"><a href="#å®ç°ï¼ˆéé€’å½’ï¼‰" class="headerlink" title="å®ç°ï¼ˆéé€’å½’ï¼‰"></a>å®ç°ï¼ˆéé€’å½’ï¼‰</h2><p>æš‚ç•¥</p><h1 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h1><p>é‡è¦</p><h2 id="ç®—æ³•æ€æƒ³-5"><a href="#ç®—æ³•æ€æƒ³-5" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>å€ŸåŠ©é¢å¤–ç©ºé—´ï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„ï¼Œå¾—åˆ°æ›´é•¿çš„æœ‰åºæ•°ç»„ã€‚</p><h2 id="å®ç°-4"><a href="#å®ç°-4" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Merge</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ç”¨äºè¾…åŠ©åˆå¹¶æœ‰åºæ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[] temp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="comment">// å…ˆç»™è¾…åŠ©æ•°ç»„å¼€è¾Ÿå†…å­˜ç©ºé—´</span></span><br><span class="line">        temp = <span class="keyword">new</span> <span class="title class_">int</span>[nums.length];</span><br><span class="line">        <span class="comment">// æ’åºæ•´ä¸ªæ•°ç»„ï¼ˆåŸåœ°ä¿®æ”¹ï¼‰</span></span><br><span class="line">        sort(nums, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ï¼šå°†å­æ•°ç»„ nums[lo..hi] è¿›è¡Œæ’åº</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">sort</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> lo, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (lo == hi) &#123;</span><br><span class="line">            <span class="comment">// å•ä¸ªå…ƒç´ ä¸ç”¨æ’åº</span></span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// è¿™æ ·å†™æ˜¯ä¸ºäº†é˜²æ­¢æº¢å‡ºï¼Œæ•ˆæœç­‰åŒäº (hi + lo) / 2</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">mid</span> <span class="operator">=</span> lo + (hi - lo) / <span class="number">2</span>;</span><br><span class="line">        <span class="comment">// å…ˆå¯¹å·¦åŠéƒ¨åˆ†æ•°ç»„ nums[lo..mid] æ’åº</span></span><br><span class="line">        sort(nums, lo, mid);</span><br><span class="line">        <span class="comment">// å†å¯¹å³åŠéƒ¨åˆ†æ•°ç»„ nums[mid+1..hi] æ’åº</span></span><br><span class="line">        sort(nums, mid + <span class="number">1</span>, hi);</span><br><span class="line">        <span class="comment">// å°†ä¸¤éƒ¨åˆ†æœ‰åºæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„</span></span><br><span class="line">        merge(nums, lo, mid, hi);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å°† nums[lo..mid] å’Œ nums[mid+1..hi] è¿™ä¸¤ä¸ªæœ‰åºæ•°ç»„åˆå¹¶æˆä¸€ä¸ªæœ‰åºæ•°ç»„</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">merge</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> lo, <span class="type">int</span> mid, <span class="type">int</span> hi)</span> &#123;</span><br><span class="line">        <span class="comment">// å…ˆæŠŠ nums[lo..hi] å¤åˆ¶åˆ°è¾…åŠ©æ•°ç»„ä¸­</span></span><br><span class="line">        <span class="comment">// ä»¥ä¾¿åˆå¹¶åçš„ç»“æœèƒ½å¤Ÿç›´æ¥å­˜å…¥ nums</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo; i &lt;= hi; i++) &#123;</span><br><span class="line">            temp[i] = nums[i];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// æ•°ç»„åŒæŒ‡é’ˆæŠ€å·§ï¼Œåˆå¹¶ä¸¤ä¸ªæœ‰åºæ•°ç»„</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> lo, j = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">p</span> <span class="operator">=</span> lo; p &lt;= hi; p++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (i == mid + <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// å·¦åŠè¾¹æ•°ç»„å·²å…¨éƒ¨è¢«åˆå¹¶</span></span><br><span class="line">                nums[p] = temp[j++];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (j == hi + <span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// å³åŠè¾¹æ•°ç»„å·²å…¨éƒ¨è¢«åˆå¹¶</span></span><br><span class="line">                nums[p] = temp[i++];</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (temp[i] &gt; temp[j]) &#123;</span><br><span class="line">                nums[p] = temp[j++];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                nums[p] = temp[i++];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h1><p>é‡è¦</p><h2 id="ç®—æ³•æ€æƒ³-6"><a href="#ç®—æ³•æ€æƒ³-6" class="headerlink" title="ç®—æ³•æ€æƒ³"></a>ç®—æ³•æ€æƒ³</h2><p>å°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼Œæ­¤æ—¶ï¼Œæ•´ä¸ªåºåˆ—çš„æœ€å¤§å€¼å°±æ˜¯å †é¡¶çš„æ ¹èŠ‚ç‚¹ã€‚å°†å…¶ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œæ­¤æ—¶æœ«å°¾å°±ä¸ºæœ€å¤§å€¼ã€‚ç„¶åå°†å‰©ä½™n-1ä¸ªå…ƒç´ é‡æ–°æ„é€ æˆä¸€ä¸ªå †ï¼Œè¿™æ ·ä¼šå¾—åˆ°nä¸ªå…ƒç´ çš„æ¬¡å°å€¼ã€‚å¦‚æ­¤åå¤æ‰§è¡Œï¼Œä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—ã€‚</p><h2 id="å®ç°-5"><a href="#å®ç°-5" class="headerlink" title="å®ç°"></a>å®ç°</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] sortArray(<span class="type">int</span>[] nums) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// å°†æ•°ç»„æ•´ç†æˆå †</span></span><br><span class="line">        heapify(nums);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// å¾ªç¯ä¸å˜é‡ï¼šåŒºé—´ [0, i] å †æœ‰åº</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> len - <span class="number">1</span>; i &gt;= <span class="number">1</span>; ) &#123;</span><br><span class="line">            <span class="comment">// æŠŠå †é¡¶å…ƒç´ ï¼ˆå½“å‰æœ€å¤§ï¼‰äº¤æ¢åˆ°æ•°ç»„æœ«å°¾</span></span><br><span class="line">            swap(nums, <span class="number">0</span>, i);</span><br><span class="line">            <span class="comment">// é€æ­¥å‡å°‘å †æœ‰åºçš„éƒ¨åˆ†</span></span><br><span class="line">            i--;</span><br><span class="line">            <span class="comment">// ä¸‹æ ‡ 0 ä½ç½®ä¸‹æ²‰æ“ä½œï¼Œä½¿å¾—åŒºé—´ [0, i] å †æœ‰åº</span></span><br><span class="line">            siftDown(nums, <span class="number">0</span>, i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> nums;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†æ•°ç»„æ•´ç†æˆå †ï¼ˆå †æœ‰åºï¼‰</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">heapify</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="comment">// åªéœ€è¦ä» i = (len - 1) / 2 è¿™ä¸ªä½ç½®å¼€å§‹é€å±‚ä¸‹ç§»</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> (len - <span class="number">1</span>) / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            siftDown(nums, i, len - <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> nums</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> k    å½“å‰ä¸‹æ²‰å…ƒç´ çš„ä¸‹æ ‡</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> end  [0, end] æ˜¯ nums çš„æœ‰æ•ˆéƒ¨åˆ†</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">siftDown</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k, <span class="type">int</span> end)</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">2</span> * k + <span class="number">1</span> &lt;= end) &#123;</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">2</span> * k + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (j + <span class="number">1</span> &lt;= end &amp;&amp; nums[j + <span class="number">1</span>] &gt; nums[j]) &#123;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (nums[j] &gt; nums[k]) &#123;</span><br><span class="line">                swap(nums, j, k);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            k = j;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">swap</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> index1, <span class="type">int</span> index2)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> nums[index1];</span><br><span class="line">        nums[index1] = nums[index2];</span><br><span class="line">        nums[index2] = temp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ’åºå¤æ‚åº¦æ¯”è¾ƒ"><a href="#æ’åºå¤æ‚åº¦æ¯”è¾ƒ" class="headerlink" title="æ’åºå¤æ‚åº¦æ¯”è¾ƒ"></a>æ’åºå¤æ‚åº¦æ¯”è¾ƒ</h1><p><img src="https://www.runoob.com/wp-content/uploads/2019/03/sort.png" alt="å›¾ç‰‡æ¥æºï¼šèœé¸Ÿæ•™ç¨‹/åå¤§ç»å…¸æ’åº"></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://leetcode-cn.com/problems/sort-an-array/solution/fu-xi-ji-chu-pai-xu-suan-fa-java-by-liweiwei1419/">å¤ä¹ åŸºç¡€æ’åºç®—æ³•</a></li><li><a href="https://www.runoob.com/w3cnote/ten-sorting-algorithm.html">èœé¸Ÿæ•™ç¨‹ï¼šåå¤§æ’åºç®—æ³•</a></li><li>ã€Šç®—æ³• ç¬¬å››ç‰ˆã€‹</li><li><a href="https://mp.weixin.qq.com/s/8ZTMhvHJK_He48PpSt_AmQ">å¿«é€Ÿæ’åºçš„æ­£ç¡®ç†è§£æ–¹å¼åŠè¿ç”¨</a></li><li><a href="https://mp.weixin.qq.com/s?__biz=MzAxODQxMDM0Mw==&amp;mid=2247495989&amp;idx=1&amp;sn=30e34ac75dd1c724205e9c8b0f488e35&amp;scene=21#wechat_redirect">å½’å¹¶æ’åºçš„æ­£ç¡®ç†è§£æ–¹å¼åŠè¿ç”¨</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡ä»‹ç»å‡ ç§ç»å…¸ã€å¸¸è€ƒçš„å†…æ’åºç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡è¯•å›¾å»ºç«‹ä¸€ä¸ªæ¯”è¾ƒæ ‡å‡†çš„å¿«é€Ÿæ’åºã€å½’å¹¶æ’åºã€å †æ’åºç®—æ³•ä»£ç ã€‚&lt;/p&gt;
&lt;h1 id=&quot;</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ’åº" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
    <category term="æ’åº" scheme="https://gmet233.gitee.io/tags/%E6%8E%92%E5%BA%8F/"/>
    
  </entry>
  
  <entry>
    <title>Java8æ–°ç‰¹æ€§1ï¼šè¡Œä¸ºå‚æ•°åŒ–</title>
    <link href="https://gmet233.gitee.io/2022/05/05/Java8%E6%96%B0%E7%89%B9%E6%80%A71%EF%BC%9A%E8%A1%8C%E4%B8%BA%E5%8F%82%E6%95%B0%E5%8C%96/"/>
    <id>https://gmet233.gitee.io/2022/05/05/Java8%E6%96%B0%E7%89%B9%E6%80%A71%EF%BC%9A%E8%A1%8C%E4%B8%BA%E5%8F%82%E6%95%B0%E5%8C%96/</id>
    <published>2022-05-05T14:43:20.000Z</published>
    <updated>2022-05-05T15:31:09.939Z</updated>
    
    <content type="html"><![CDATA[<h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜å°±æ˜¯ï¼Œ<strong>ä¸ç®¡ä½ åšä»€ä¹ˆï¼Œç”¨æˆ·çš„éœ€æ±‚è‚¯å®šä¼šå˜</strong>ã€‚<br><strong>è¡Œä¸ºå‚æ•°åŒ–</strong>å°±æ˜¯å¯ä»¥å¸®åŠ©ä½ å¤„ç†é¢‘ç¹å˜æ›´çš„éœ€æ±‚çš„ä¸€ç§è½¯ä»¶å¼€å‘æ¨¡å¼ã€‚ä¸€è¨€ä»¥è”½ä¹‹ï¼Œå®ƒæ„å‘³ç€æ‹¿å‡ºä¸€ä¸ªä»£ç å—ï¼ŒæŠŠå®ƒå‡†å¤‡å¥½å´ä¸å»æ‰§è¡Œå®ƒã€‚è¿™ä¸ªä»£ç å—ä»¥åå¯ä»¥è¢«ä½ ç¨‹åºçš„å…¶ä»–éƒ¨åˆ†è°ƒç”¨ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥æ¨è¿Ÿè¿™å—ä»£ç çš„æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥å°†ä»£ç å—ä½œä¸ºå‚æ•°ä¼ é€’ç»™å¦ä¸€ä¸ªæ–¹æ³•ï¼Œç¨åå†å»æ‰§è¡Œå®ƒã€‚è¿™æ ·ï¼Œè¿™ä¸ªæ–¹æ³•çš„è¡Œä¸ºå°±åŸºäºé‚£å—ä»£ç è¢«å‚æ•°åŒ–äº†ã€‚</p><h1 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h1><p>é€šè¿‡é€æ­¥æ”¹è¿›æ¡ˆä¾‹ï¼Œæ¥ç†Ÿæ‚‰ä»€ä¹ˆæ˜¯â€œè¡Œä¸ºå‚æ•°åŒ–â€ã€‚</p><blockquote><p>éœ€æ±‚ï¼šå†œæ°‘å¸Œæœ›ç­›é€‰å‡º1. ç»¿è‰²çš„è‹¹æœï¼Œ2. é‡é‡å¤§äº150çš„è‹¹æœ 3â€¦.</p></blockquote><h2 id="æ–¹æ¡ˆ1"><a href="#æ–¹æ¡ˆ1" class="headerlink" title="æ–¹æ¡ˆ1"></a>æ–¹æ¡ˆ1</h2><p>å¯èƒ½çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®é¢œè‰²ç­›é€‰è‹¹æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> apples</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> color</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Apple&gt; <span class="title function_">filterByColor</span><span class="params">(List&lt;Apple&gt; apples, String color)</span> &#123;</span><br><span class="line">    List&lt;Apple&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Apple apple : apples) &#123;</span><br><span class="line">        <span class="keyword">if</span>(apple.getColor().equals(color)) &#123;</span><br><span class="line">            res.add(apple);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * æ ¹æ®é‡é‡ç­›é€‰è‹¹æœ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> apples</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> weight</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Apple&gt; <span class="title function_">filterByWeight</span><span class="params">(List&lt;Apple&gt; apples, <span class="type">int</span> weight)</span> &#123;</span><br><span class="line">    List&lt;Apple&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Apple apple : apples) &#123;</span><br><span class="line">        <span class="keyword">if</span>(apple.getWeight() &gt; weight) &#123;</span><br><span class="line">            res.add(apple);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å†œæ°‘é€šè¿‡è°ƒç”¨æ¥è·å¾—ç­”æ¡ˆ</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">filterByColor(apples, <span class="string">&quot;green&quot;</span>);</span><br><span class="line">filterByWeight(apples, <span class="number">150</span>);</span><br></pre></td></tr></table></figure><p>è¿™æ ·åšæ‰“ç ´äº†<strong>DRYï¼ˆDonâ€™t RepeatYourselfï¼Œä¸è¦é‡å¤è‡ªå·±ï¼‰çš„è½¯ä»¶å·¥ç¨‹åŸåˆ™</strong>ã€‚è¿™æ ·åšå‡ºç°äº†å¤§é‡çš„é‡å¤ä»£ç ï¼Œå½“ä½ æƒ³è¦ä¿®æ”¹æŸäº›é€»è¾‘ï¼Œæ¯”å¦‚ä¼˜åŒ–éå†è¯­å¥æ—¶ï¼Œä½ éœ€è¦ä¿®æ”¹æ‰€æœ‰æ–¹æ³•ä¸­çš„ä»£ç ã€‚</p><p>å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ï¼ŒæŠŠæ‰€æœ‰å‚æ•°éƒ½æ•´åˆåˆ°ä¸€ä¸ªæ–¹æ³•ä¸­å»ï¼Œç­¾åå¦‚ä¸‹ï¼š<code>public static List&lt;Apple&gt; filterByColor(List&lt;Apple&gt; apples, String color, int weight)</code></p><p>è¿™æ ·åšä¸ä»…ç¬¨æ‹™ï¼Œè€Œä¸”é¢å¯¹å˜åŒ–ä¸èƒ½åšå‡ºè°ƒæ•´ï¼Œå¦‚æœæœ‰æ–°çš„ç­›é€‰æ¡ä»¶ï¼Œæ¯”å¦‚äº§åœ°ï¼Œå¤§å°ï¼Œå½¢çŠ¶ç­‰æ€ä¹ˆåŠï¼Ÿ</p><h2 id="æ–¹æ¡ˆ2ï¼šè¡Œä¸ºå‚æ•°åŒ–"><a href="#æ–¹æ¡ˆ2ï¼šè¡Œä¸ºå‚æ•°åŒ–" class="headerlink" title="æ–¹æ¡ˆ2ï¼šè¡Œä¸ºå‚æ•°åŒ–"></a>æ–¹æ¡ˆ2ï¼šè¡Œä¸ºå‚æ•°åŒ–</h2><p>è®©æˆ‘ä»¬åé€€ä¸€æ­¥æ¥çœ‹çœ‹æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ã€‚ä¸€ç§å¯èƒ½çš„è§£å†³æ–¹æ¡ˆæ˜¯å¯¹ä½ çš„é€‰æ‹©æ ‡å‡†å»ºæ¨¡ï¼šä½ è€ƒè™‘çš„æ˜¯è‹¹æœï¼Œéœ€è¦æ ¹æ®Appleçš„æŸäº›å±æ€§ï¼ˆæ¯”å¦‚å®ƒæ˜¯ç»¿è‰²çš„å—ï¼Ÿé‡é‡è¶…è¿‡150å…‹å—ï¼Ÿï¼‰æ¥è¿”å›ä¸€ä¸ªbooleanå€¼ã€‚æˆ‘ä»¬æŠŠå®ƒç§°ä¸º<strong>è°“è¯</strong>ï¼ˆå³ä¸€ä¸ªè¿”å›booleanå€¼çš„å‡½æ•°ï¼‰ã€‚è®©æˆ‘ä»¬å®šä¹‰ä¸€ä¸ªæ¥å£æ¥å¯¹é€‰æ‹©æ ‡å‡†å»ºæ¨¡ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ApplePredicate</span> &#123;</span><br><span class="line">    <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Apple apple)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ç”¨ApplePredicateçš„å¤šä¸ªå®ç°ä»£è¡¨ä¸åŒçš„é€‰æ‹©æ ‡å‡†ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppleGreenColorPredicate</span> <span class="keyword">implements</span> <span class="title class_">ApplePredicate</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Apple apple)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;green&quot;</span>.equals(apple.getColor());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppleHeavyWeightPredicate</span> <span class="keyword">implements</span> <span class="title class_">ApplePredicate</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Apple apple)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> apple.getWeight() &gt; <span class="number">150</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä½ å¯ä»¥æŠŠè¿™äº›æ ‡å‡†çœ‹ä½œfilteræ–¹æ³•çš„ä¸åŒè¡Œä¸ºã€‚ä½ åˆšåšçš„è¿™äº›å’Œâ€œ<strong>ç­–ç•¥è®¾è®¡æ¨¡å¼</strong>â€ç›¸å…³ï¼Œå®ƒè®©ä½ å®šä¹‰ä¸€æ—ç®—æ³•ï¼ŒæŠŠå®ƒä»¬å°è£…èµ·æ¥ï¼ˆç§°ä¸ºâ€œç­–ç•¥â€ï¼‰ï¼Œç„¶ååœ¨è¿è¡Œæ—¶é€‰æ‹©ä¸€ä¸ªç®—æ³•ã€‚åœ¨è¿™é‡Œï¼Œç®—æ³•æ—å°±æ˜¯ApplePredicateï¼Œä¸åŒçš„ç­–ç•¥å°±æ˜¯AppleHeavyWeightPredicateå’ŒAppleGreenColorPredicateã€‚</p><p>ä½†æ˜¯ï¼Œè¯¥æ€ä¹ˆåˆ©ç”¨ApplePredicateçš„ä¸åŒå®ç°å‘¢ï¼Ÿä½ éœ€è¦filterApplesæ–¹æ³•æ¥å—ApplePredicateå¯¹è±¡ï¼Œå¯¹Appleåšæ¡ä»¶æµ‹è¯•ã€‚è¿™å°±æ˜¯è¡Œä¸ºå‚æ•°åŒ–ï¼š<strong>è®©æ–¹æ³•æ¥å—å¤šç§è¡Œä¸ºï¼ˆæˆ–æˆ˜ç•¥ï¼‰ä½œä¸ºå‚æ•°</strong>ï¼Œå¹¶åœ¨å†…éƒ¨ä½¿ç”¨ï¼Œæ¥å®Œæˆä¸åŒçš„è¡Œä¸ºã€‚è¿™åœ¨è½¯ä»¶å·¥ç¨‹ä¸Šæœ‰å¾ˆå¤§å¥½å¤„ï¼šç°åœ¨ä½ æŠŠfilterApplesæ–¹æ³•è¿­ä»£é›†åˆçš„é€»è¾‘ä¸ä½ è¦åº”ç”¨åˆ°é›†åˆä¸­æ¯ä¸ªå…ƒç´ çš„è¡Œä¸ºï¼ˆè¿™é‡Œæ˜¯ä¸€ä¸ªè°“è¯ï¼‰åŒºåˆ†å¼€äº†ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> List&lt;Apple&gt; <span class="title function_">filterApples</span><span class="params">(List&lt;Apple&gt; apples, ApplePredicate p)</span> &#123;</span><br><span class="line">    List&lt;Apple&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">for</span> (Apple apple : apples) &#123;</span><br><span class="line">        <span class="keyword">if</span>(p.test(apple)) &#123;</span><br><span class="line">            res.add(apple);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ³¨ï¼šè¿™æ ·åšæœ‰ä¸€ç‚¹ç¼ºæ†¾å°±æ˜¯ï¼Œæˆ‘æ˜æ˜é‡è¦çš„åªæœ‰ä¸€ä¸ªtestæ–¹æ³•ï¼Œä½†æ˜¯filterApplesåªèƒ½æ¥å—å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¾—ä¸æŠŠtestæ–¹æ³•å°è£…åœ¨ApplePredicateå¯¹è±¡ä¸­è¿›è¡Œä¼ é€’ã€‚åé¢ä¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼è¿›è¡Œç®€åŒ–ã€‚</p><h2 id="æ–¹æ¡ˆ2-1ï¼šä½¿ç”¨åŒ¿åç±»æ”¹è¿›"><a href="#æ–¹æ¡ˆ2-1ï¼šä½¿ç”¨åŒ¿åç±»æ”¹è¿›" class="headerlink" title="æ–¹æ¡ˆ2-1ï¼šä½¿ç”¨åŒ¿åç±»æ”¹è¿›"></a>æ–¹æ¡ˆ2-1ï¼šä½¿ç”¨åŒ¿åç±»æ”¹è¿›</h2><p>å¯¹äºä»¥ä¸Šä»£ç çš„è°ƒç”¨æˆ‘ä»¬è¦è´¹å¾ˆå¤§åŠ²ï¼Œåˆ›å»ºApplePredicateçš„ä¸¤ä¸ªå®ç°ç±»ï¼Œç„¶åæŠŠè¿™ä¸¤ä¸ªç±»å®ä¾‹åŒ–ä¼ å…¥åˆ°filterApplesæ–¹æ³•ä¸­å»ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">filterApples(apples, <span class="keyword">new</span> <span class="title class_">AppleGreenColorPredicate</span>());</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åŒ¿åç±»ç®€åŒ–è¿™ä¸€æµç¨‹ã€‚ä»¥ç­›é€‰å‡ºç»¿è‰²è‹¹æœä¸ºä¾‹ï¼Œæ”¹è¿›åçš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">filterApples(apples, <span class="keyword">new</span> <span class="title class_">ApplePredicate</span>() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">test</span><span class="params">(Apple apple)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;green&quot;</span>.equals(apple.getColor());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>ä½†åŒ¿åç±»è¿˜ä¸å¤Ÿå¥½ï¼š</p><ul><li>ç¬¨é‡ï¼šæ¯æ¬¡å®ç°æ–°çš„<code>new ApplePredicate()</code>éƒ½è¦å†™å¾ˆå¤šæ¨¡æ¿ä»£ç <code>...test...</code></li><li>è´¹è§£ï¼šè¿™é‡Œä¸è¿‡å¤šè§£é‡Š</li></ul><p>å› æ­¤æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Lambdaè¡¨è¾¾å¼è®©ä»£ç æ›´å¹²å‡€</p><h2 id="æ–¹æ¡ˆ2-2ï¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼"><a href="#æ–¹æ¡ˆ2-2ï¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼" class="headerlink" title="æ–¹æ¡ˆ2-2ï¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼"></a>æ–¹æ¡ˆ2-2ï¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼</h2><p>ä½¿ç”¨Lambdaè¡¨è¾¾å¼è®©ä¸Šè¿°ä»£ç é‡å†™ä¸ºï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">filterApples(apples, (Apple apple) -&gt; <span class="string">&quot;green&quot;</span>.equals(apple.getColor()) );</span><br></pre></td></tr></table></figure><h1 id="ç»ƒä¹ "><a href="#ç»ƒä¹ " class="headerlink" title="ç»ƒä¹ "></a>ç»ƒä¹ </h1><h2 id="1"><a href="#1" class="headerlink" title="1"></a>1</h2><p>å°†è‹¹æœæŒ‰ç…§é‡é‡ç”±å¤§åˆ°å°æ’åº</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//å¯¹è‹¹æœæŒ‰é‡é‡æ’åºï¼Œä½¿ç”¨java8 Collections.sort</span></span><br><span class="line"><span class="comment">//ä½¿ç”¨åŒ¿åç±»</span></span><br><span class="line">Collections.sort(apples, <span class="keyword">new</span> <span class="title class_">Comparator</span>&lt;Apple&gt;() &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">compare</span><span class="params">(Apple a1, Apple a2)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a1.getWeight() - a2.getWeight();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä½¿ç”¨lambdaè¡¨è¾¾å¼</span></span><br><span class="line">Collections.sort(apples, (Apple a1, Apple a2) -&gt; a1.getWeight() - a2.getWeight() );</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li>ã€ŠJava 8å®æˆ˜ã€‹</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;/a&gt;èƒŒæ™¯&lt;/h1&gt;&lt;p&gt;åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„é—®é¢˜å°±æ˜¯ï¼Œ&lt;strong&gt;ä¸ç®¡ä½ åšä»€ä¹ˆï¼Œç”¨æˆ·çš„éœ€æ±‚è‚¯å®šä¼šå˜&lt;/strong&gt;ã€‚&lt;br&gt;&lt;strong&gt;è¡Œä¸ºå‚æ•°åŒ–</summary>
      
    
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/categories/Java/"/>
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>Docker åŸºç¡€çŸ¥è¯†æ•´ç†</title>
    <link href="https://gmet233.gitee.io/2022/05/02/Docker-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/"/>
    <id>https://gmet233.gitee.io/2022/05/02/Docker-%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/</id>
    <published>2022-05-02T15:37:00.000Z</published>
    <updated>2022-05-18T14:32:47.406Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Docker-èƒ½åšä»€ä¹ˆ"><a href="#Docker-èƒ½åšä»€ä¹ˆ" class="headerlink" title="Docker èƒ½åšä»€ä¹ˆ"></a>Docker èƒ½åšä»€ä¹ˆ</h1><p>ä»¥å‰å­¦ä¹ çš„æ—¶å€™ï¼Œæƒ³è¦æ­å»ºä¸€ä¸ªHadoopé›†ç¾¤ï¼Œé‚£å°±è¦å®‰è£…ä¸€ä¸ªVMWareï¼Œç„¶åè£…è‡³å°‘ä¸‰ä¸ªè™šæ‹Ÿæœºã€‚æ¯ä¸ªè™šæ‹Ÿæœºè‡³å°‘20GBä»¥ä¸Šï¼Œæœ‰äº†Dockerï¼Œä½ åªéœ€è¦å®‰è£…ä¸€å°è™šæ‹Ÿæœºï¼ˆLinuxæ“ä½œç³»ç»Ÿï¼‰ï¼Œåœ¨è¿™å°è™šæ‹Ÿæœºä¸Šå¯åŠ¨å¤šä¸ªDockerå®¹å™¨ï¼Œæ¯ä¸ªå®¹å™¨åªæœ‰å‡ ç™¾å…†ã€‚</p><p>Dockerå°†ç¡¬ä»¶è¦æ±‚å’Œåº”ç”¨ç¯å¢ƒä¹‹é—´è¿›ä¸€æ­¥è§£è€¦ï¼Œå¤§å¤§æå‡äº†ç¨‹åºğŸ’çš„ç”Ÿäº§åŠ›å’Œå¹¸ç¦æŒ‡æ•°ã€‚</p><p>Dockerçš„åº”ç”¨åœºæ™¯åŒ…æ‹¬ä½†ä¸é™äºï¼š</p><ul><li>æœ¬åœ°ä¾èµ–ï¼šå¿«é€Ÿå°è¯•å¼€æºé¡¹ç›®è€Œä¸ç”¨æ“å¿ƒç¯å¢ƒé…ç½®ã€‚</li><li>æ­å»ºç¯å¢ƒï¼šåŒä¸€ä¸ªDockeré…ç½®å¯ä»¥åœ¨ä¸åŒçš„ç¯å¢ƒä¸­è¿è¡Œã€‚</li><li>å¾®æœåŠ¡</li><li>æ‰©å®¹ï¼šDockeræ”¯æŒæ°´å¹³æ‰©å®¹ã€‚</li><li>â€¦â€¦</li></ul><h1 id="Dockerå’Œè™šæ‹ŸæœºæŠ€æœ¯çš„æ¯”è¾ƒ"><a href="#Dockerå’Œè™šæ‹ŸæœºæŠ€æœ¯çš„æ¯”è¾ƒ" class="headerlink" title="Dockerå’Œè™šæ‹ŸæœºæŠ€æœ¯çš„æ¯”è¾ƒ"></a>Dockerå’Œè™šæ‹ŸæœºæŠ€æœ¯çš„æ¯”è¾ƒ</h1><p>è‡ªå·±æŸ¥ã€‚</p><h1 id="Dockeræ ¸å¿ƒç»„ä»¶"><a href="#Dockeræ ¸å¿ƒç»„ä»¶" class="headerlink" title="Dockeræ ¸å¿ƒç»„ä»¶"></a>Dockeræ ¸å¿ƒç»„ä»¶</h1><ul><li>Dockerå®¢æˆ·ç«¯ï¼šClient</li><li>DockeræœåŠ¡å™¨ï¼šDocker daemon</li><li>Dockeré•œåƒï¼šImage</li><li>Registry</li><li>Dockerå®¹å™¨ï¼šContainer</li></ul><p><img src="image-20220428230419609.png" alt="Dockeræ¶æ„"></p><h2 id="å®¢æˆ·ç«¯"><a href="#å®¢æˆ·ç«¯" class="headerlink" title="å®¢æˆ·ç«¯"></a>å®¢æˆ·ç«¯</h2><p>Dockerå®¢æˆ·ç«¯æ˜¯æ‰§è¡ŒDockerå‘½ä»¤çš„åœ°æ–¹ã€‚<code>docker run</code>ç­‰ç­‰</p><p>Dockerå®¢æˆ·ç«¯ä¹Ÿæ”¯æŒREST API</p><h2 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h2><p>Docker daemonè¿è¡Œåœ¨Docker hostä¸Šï¼Œè´Ÿè´£åˆ›å»ºã€è¿è¡Œã€ç›‘æ§å®¹å™¨ï¼Œæ„å»ºã€å­˜å‚¨é•œåƒã€‚</p><p>DockeræœåŠ¡å™¨é»˜è®¤æƒ…å†µä¸‹åªå“åº”æ¥è‡ªæœ¬åœ°Hostçš„å®¢æˆ·ç«¯è¯·æ±‚ï¼Œå¦‚æœè¦å…è®¸è¿œç¨‹å®¢æˆ·ç«¯è¯·æ±‚ï¼Œåˆ™éœ€è¦ä¿®æ”¹é…ç½®ï¼ˆGoogleï¼‰</p><h2 id="Dockeré•œåƒ"><a href="#Dockeré•œåƒ" class="headerlink" title="Dockeré•œåƒ"></a>Dockeré•œåƒ</h2><p>Dockeré•œåƒçœ‹æˆåªè¯»æ¨¡æ¿ï¼Œé€šè¿‡å®ƒå¯ä»¥åˆ›å»ºDockerå®¹å™¨ã€‚</p><p>ä¾‹å¦‚æŸä¸ªé•œåƒå¯èƒ½åŒ…å«ä¸€ä¸ªæ“ä½œç³»ç»Ÿã€ä¸€ä¸ªApache HTTP Serverä»¥åŠç”¨æˆ·å¼€å‘çš„Webåº”ç”¨ã€‚</p><p>é•œåƒæœ‰å¤šç§ç”Ÿæˆæ–¹æ³•ï¼šï¼ˆ1ï¼‰ä»æ— åˆ°æœ‰å¼€å§‹åˆ›å»ºé•œåƒï¼›ï¼ˆ2ï¼‰ä¸‹è½½å¹¶ä½¿ç”¨åˆ«äººåˆ›å»ºå¥½çš„ç°æˆçš„é•œåƒï¼›ï¼ˆ3ï¼‰åœ¨ç°æœ‰é•œåƒä¸Šåˆ›å»ºæ–°çš„é•œåƒã€‚å¯ä»¥å°†é•œåƒçš„å†…å®¹å’Œåˆ›å»ºæ­¥éª¤æè¿°åœ¨ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼ˆDockerfileï¼‰ä¸­ï¼Œé€šè¿‡æ‰§è¡Œdockerbuild å‘½ä»¤å¯ä»¥æ„å»ºå‡ºDockeré•œåƒï¼Œåé¢è®¨è®ºã€‚</p><h2 id="Docker-å®¹å™¨"><a href="#Docker-å®¹å™¨" class="headerlink" title="Docker å®¹å™¨"></a>Docker å®¹å™¨</h2><p>Dockerå®¹å™¨å°±æ˜¯Dockeré•œåƒçš„è¿è¡Œå®ä¾‹ã€‚</p><p>å¦‚æœé•œåƒæ˜¯è½¯ä»¶ç”Ÿå‘½å‘¨æœŸçš„æ„å»ºå’Œæ‰“åŒ…é˜¶æ®µï¼Œé‚£ä¹ˆå®¹å™¨åˆ™æ˜¯å¯åŠ¨å’Œè¿è¡Œé˜¶æ®µã€‚ï¼ˆç±»ä¼¼äºç¨‹åºä¸çº¿ç¨‹çš„å…³ç³»ã€‚ï¼‰</p><h2 id="Registry"><a href="#Registry" class="headerlink" title="Registry"></a>Registry</h2><p>Registryæ˜¯å­˜æ”¾Dockeré•œåƒçš„ä»“åº“ã€‚</p><h1 id="hello-word"><a href="#hello-word" class="headerlink" title="hello-word"></a>hello-word</h1><p>æœ¬èŠ‚ä»‹ç»Dockerå®‰è£…åˆ°è¿è¡Œä¸€ä¸ªContainerçš„åŸºæœ¬æµç¨‹ã€‚</p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">å®˜æ–¹å®‰è£…è„šæœ¬è‡ªåŠ¨å®‰è£…</span></span><br><span class="line">curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun</span><br></pre></td></tr></table></figure><h2 id="å¯åŠ¨DockeræœåŠ¡å™¨"><a href="#å¯åŠ¨DockeræœåŠ¡å™¨" class="headerlink" title="å¯åŠ¨DockeræœåŠ¡å™¨"></a>å¯åŠ¨DockeræœåŠ¡å™¨</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure><h2 id="æ‹‰å–hello-worldé•œåƒ"><a href="#æ‹‰å–hello-worldé•œåƒ" class="headerlink" title="æ‹‰å–hello-worldé•œåƒ"></a>æ‹‰å–hello-worldé•œåƒ</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker pull hello-world </span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹imageä¿¡æ¯"><a href="#æŸ¥çœ‹imageä¿¡æ¯" class="headerlink" title="æŸ¥çœ‹imageä¿¡æ¯"></a>æŸ¥çœ‹imageä¿¡æ¯</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop01 ~]# docker images hello-world</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   7 months ago   13.3kB</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="è¿è¡Œhello-world"><a href="#è¿è¡Œhello-world" class="headerlink" title="è¿è¡Œhello-world"></a>è¿è¡Œhello-world</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop01 ~]# docker run hello-world</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="æŸ¥çœ‹Dockerfile"><a href="#æŸ¥çœ‹Dockerfile" class="headerlink" title="æŸ¥çœ‹Dockerfile"></a>æŸ¥çœ‹Dockerfile</h2><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> scratch</span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> hello/</span></span><br><span class="line"><span class="keyword">CMD</span><span class="language-bash"> [<span class="string">&quot;hello/&quot;</span>]</span></span><br></pre></td></tr></table></figure><p>åªæœ‰çŸ­çŸ­ä¸‰æ¡æŒ‡ä»¤ã€‚</p><ol><li>FROM scratchï¼šé•œåƒæ˜¯ä»ç™½æ‰‹èµ·å®¶ï¼Œä»0å¼€å§‹æ„å»ºã€‚</li><li>COPY hello/ï¼šå°†å®¿ä¸»æœºä¸Šçš„æ–‡ä»¶â€œhelloâ€å¤åˆ¶åˆ°é•œåƒçš„æ ¹ç›®å½•ã€‚</li><li>CMD[â€œ/helloâ€]ï¼šå®¹å™¨å¯åŠ¨æ—¶ï¼Œæ‰§è¡Œ/helloã€‚</li></ol><h1 id="Image"><a href="#Image" class="headerlink" title="Image"></a>Image</h1><h2 id="base-é•œåƒ"><a href="#base-é•œåƒ" class="headerlink" title="base é•œåƒ"></a>base é•œåƒ</h2><p>hello-worldè™½ç„¶æ˜¯ä¸€ä¸ªå®Œæ•´çš„é•œåƒï¼Œä½†å®ƒå¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…ç”¨é€”ã€‚é€šå¸¸æ¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›é•œåƒèƒ½æä¾›ä¸€ä¸ªåŸºæœ¬çš„æ“ä½œç³»ç»Ÿç¯å¢ƒï¼Œç”¨æˆ·å¯ä»¥æ ¹æ®éœ€è¦å®‰è£…å’Œé…ç½®è½¯ä»¶ã€‚è¿™æ ·çš„é•œåƒæˆ‘ä»¬ç§°ä½œbaseé•œåƒã€‚</p><p>baseé•œåƒæœ‰ä¸¤å±‚å«ä¹‰ï¼šï¼ˆ1ï¼‰ä¸ä¾èµ–å…¶ä»–é•œåƒï¼Œä»scratchæ„å»ºï¼›ï¼ˆ2ï¼‰å…¶ä»–é•œåƒå¯ä»¥ä»¥ä¹‹ä¸ºåŸºç¡€è¿›è¡Œæ‰©å±•ã€‚</p><p>èƒ½ç§°ä½œbaseé•œåƒçš„é€šå¸¸éƒ½æ˜¯å„ç§Linuxå‘è¡Œç‰ˆçš„Dockeré•œåƒï¼Œæ¯”å¦‚Ubuntuã€Debianã€CentOSç­‰ã€‚</p><p>æˆ‘ä»¬å°è¯•ä¸‹è½½å¹¶æŸ¥çœ‹centosçš„é•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop01 ~]# docker pull centos</span><br><span class="line">...</span><br><span class="line">[root@hadoop01 ~]# docker images centos</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">centos       latest    5d0da3dc9764   7 months ago   231MB</span><br></pre></td></tr></table></figure><blockquote><p>ä¸ºä»€ä¹ˆä¸€ä¸ªcentosé•œåƒåªæœ‰200MBï¼Ÿ</p><p>ç­”ï¼šLinuxæ“ä½œç³»ç»Ÿç”±å†…æ ¸ç©ºé—´ï¼ˆbootfs/kernelï¼‰å’Œç”¨æˆ·ç©ºé—´ï¼ˆrootfsï¼‰ç»„æˆã€‚</p><p>Linuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œä¹‹åbootfsä¼šè¢«å¸è½½æ‰ã€‚</p><p>ç”¨æˆ·ç©ºé—´çš„æ–‡ä»¶ç³»ç»Ÿæ˜¯rootfsï¼ŒåŒ…å«æˆ‘ä»¬ç†Ÿæ‚‰çš„/devã€/procã€/binç­‰ç›®å½•ã€‚å¯¹äºbaseé•œåƒæ¥è¯´ï¼Œåº•å±‚ç›´æ¥ç”¨Hostçš„kernelï¼Œè‡ªå·±åªéœ€è¦æä¾›rootfså°±è¡Œäº†ã€‚<strong>è€Œå¯¹äºä¸€ä¸ªç²¾ç®€çš„OS, rootfså¯ä»¥å¾ˆå°ï¼Œåªéœ€è¦åŒ…æ‹¬æœ€åŸºæœ¬çš„å‘½ä»¤ã€å·¥å…·å’Œç¨‹åºåº“å°±å¯ä»¥äº†ã€‚</strong></p><p>å› æ­¤ï¼Œbaseé•œåƒåªæ˜¯åœ¨ç”¨æˆ·ç©ºé—´ä¸å‘è¡Œç‰ˆä¸€è‡´ï¼Œkernelç‰ˆæœ¬ä¸å‘è¡Œç‰ˆæ˜¯ä¸åŒçš„ã€‚é•œåƒçš„Kernelç‰ˆæœ¬å–å†³äºDocker Hostï¼ˆDockerè£…åœ¨å“ªå°æœºå™¨ä¸Šï¼Œè¿™å°æœºå™¨å°±æ˜¯Docker Hostï¼‰ã€‚æ‰€ä»¥å®¹å™¨åªèƒ½ä½¿ç”¨Hostçš„kernelï¼Œå¹¶ä¸”ä¸èƒ½ä¿®æ”¹</p><p>baseé•œåƒæä¾›çš„æ˜¯æœ€å°å®‰è£…çš„Linuxå‘è¡Œç‰ˆã€‚</p></blockquote><h2 id="é•œåƒåˆ†å±‚"><a href="#é•œåƒåˆ†å±‚" class="headerlink" title="é•œåƒåˆ†å±‚"></a>é•œåƒåˆ†å±‚</h2><p>æˆ‘ä»¬æ‹¿ä¸€ä¸ªDockerfileæ¥ä¸¾ä¾‹ï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> debian</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install emacs</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> apt-get install apach2</span></span><br></pre></td></tr></table></figure><p>ä¸Šè¿°æ„å»ºè¿‡ç¨‹å¦‚å›¾æ‰€ç¤ºï¼š</p><p><img src="image-20220428234124163.png" alt="æ„å»º"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œæ–°é•œåƒæ˜¯ä»baseé•œåƒä¸€å±‚ä¸€å±‚å åŠ ç”Ÿæˆçš„ã€‚æ¯å®‰è£…ä¸€ä¸ªè½¯ä»¶ï¼Œå°±åœ¨ç°æœ‰é•œåƒçš„åŸºç¡€ä¸Šå¢åŠ ä¸€å±‚ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆDockeré•œåƒè¦é‡‡ç”¨è¿™ç§åˆ†å±‚ç»“æ„å‘¢ï¼Ÿ</p><ul><li>æœ€å¤§çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯ï¼šå…±äº«èµ„æºã€‚æ¯”å¦‚ï¼šæœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„baseé•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆDocker Hoståªéœ€åœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä»½baseé•œåƒï¼›åŒæ—¶å†…å­˜ä¸­ä¹Ÿåªéœ€åŠ è½½ä¸€ä»½baseé•œåƒï¼Œå°±å¯ä»¥ä¸ºæ‰€æœ‰å®¹å™¨æœåŠ¡äº†ï¼Œè€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº«ï¼Œæˆ‘ä»¬å°†åœ¨åé¢æ›´æ·±å…¥åœ°è®¨è®ºè¿™ä¸ªç‰¹æ€§ã€‚</li></ul><p>å¦‚æœå¤šä¸ªå®¹å™¨å…±äº«ä¸€ä»½åŸºç¡€é•œåƒï¼Œå½“æŸä¸ªå®¹å™¨ä¿®æ”¹äº†åŸºç¡€é•œåƒçš„å†…å®¹ï¼Œæ¯”å¦‚/etcä¸‹çš„æ–‡ä»¶ï¼Œè¿™æ—¶å…¶ä»–å®¹å™¨çš„ /etcæ˜¯å¦ä¹Ÿä¼šè¢«ä¿®æ”¹ï¼Ÿ</p><ul><li>ç­”æ¡ˆæ˜¯ä¸ä¼šï¼ä¿®æ”¹ä¼šè¢«é™åˆ¶åœ¨å•ä¸ªå®¹å™¨å†…ã€‚è¿™å°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦å­¦ä¹ çš„å®¹å™¨Copy-on-Writeç‰¹æ€§ã€‚</li></ul></blockquote><h2 id="Copy-on-Writeç‰¹æ€§"><a href="#Copy-on-Writeç‰¹æ€§" class="headerlink" title="Copy-on-Writeç‰¹æ€§"></a>Copy-on-Writeç‰¹æ€§</h2><p>å¯¹äºDockerfileçš„æ¯ä¸€è¡Œæ„å»ºè¯­å¥éƒ½ä¼šå¢åŠ ä¸€å±‚é•œåƒï¼Œè€Œå½“å®¹å™¨å¯åŠ¨æ—¶ï¼Œä¸€ä¸ªæ–°çš„<strong>å¯å†™å±‚</strong>è¢«åŠ è½½åˆ°é•œåƒçš„é¡¶éƒ¨ã€‚è¿™æ˜¯ç‰¹æ®Šçš„ä¸€å±‚ï¼Œè¿™ä¸€å±‚é€šå¸¸è¢«ç§°ä½œâ€œå®¹å™¨å±‚â€ï¼Œâ€œå®¹å™¨å±‚â€ä¹‹ä¸‹çš„éƒ½å«â€œé•œåƒå±‚â€ã€‚æ‰€æœ‰å¯¹å®¹å™¨çš„æ”¹åŠ¨ï¼Œæ— è®ºæ·»åŠ ã€åˆ é™¤ï¼Œè¿˜æ˜¯ä¿®æ”¹æ–‡ä»¶éƒ½åªä¼šå‘ç”Ÿåœ¨å®¹å™¨å±‚ä¸­ã€‚<strong>åªæœ‰å®¹å™¨å±‚æ˜¯å¯å†™çš„ï¼Œå®¹å™¨å±‚ä¸‹é¢çš„æ‰€æœ‰é•œåƒå±‚éƒ½æ˜¯åªè¯»çš„ã€‚</strong></p><ol><li>æ·»åŠ æ–‡ä»¶ã€‚åœ¨å®¹å™¨ä¸­åˆ›å»ºæ–‡ä»¶æ—¶ï¼Œæ–°æ–‡ä»¶è¢«æ·»åŠ åˆ°å®¹å™¨å±‚ä¸­ã€‚</li><li>è¯»å–æ–‡ä»¶ã€‚åœ¨å®¹å™¨ä¸­è¯»å–æŸä¸ªæ–‡ä»¶æ—¶ï¼ŒDockerä¼šä»ä¸Šå¾€ä¸‹ä¾æ¬¡åœ¨å„é•œåƒå±‚ä¸­æŸ¥æ‰¾æ­¤æ–‡ä»¶ã€‚ä¸€æ—¦æ‰¾åˆ°ï¼Œæ‰“å¼€å¹¶è¯»å…¥å†…å­˜ã€‚</li><li>ä¿®æ”¹æ–‡ä»¶ã€‚åœ¨å®¹å™¨ä¸­ä¿®æ”¹å·²å­˜åœ¨çš„æ–‡ä»¶æ—¶ï¼ŒDockerä¼šä»ä¸Šå¾€ä¸‹ä¾æ¬¡åœ¨å„é•œåƒå±‚ä¸­æŸ¥æ‰¾æ­¤æ–‡ä»¶ã€‚ä¸€æ—¦æ‰¾åˆ°ï¼Œ<strong>ç«‹å³å°†å…¶å¤åˆ¶åˆ°å®¹å™¨å±‚</strong>ï¼Œç„¶åä¿®æ”¹ä¹‹ã€‚</li><li>åˆ é™¤æ–‡ä»¶ã€‚åœ¨å®¹å™¨ä¸­åˆ é™¤æ–‡ä»¶æ—¶ï¼ŒDockerä¹Ÿæ˜¯ä»ä¸Šå¾€ä¸‹ä¾æ¬¡åœ¨é•œåƒå±‚ä¸­æŸ¥æ‰¾æ­¤æ–‡ä»¶ã€‚æ‰¾åˆ°åï¼Œä¼šåœ¨å®¹å™¨å±‚ä¸­è®°å½•ä¸‹æ­¤åˆ é™¤æ“ä½œã€‚</li></ol><p>åªæœ‰å½“éœ€è¦ä¿®æ”¹æ—¶æ‰å¤åˆ¶ä¸€ä»½æ•°æ®ï¼Œè¿™ç§ç‰¹æ€§è¢«ç§°ä½œCopy-on-Writeã€‚å¯è§ï¼Œå®¹å™¨å±‚ä¿å­˜çš„æ˜¯é•œåƒå˜åŒ–çš„éƒ¨åˆ†ï¼Œä¸ä¼šå¯¹é•œåƒæœ¬èº«è¿›è¡Œä»»ä½•ä¿®æ”¹ã€‚</p><p>è¿™æ ·å°±è§£é‡Šäº†æˆ‘ä»¬å‰é¢æå‡ºçš„é—®é¢˜ï¼šå®¹å™¨å±‚è®°å½•å¯¹é•œåƒçš„ä¿®æ”¹ï¼Œæ‰€æœ‰é•œåƒå±‚éƒ½æ˜¯åªè¯»çš„ï¼Œä¸ä¼šè¢«å®¹å™¨ä¿®æ”¹ï¼Œæ‰€ä»¥é•œåƒå¯ä»¥è¢«å¤šä¸ªå®¹å™¨å…±äº«ã€‚</p><h2 id="æ„å»ºé•œåƒ"><a href="#æ„å»ºé•œåƒ" class="headerlink" title="æ„å»ºé•œåƒ"></a>æ„å»ºé•œåƒ</h2><p>Dockeræä¾›äº†ä¸¤ç§æ„å»ºé•œåƒçš„æ–¹æ³•ï¼š <code>docker commit</code>å‘½ä»¤ä¸Dockerfileæ„å»ºæ–‡ä»¶ã€‚</p><h3 id="docker-commitï¼ˆä¸æ¨èï¼‰"><a href="#docker-commitï¼ˆä¸æ¨èï¼‰" class="headerlink" title="docker commitï¼ˆä¸æ¨èï¼‰"></a>docker commitï¼ˆä¸æ¨èï¼‰</h3><p>docker commitå‘½ä»¤æ˜¯åˆ›å»ºæ–°é•œåƒæœ€ç›´è§‚çš„æ–¹æ³•ï¼Œå…¶è¿‡ç¨‹åŒ…å«ä¸‰ä¸ªæ­¥éª¤ï¼šè¿è¡Œå®¹å™¨ã€‚ä¿®æ”¹å®¹å™¨ã€‚å°†å®¹å™¨ä¿å­˜ä¸ºæ–°çš„é•œåƒã€‚</p><p>ä¸‹é¢çš„ä¾‹å­å°†åœ¨CentOS baseé•œåƒä¸­å®‰è£…vimå¹¶ä¿å­˜ä¸ºæ–°é•œåƒï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run -it ubuntu # å¯åŠ¨Containerå¹¶è¿›å…¥å®¹å™¨</span><br><span class="line">vim # command not found</span><br><span class="line">apt-get install -y vim # å®‰è£…vim</span><br><span class="line">vim # å‘ç°å‘½ä»¤å¯ä»¥æ‰§è¡ŒæˆåŠŸäº†</span><br></pre></td></tr></table></figure><p>åœ¨æ–°çª—å£ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å®¹å™¨ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop01 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE             COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">013be1649d31   centos:7.2.1511   &quot;/bin/bash&quot;   54 seconds ago   Up 53 seconds             frosty_kowalevski</span><br></pre></td></tr></table></figure><p>frosty_kowalevskiæ˜¯Dockerä¸ºæˆ‘ä»¬çš„å®¹å™¨éšæœºåˆ†é…çš„åå­—ã€‚</p><p>æ‰§è¡Œdocker commitå‘½ä»¤å°†å®¹å™¨ä¿å­˜ä¸ºé•œåƒï¼Œç„¶åæŸ¥çœ‹é•œåƒ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop01 ~]# docker commit frosty_kowalevski centos_test</span><br><span class="line">sha256:5889b0d6ca05e96a7d1ba31dcc732d36b0651ebf7725bf0fb91def9aa2211420</span><br><span class="line">[root@hadoop01 ~]# docker images</span><br><span class="line">REPOSITORY    TAG        IMAGE ID       CREATED         SIZE</span><br><span class="line">centos_test   latest     5889b0d6ca05   6 seconds ago   409MB</span><br><span class="line">httpd         latest     c30a46771695   10 days ago     144MB</span><br><span class="line">hello-world   latest     feb5d9fea6a5   7 months ago    13.3kB</span><br><span class="line">centos        7.2.1511   9aec5c5fe4ba   3 years ago     195MB</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šæ¼”ç¤ºäº†å¦‚ä½•ç”¨docker commitåˆ›å»ºæ–°é•œåƒã€‚ç„¶è€Œï¼ŒDockerå¹¶ä¸å»ºè®®ç”¨æˆ·é€šè¿‡è¿™ç§æ–¹å¼æ„å»ºé•œåƒã€‚åŸå› å¦‚ä¸‹ï¼š</p><ol><li>è¿™æ˜¯ä¸€ç§æ‰‹å·¥åˆ›å»ºé•œåƒçš„æ–¹å¼ï¼Œå®¹æ˜“å‡ºé”™ï¼Œæ•ˆç‡ä½ä¸”å¯é‡å¤æ€§å¼±ã€‚æ¯”å¦‚è¦åœ¨debian baseé•œåƒä¸­ä¹ŸåŠ å…¥viï¼Œè¿˜å¾—é‡å¤å‰é¢çš„æ‰€æœ‰æ­¥éª¤ã€‚</li><li>æ›´é‡è¦çš„ï¼šä½¿ç”¨è€…å¹¶ä¸çŸ¥é“é•œåƒæ˜¯å¦‚ä½•åˆ›å»ºå‡ºæ¥çš„ï¼Œé‡Œé¢æ˜¯å¦æœ‰æ¶æ„ç¨‹åºã€‚ä¹Ÿå°±æ˜¯è¯´æ— æ³•å¯¹é•œåƒè¿›è¡Œå®¡è®¡ï¼Œå­˜åœ¨å®‰å…¨éšæ‚£ã€‚</li></ol><p>æ—¢ç„¶docker commitä¸æ˜¯æ¨èçš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¸ºä»€ä¹ˆè¿˜è¦èŠ±æ—¶é—´å­¦ä¹ å‘¢ï¼ŸåŸå› æ˜¯ï¼šå³ä¾¿æ˜¯ç”¨Dockerfileï¼ˆæ¨èæ–¹æ³•ï¼‰æ„å»ºé•œåƒï¼Œåº•å±‚ä¹Ÿæ˜¯docker commitä¸€å±‚ä¸€å±‚æ„å»ºæ–°é•œåƒçš„ã€‚å­¦ä¹ docker commitèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ›´åŠ æ·±å…¥åœ°ç†è§£æ„å»ºè¿‡ç¨‹å’Œé•œåƒçš„åˆ†å±‚ç»“æ„ã€‚</p><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><p>ä½¿ç”¨Dockerfileåˆ›å»ºä¸Šä¸€èŠ‚çš„centos_testé•œåƒ</p><h4 id="ç¼–è¾‘Dockerfileæ–‡ä»¶"><a href="#ç¼–è¾‘Dockerfileæ–‡ä»¶" class="headerlink" title="ç¼–è¾‘Dockerfileæ–‡ä»¶"></a>ç¼–è¾‘Dockerfileæ–‡ä»¶</h4><p>åˆ›å»ºä¸€ä¸ªDockerfileï¼Œå†…å®¹ä¸º</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7.2</span>.<span class="number">1511</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install vim</span></span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„è¿™é‡Œ<code>-y</code>å¿…é¡»åŠ ï¼Œå¦åˆ™åœ¨æ‰§è¡Œyum installæ—¶ï¼Œå¾ˆå¯èƒ½å› ä¸ºéœ€è¦ç”¨æˆ·è¾“å…¥<code>yes</code>è€Œå¤±è´¥</p></blockquote><p>æ‰§è¡Œbuildå‘½ä»¤ï¼Œå¹¶è¿›è¡Œåˆ†æï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop01 docker]# pwd</span><br><span class="line">/root/docker</span><br><span class="line">[root@hadoop01 docker]# ls</span><br><span class="line">Dockerfile</span><br><span class="line">[root@hadoop01 docker]# docker build -t centos-vim-dockerfile-image .</span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/2 : FROM centos:7.2.1511</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">9aec5c5fe4ba</span></span><br><span class="line">Step 2/2 : RUN yum install vim</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 1caec46cd6a4</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">â€¦â€¦</span><br><span class="line">Successfully built b93576fddd48</span><br><span class="line">Successfully tagged centos-vim-dockerfile-image:latest</span><br></pre></td></tr></table></figure><ol><li>ç¬¬ä¸‰è¡Œæ˜¾ç¤ºæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼Œè¿™é‡Œåªæœ‰æˆ‘ä»¬ç¼–å†™å¥½çš„Dockerfileï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæ–‡ä»¶åå¿…é¡»å«â€œDockerfileâ€å¦åˆ™æ‰§è¡Œdocker buildæ—¶ä¼šæ˜¾ç¤ºæ–‡ä»¶ä¸å­˜åœ¨ã€‚</li><li>ç¬¬äº”è¡Œæ‰§è¡Œdocker buildå‘½ä»¤ï¼Œ-tå‚æ•°æŒ‡å®šäº†é•œåƒçš„åå­—ï¼Œæœ€åçš„ç‚¹è¡¨ç¤ºæŒ‡å®šdocker contextä¸ºå½“å‰ç›®å½•ã€‚</li><li>å…³äºdocker contextï¼šDockeré»˜è®¤ä¼šä»build contextä¸­æŸ¥æ‰¾Dockerfileæ–‡ä»¶ï¼›Dockerå°†build contextä¸­çš„æ‰€æœ‰æ–‡ä»¶å‘é€ç»™Docker daemonï¼›Dockerfileä¸­çš„ADDã€COPYç­‰å‘½ä»¤å¯ä»¥å°†build contextä¸­çš„æ–‡ä»¶æ·»åŠ åˆ°é•œåƒã€‚å› æ­¤ä¸è¦åœ¨docker contextåŠ å…¥ä¸éœ€è¦çš„æ–‡ä»¶ã€‚</li><li>ç¬¬7åˆ°14è¡Œæ˜¾ç¤ºäº†æ‰§è¡Œdocker buildçš„å…·ä½“è¿‡ç¨‹ã€‚</li></ol><p>æ„å»ºå¥½çš„é•œåƒå¯ä»¥é€šè¿‡docker historyå‘½ä»¤æŸ¥çœ‹æ„å»ºè¿‡ç¨‹ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">[root@hadoop01 docker]# docker history centos-vim-dockerfile-image:latest </span><br><span class="line">IMAGE          CREATED         CREATED BY                                      SIZE      COMMENT</span><br><span class="line">b93576fddd48   6 minutes ago   /bin/sh -c yum -y install vim                   214MB     </span><br><span class="line">9aec5c5fe4ba   3 years ago     /bin/sh -c #(nop)  CMD [&quot;/bin/bash&quot;]            0B        </span><br><span class="line">&lt;missing&gt;      3 years ago     /bin/sh -c #(nop)  LABEL license=GPLv2          0B        </span><br><span class="line">&lt;missing&gt;      3 years ago     /bin/sh -c #(nop)  LABEL vendor=CentOS          0B        </span><br><span class="line">&lt;missing&gt;      3 years ago     /bin/sh -c #(nop)  LABEL name=CentOS Base Imâ€¦   0B        </span><br><span class="line">&lt;missing&gt;      3 years ago     /bin/sh -c #(nop) ADD file:e76000d9816e4e380â€¦   195MB     </span><br><span class="line">&lt;missing&gt;      3 years ago     /bin/sh -c #(nop)  MAINTAINER The CentOS Proâ€¦   0B        </span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="é•œåƒçš„ç¼“å­˜ç‰¹æ€§"><a href="#é•œåƒçš„ç¼“å­˜ç‰¹æ€§" class="headerlink" title="é•œåƒçš„ç¼“å­˜ç‰¹æ€§"></a>é•œåƒçš„ç¼“å­˜ç‰¹æ€§</h4><p>Dockerä¼šç¼“å­˜å·²æœ‰é•œåƒçš„é•œåƒå±‚ï¼Œæ„å»ºæ–°é•œåƒæ—¶ï¼Œå¦‚æœæŸé•œåƒå±‚å·²ç»å­˜åœ¨ï¼Œå°±ç›´æ¥ä½¿ç”¨ï¼Œæ— é¡»é‡æ–°åˆ›å»ºã€‚</p><p>ä¾‹å¦‚åœ¨ä¹‹å‰çš„Dockerfileä¸­åŠ å…¥ä¸€è¡Œï¼š</p><figure class="highlight dockerfile"><table><tr><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos:<span class="number">7.2</span>.<span class="number">1511</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> yum -y install vim</span></span><br><span class="line"><span class="keyword">COPY</span><span class="language-bash"> <span class="built_in">test</span>/</span></span><br></pre></td></tr></table></figure><p>åˆ™åœ¨æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ï¼Œä¹‹å‰å·²ç»è¿è¡Œè¿‡ç›¸åŒçš„RUNæŒ‡ä»¤ï¼Œè¿™æ¬¡ç›´æ¥ä½¿ç”¨ç¼“å­˜ä¸­çš„é•œåƒå±‚</p><h4 id="Dockerfileæ„å»ºè¿‡ç¨‹"><a href="#Dockerfileæ„å»ºè¿‡ç¨‹" class="headerlink" title="Dockerfileæ„å»ºè¿‡ç¨‹"></a>Dockerfileæ„å»ºè¿‡ç¨‹</h4><p>æ€»ç»“ä¸€ä¸‹é€šè¿‡Dockerfileæ„å»ºé•œåƒçš„è¿‡ç¨‹ï¼š</p><ol><li>ä»baseé•œåƒè¿è¡Œä¸€ä¸ªå®¹å™¨ã€‚</li><li>æ‰§è¡Œä¸€æ¡æŒ‡ä»¤ï¼Œå¯¹å®¹å™¨åšä¿®æ”¹ã€‚</li><li>æ‰§è¡Œç±»ä¼¼docker commitçš„æ“ä½œï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„é•œåƒå±‚ã€‚</li><li>Dockerå†åŸºäºåˆšåˆšæäº¤çš„é•œåƒè¿è¡Œä¸€ä¸ªæ–°å®¹å™¨ã€‚</li><li>é‡å¤2ï½4æ­¥ï¼Œç›´åˆ°Dockerfileä¸­çš„æ‰€æœ‰æŒ‡ä»¤æ‰§è¡Œå®Œæ¯•ã€‚</li></ol><p>ä»è¿™ä¸ªè¿‡ç¨‹å¯ä»¥çœ‹å‡ºï¼Œå¦‚æœDockerfileç”±äºæŸç§åŸå› æ‰§è¡Œåˆ°æŸä¸ªæŒ‡ä»¤å¤±è´¥äº†ï¼Œæˆ‘ä»¬ä¹Ÿå°†èƒ½å¤Ÿå¾—åˆ°å‰ä¸€ä¸ªæŒ‡ä»¤æˆåŠŸæ‰§è¡Œæ„å»ºå‡ºçš„é•œåƒï¼Œè¿™å¯¹è°ƒè¯•Dockerfileéå¸¸æœ‰å¸®åŠ©ã€‚</p><h4 id="è°ƒè¯•Dockerfile"><a href="#è°ƒè¯•Dockerfile" class="headerlink" title="è°ƒè¯•Dockerfile"></a>è°ƒè¯•Dockerfile</h4><p>ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼šå¯åŠ¨å¤±è´¥çš„å‰ä¸€å±‚æ„å»ºæˆåŠŸé•œåƒçš„å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨ï¼Œæ‰§è¡Œå¤±è´¥çš„è¯­å¥ï¼Œä»è€ŒæŸ¥çœ‹é—®é¢˜æ‰€åœ¨ã€‚</p><h2 id="åˆ†å‘é•œåƒ"><a href="#åˆ†å‘é•œåƒ" class="headerlink" title="åˆ†å‘é•œåƒ"></a>åˆ†å‘é•œåƒ</h2><h3 id="docker-tag"><a href="#docker-tag" class="headerlink" title="docker tag"></a>docker tag</h3><p>è¿™é‡Œæ³¨æ„tagä¸ºlastestï¼Œæ³¨æ„docker tagçš„åˆå¹¶æ–¹å¼ã€‚</p><h3 id="ä½¿ç”¨å…¬å…±çš„Registry"><a href="#ä½¿ç”¨å…¬å…±çš„Registry" class="headerlink" title="ä½¿ç”¨å…¬å…±çš„Registry"></a>ä½¿ç”¨å…¬å…±çš„Registry</h3><p>çœ‹å®˜æ–¹æ–‡æ¡£å»ã€‚</p><h1 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h1><h2 id="è¿è¡Œå®¹å™¨çš„ä¸‰ç§æ–¹æ³•"><a href="#è¿è¡Œå®¹å™¨çš„ä¸‰ç§æ–¹æ³•" class="headerlink" title="è¿è¡Œå®¹å™¨çš„ä¸‰ç§æ–¹æ³•"></a>è¿è¡Œå®¹å™¨çš„ä¸‰ç§æ–¹æ³•</h2><ul><li>CMDæŒ‡ä»¤</li><li>ENTRYPOINTæŒ‡ä»¤</li><li>åœ¨docker runå‘½ä»¤è¡Œä¸­æŒ‡å®šï¼Œä¾‹å¦‚ï¼Œ<code>docker run ubuntu pwd</code></li></ul><h2 id="é•¿æœŸè¿è¡Œå®¹å™¨"><a href="#é•¿æœŸè¿è¡Œå®¹å™¨" class="headerlink" title="é•¿æœŸè¿è¡Œå®¹å™¨"></a>é•¿æœŸè¿è¡Œå®¹å™¨</h2><p>å®¹å™¨åœ¨æ‰§è¡Œå®Œå¯åŠ¨æ—¶çš„æŒ‡ä»¤åå°±ä¼šé€€å‡ºã€‚æƒ³è¦è®©å®¹å™¨ä¿æŒè¿è¡ŒçŠ¶æ€ï¼Œé‚£è¿è¡Œçš„å‘½ä»¤ä¸é€€å‡ºå°±å¥½äº†ã€‚ã€‚</p><h2 id="è¿›å…¥å®¹å™¨"><a href="#è¿›å…¥å®¹å™¨" class="headerlink" title="è¿›å…¥å®¹å™¨"></a>è¿›å…¥å®¹å™¨</h2><p>åœ¨å®¹å™¨runningæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥å®¹å™¨workï¼Œæœ‰ä¸¤ç§æ–¹æ³•ï¼Œ</p><ul><li>docker attach</li><li>docker exec</li></ul><p>è¯¦ç»†è§å¸¸ç”¨å‘½ä»¤æ€»ç»“ç« èŠ‚</p><p>docker attachå’Œdocker execåŒºåˆ«ï¼š</p><ol><li>attachç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ã€‚</li><li>execåˆ™æ˜¯åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯ä»¥å¯åŠ¨æ–°çš„è¿›ç¨‹ã€‚</li><li>å¦‚æœæƒ³ç›´æ¥åœ¨ç»ˆç«¯ä¸­æŸ¥çœ‹å¯åŠ¨å‘½ä»¤çš„è¾“å‡ºï¼Œç”¨attachï¼›å…¶ä»–æƒ…å†µä½¿ç”¨execã€‚</li></ol><h2 id="docker-start-stop-restart"><a href="#docker-start-stop-restart" class="headerlink" title="docker start/stop/restart"></a>docker start/stop/restart</h2><p>å®¹å™¨åœ¨docker hostä¸­å®é™…ä¸Šæ˜¯ä¸€ä¸ªè¿›ç¨‹ï¼Œé€šè¿‡<code>docker start/stop/restart &lt;container id&gt;</code>å‘½ä»¤å¯åŠ¨ï¼Œåœæ­¢å’Œé‡å¯å®¹å™¨ã€‚</p><h2 id="docker-pause-unpause"><a href="#docker-pause-unpause" class="headerlink" title="docker pause/unpause"></a>docker pause/unpause</h2><p>é€šè¿‡<code>docker pause/unpause &lt;container id&gt;</code>å‘½ä»¤æš‚åœå’Œæ¢å¤å®¹å™¨ã€‚</p><h2 id="docker-rm"><a href="#docker-rm" class="headerlink" title="docker rm"></a>docker rm</h2><p>é€šè¿‡<code>docker rm &lt;container id&gt;</code>å‘½ä»¤åˆ é™¤å®¹å™¨ã€‚</p><h2 id="dockerç”Ÿå‘½å‘¨æœŸ"><a href="#dockerç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="dockerç”Ÿå‘½å‘¨æœŸ"></a>dockerç”Ÿå‘½å‘¨æœŸ</h2><p><img src="image-20220502225040947.png" alt="dockerç”Ÿå‘½å‘¨æœŸ"></p><h2 id="èµ„æºé™åˆ¶"><a href="#èµ„æºé™åˆ¶" class="headerlink" title="èµ„æºé™åˆ¶"></a>èµ„æºé™åˆ¶</h2><p>ä¸€ä¸ªdocker host ä¼šè¿è¡Œè‹¥å¹²å®¹å™¨ï¼Œå¯¹äºå®¹å™¨ï¼ŒDockerä¹Ÿæä¾›äº†ç±»ä¼¼çš„æœºåˆ¶é¿å…æŸä¸ªå®¹å™¨å› å ç”¨å¤ªå¤šèµ„æºè€Œå½±å“å…¶ä»–å®¹å™¨ä¹ƒè‡³æ•´ä¸ªhostçš„æ€§èƒ½ã€‚</p><p>docker æä¾›å‘½ä»¤ä»¥é™åˆ¶å®¹å™¨çš„å†…å­˜ï¼ŒCPUï¼ŒBlockIOï¼ˆç£ç›˜è¯»å†™ï¼‰ç­‰ã€‚</p><p>å…·ä½“è¯·æŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚</p><h2 id="å®ç°å®¹å™¨çš„åº•å±‚æŠ€æœ¯"><a href="#å®ç°å®¹å™¨çš„åº•å±‚æŠ€æœ¯" class="headerlink" title="å®ç°å®¹å™¨çš„åº•å±‚æŠ€æœ¯"></a>å®ç°å®¹å™¨çš„åº•å±‚æŠ€æœ¯</h2><p>cgroupå’Œnamespaceæ˜¯æœ€é‡è¦çš„ä¸¤ç§æŠ€æœ¯ã€‚cgroupå®ç°èµ„æºé™é¢ï¼Œnamespaceå®ç°èµ„æºéš”ç¦»ã€‚</p><p>Linuxä½¿ç”¨äº†6ç§namespaceï¼Œåˆ†åˆ«å¯¹åº”6ç§èµ„æºï¼šMountã€UTSã€IPCã€PIDã€Networkå’ŒUserã€‚</p><p>å…·ä½“ç”¨åˆ°å†è¯´ã€‚</p><h1 id="Docker-ç½‘ç»œ"><a href="#Docker-ç½‘ç»œ" class="headerlink" title="Docker ç½‘ç»œ"></a>Docker ç½‘ç»œ</h1><p>4ç§ç½‘ç»œï¼š</p><ul><li>noneï¼šå°é—­ç½‘ç»œï¼Œå¯¹å®‰å…¨æ€§è¦æ±‚é«˜å¹¶ä¸”ä¸éœ€è¦è”ç½‘çš„åº”ç”¨å¯ä»¥ä½¿ç”¨noneç½‘ç»œã€‚</li><li>hostï¼š è¿æ¥åˆ°hostç½‘ç»œçš„å®¹å™¨å…±äº«Docker hostçš„ç½‘ç»œæ ˆï¼Œå®¹å™¨çš„ç½‘ç»œé…ç½®ä¸hostå®Œå…¨ä¸€æ ·ã€‚å¯ä»¥é€šè¿‡ â€”network=hostæŒ‡å®šä½¿ç”¨hostç½‘ç»œã€‚</li><li>bridgeï¼šDockerå®‰è£…æ—¶ä¼šåˆ›å»ºä¸€ä¸ªå‘½åä¸ºdocker0çš„Linuxbridgeã€‚å¦‚æœä¸æŒ‡å®šâ€”networkï¼Œåˆ›å»ºçš„å®¹å™¨é»˜è®¤éƒ½ä¼šæŒ‚åˆ°docker0ä¸Šã€‚</li><li>user-definedï¼šé™¤äº†noneã€hostã€bridgeè¿™ä¸‰ä¸ªè‡ªåŠ¨åˆ›å»ºçš„ç½‘ç»œï¼Œç”¨æˆ·ä¹Ÿå¯ä»¥æ ¹æ®ä¸šåŠ¡éœ€è¦åˆ›å»ºuser-definedç½‘ç»œã€‚</li></ul><h2 id="å®¹å™¨é—´é€šä¿¡"><a href="#å®¹å™¨é—´é€šä¿¡" class="headerlink" title="å®¹å™¨é—´é€šä¿¡"></a>å®¹å™¨é—´é€šä¿¡</h2><p>å¾…è¡¥å……</p><h2 id="å°†å®¹å™¨ä¸å¤–éƒ¨ä¸–ç•Œè¿æ¥"><a href="#å°†å®¹å™¨ä¸å¤–éƒ¨ä¸–ç•Œè¿æ¥" class="headerlink" title="å°†å®¹å™¨ä¸å¤–éƒ¨ä¸–ç•Œè¿æ¥"></a>å°†å®¹å™¨ä¸å¤–éƒ¨ä¸–ç•Œè¿æ¥</h2><p>å¾…è¡¥å……</p><h1 id="Docker-å­˜å‚¨"><a href="#Docker-å­˜å‚¨" class="headerlink" title="Docker å­˜å‚¨"></a>Docker å­˜å‚¨</h1><p>å¾…è¡¥å……</p><h1 id="å¸¸ç”¨å‘½ä»¤æ€»ç»“"><a href="#å¸¸ç”¨å‘½ä»¤æ€»ç»“" class="headerlink" title="å¸¸ç”¨å‘½ä»¤æ€»ç»“"></a>å¸¸ç”¨å‘½ä»¤æ€»ç»“</h1><h2 id="Dockeré•œåƒ-1"><a href="#Dockeré•œåƒ-1" class="headerlink" title="Dockeré•œåƒ"></a>Dockeré•œåƒ</h2><h3 id="docker-images"><a href="#docker-images" class="headerlink" title="docker  images"></a>docker  images</h3><p>åˆ—å‡ºé•œåƒ</p><p><code>docker images [OPTIONS] [REPOSITORY[:TAG]]</code></p><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><strong>-a :</strong>åˆ—å‡ºæœ¬åœ°æ‰€æœ‰çš„é•œåƒï¼ˆå«ä¸­é—´æ˜ åƒå±‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿‡æ»¤æ‰ä¸­é—´æ˜ åƒå±‚ï¼‰ï¼›</li></ul><h3 id="docker-rmi"><a href="#docker-rmi" class="headerlink" title="docker rmi"></a>docker rmi</h3><p><code>docker rmi [OPTIONS] IMAGE [IMAGE...]</code></p><p>åˆ é™¤æœ¬åœ°é•œåƒ</p><h3 id="docker-build"><a href="#docker-build" class="headerlink" title="docker build"></a>docker build</h3><p>ä½¿ç”¨ Dockerfile åˆ›å»ºé•œåƒã€‚</p><p><code>docker build [OPTIONS] PATH | URL | -</code></p><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><strong>â€”build-arg=[] :</strong>è®¾ç½®é•œåƒåˆ›å»ºæ—¶çš„å˜é‡ï¼›</li><li><strong>â€”cpu-shares :</strong>è®¾ç½® cpu ä½¿ç”¨æƒé‡ï¼›</li><li><strong>-f :</strong>æŒ‡å®šè¦ä½¿ç”¨çš„Dockerfileè·¯å¾„ï¼›</li><li><strong>â€”force-rm :</strong>è®¾ç½®é•œåƒè¿‡ç¨‹ä¸­åˆ é™¤ä¸­é—´å®¹å™¨ï¼›</li><li><strong>â€”isolation :</strong>ä½¿ç”¨å®¹å™¨éš”ç¦»æŠ€æœ¯ï¼›</li><li><strong>-m :</strong>è®¾ç½®å†…å­˜æœ€å¤§å€¼ï¼›</li><li><strong>â€”memory-swap :</strong>è®¾ç½®Swapçš„æœ€å¤§å€¼ä¸ºå†…å­˜+swapï¼Œâ€-1â€è¡¨ç¤ºä¸é™swapï¼›</li><li><strong>â€”no-cache :</strong>åˆ›å»ºé•œåƒçš„è¿‡ç¨‹ä¸ä½¿ç”¨ç¼“å­˜ï¼›</li><li><strong>â€”pull :</strong>å°è¯•å»æ›´æ–°é•œåƒçš„æ–°ç‰ˆæœ¬ï¼›</li><li><strong>â€”quiet, -q :</strong>å®‰é™æ¨¡å¼ï¼ŒæˆåŠŸååªè¾“å‡ºé•œåƒ IDï¼›</li><li><strong>â€”rm :</strong>è®¾ç½®é•œåƒæˆåŠŸååˆ é™¤ä¸­é—´å®¹å™¨ï¼›</li><li><strong>â€”tag, -t:</strong> é•œåƒçš„åå­—åŠæ ‡ç­¾ï¼Œé€šå¸¸ name:tag æˆ–è€… name æ ¼å¼ï¼›å¯ä»¥åœ¨ä¸€æ¬¡æ„å»ºä¸­ä¸ºä¸€ä¸ªé•œåƒè®¾ç½®å¤šä¸ªæ ‡ç­¾ã€‚</li><li><strong>â€”network:</strong> é»˜è®¤ defaultã€‚åœ¨æ„å»ºæœŸé—´è®¾ç½®RUNæŒ‡ä»¤çš„ç½‘ç»œæ¨¡å¼</li></ul><h3 id="docker-history"><a href="#docker-history" class="headerlink" title="docker history"></a>docker history</h3><p>æŸ¥çœ‹æŒ‡å®šé•œåƒçš„åˆ›å»ºå†å²ã€‚</p><p><code>docker history [OPTIONS] IMAGE</code></p><hr><h3 id="docker-login"><a href="#docker-login" class="headerlink" title="docker login"></a>docker login</h3><p> ç™»é™†åˆ°ä¸€ä¸ªDockeré•œåƒä»“åº“ï¼Œå¦‚æœæœªæŒ‡å®šé•œåƒä»“åº“åœ°å€ï¼Œé»˜è®¤ä¸ºå®˜æ–¹ä»“åº“ Docker Hub</p><h3 id="docker-pull"><a href="#docker-pull" class="headerlink" title="docker pull"></a>docker pull</h3><p>æ‹‰å–é•œåƒ</p><h3 id="docker-push"><a href="#docker-push" class="headerlink" title="docker push"></a>docker push</h3><p>æ¨é€é•œåƒ</p><h3 id="docker-search"><a href="#docker-search" class="headerlink" title="docker search"></a>docker search</h3><p>æŸ¥æ‰¾é•œåƒ</p><h2 id="Docker-å®¹å™¨-1"><a href="#Docker-å®¹å™¨-1" class="headerlink" title="Docker å®¹å™¨"></a>Docker å®¹å™¨</h2><h3 id="docker-run"><a href="#docker-run" class="headerlink" title="docker run"></a>docker run</h3><p><strong>docker run ï¼š</strong>åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨å¹¶è¿è¡Œä¸€ä¸ªå‘½ä»¤</p><p><code>docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</code></p><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><strong>-d:</strong> åå°è¿è¡Œå®¹å™¨ï¼Œå¹¶è¿”å›å®¹å™¨IDï¼›</li><li><strong>-i:</strong> ä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</li><li><strong>-p:</strong> æŒ‡å®šç«¯å£æ˜ å°„ï¼Œæ ¼å¼ä¸ºï¼š<strong>ä¸»æœº(å®¿ä¸»)ç«¯å£:å®¹å™¨ç«¯å£</strong></li><li><strong>-t:</strong> ä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›</li><li><strong>â€”name=â€nginx-lbâ€:</strong> ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›</li><li><strong>â€”dns 8.8.8.8:</strong> æŒ‡å®šå®¹å™¨ä½¿ç”¨çš„DNSæœåŠ¡å™¨ï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</li><li><strong>â€”dns-search example.com:</strong> æŒ‡å®šå®¹å™¨DNSæœç´¢åŸŸåï¼Œé»˜è®¤å’Œå®¿ä¸»ä¸€è‡´ï¼›</li><li><strong>-h â€œmarsâ€:</strong> æŒ‡å®šå®¹å™¨çš„hostnameï¼›</li><li><strong>-e username=â€ritchieâ€:</strong> è®¾ç½®ç¯å¢ƒå˜é‡ï¼›</li><li><strong>-m :</strong>è®¾ç½®å®¹å™¨ä½¿ç”¨å†…å­˜æœ€å¤§å€¼ï¼›</li><li><strong>â€”net=â€bridgeâ€:</strong> æŒ‡å®šå®¹å™¨çš„ç½‘ç»œè¿æ¥ç±»å‹ï¼Œæ”¯æŒ bridge/host/none/container: å››ç§ç±»å‹ï¼›</li><li><strong>â€”expose=[]:</strong> å¼€æ”¾ä¸€ä¸ªç«¯å£æˆ–ä¸€ç»„ç«¯å£ï¼›</li></ul><h3 id="docker-start-stop-restart-1"><a href="#docker-start-stop-restart-1" class="headerlink" title="docker start/stop/restart"></a>docker start/stop/restart</h3><p><strong>docker start</strong> :å¯åŠ¨ä¸€ä¸ªæˆ–å¤šä¸ªå·²ç»è¢«åœæ­¢çš„å®¹å™¨</p><p><strong>docker stop</strong> :åœæ­¢ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨</p><p><strong>docker restart</strong> :é‡å¯å®¹å™¨</p><h3 id="docker-rm-1"><a href="#docker-rm-1" class="headerlink" title="docker rm"></a>docker rm</h3><p><strong>docker rm ï¼š</strong>åˆ é™¤ä¸€ä¸ªæˆ–å¤šä¸ªå®¹å™¨ã€‚</p><h3 id="docker-pause-unpause-1"><a href="#docker-pause-unpause-1" class="headerlink" title="docker pause/unpause"></a>docker pause/unpause</h3><p><strong>docker pause</strong> :æš‚åœå®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚</p><p><strong>docker unpause</strong> :æ¢å¤å®¹å™¨ä¸­æ‰€æœ‰çš„è¿›ç¨‹ã€‚</p><h3 id="docker-create"><a href="#docker-create" class="headerlink" title="docker create"></a>docker create</h3><p><strong>docker create ï¼š</strong>åˆ›å»ºä¸€ä¸ªæ–°çš„å®¹å™¨ä½†ä¸å¯åŠ¨å®ƒï¼›ç”¨æ³•åŒdocker run</p><h3 id="docker-attach"><a href="#docker-attach" class="headerlink" title="docker attach"></a>docker attach</h3><p><strong>docker attach :</strong>è¿æ¥åˆ°æ­£åœ¨è¿è¡Œä¸­çš„å®¹å™¨ã€‚</p><p>è¦attachä¸Šå»çš„å®¹å™¨å¿…é¡»æ­£åœ¨è¿è¡Œï¼Œå¯ä»¥åŒæ—¶è¿æ¥ä¸ŠåŒä¸€ä¸ªcontaineræ¥å…±äº«å±å¹•ï¼ˆä¸screenå‘½ä»¤çš„attachç±»ä¼¼ï¼‰ã€‚</p><h3 id="docker-exec"><a href="#docker-exec" class="headerlink" title="docker exec"></a>docker exec</h3><p><strong>docker exec ï¼š</strong>åœ¨è¿è¡Œçš„å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤</p><p><code>docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</code></p><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><strong>-d :</strong>åˆ†ç¦»æ¨¡å¼: åœ¨åå°è¿è¡Œ</li><li><strong>-t :</strong>åˆ†é…ä¸€ä¸ªä¼ªç»ˆç«¯</li></ul><h3 id="docker-ps"><a href="#docker-ps" class="headerlink" title="docker ps"></a>docker ps</h3><p>åˆ—å‡ºå®¹å™¨</p><p><code>docker ps [OPTIONS]</code></p><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><strong>-a :</strong>æ˜¾ç¤ºæ‰€æœ‰çš„å®¹å™¨ï¼ŒåŒ…æ‹¬æœªè¿è¡Œçš„ã€‚</li><li><strong>-n :</strong>åˆ—å‡ºæœ€è¿‘åˆ›å»ºçš„nä¸ªå®¹å™¨ã€‚</li><li><strong>-q :</strong>é™é»˜æ¨¡å¼ï¼Œåªæ˜¾ç¤ºå®¹å™¨ç¼–å·ã€‚</li></ul><h3 id="docker-inspect"><a href="#docker-inspect" class="headerlink" title="docker inspect"></a>docker inspect</h3><p><strong>docker inspect :</strong> è·å–å®¹å™¨/é•œåƒçš„å…ƒæ•°æ®ã€‚</p><h3 id="docker-top"><a href="#docker-top" class="headerlink" title="docker top"></a>docker top</h3><p>æŸ¥çœ‹å®¹å™¨ä¸­è¿è¡Œçš„è¿›ç¨‹ä¿¡æ¯ï¼Œæ”¯æŒ ps å‘½ä»¤å‚æ•°ã€‚</p><p>å®¹å™¨è¿è¡Œæ—¶ä¸ä¸€å®šæœ‰/bin/bashç»ˆç«¯æ¥äº¤äº’æ‰§è¡Œtopå‘½ä»¤ï¼Œè€Œä¸”å®¹å™¨è¿˜ä¸ä¸€å®šæœ‰topå‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨docker topæ¥å®ç°æŸ¥çœ‹containerä¸­æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚</p><h3 id="docker-logs"><a href="#docker-logs" class="headerlink" title="docker logs"></a>docker logs</h3><p>è·å–å®¹å™¨çš„æ—¥å¿—</p><h3 id="docker-commit"><a href="#docker-commit" class="headerlink" title="docker commit"></a>docker commit</h3><p>ä»å®¹å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„é•œåƒã€‚</p><p><code>docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</code></p><p>OPTIONSè¯´æ˜ï¼š</p><ul><li><strong>-a :</strong>æäº¤çš„é•œåƒä½œè€…ï¼›</li><li><strong>-c :</strong>ä½¿ç”¨DockerfileæŒ‡ä»¤æ¥åˆ›å»ºé•œåƒï¼›</li><li><strong>-m :</strong>æäº¤æ—¶çš„è¯´æ˜æ–‡å­—ï¼›</li><li><strong>-p :</strong>åœ¨commitæ—¶ï¼Œå°†å®¹å™¨æš‚åœã€‚</li></ul><h3 id="docker-cp"><a href="#docker-cp" class="headerlink" title="docker cp"></a>docker cp</h3><p>ç”¨äºå®¹å™¨ä¸ä¸»æœºä¹‹é—´çš„æ•°æ®æ‹·è´ã€‚</p><p>ä¾‹å¦‚ï¼šå°†ä¸»æœº/www/runoobç›®å½•æ‹·è´åˆ°å®¹å™¨96f7f14e99abçš„/wwwç›®å½•ä¸‹ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker cp /www/runoob 96f7f14e99ab:/www/</span><br></pre></td></tr></table></figure><h2 id="Dockerfile-1"><a href="#Dockerfile-1" class="headerlink" title="Dockerfile"></a>Dockerfile</h2><ul><li>FROMæŒ‡å®šbaseé•œåƒã€‚</li><li>MAINTAINERè®¾ç½®é•œåƒçš„ä½œè€…ï¼Œå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ã€‚</li><li>COPYå°†æ–‡ä»¶ä»build contextå¤åˆ¶åˆ°é•œåƒã€‚COPYæ”¯æŒä¸¤ç§å½¢å¼ï¼š COPY src destä¸COPY [â€œsrcâ€, â€œdestâ€]ã€‚æ³¨æ„ï¼šsrcåªèƒ½æŒ‡å®šbuild contextä¸­çš„æ–‡ä»¶æˆ–ç›®å½•ã€‚</li><li>ADDä¸COPYç±»ä¼¼ï¼Œä»build contextå¤åˆ¶æ–‡ä»¶åˆ°é•œåƒã€‚ä¸åŒçš„æ˜¯ï¼Œå¦‚æœsrcæ˜¯å½’æ¡£æ–‡ä»¶ï¼ˆtarã€zipã€tgzã€xzç­‰ï¼‰ï¼Œæ–‡ä»¶ä¼šè¢«è‡ªåŠ¨è§£å‹åˆ°destã€‚</li><li>ENVè®¾ç½®ç¯å¢ƒå˜é‡ï¼Œç¯å¢ƒå˜é‡å¯è¢«åé¢çš„æŒ‡ä»¤ä½¿ç”¨ã€‚</li><li>EXPOSEæŒ‡å®šå®¹å™¨ä¸­çš„è¿›ç¨‹ä¼šç›‘å¬æŸä¸ªç«¯å£ï¼ŒDockerå¯ä»¥å°†è¯¥ç«¯å£æš´éœ²å‡ºæ¥ã€‚æˆ‘ä»¬ä¼šåœ¨å®¹å™¨ç½‘ç»œéƒ¨åˆ†è¯¦ç»†è®¨è®ºã€‚</li><li>VOLUMEå°†æ–‡ä»¶æˆ–ç›®å½•å£°æ˜ä¸ºvolumeã€‚æˆ‘ä»¬ä¼šåœ¨å®¹å™¨å­˜å‚¨éƒ¨åˆ†è¯¦ç»†è®¨è®ºã€‚</li><li>WORKDIRä¸ºåé¢çš„RUNã€CMDã€ENTRYPOINTã€ADDæˆ–COPYæŒ‡ä»¤è®¾ç½®é•œåƒä¸­çš„å½“å‰å·¥ä½œç›®å½•ã€‚</li><li>RUNåœ¨å®¹å™¨ä¸­è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚</li><li>CMDå®¹å™¨å¯åŠ¨æ—¶è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤ã€‚Dockerfileä¸­å¯ä»¥æœ‰å¤šä¸ªCMDæŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚CMDå¯ä»¥è¢«dockerrunä¹‹åçš„å‚æ•°æ›¿æ¢ã€‚</li><li>ENTRYPOINTè®¾ç½®å®¹å™¨å¯åŠ¨æ—¶è¿è¡Œçš„å‘½ä»¤ã€‚Dockerfileä¸­å¯ä»¥æœ‰å¤šä¸ªENTRYPOINTæŒ‡ä»¤ï¼Œä½†åªæœ‰æœ€åä¸€ä¸ªç”Ÿæ•ˆã€‚CMDæˆ–docker runä¹‹åçš„å‚æ•°ä¼šè¢«å½“ä½œå‚æ•°ä¼ é€’ç»™ENTRYPOINTã€‚</li></ul><h3 id="RUN-vs-CMD-vs-ENTRYPOINT"><a href="#RUN-vs-CMD-vs-ENTRYPOINT" class="headerlink" title="RUN vs CMD vs ENTRYPOINT"></a>RUN vs CMD vs ENTRYPOINT</h3><p>ç•¥</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li>ã€Šæ¯å¤©äº”åˆ†é’Ÿç©è½¬Dockerå®¹å™¨æŠ€æœ¯ã€‹</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Docker-èƒ½åšä»€ä¹ˆ&quot;&gt;&lt;a href=&quot;#Docker-èƒ½åšä»€ä¹ˆ&quot; class=&quot;headerlink&quot; title=&quot;Docker èƒ½åšä»€ä¹ˆ&quot;&gt;&lt;/a&gt;Docker èƒ½åšä»€ä¹ˆ&lt;/h1&gt;&lt;p&gt;ä»¥å‰å­¦ä¹ çš„æ—¶å€™ï¼Œæƒ³è¦æ­å»ºä¸€ä¸ªHadoopé›†ç¾¤ï¼Œé‚£å°±è¦å®‰è£…ä¸€ä¸ªVMWa</summary>
      
    
    
    
    <category term="Docker" scheme="https://gmet233.gitee.io/categories/Docker/"/>
    
    
    <category term="Docker" scheme="https://gmet233.gitee.io/tags/Docker/"/>
    
    <category term="å®¹å™¨" scheme="https://gmet233.gitee.io/tags/%E5%AE%B9%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>HashMapçŸ¥è¯†æ•´ç†</title>
    <link href="https://gmet233.gitee.io/2022/04/21/HashMap%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/"/>
    <id>https://gmet233.gitee.io/2022/04/21/HashMap%E7%9F%A5%E8%AF%86%E6%95%B4%E7%90%86/</id>
    <published>2022-04-21T15:28:41.000Z</published>
    <updated>2022-05-18T14:33:56.256Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h1><p>Javaä¸ºæ•°æ®ç»“æ„ä¸­çš„æ˜ å°„å®šä¹‰äº†ä¸€ä¸ªæ¥å£java.util.Mapï¼Œæ­¤æ¥å£ä¸»è¦æœ‰å››ä¸ªå¸¸ç”¨çš„å®ç°ç±»ï¼Œåˆ†åˆ«æ˜¯HashMapã€Hashtableã€LinkedHashMapå’ŒTreeMapï¼Œç±»ç»§æ‰¿å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/f7fe16a2.png" alt="Mapç±»å›¾"></p><ol><li><strong>HashMap</strong>ï¼šå®ƒæ ¹æ®é”®çš„hashCodeå€¼å­˜å‚¨æ•°æ®ï¼Œ<strong>éå†é¡ºåºä¸ç¡®å®š</strong>ã€‚ HashMap<strong>æœ€å¤šåªå…è®¸ä¸€æ¡è®°å½•çš„keyä¸ºnull</strong>ï¼Œå…è®¸å¤šæ¡è®°å½•çš„valueä¸ºnullã€‚HashMap<strong>éçº¿ç¨‹å®‰å…¨</strong>ï¼Œå³ä»»ä¸€æ—¶åˆ»å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™HashMapï¼Œå¯èƒ½ä¼šå¯¼è‡´æ•°æ®çš„ä¸ä¸€è‡´ã€‚å¦‚æœéœ€è¦æ»¡è¶³çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥ç”¨Collectionsçš„synchronizedMapæ–¹æ³•ä½¿HashMapå…·æœ‰çº¿ç¨‹å®‰å…¨çš„èƒ½åŠ›ï¼Œæˆ–è€…ä½¿ç”¨ConcurrentHashMapã€‚</li><li><strong>Hashtable</strong>ï¼šHashtableæ˜¯é—ç•™ç±»ï¼Œä¸å†æ¨èä½¿ç”¨ã€‚</li><li><strong>LinkedHashMap</strong>ï¼šLinkedHashMapæ˜¯HashMapçš„ä¸€ä¸ªå­ç±»ï¼Œ<strong>ä¿å­˜äº†è®°å½•çš„æ’å…¥é¡ºåº</strong>ï¼Œåœ¨ç”¨Iteratoréå†LinkedHashMapæ—¶ï¼Œå…ˆå¾—åˆ°çš„è®°å½•è‚¯å®šæ˜¯å…ˆæ’å…¥çš„ï¼Œä¹Ÿå¯ä»¥åœ¨æ„é€ æ—¶å¸¦å‚æ•°ï¼ŒæŒ‰ç…§è®¿é—®æ¬¡åºæ’åºã€‚</li><li><strong>TreeMap</strong>ï¼šTreeMapå®ç°SortedMapæ¥å£ï¼Œèƒ½å¤Ÿ<strong>æŠŠå®ƒä¿å­˜çš„è®°å½•æ ¹æ®é”®æ’åº</strong>ï¼Œé»˜è®¤æ˜¯æŒ‰é”®å€¼çš„å‡åºæ’åºï¼Œä¹Ÿå¯ä»¥æŒ‡å®šæ’åºçš„æ¯”è¾ƒå™¨ï¼Œå½“ç”¨Iteratoréå†TreeMapæ—¶ï¼Œå¾—åˆ°çš„è®°å½•æ˜¯æ’è¿‡åºçš„ã€‚åœ¨ä½¿ç”¨TreeMapæ—¶ï¼Œkeyå¿…é¡»å®ç°Comparableæ¥å£æˆ–è€…åœ¨æ„é€ TreeMapä¼ å…¥è‡ªå®šä¹‰çš„Comparator**ï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶æŠ›å‡ºjava.lang.ClassCastExceptionç±»å‹çš„å¼‚å¸¸ã€‚</li></ol><p>å¯¹äºä¸Šè¿°å››ç§Mapç±»å‹çš„ç±»ï¼Œè¦æ±‚æ˜ å°„ä¸­çš„keyæ˜¯<strong>ä¸å¯å˜å¯¹è±¡</strong>ã€‚ä¸å¯å˜å¯¹è±¡æ˜¯è¯¥å¯¹è±¡åœ¨åˆ›å»ºåå®ƒçš„å“ˆå¸Œå€¼ä¸ä¼šè¢«æ”¹å˜ã€‚å¦‚æœå¯¹è±¡çš„å“ˆå¸Œå€¼å‘ç”Ÿå˜åŒ–ï¼ŒMapå¯¹è±¡å¾ˆå¯èƒ½å°±å®šä½ä¸åˆ°æ˜ å°„çš„ä½ç½®äº†ã€‚</p><h1 id="å­˜å‚¨ç»“æ„"><a href="#å­˜å‚¨ç»“æ„" class="headerlink" title="å­˜å‚¨ç»“æ„"></a>å­˜å‚¨ç»“æ„</h1><p>ä»ç»“æ„å®ç°æ¥è®²ï¼ŒHashMapæ˜¯æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘ï¼ˆJDK1.8å¢åŠ äº†çº¢é»‘æ ‘éƒ¨åˆ†ï¼‰å®ç°çš„ï¼Œå¦‚ä¸‹å¦‚æ‰€ç¤ºã€‚</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/e4a19398.png" alt="HashMapå­˜å‚¨ç»“æ„"></p><h2 id="ä»€ä¹ˆæ˜¯Node"><a href="#ä»€ä¹ˆæ˜¯Node" class="headerlink" title="ä»€ä¹ˆæ˜¯Node"></a>ä»€ä¹ˆæ˜¯Node</h2><p>æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K,V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>.Entry&lt;K,V&gt; &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">int</span> hash;    <span class="comment">//ç”¨æ¥å®šä½æ•°ç»„ç´¢å¼•ä½ç½®</span></span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line">        Node&lt;K,V&gt; next;   <span class="comment">//é“¾è¡¨çš„ä¸‹ä¸€ä¸ªnode</span></span><br><span class="line"></span><br><span class="line">        Node(<span class="type">int</span> hash, K key, V value, Node&lt;K,V&gt; next) &#123; ... &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> K <span class="title function_">getKey</span><span class="params">()</span>&#123; ... &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> V <span class="title function_">getValue</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> String <span class="title function_">toString</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123; ... &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> V <span class="title function_">setValue</span><span class="params">(V newValue)</span> &#123; ... &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">final</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123; ... &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Nodeæ˜¯HashMapçš„ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œå®ç°äº†Map.Entryæ¥å£ï¼Œæœ¬è´¨æ˜¯å°±æ˜¯ä¸€ä¸ªæ˜ å°„(é”®å€¼å¯¹)ã€‚ä¸Šå›¾ä¸­çš„æ¯ä¸ªé»‘è‰²åœ†ç‚¹å°±æ˜¯ä¸€ä¸ªNodeå¯¹è±¡ã€‚</p><blockquote><p>Map.Entryæ˜¯Mapå£°æ˜çš„ä¸€ä¸ªå†…éƒ¨æ¥å£ï¼Œæ­¤æ¥å£ä¸ºæ³›å‹ï¼Œå®šä¹‰ä¸ºEntry<K,V>ã€‚å®ƒè¡¨ç¤ºMapä¸­çš„ä¸€ä¸ªå®ä½“ï¼ˆä¸€ä¸ªkey-valueå¯¹ï¼‰ã€‚æ¥å£ä¸­æœ‰getKey(), getValueæ–¹æ³•ã€‚</p></blockquote><h2 id="HashMapå­˜å‚¨"><a href="#HashMapå­˜å‚¨" class="headerlink" title="HashMapå­˜å‚¨"></a>HashMapå­˜å‚¨</h2><p>HashMapå°±æ˜¯ä½¿ç”¨å“ˆå¸Œè¡¨æ¥å­˜å‚¨çš„ã€‚å“ˆå¸Œè¡¨ä¸ºè§£å†³å†²çªï¼Œå¯ä»¥é‡‡ç”¨å¼€æ”¾åœ°å€æ³•å’Œé“¾åœ°å€æ³•ç­‰æ¥è§£å†³é—®é¢˜ï¼ŒJavaä¸­HashMapé‡‡ç”¨äº†<strong>é“¾åœ°å€æ³•</strong>ã€‚é“¾åœ°å€æ³•ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ•°ç»„åŠ é“¾è¡¨çš„ç»“åˆã€‚åœ¨æ¯ä¸ªæ•°ç»„å…ƒç´ ä¸Šéƒ½ä¸€ä¸ªé“¾è¡¨ç»“æ„ï¼Œå½“æ•°æ®è¢«Hashåï¼Œå¾—åˆ°æ•°ç»„ä¸‹æ ‡ï¼ŒæŠŠæ•°æ®æ”¾åœ¨å¯¹åº”ä¸‹æ ‡å…ƒç´ çš„é“¾è¡¨ä¸Šã€‚</p><p>å¯¹äºHashMapæ¥è¯´ï¼Œè°ƒç”¨<code>map.put(key, value)</code>æ–¹æ³•æ—¶ï¼Œå…ˆé€šè¿‡<code>key.hashCode()</code>å¾—åˆ°hashCodeå€¼ï¼ˆè¯¥æ–¹æ³•é€‚ç”¨äºæ¯ä¸ªJavaå¯¹è±¡ï¼‰ï¼Œåœ¨å¯¹hashCodeå€¼è¿›è¡ŒHashè¿ç®—æ¥ç¡®å®šè¯¥é”®å€¼å¯¹åœ¨å“ˆå¸Œæ¡¶æ•°ç»„ä¸­çš„å­˜å‚¨ä½ç½®ã€‚å¦‚æœä¸¤ä¸ªkeyä¼šå®šä½åˆ°ç›¸åŒçš„ä½ç½®ï¼Œè¡¨ç¤ºå‘ç”Ÿäº†Hashå†²çªã€‚</p><p>HashMapçš„å­˜å‚¨æ•ˆç‡å–å†³äºHashç®—æ³•å’Œå“ˆå¸Œæ¡¶æ•°ç»„çš„å¤§å°ã€‚å¦‚æœå“ˆå¸Œæ¡¶æ•°ç»„å¾ˆå¤§ï¼Œå³ä½¿è¾ƒå·®çš„Hashç®—æ³•ä¹Ÿä¼šæ¯”è¾ƒåˆ†æ•£ï¼Œå¦‚æœå“ˆå¸Œæ¡¶æ•°ç»„æ•°ç»„å¾ˆå°ï¼Œå³ä½¿å¥½çš„Hashç®—æ³•ä¹Ÿä¼šå‡ºç°è¾ƒå¤šç¢°æ’ï¼Œæ‰€ä»¥å°±éœ€è¦åœ¨ç©ºé—´æˆæœ¬å’Œæ—¶é—´æˆæœ¬ä¹‹é—´æƒè¡¡ï¼Œå…¶å®å°±æ˜¯åœ¨æ ¹æ®å®é™…æƒ…å†µç¡®å®šå“ˆå¸Œæ¡¶æ•°ç»„çš„å¤§å°ï¼Œå¹¶åœ¨æ­¤åŸºç¡€ä¸Šè®¾è®¡å¥½çš„hashç®—æ³•å‡å°‘Hashç¢°æ’ã€‚é‚£ä¹ˆé€šè¿‡ä»€ä¹ˆæ–¹å¼æ¥æ§åˆ¶mapä½¿å¾—Hashç¢°æ’çš„æ¦‚ç‡åˆå°ï¼Œå“ˆå¸Œæ¡¶æ•°ç»„ï¼ˆNode[] tableï¼‰å ç”¨ç©ºé—´åˆå°‘å‘¢ï¼Ÿç­”æ¡ˆå°±æ˜¯å¥½çš„<strong>Hashç®—æ³•</strong>å’Œ<strong>æ‰©å®¹æœºåˆ¶</strong>ã€‚</p><h2 id="HashMapå…³é”®å˜é‡"><a href="#HashMapå…³é”®å˜é‡" class="headerlink" title="HashMapå…³é”®å˜é‡"></a>HashMapå…³é”®å˜é‡</h2><p>åœ¨ç†è§£Hashå’Œæ‰©å®¹æµç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆäº†è§£ä¸‹HashMapçš„å‡ ä¸ªå­—æ®µã€‚ä»HashMapçš„é»˜è®¤æ„é€ å‡½æ•°æºç å¯çŸ¥ï¼Œæ„é€ å‡½æ•°å°±æ˜¯å¯¹ä¸‹é¢å‡ ä¸ªå­—æ®µè¿›è¡Œåˆå§‹åŒ–ï¼Œæºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">transient</span> Node&lt;K,V&gt;[] table;</span><br><span class="line"><span class="type">int</span> threshold;             <span class="comment">// æ‰€èƒ½å®¹çº³çš„key-valueå¯¹æé™ </span></span><br><span class="line"><span class="keyword">final</span> <span class="type">float</span> loadFactor;    <span class="comment">// è´Ÿè½½å› å­</span></span><br><span class="line"><span class="type">int</span> modCount;  </span><br><span class="line"><span class="type">int</span> size;</span><br></pre></td></tr></table></figure><ul><li>tableæ˜¯å“ˆå¸Œæ¡¶æ•°ç»„ï¼Œå®ƒé»˜è®¤åˆå§‹åŒ–é•¿åº¦lengthä¸º16</li><li>loadFactorä¸ºè´Ÿè½½å› å­(é»˜è®¤å€¼æ˜¯0.75)</li><li>thresholdæ˜¯HashMapæ‰€èƒ½å®¹çº³çš„æœ€å¤§æ•°æ®é‡çš„Node(é”®å€¼å¯¹)ä¸ªæ•°</li><li>threshold = length * Load factorï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ•°ç»„å®šä¹‰å¥½é•¿åº¦ä¹‹åï¼Œè´Ÿè½½å› å­è¶Šå¤§ï¼Œæ‰€èƒ½å®¹çº³çš„é”®å€¼å¯¹ä¸ªæ•°è¶Šå¤šã€‚</li><li>è´Ÿè½½å› å­çš„å®šä¹‰å…¬å¼å¯çŸ¥ï¼Œthresholdå°±æ˜¯åœ¨æ­¤Load factorå’Œlength(æ•°ç»„é•¿åº¦)å¯¹åº”ä¸‹å…è®¸çš„<strong>æœ€å¤§å…ƒç´ æ•°ç›®</strong>ï¼Œè¶…è¿‡è¿™ä¸ªæ•°ç›®å°±é‡æ–°resize(æ‰©å®¹)ï¼Œ<strong>æ‰©å®¹åçš„HashMapå®¹é‡æ˜¯ä¹‹å‰å®¹é‡çš„ä¸¤å€</strong>ã€‚é»˜è®¤çš„è´Ÿè½½å› å­0.75æ˜¯å¯¹ç©ºé—´å’Œæ—¶é—´æ•ˆç‡çš„ä¸€ä¸ªå¹³è¡¡é€‰æ‹©ï¼Œå»ºè®®å¤§å®¶ä¸è¦ä¿®æ”¹ï¼Œé™¤éåœ¨æ—¶é—´å’Œç©ºé—´æ¯”è¾ƒç‰¹æ®Šçš„æƒ…å†µä¸‹ï¼Œå¦‚æœå†…å­˜ç©ºé—´å¾ˆå¤šè€Œåˆå¯¹æ—¶é—´æ•ˆç‡è¦æ±‚å¾ˆé«˜ï¼Œå¯ä»¥é™ä½è´Ÿè½½å› å­Load factorçš„å€¼ï¼›ç›¸åï¼Œå¦‚æœå†…å­˜ç©ºé—´ç´§å¼ è€Œå¯¹æ—¶é—´æ•ˆç‡è¦æ±‚ä¸é«˜ï¼Œå¯ä»¥å¢åŠ è´Ÿè½½å› å­loadFactorçš„å€¼ï¼Œè¿™ä¸ªå€¼å¯ä»¥å¤§äº1ã€‚</li><li>sizeå°±æ˜¯HashMapä¸­<strong>å®é™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡</strong>ã€‚</li><li>modCountå­—æ®µä¸»è¦ç”¨æ¥è®°å½•HashMapå†…éƒ¨ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ï¼ˆæ¯”å¦‚æ‰©å®¹ï¼Œ æˆ–è€…é“¾è¡¨å˜ä¸ºçº¢é»‘æ ‘ï¼‰ï¼Œä¸»è¦ç”¨äºè¿­ä»£çš„å¿«é€Ÿå¤±è´¥ã€‚å¼ºè°ƒä¸€ç‚¹ï¼Œå†…éƒ¨ç»“æ„å‘ç”Ÿå˜åŒ–æŒ‡çš„æ˜¯ç»“æ„å‘ç”Ÿå˜åŒ–ï¼Œä¾‹å¦‚putæ–°é”®å€¼å¯¹ï¼Œä½†æ˜¯æŸä¸ªkeyå¯¹åº”çš„valueå€¼è¢«è¦†ç›–ä¸å±äºç»“æ„å˜åŒ–ã€‚</li></ul><h2 id="å“ˆå¸Œæ¡¶æ•°ç»„çš„è®¾è®¡"><a href="#å“ˆå¸Œæ¡¶æ•°ç»„çš„è®¾è®¡" class="headerlink" title="å“ˆå¸Œæ¡¶æ•°ç»„çš„è®¾è®¡"></a>å“ˆå¸Œæ¡¶æ•°ç»„çš„è®¾è®¡</h2><p>åœ¨HashMapä¸­ï¼Œå“ˆå¸Œæ¡¶æ•°ç»„tableçš„é•¿åº¦lengthå¤§å°å¿…é¡»ä¸º2çš„næ¬¡æ–¹(ä¸€å®šæ˜¯åˆæ•°)ï¼Œè¿™æ˜¯ä¸€ç§<strong>éå¸¸è§„</strong>çš„è®¾è®¡ï¼Œå¸¸è§„çš„è®¾è®¡æ˜¯æŠŠæ¡¶çš„å¤§å°è®¾è®¡ä¸ºç´ æ•°ã€‚ç›¸å¯¹æ¥è¯´ç´ æ•°å¯¼è‡´å†²çªçš„æ¦‚ç‡è¦å°äºåˆæ•°ï¼Œå…·ä½“è¯æ˜å¯ä»¥å‚è€ƒ<a href="http://blog.csdn.net/liuqiyao_01/article/details/14475159">è¿™ç¯‡æ–‡ç« </a>ï¼ŒHashtableåˆå§‹åŒ–æ¡¶å¤§å°ä¸º11ï¼Œå°±æ˜¯æ¡¶å¤§å°è®¾è®¡ä¸ºç´ æ•°çš„åº”ç”¨ï¼ˆHashtableæ‰©å®¹åä¸èƒ½ä¿è¯è¿˜æ˜¯ç´ æ•°ï¼‰ã€‚HashMapé‡‡ç”¨è¿™ç§éå¸¸è§„è®¾è®¡ï¼Œä¸»è¦æ˜¯<strong>ä¸ºäº†åœ¨å–æ¨¡å’Œæ‰©å®¹æ—¶åšä¼˜åŒ–</strong>ã€‚åŒæ—¶ä¸ºäº†å‡å°‘å†²çªï¼ŒHashMapå®šä½å“ˆå¸Œæ¡¶ç´¢å¼•ä½ç½®æ—¶ï¼Œä¹ŸåŠ å…¥äº†é«˜ä½å‚ä¸è¿ç®—çš„è¿‡ç¨‹ã€‚</p><p>è¿™é‡Œå­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œå³ä½¿è´Ÿè½½å› å­å’ŒHashç®—æ³•è®¾è®¡çš„å†åˆç†ï¼Œä¹Ÿå…ä¸äº†ä¼šå‡ºç°æ‹‰é“¾è¿‡é•¿çš„æƒ…å†µï¼ˆå³é“¾è¡¨å¾ˆé•¿ï¼‰ï¼Œä¸€æ—¦å‡ºç°æ‹‰é“¾è¿‡é•¿ï¼Œåˆ™ä¼šä¸¥é‡å½±å“HashMapçš„æ€§èƒ½ã€‚äºæ˜¯ï¼Œåœ¨JDK1.8ç‰ˆæœ¬ä¸­ï¼Œå¯¹æ•°æ®ç»“æ„åšäº†è¿›ä¸€æ­¥çš„ä¼˜åŒ–ï¼Œå¼•å…¥äº†çº¢é»‘æ ‘ã€‚è€Œå½“é“¾è¡¨é•¿åº¦å¤ªé•¿ï¼ˆé»˜è®¤è¶…è¿‡8ï¼‰æ—¶ï¼Œé“¾è¡¨å°±è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåˆ©ç”¨çº¢é»‘æ ‘å¿«é€Ÿå¢åˆ æ”¹æŸ¥çš„ç‰¹ç‚¹æé«˜HashMapçš„æ€§èƒ½ï¼Œå…¶ä¸­ä¼šç”¨åˆ°çº¢é»‘æ ‘çš„æ’å…¥ã€åˆ é™¤ã€æŸ¥æ‰¾ç­‰ç®—æ³•ã€‚æœ¬æ–‡ä¸å†å¯¹çº¢é»‘æ ‘å±•å¼€è®¨è®ºï¼Œæƒ³äº†è§£æ›´å¤šçº¢é»‘æ ‘æ•°æ®ç»“æ„çš„å·¥ä½œåŸç†å¯ä»¥å‚è€ƒ<a href="http://blog.csdn.net/v_july_v/article/details/6105630">è¿™ç¯‡æ–‡ç« </a>ã€‚</p><h1 id="åŠŸèƒ½å®ç°"><a href="#åŠŸèƒ½å®ç°" class="headerlink" title="åŠŸèƒ½å®ç°"></a>åŠŸèƒ½å®ç°</h1><h2 id="hashç®—æ³•"><a href="#hashç®—æ³•" class="headerlink" title="hashç®—æ³•"></a>hashç®—æ³•</h2><p>æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">æ–¹æ³•ä¸€ï¼š</span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;   <span class="comment">//jdk1.8 &amp; jdk1.7</span></span><br><span class="line">     <span class="type">int</span> h;</span><br><span class="line">     <span class="comment">// h = key.hashCode() ä¸ºç¬¬ä¸€æ­¥ å–hashCodeå€¼</span></span><br><span class="line">     <span class="comment">// h ^ (h &gt;&gt;&gt; 16)  ä¸ºç¬¬äºŒæ­¥ é«˜ä½å‚ä¸è¿ç®—</span></span><br><span class="line">     <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br><span class="line">æ–¹æ³•äºŒï¼š</span><br><span class="line"><span class="keyword">static</span> <span class="type">int</span> <span class="title function_">indexFor</span><span class="params">(<span class="type">int</span> h, <span class="type">int</span> length)</span> &#123;  <span class="comment">//jdk1.7çš„æºç ï¼Œjdk1.8æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å®ç°åŸç†ä¸€æ ·çš„</span></span><br><span class="line">     <span class="keyword">return</span> h &amp; (length-<span class="number">1</span>);  <span class="comment">//ç¬¬ä¸‰æ­¥ å–æ¨¡è¿ç®—</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„Hashç®—æ³•æœ¬è´¨ä¸Šå°±æ˜¯ä¸‰æ­¥ï¼š<strong>å–keyçš„hashCodeå€¼ã€é«˜ä½è¿ç®—ã€å–æ¨¡è¿ç®—</strong>ã€‚</p><p>å¯¹äºä»»æ„ç»™å®šçš„å¯¹è±¡ï¼Œåªè¦å®ƒçš„hashCode()è¿”å›å€¼ç›¸åŒï¼Œé‚£ä¹ˆç¨‹åºè°ƒç”¨æ–¹æ³•ä¸€æ‰€è®¡ç®—å¾—åˆ°çš„Hashç å€¼æ€»æ˜¯ç›¸åŒçš„ã€‚æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯æŠŠhashå€¼å¯¹æ•°ç»„é•¿åº¦å–æ¨¡è¿ç®—ï¼Œè¿™æ ·ä¸€æ¥ï¼Œå…ƒç´ çš„åˆ†å¸ƒç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒå‡åŒ€çš„ã€‚ä½†æ˜¯ï¼Œ<strong>æ¨¡è¿ç®—çš„æ¶ˆè€—è¿˜æ˜¯æ¯”è¾ƒå¤§</strong>çš„ï¼Œåœ¨HashMapä¸­æ˜¯è¿™æ ·åšçš„ï¼šè°ƒç”¨æ–¹æ³•äºŒæ¥è®¡ç®—è¯¥å¯¹è±¡åº”è¯¥ä¿å­˜åœ¨tableæ•°ç»„çš„å“ªä¸ªç´¢å¼•å¤„ã€‚</p><p>è¿™ä¸ªæ–¹æ³•ï¼ˆæ–¹æ³•äºŒï¼‰éå¸¸å·§å¦™ï¼Œå®ƒé€šè¿‡h &amp; (table.length -1)æ¥å¾—åˆ°è¯¥å¯¹è±¡çš„ä¿å­˜ä½ï¼Œè€ŒHashMapåº•å±‚æ•°ç»„çš„é•¿åº¦æ€»æ˜¯2çš„næ¬¡æ–¹ï¼Œè¿™æ˜¯HashMapåœ¨é€Ÿåº¦ä¸Šçš„ä¼˜åŒ–ã€‚å½“lengthæ€»æ˜¯2çš„næ¬¡æ–¹æ—¶ï¼Œ<strong>h&amp; (length-1)è¿ç®—ç­‰ä»·äºå¯¹lengthå–æ¨¡</strong>ï¼Œä¹Ÿå°±æ˜¯h%lengthï¼Œä½†æ˜¯&amp;æ¯”%å…·æœ‰æ›´é«˜çš„æ•ˆç‡ã€‚</p><p>åœ¨JDK1.8çš„å®ç°ä¸­ï¼Œä¼˜åŒ–äº†é«˜ä½è¿ç®—çš„ç®—æ³•ï¼Œé€šè¿‡hashCode()çš„é«˜16ä½å¼‚æˆ–ä½16ä½å®ç°çš„ï¼š(h = k.hashCode()) ^ (h &gt;&gt;&gt; 16)ï¼Œä¸»è¦æ˜¯ä»é€Ÿåº¦ã€åŠŸæ•ˆã€è´¨é‡æ¥è€ƒè™‘çš„ï¼Œè¿™ä¹ˆåšå¯ä»¥åœ¨æ•°ç»„tableçš„lengthæ¯”è¾ƒå°çš„æ—¶å€™ï¼Œä¹Ÿèƒ½ä¿è¯è€ƒè™‘åˆ°é«˜ä½Bitéƒ½å‚ä¸åˆ°Hashçš„è®¡ç®—ä¸­ï¼ŒåŒæ—¶ä¸ä¼šæœ‰å¤ªå¤§çš„å¼€é”€ã€‚</p><p>ä¸‹é¢ä¸¾ä¾‹è¯´æ˜ä¸‹ï¼Œnä¸ºtableçš„é•¿åº¦</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/45205ec2.png" alt="hashç®—æ³•"></p><h2 id="HashMapçš„putæ–¹æ³•"><a href="#HashMapçš„putæ–¹æ³•" class="headerlink" title="HashMapçš„putæ–¹æ³•"></a>HashMapçš„putæ–¹æ³•</h2><p>HashMapçš„putæ–¹æ³•æ‰§è¡Œè¿‡ç¨‹å¯ä»¥é€šè¿‡ä¸‹å›¾æ¥ç†è§£</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/d669d29c.png" alt="HashMapçš„putæ–¹æ³•ï¼ˆ1.7ï¼Œ1.8æœ‰å˜åŒ–ï¼‰"></p><ol><li>åˆ¤æ–­é”®å€¼å¯¹æ•°ç»„tableæ˜¯å¦ä¸ºç©ºæˆ–é•¿åº¦ä¸º0ï¼Œå¦åˆ™æ‰§è¡Œresize()è¿›è¡Œæ‰©å®¹ï¼›ï¼ˆè¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œ<code>new HashMap()</code>çš„æ—¶å€™å¹¶ä¸ä¼šåˆå§‹åŒ–å“ˆå¸Œæ¡¶æ•°ç»„ï¼Œè€Œæ˜¯å½“ç¬¬ä¸€æ¬¡æ‰§è¡Œputæ“ä½œçš„æ—¶å€™æ‰ä¼šåˆå§‹åŒ–ã€‚ï¼‰</li><li>æ ¹æ®é”®å€¼keyè®¡ç®—hashå€¼å¾—åˆ°æ’å…¥çš„æ•°ç»„ç´¢å¼•iï¼Œå¦‚æœtable[i]==nullï¼Œç›´æ¥æ–°å»ºèŠ‚ç‚¹æ·»åŠ ï¼Œè½¬å‘6ï¼Œå¦‚æœtable[i]ä¸ä¸ºç©ºï¼Œè½¬å‘3</li><li>åˆ¤æ–­table[i]çš„é¦–ä¸ªå…ƒç´ æ˜¯å¦å’Œkeyä¸€æ ·ï¼Œå¦‚æœç›¸åŒç›´æ¥è¦†ç›–valueï¼Œå¦åˆ™è½¬å‘4ï¼Œè¿™é‡Œçš„ç›¸åŒæŒ‡çš„æ˜¯hashCodeä»¥åŠequalsï¼›</li><li>åˆ¤æ–­table[i] æ˜¯å¦ä¸ºtreeNodeï¼Œå³table[i] æ˜¯å¦æ˜¯çº¢é»‘æ ‘ï¼Œå¦‚æœæ˜¯çº¢é»‘æ ‘ï¼Œåˆ™ç›´æ¥åœ¨æ ‘ä¸­æ’å…¥é”®å€¼å¯¹ï¼Œå¦åˆ™è½¬å‘5ï¼›</li><li>éå†table[i]ï¼Œåˆ¤æ–­é“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äº8ï¼Œå¤§äº8çš„è¯æŠŠé“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œåœ¨çº¢é»‘æ ‘ä¸­æ‰§è¡Œæ’å…¥æ“ä½œï¼Œå¦åˆ™è¿›è¡Œé“¾è¡¨çš„æ’å…¥æ“ä½œï¼›éå†è¿‡ç¨‹ä¸­è‹¥å‘ç°keyå·²ç»å­˜åœ¨ç›´æ¥è¦†ç›–valueå³å¯ï¼› </li><li>æ’å…¥æˆåŠŸåï¼Œåˆ¤æ–­å®é™…å­˜åœ¨çš„é”®å€¼å¯¹æ•°é‡sizeæ˜¯å¦è¶…å¤šäº†æœ€å¤§å®¹é‡thresholdï¼Œå¦‚æœè¶…è¿‡ï¼Œè¿›è¡Œæ‰©å®¹ã€‚</li></ol><p>putæ–¹æ³•æºç å¦‚ä¸‹ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> V <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">    <span class="comment">// å¯¹keyçš„hashCode()åšhash</span></span><br><span class="line">    <span class="keyword">return</span> putVal(hash(key), key, value, <span class="literal">false</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> V <span class="title function_">putVal</span><span class="params">(<span class="type">int</span> hash, K key, V value, <span class="type">boolean</span> onlyIfAbsent,</span></span><br><span class="line"><span class="params">               <span class="type">boolean</span> evict)</span> &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="type">int</span> n, i;</span><br><span class="line">    <span class="comment">// æ­¥éª¤â‘ ï¼štabä¸ºç©ºåˆ™åˆ›å»º</span></span><br><span class="line">    <span class="keyword">if</span> ((tab = table) == <span class="literal">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">        n = (tab = resize()).length;</span><br><span class="line">    <span class="comment">// æ­¥éª¤â‘¡ï¼šè®¡ç®—indexï¼Œå¹¶å¯¹nullåšå¤„ç† </span></span><br><span class="line">    <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="literal">null</span>) </span><br><span class="line">        tab[i] = newNode(hash, key, value, <span class="literal">null</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        Node&lt;K,V&gt; e; K k;</span><br><span class="line">        <span class="comment">// æ­¥éª¤â‘¢ï¼šèŠ‚ç‚¹keyå­˜åœ¨ï¼Œç›´æ¥è¦†ç›–value</span></span><br><span class="line">        <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">            ((k = p.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">            e = p;</span><br><span class="line">        <span class="comment">// æ­¥éª¤â‘£ï¼šåˆ¤æ–­è¯¥é“¾ä¸ºçº¢é»‘æ ‘</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">            e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="built_in">this</span>, tab, hash, key, value);</span><br><span class="line">        <span class="comment">// æ­¥éª¤â‘¤ï¼šè¯¥é“¾ä¸ºé“¾è¡¨</span></span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">binCount</span> <span class="operator">=</span> <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                <span class="keyword">if</span> ((e = p.next) == <span class="literal">null</span>) &#123;</span><br><span class="line">                    p.next = newNode(hash, key,value,<span class="literal">null</span>);</span><br><span class="line">                     <span class="comment">//é“¾è¡¨é•¿åº¦å¤§äº8è½¬æ¢ä¸ºçº¢é»‘æ ‘è¿›è¡Œå¤„ç†</span></span><br><span class="line">                    <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st  </span></span><br><span class="line">                        treeifyBin(tab, hash);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                 <span class="comment">// keyå·²ç»å­˜åœ¨ç›´æ¥è¦†ç›–value</span></span><br><span class="line">                <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                    ((k = e.key) == key || (key != <span class="literal">null</span> &amp;&amp; key.equals(k)))) </span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">                p = e;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">            <span class="type">V</span> <span class="variable">oldValue</span> <span class="operator">=</span> e.value;</span><br><span class="line">            <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="literal">null</span>)</span><br><span class="line">                e.value = value;</span><br><span class="line">            afterNodeAccess(e);</span><br><span class="line">            <span class="keyword">return</span> oldValue;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ++modCount;</span><br><span class="line">    <span class="comment">// æ­¥éª¤â‘¥ï¼šè¶…è¿‡æœ€å¤§å®¹é‡ å°±æ‰©å®¹</span></span><br><span class="line">    <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">        resize();</span><br><span class="line">    afterNodeInsertion(evict);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å®¹"><a href="#æ‰©å®¹" class="headerlink" title="æ‰©å®¹"></a>æ‰©å®¹</h2><p>æ‰©å®¹(resize)å°±æ˜¯é‡æ–°è®¡ç®—å®¹é‡ï¼Œå‘HashMapå¯¹è±¡é‡Œä¸åœçš„æ·»åŠ å…ƒç´ ï¼Œè€ŒHashMapå¯¹è±¡å†…éƒ¨çš„æ•°ç»„æ— æ³•è£…è½½æ›´å¤šçš„å…ƒç´ æ—¶ï¼Œå¯¹è±¡å°±éœ€è¦æ‰©å¤§æ•°ç»„çš„é•¿åº¦ï¼Œä»¥ä¾¿èƒ½è£…å…¥æ›´å¤šçš„å…ƒç´ ã€‚å½“ç„¶Javaé‡Œçš„æ•°ç»„æ˜¯æ— æ³•è‡ªåŠ¨æ‰©å®¹çš„ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªæ–°çš„æ•°ç»„ä»£æ›¿å·²æœ‰çš„å®¹é‡å°çš„æ•°ç»„ï¼Œå°±åƒæˆ‘ä»¬ç”¨ä¸€ä¸ªå°æ¡¶è£…æ°´ï¼Œå¦‚æœæƒ³è£…æ›´å¤šçš„æ°´ï¼Œå°±å¾—æ¢å¤§æ°´æ¡¶ã€‚</p><blockquote><p>è¿™é‡Œæœ‰ä¸€ä¸ªä¸å¤§ä¸å°çš„è´¨ç–‘ï¼Œå¦‚æœæ‰€æœ‰çš„sizeåˆ°è¾¾äº†thresholdï¼Œä½†æ˜¯æ‰€æœ‰çš„é”®å€¼å¯¹éƒ½è£…åœ¨äº†ä¸€ä¸ªå“ˆå¸Œæ¡¶ä¸­ï¼Œé‚£ä¹ˆå…¶å®å…¶ä»–æ¡¶æ˜¯ç©ºçš„ï¼Œä¹Ÿæ˜¯å¯ä»¥ç»§ç»­æ”¾æ›´å¤šçš„é”®å€¼å¯¹ï¼Œé‚£ä¹ˆæ­¤æ—¶ä¸èƒ½è¯´<HashMapå¯¹è±¡å†…éƒ¨çš„æ•°ç»„æ— æ³•è£…è½½æ›´å¤šçš„å…ƒç´ >ï¼Œä½†ä¾ç„¶ä¼šæ‰©å®¹</p></blockquote><p>æˆ‘ä»¬åˆ†æä¸‹resizeçš„æºç ï¼Œé‰´äºJDK1.8èå…¥äº†çº¢é»‘æ ‘ï¼Œè¾ƒå¤æ‚ï¼Œä¸ºäº†ä¾¿äºç†è§£æˆ‘ä»¬ä»ç„¶ä½¿ç”¨JDK1.7çš„ä»£ç ï¼Œå¥½ç†è§£ä¸€äº›ï¼Œæœ¬è´¨ä¸ŠåŒºåˆ«ä¸å¤§ï¼Œå…·ä½“åŒºåˆ«åæ–‡å†è¯´ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">resize</span><span class="params">(<span class="type">int</span> newCapacity)</span> &#123;   <span class="comment">//ä¼ å…¥æ–°çš„å®¹é‡</span></span><br><span class="line">    Entry[] oldTable = table;    <span class="comment">//å¼•ç”¨æ‰©å®¹å‰çš„Entryæ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> oldTable.length;         </span><br><span class="line">    <span class="keyword">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;  <span class="comment">//æ‰©å®¹å‰çš„æ•°ç»„å¤§å°å¦‚æœå·²ç»è¾¾åˆ°æœ€å¤§(2^30)äº†</span></span><br><span class="line">        threshold = Integer.MAX_VALUE; <span class="comment">//ä¿®æ”¹é˜ˆå€¼ä¸ºintçš„æœ€å¤§å€¼(2^31-1)ï¼Œè¿™æ ·ä»¥åå°±ä¸ä¼šæ‰©å®¹äº†</span></span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    Entry[] newTable = <span class="keyword">new</span> <span class="title class_">Entry</span>[newCapacity];  <span class="comment">//åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„Entryæ•°ç»„</span></span><br><span class="line">    transfer(newTable);                         <span class="comment">//ï¼ï¼å°†æ•°æ®è½¬ç§»åˆ°æ–°çš„Entryæ•°ç»„é‡Œ</span></span><br><span class="line">    table = newTable;                           <span class="comment">//HashMapçš„tableå±æ€§å¼•ç”¨æ–°çš„Entryæ•°ç»„</span></span><br><span class="line">    threshold = (<span class="type">int</span>)(newCapacity * loadFactor);<span class="comment">//ä¿®æ”¹é˜ˆå€¼</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±æ˜¯ä½¿ç”¨ä¸€ä¸ªå®¹é‡æ›´å¤§çš„æ•°ç»„æ¥ä»£æ›¿å·²æœ‰çš„å®¹é‡å°çš„æ•°ç»„ï¼Œtransfer()æ–¹æ³•å°†åŸæœ‰Entryæ•°ç»„çš„å…ƒç´ æ‹·è´åˆ°æ–°çš„Entryæ•°ç»„é‡Œã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(Entry[] newTable)</span> &#123;</span><br><span class="line">    Entry[] src = table;                   <span class="comment">//srcå¼•ç”¨äº†æ—§çš„Entryæ•°ç»„</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> newTable.length;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; src.length; j++) &#123; <span class="comment">//éå†æ—§çš„Entryæ•°ç»„</span></span><br><span class="line">        Entry&lt;K,V&gt; e = src[j];             <span class="comment">//å–å¾—æ—§Entryæ•°ç»„çš„æ¯ä¸ªå…ƒç´ </span></span><br><span class="line">        <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">            src[j] = <span class="literal">null</span>;<span class="comment">//é‡Šæ”¾æ—§Entryæ•°ç»„çš„å¯¹è±¡å¼•ç”¨ï¼ˆforå¾ªç¯åï¼Œæ—§çš„Entryæ•°ç»„ä¸å†å¼•ç”¨ä»»ä½•å¯¹è±¡ï¼‰</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                Entry&lt;K,V&gt; next = e.next;</span><br><span class="line">                <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> indexFor(e.hash, newCapacity); <span class="comment">//ï¼ï¼é‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„ä¸­çš„ä½ç½®</span></span><br><span class="line">                e.next = newTable[i]; <span class="comment">//æ ‡è®°[1]ï¼Œè¿™å¥ä¸å¤ªç†è§£</span></span><br><span class="line">                newTable[i] = e;      <span class="comment">//å°†å…ƒç´ æ”¾åœ¨æ•°ç»„ä¸Š</span></span><br><span class="line">                e = next;             <span class="comment">//è®¿é—®ä¸‹ä¸€ä¸ªEntryé“¾ä¸Šçš„å…ƒç´ </span></span><br><span class="line">            &#125; <span class="keyword">while</span> (e != <span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>newTable[i]çš„å¼•ç”¨èµ‹ç»™äº†e.nextï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨äº†å•é“¾è¡¨çš„<strong>å¤´æ’</strong>å…¥æ–¹å¼ï¼ŒåŒä¸€ä½ç½®ä¸Šæ–°å…ƒç´ æ€»ä¼šè¢«æ”¾åœ¨é“¾è¡¨çš„å¤´éƒ¨ä½ç½®ï¼›è¿™æ ·å…ˆæ”¾åœ¨ä¸€ä¸ªç´¢å¼•ä¸Šçš„å…ƒç´ ç»ˆä¼šè¢«æ”¾åˆ°Entryé“¾çš„å°¾éƒ¨(å¦‚æœå‘ç”Ÿäº†hashå†²çªçš„è¯ï¼‰ï¼Œè¿™ä¸€ç‚¹å’ŒJdk1.8æœ‰åŒºåˆ«ï¼Œä¸‹æ–‡è¯¦è§£ã€‚åœ¨æ—§æ•°ç»„ä¸­åŒä¸€æ¡Entryé“¾ä¸Šçš„å…ƒç´ ï¼Œé€šè¿‡é‡æ–°è®¡ç®—ç´¢å¼•ä½ç½®åï¼Œæœ‰å¯èƒ½è¢«æ”¾åˆ°äº†æ–°æ•°ç»„çš„ä¸åŒä½ç½®ä¸Šã€‚</p><p>ä¸‹é¢ä¸¾ä¸ªä¾‹å­è¯´æ˜ä¸‹æ‰©å®¹è¿‡ç¨‹ã€‚å‡è®¾äº†æˆ‘ä»¬çš„hashç®—æ³•å°±æ˜¯ç®€å•çš„ç”¨key mod ä¸€ä¸‹è¡¨çš„å¤§å°ï¼ˆä¹Ÿå°±æ˜¯æ•°ç»„çš„é•¿åº¦ï¼‰ã€‚å…¶ä¸­çš„å“ˆå¸Œæ¡¶æ•°ç»„tableçš„size=2ï¼Œ æ‰€ä»¥key = 3ã€7ã€5ï¼Œputé¡ºåºä¾æ¬¡ä¸º 5ã€7ã€3ã€‚åœ¨mod 2ä»¥åéƒ½å†²çªåœ¨table[1]è¿™é‡Œäº†ã€‚è¿™é‡Œå‡è®¾è´Ÿè½½å› å­ loadFactor=1ï¼Œå³å½“é”®å€¼å¯¹çš„å®é™…å¤§å°size å¤§äº tableçš„å®é™…å¤§å°æ—¶è¿›è¡Œæ‰©å®¹ã€‚æ¥ä¸‹æ¥çš„ä¸‰ä¸ªæ­¥éª¤æ˜¯å“ˆå¸Œæ¡¶æ•°ç»„ resizeæˆ4ï¼Œç„¶åæ‰€æœ‰çš„Nodeé‡æ–°rehashçš„è¿‡ç¨‹ã€‚</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/b2330062.png" alt="JDK7 HashMapæ‰©å®¹"></p><p>ä¸‹é¢æˆ‘ä»¬è®²è§£ä¸‹JDK1.8åšäº†å“ªäº›ä¼˜åŒ–ã€‚ç»è¿‡è§‚æµ‹å¯ä»¥å‘ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯<strong>2æ¬¡å¹‚</strong>çš„æ‰©å±•(æŒ‡é•¿åº¦æ‰©ä¸ºåŸæ¥2å€)ï¼Œæ‰€ä»¥ï¼Œ<strong>å…ƒç´ çš„ä½ç½®è¦ä¹ˆæ˜¯åœ¨åŸä½ç½®ï¼Œè¦ä¹ˆæ˜¯åœ¨åŸä½ç½®å†ç§»åŠ¨2æ¬¡å¹‚çš„ä½ç½®</strong>ã€‚çœ‹ä¸‹å›¾å¯ä»¥æ˜ç™½è¿™å¥è¯çš„æ„æ€ï¼Œnä¸ºtableçš„é•¿åº¦ï¼Œå›¾ï¼ˆaï¼‰è¡¨ç¤ºæ‰©å®¹å‰çš„key1å’Œkey2ä¸¤ç§keyç¡®å®šç´¢å¼•ä½ç½®çš„ç¤ºä¾‹ï¼Œå›¾ï¼ˆbï¼‰è¡¨ç¤ºæ‰©å®¹åkey1å’Œkey2ä¸¤ç§keyç¡®å®šç´¢å¼•ä½ç½®çš„ç¤ºä¾‹ï¼Œå…¶ä¸­hash1æ˜¯key1å¯¹åº”çš„å“ˆå¸Œä¸é«˜ä½è¿ç®—ç»“æœã€‚</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/4d8022db.png" alt="img"></p><p>å…ƒç´ åœ¨é‡æ–°è®¡ç®—hashä¹‹åï¼Œå› ä¸ºnå˜ä¸º2å€ï¼Œé‚£ä¹ˆn-1çš„maskèŒƒå›´åœ¨é«˜ä½å¤š1bit(çº¢è‰²)ï¼Œå› æ­¤æ–°çš„indexå°±ä¼šå‘ç”Ÿè¿™æ ·çš„å˜åŒ–ï¼š</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/d773f86e.png" alt="img"></p><p>å› æ­¤ï¼Œæˆ‘ä»¬åœ¨æ‰©å……HashMapçš„æ—¶å€™ï¼Œä¸éœ€è¦åƒJDK1.7çš„å®ç°é‚£æ ·é‡æ–°è®¡ç®—hashï¼Œ<strong>åªéœ€è¦çœ‹çœ‹åŸæ¥çš„hashå€¼æ–°å¢çš„é‚£ä¸ªbitæ˜¯1è¿˜æ˜¯0å°±å¥½äº†ï¼Œæ˜¯0çš„è¯ç´¢å¼•æ²¡å˜ï¼Œæ˜¯1çš„è¯ç´¢å¼•å˜æˆâ€œåŸç´¢å¼•+oldCapâ€</strong>ï¼Œå¯ä»¥çœ‹çœ‹ä¸‹å›¾ä¸º16æ‰©å……ä¸º32çš„resizeç¤ºæ„å›¾ï¼š</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/3cc9813a.png" alt="img"></p><p>è¿™ä¸ªè®¾è®¡ç¡®å®éå¸¸çš„å·§å¦™ï¼Œæ—¢çœå»äº†é‡æ–°è®¡ç®—hashå€¼çš„æ—¶é—´ï¼Œè€Œä¸”åŒæ—¶ï¼Œç”±äºæ–°å¢çš„1bitæ˜¯0è¿˜æ˜¯1å¯ä»¥è®¤ä¸ºæ˜¯éšæœºçš„ï¼Œå› æ­¤resizeçš„è¿‡ç¨‹ï¼Œå‡åŒ€çš„æŠŠä¹‹å‰çš„å†²çªçš„èŠ‚ç‚¹åˆ†æ•£åˆ°æ–°çš„bucketäº†ã€‚è¿™ä¸€å—å°±æ˜¯JDK1.8æ–°å¢çš„ä¼˜åŒ–ç‚¹ã€‚æœ‰ä¸€ç‚¹æ³¨æ„åŒºåˆ«ï¼ŒJDK1.7ä¸­rehashçš„æ—¶å€™ï¼Œæ—§é“¾è¡¨è¿ç§»æ–°é“¾è¡¨çš„æ—¶å€™ï¼Œå¦‚æœåœ¨æ–°è¡¨çš„æ•°ç»„ç´¢å¼•ä½ç½®ç›¸åŒï¼Œåˆ™é“¾è¡¨å…ƒç´ ä¼šå€’ç½®ï¼Œä½†æ˜¯ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œ<strong>JDK1.8ä¸ä¼šå€’ç½®</strong>ã€‚æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥ç ”ç©¶ä¸‹JDK1.8çš„resizeæºç ï¼Œå†™çš„å¾ˆèµï¼Œå¦‚ä¸‹:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">final</span> Node&lt;K,V&gt;[] resize() &#123;</span><br><span class="line">    Node&lt;K,V&gt;[] oldTab = table;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldCap</span> <span class="operator">=</span> (oldTab == <span class="literal">null</span>) ? <span class="number">0</span> : oldTab.length;</span><br><span class="line">    <span class="type">int</span> <span class="variable">oldThr</span> <span class="operator">=</span> threshold;</span><br><span class="line">    <span class="type">int</span> newCap, newThr = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (oldCap &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// è¶…è¿‡æœ€å¤§å€¼å°±ä¸å†æ‰©å……äº†ï¼Œå°±åªå¥½éšä½ ç¢°æ’å»å§</span></span><br><span class="line">        <span class="keyword">if</span> (oldCap &gt;= MAXIMUM_CAPACITY) &#123;</span><br><span class="line">            threshold = Integer.MAX_VALUE;</span><br><span class="line">            <span class="keyword">return</span> oldTab;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ²¡è¶…è¿‡æœ€å¤§å€¼ï¼Œå°±æ‰©å……ä¸ºåŸæ¥çš„2å€</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> ((newCap = oldCap &lt;&lt; <span class="number">1</span>) &lt; MAXIMUM_CAPACITY &amp;&amp;</span><br><span class="line">                 oldCap &gt;= DEFAULT_INITIAL_CAPACITY)</span><br><span class="line">            newThr = oldThr &lt;&lt; <span class="number">1</span>; <span class="comment">// double threshold</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (oldThr &gt; <span class="number">0</span>) <span class="comment">// initial capacity was placed in threshold</span></span><br><span class="line">        newCap = oldThr;</span><br><span class="line">    <span class="keyword">else</span> &#123;               <span class="comment">// zero initial threshold signifies using defaults</span></span><br><span class="line">        newCap = DEFAULT_INITIAL_CAPACITY;</span><br><span class="line">        newThr = (<span class="type">int</span>)(DEFAULT_LOAD_FACTOR * DEFAULT_INITIAL_CAPACITY);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// è®¡ç®—æ–°çš„resizeä¸Šé™</span></span><br><span class="line">    <span class="keyword">if</span> (newThr == <span class="number">0</span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">float</span> <span class="variable">ft</span> <span class="operator">=</span> (<span class="type">float</span>)newCap * loadFactor;</span><br><span class="line">        newThr = (newCap &lt; MAXIMUM_CAPACITY &amp;&amp; ft &lt; (<span class="type">float</span>)MAXIMUM_CAPACITY ?</span><br><span class="line">                  (<span class="type">int</span>)ft : Integer.MAX_VALUE);</span><br><span class="line">    &#125;</span><br><span class="line">    threshold = newThr;</span><br><span class="line">    <span class="meta">@SuppressWarnings(&#123;&quot;rawtypes&quot;ï¼Œ&quot;unchecked&quot;&#125;)</span></span><br><span class="line">        Node&lt;K,V&gt;[] newTab = (Node&lt;K,V&gt;[])<span class="keyword">new</span> <span class="title class_">Node</span>[newCap];</span><br><span class="line">    table = newTab;</span><br><span class="line">    <span class="keyword">if</span> (oldTab != <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="comment">// æŠŠæ¯ä¸ªbucketéƒ½ç§»åŠ¨åˆ°æ–°çš„bucketsä¸­</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; oldCap; ++j) &#123;</span><br><span class="line">            Node&lt;K,V&gt; e;</span><br><span class="line">            <span class="keyword">if</span> ((e = oldTab[j]) != <span class="literal">null</span>) &#123;</span><br><span class="line">                oldTab[j] = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">if</span> (e.next == <span class="literal">null</span>)</span><br><span class="line">                    newTab[e.hash &amp; (newCap - <span class="number">1</span>)] = e;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (e <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                    ((TreeNode&lt;K,V&gt;)e).split(<span class="built_in">this</span>, newTab, j, oldCap);</span><br><span class="line">                <span class="keyword">else</span> &#123; <span class="comment">// é“¾è¡¨ä¼˜åŒ–é‡hashçš„ä»£ç å—</span></span><br><span class="line">                    Node&lt;K,V&gt; loHead = <span class="literal">null</span>, loTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; hiHead = <span class="literal">null</span>, hiTail = <span class="literal">null</span>;</span><br><span class="line">                    Node&lt;K,V&gt; next;</span><br><span class="line">                    <span class="keyword">do</span> &#123;</span><br><span class="line">                        next = e.next;</span><br><span class="line">                        <span class="comment">// åŸç´¢å¼•</span></span><br><span class="line">                        <span class="keyword">if</span> ((e.hash &amp; oldCap) == <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">if</span> (loTail == <span class="literal">null</span>)</span><br><span class="line">                                loHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                loTail.next = e;</span><br><span class="line">                            loTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="comment">// åŸç´¢å¼•+oldCap</span></span><br><span class="line">                        <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (hiTail == <span class="literal">null</span>)</span><br><span class="line">                                hiHead = e;</span><br><span class="line">                            <span class="keyword">else</span></span><br><span class="line">                                hiTail.next = e;</span><br><span class="line">                            hiTail = e;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125; <span class="keyword">while</span> ((e = next) != <span class="literal">null</span>);</span><br><span class="line">                    <span class="comment">// åŸç´¢å¼•æ”¾åˆ°bucketé‡Œ</span></span><br><span class="line">                    <span class="keyword">if</span> (loTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        loTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j] = loHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="comment">// åŸç´¢å¼•+oldCapæ”¾åˆ°bucketé‡Œ</span></span><br><span class="line">                    <span class="keyword">if</span> (hiTail != <span class="literal">null</span>) &#123;</span><br><span class="line">                        hiTail.next = <span class="literal">null</span>;</span><br><span class="line">                        newTab[j + oldCap] = hiHead;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> newTab;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h1 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h1><h2 id="çº¿ç¨‹å®‰å…¨æ€§"><a href="#çº¿ç¨‹å®‰å…¨æ€§" class="headerlink" title="çº¿ç¨‹å®‰å…¨æ€§"></a>çº¿ç¨‹å®‰å…¨æ€§</h2><p>åœ¨å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ä¸­ï¼Œåº”è¯¥å°½é‡é¿å…ä½¿ç”¨çº¿ç¨‹ä¸å®‰å…¨çš„HashMapï¼Œè€Œä½¿ç”¨çº¿ç¨‹å®‰å…¨çš„ConcurrentHashMapã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆè¯´HashMapæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ï¼Œä¸‹é¢ä¸¾ä¾‹å­è¯´æ˜åœ¨å¹¶å‘çš„å¤šçº¿ç¨‹ä½¿ç”¨åœºæ™¯ä¸­ä½¿ç”¨HashMapå¯èƒ½é€ æˆæ­»å¾ªç¯ã€‚ä»£ç ä¾‹å­å¦‚ä¸‹(ä¾¿äºç†è§£ï¼Œä»ç„¶ä½¿ç”¨JDK1.7çš„ç¯å¢ƒ)ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMapInfiniteLoop</span> &#123;  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> HashMap&lt;Integer,String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;Integer,String&gt;(<span class="number">2</span>ï¼Œ<span class="number">0.75f</span>);  </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;  </span><br><span class="line">        map.put(<span class="number">5</span>ï¼Œ <span class="string">&quot;C&quot;</span>);  </span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="string">&quot;Thread1&quot;</span>) &#123;  </span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;  </span><br><span class="line">                map.put(<span class="number">7</span>, <span class="string">&quot;B&quot;</span>);  </span><br><span class="line">                System.out.println(map);  </span><br><span class="line">            &#125;;  </span><br><span class="line">        &#125;.start();  </span><br><span class="line">        <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="string">&quot;Thread2&quot;</span>) &#123;  </span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;  </span><br><span class="line">                map.put(<span class="number">3</span>, <span class="string">&quot;A);  </span></span><br><span class="line"><span class="string">                System.out.println(map);  </span></span><br><span class="line"><span class="string">            &#125;;  </span></span><br><span class="line"><span class="string">        &#125;.start();        </span></span><br><span class="line"><span class="string">    &#125;  </span></span><br><span class="line"><span class="string">&#125; </span></span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œmapåˆå§‹åŒ–ä¸ºä¸€ä¸ªé•¿åº¦ä¸º2çš„æ•°ç»„ï¼ŒloadFactor=0.75ï¼Œthreshold=2*0.75=1ï¼Œä¹Ÿå°±æ˜¯è¯´å½“putç¬¬äºŒä¸ªkeyçš„æ—¶å€™ï¼Œmapå°±éœ€è¦è¿›è¡Œresizeã€‚</p><p>é€šè¿‡è®¾ç½®æ–­ç‚¹è®©çº¿ç¨‹1å’Œçº¿ç¨‹2åŒæ—¶debugåˆ°transferæ–¹æ³•(3.3å°èŠ‚ä»£ç å—)çš„é¦–è¡Œã€‚æ³¨æ„æ­¤æ—¶ä¸¤ä¸ªçº¿ç¨‹å·²ç»æˆåŠŸæ·»åŠ æ•°æ®ã€‚æ”¾å¼€thread1çš„æ–­ç‚¹è‡³transferæ–¹æ³•çš„â€œEntry next = e.next;â€ è¿™ä¸€è¡Œï¼›ç„¶åæ”¾å¼€çº¿ç¨‹2çš„çš„æ–­ç‚¹ï¼Œè®©çº¿ç¨‹2è¿›è¡Œresizeã€‚ç»“æœå¦‚ä¸‹å›¾ã€‚</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/7df99266.png" alt="img"></p><p>æ³¨æ„ï¼ŒThread1çš„ e æŒ‡å‘äº†key(3)ï¼Œè€ŒnextæŒ‡å‘äº†key(7)ï¼Œå…¶åœ¨çº¿ç¨‹äºŒrehashåï¼ŒæŒ‡å‘äº†çº¿ç¨‹äºŒé‡ç»„åçš„é“¾è¡¨ã€‚</p><p>çº¿ç¨‹ä¸€è¢«è°ƒåº¦å›æ¥æ‰§è¡Œï¼Œå…ˆæ˜¯æ‰§è¡Œ newTalbe[i] = eï¼Œ ç„¶åæ˜¯e = nextï¼Œå¯¼è‡´äº†eæŒ‡å‘äº†key(7)ï¼Œè€Œä¸‹ä¸€æ¬¡å¾ªç¯çš„next = e.nextå¯¼è‡´äº†nextæŒ‡å‘äº†key(3)ã€‚</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/4c3c28fb.png" alt="img"></p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/6c8d086a.png" alt="img"></p><p>e.next = newTable[i] å¯¼è‡´ key(3).next æŒ‡å‘äº† key(7)ã€‚æ³¨æ„ï¼šæ­¤æ—¶çš„key(7).next å·²ç»æŒ‡å‘äº†key(3)ï¼Œ ç¯å½¢é“¾è¡¨å°±è¿™æ ·å‡ºç°äº†ã€‚</p><p><img src="https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/6eed9aaf.png" alt="img"></p><p>äºæ˜¯ï¼Œå½“æˆ‘ä»¬ç”¨çº¿ç¨‹ä¸€è°ƒç”¨map.get(11)æ—¶ï¼Œæ‚²å‰§å°±å‡ºç°äº†â€”â€”Infinite Loopã€‚</p><h1 id="æ€§èƒ½å¯¹æ¯”"><a href="#æ€§èƒ½å¯¹æ¯”" class="headerlink" title="æ€§èƒ½å¯¹æ¯”"></a>æ€§èƒ½å¯¹æ¯”</h1><p>JDK1.8åšäº†å¤šæ–¹é¢çš„ä¼˜åŒ–ï¼Œæ€»ä½“æ€§èƒ½ä¼˜äºJDK1.7ã€‚å…·ä½“è¯¦è§å‚è€ƒèµ„æ–™1</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://tech.meituan.com/2016/06/24/java-hashmap.html">Java 8ç³»åˆ—ä¹‹é‡æ–°è®¤è¯†HashMap</a></li><li></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h1&gt;&lt;p&gt;Javaä¸ºæ•°æ®ç»“æ„ä¸­çš„æ˜ å°„å®šä¹‰äº†ä¸€ä¸ªæ¥å£java.util.Mapï¼Œæ­¤æ¥å£ä¸»è¦æœ‰å››ä¸ªå¸¸ç”¨çš„å®ç°ç±»ï¼Œåˆ†åˆ«æ˜¯HashMapã€Hashtableã€</summary>
      
    
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/categories/Java/"/>
    
    <category term="é›†åˆ" scheme="https://gmet233.gitee.io/categories/Java/%E9%9B%86%E5%90%88/"/>
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/tags/Java/"/>
    
    <category term="HashMap" scheme="https://gmet233.gitee.io/tags/HashMap/"/>
    
  </entry>
  
  <entry>
    <title>åŒ»å­¦å½±åƒå¤„ç†ï¼šå°†NIIæ ¼å¼çš„CTå›¾è½¬æ¢ä¸ºPNG</title>
    <link href="https://gmet233.gitee.io/2022/04/12/%E5%8C%BB%E5%AD%A6%E5%BD%B1%E5%83%8F%E5%A4%84%E7%90%86%EF%BC%9A%E5%B0%86NII%E6%A0%BC%E5%BC%8F%E7%9A%84CT%E5%9B%BE%E8%BD%AC%E6%8D%A2%E4%B8%BAPNG/"/>
    <id>https://gmet233.gitee.io/2022/04/12/%E5%8C%BB%E5%AD%A6%E5%BD%B1%E5%83%8F%E5%A4%84%E7%90%86%EF%BC%9A%E5%B0%86NII%E6%A0%BC%E5%BC%8F%E7%9A%84CT%E5%9B%BE%E8%BD%AC%E6%8D%A2%E4%B8%BAPNG/</id>
    <published>2022-04-12T15:04:13.000Z</published>
    <updated>2022-04-12T15:50:57.473Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ç›®æ ‡"><a href="#ç›®æ ‡" class="headerlink" title="ç›®æ ‡"></a>ç›®æ ‡</h1><p>æœ¬æ–‡ä½¿ç”¨Pythonè¿›è¡ŒåŒ»å­¦å½±åƒå¤„ç†ï¼šé€šè¿‡æ—‹è½¬ã€åˆ‡ç‰‡ã€è°ƒæ•´çª—å®½çª—ä½ï¼Œå°†3D NIIæ ¼å¼çš„<strong>è‚ºéƒ¨</strong>CTå½±åƒè½¬ä¸º2D PNGæ ¼å¼å›¾åƒã€‚</p><p>ä¸‹é¢ä»‹ç»æµç¨‹ã€‚</p><p>===</p><h1 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h1><p>==</p><h2 id="è¯»å–NIIå›¾åƒ"><a href="#è¯»å–NIIå›¾åƒ" class="headerlink" title="è¯»å–NIIå›¾åƒ"></a>è¯»å–NIIå›¾åƒ</h2><p>ä¸€èˆ¬ä½¿ç”¨<code>nibabel</code>æ¥è¯»NIIæ ¼å¼å›¾åƒã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> nibabel <span class="keyword">as</span> nib</span><br><span class="line">img = nib.load(img_path)</span><br><span class="line"><span class="comment"># è·å¾—å›¾åƒçš„ndarray</span></span><br><span class="line">img_fdata = img.get_fdata()</span><br></pre></td></tr></table></figure><p>==</p><h2 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h2><p>å°†3Då›¾ä»¥zè½´åˆ†ç‰‡ä¸ºè‹¥å¹²2Då›¾ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">(x, y, z) = img.shape</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(z):</span><br><span class="line">silce = img_fdata[:, :, i]</span><br></pre></td></tr></table></figure><p>==</p><h2 id="è°ƒæ•´çª—å®½çª—ä½1"><a href="#è°ƒæ•´çª—å®½çª—ä½1" class="headerlink" title="è°ƒæ•´çª—å®½çª—ä½1"></a>è°ƒæ•´çª—å®½çª—ä½1</h2><p>çª—å®½çª—ä½çš„åŸºæœ¬æ¦‚å¿µè¯¦è§ï¼š<a href="https://www.zhihu.com/question/33587197">https://www.zhihu.com/question/33587197</a></p><p>ç®€å•æ¥è¯´ï¼Œä¸åŒçš„çª—å®½çª—ä½ä½¿å¾—ä¸åŒçš„ç»„ç»‡å™¨å®˜å±•ç¤ºçš„æ›´æ¸…æ¥šã€‚</p><p>è¿™é‡Œï¼Œæˆ‘å¤„ç†çš„æ˜¯è‚ºéƒ¨CTï¼Œä¸åŒéƒ¨ä½çš„å¯¹åº”ä¸åŒçš„çª—å®½çª—ä½ã€‚</p><p>==</p><h2 id="è°ƒæ•´çª—å®½çª—ä½2"><a href="#è°ƒæ•´çª—å®½çª—ä½2" class="headerlink" title="è°ƒæ•´çª—å®½çª—ä½2"></a>è°ƒæ•´çª—å®½çª—ä½2</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">center = -<span class="number">500</span> <span class="comment">#è‚ºéƒ¨çš„çª—å®½çª—ä½</span></span><br><span class="line">width = <span class="number">1500</span></span><br><span class="line"><span class="built_in">min</span> = (<span class="number">2</span> * center - width) / <span class="number">2.0</span> + <span class="number">0.5</span></span><br><span class="line"><span class="built_in">max</span> = (<span class="number">2</span> * center + width) / <span class="number">2.0</span> + <span class="number">0.5</span></span><br><span class="line">dFactor = <span class="number">255.0</span> / (<span class="built_in">max</span> - <span class="built_in">min</span>)</span><br><span class="line"></span><br><span class="line">silce = silce - <span class="built_in">min</span></span><br><span class="line">silce =np.trunc( silce * dFactor)</span><br><span class="line"><span class="comment"># ç”±äºRGBæ ¼å¼çš„è¦æ±‚ï¼Œè¿™é‡Œå¯¹ä¸åœ¨[0~255]çš„åƒç´ å€¼è¿›è¡Œæˆªæ–­</span></span><br><span class="line">silce[silce &lt; <span class="number">0.0</span>] = <span class="number">0</span></span><br><span class="line">silce[silce &gt; <span class="number">255.0</span>] = <span class="number">255</span>  <span class="comment"># è½¬æ¢ä¸ºçª—ä½çª—ä½ä¹‹åçš„æ•°æ®</span></span><br></pre></td></tr></table></figure><p>==</p><h2 id="æ—‹è½¬"><a href="#æ—‹è½¬" class="headerlink" title="æ—‹è½¬"></a>æ—‹è½¬</h2><p>æ—‹è½¬90Â°è®©å›¾åƒâ€œæ­£â€è¿‡æ¥</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">silce = np.fliplr(np.rot90(silce,-<span class="number">1</span>))</span><br></pre></td></tr></table></figure><p>==</p><h2 id="ä¿å­˜PNG"><a href="#ä¿å­˜PNG" class="headerlink" title="ä¿å­˜PNG"></a>ä¿å­˜PNG</h2><p>ç•¥</p><p>=== </p><h1 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h1><p>==</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> nibabel <span class="keyword">as</span> nib</span><br><span class="line"><span class="keyword">import</span> imageio  </span><br><span class="line"></span><br><span class="line"><span class="comment">#è‚ºéƒ¨çš„çª—å®½çª—ä½</span></span><br><span class="line">center = -<span class="number">500</span> </span><br><span class="line">width = <span class="number">1500</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">nii_to_image</span>(<span class="params">src_path, dst_path</span>):</span><br><span class="line"><span class="keyword">for</span> p, d, f <span class="keyword">in</span> os.walk(src_path):</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(f) &gt; <span class="number">0</span>:</span><br><span class="line"><span class="keyword">for</span> file_name <span class="keyword">in</span> f:</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> file_name.endswith(<span class="string">&quot;.nii&quot;</span>):</span><br><span class="line"><span class="keyword">continue</span></span><br><span class="line"><span class="comment"># å¼€å§‹è¯»å–niiæ–‡ä»¶</span></span><br><span class="line">img_path = os.path.join(p, file_name)</span><br><span class="line">img = nib.load(img_path)</span><br><span class="line">img_fdata = img.get_fdata()</span><br><span class="line"><span class="comment"># æ–°å»ºæ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(dst_path):</span><br><span class="line">os.mkdir(dst_path)</span><br><span class="line"><span class="comment"># è½¬æ¢æˆçª—å®½çª—ä½</span></span><br><span class="line"><span class="built_in">min</span> = (<span class="number">2</span> * center - width) / <span class="number">2.0</span> + <span class="number">0.5</span></span><br><span class="line"><span class="built_in">max</span> = (<span class="number">2</span> * center + width) / <span class="number">2.0</span> + <span class="number">0.5</span></span><br><span class="line">dFactor = <span class="number">255.0</span> / (<span class="built_in">max</span> - <span class="built_in">min</span>)</span><br><span class="line"><span class="comment"># å¼€å§‹è½¬æ¢ä¸ºå›¾åƒ</span></span><br><span class="line">(x, y, z) = img.shape</span><br><span class="line"><span class="comment"># zæ˜¯å›¾åƒçš„åºåˆ—</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(z):</span><br><span class="line">silce = img_fdata[:, :, i]</span><br><span class="line"><span class="comment"># åè½¬ï¼Œæ—‹è½¬90Â°</span></span><br><span class="line">silce = np.fliplr(np.rot90(silce,-<span class="number">1</span>)) </span><br><span class="line">silce = silce - <span class="built_in">min</span></span><br><span class="line">silce =np.trunc( silce * dFactor)</span><br><span class="line">silce[silce &lt; <span class="number">0.0</span>] = <span class="number">0</span></span><br><span class="line">silce[silce &gt; <span class="number">255.0</span>] = <span class="number">255</span> </span><br><span class="line"><span class="comment"># maskimg_slice = maskimg_fdata[:,:,i]</span></span><br><span class="line">temp = file_name.replace(<span class="string">&quot;.nii&quot;</span>, <span class="string">&quot;&quot;</span>)+<span class="string">&quot;_&quot;</span> + <span class="string">&#x27;&#123;&#125;.png&#x27;</span>.<span class="built_in">format</span>(i)</span><br><span class="line">imageio.imwrite(os.path.join(dst_path, temp), silce.astype(<span class="string">&#x27;uint8&#x27;</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">src_path = <span class="string">&#x27;NIIä¿å­˜æ–‡ä»¶å¤¹&#x27;</span></span><br><span class="line">dst_path = <span class="string">&#x27;PNGä¿å­˜æ–‡ä»¶å¤¹&#x27;</span></span><br><span class="line">nii_to_image(src_path, dst_path)</span><br></pre></td></tr></table></figure><p>===</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><p>==</p><ol><li><a href="https://www.zhihu.com/question/33587197">CTçš„çª—å®½ï¼Œçª—ä½åˆ°åº•æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ</a></li><li><a href="https://blog.csdn.net/Zzhouzhou237/article/details/105345048">python nii å›¾åƒè¯»å–ï¼Œè½¬æ¢æˆCT å€¼ï¼Œè®¾ç½®çª—å®½çª—ä½ï¼Œä¿å­˜æˆpng å›¾åƒ</a></li></ol><p>===</p><h1 id="Thanks"><a href="#Thanks" class="headerlink" title="Thanks~"></a>Thanks~</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ç›®æ ‡&quot;&gt;&lt;a href=&quot;#ç›®æ ‡&quot; class=&quot;headerlink&quot; title=&quot;ç›®æ ‡&quot;&gt;&lt;/a&gt;ç›®æ ‡&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡ä½¿ç”¨Pythonè¿›è¡ŒåŒ»å­¦å½±åƒå¤„ç†ï¼šé€šè¿‡æ—‹è½¬ã€åˆ‡ç‰‡ã€è°ƒæ•´çª—å®½çª—ä½ï¼Œå°†3D NIIæ ¼å¼çš„&lt;strong&gt;è‚ºéƒ¨&lt;/strong&gt;CTå½±åƒè½¬ä¸º2</summary>
      
    
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="å›¾åƒå¤„ç†" scheme="https://gmet233.gitee.io/tags/%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"/>
    
  </entry>
  
  <entry>
    <title>å®Œç¾è§£å†³ChromeDriverä¸Chromeç‰ˆæœ¬åŒ¹é…é—®é¢˜</title>
    <link href="https://gmet233.gitee.io/2022/04/11/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3ChromeDriver%E4%B8%8EChrome%E7%89%88%E6%9C%AC%E5%8C%B9%E9%85%8D%E9%97%AE%E9%A2%98/"/>
    <id>https://gmet233.gitee.io/2022/04/11/%E5%AE%8C%E7%BE%8E%E8%A7%A3%E5%86%B3ChromeDriver%E4%B8%8EChrome%E7%89%88%E6%9C%AC%E5%8C%B9%E9%85%8D%E9%97%AE%E9%A2%98/</id>
    <published>2022-04-11T14:47:58.000Z</published>
    <updated>2022-04-11T14:53:41.897Z</updated>
    
    <content type="html"><![CDATA[<p>åœ¨ä½¿ç”¨Seleniumè°ƒç”¨Chromeæµè§ˆå™¨çˆ¬å–äº’è”ç½‘æ•°æ®æ—¶ï¼Œä¼šé‡åˆ°Chromeå’ŒChromeDriverç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼Œå¯¼è‡´çˆ¬å–å¤±è´¥ã€‚</p><p>ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œè¿›è¡Œç‰ˆæœ¬åŒ¹é…ã€‚ä½†æ˜¯éšç€æœ¬æœºChromeçš„æ›´æ–°ï¼Œæ¯æ¬¡éƒ½éœ€è¦éšä¹‹æ›´æ–°ChromeDriverç‰ˆæœ¬ã€‚</p><p>æ›´å¥½çš„æ–¹æ¡ˆæ˜¯ï¼Œé€šè¿‡ä½¿ç”¨<code>webdriver-manager</code>æ¥è‡ªåŠ¨åŒ¹é…ChromeDriverï¼Œå®‰è£…ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install webdriver-manager</span><br></pre></td></tr></table></figure><p>Usageï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> webdriver_manager.chrome <span class="keyword">import</span> ChromeDriverManager</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(ChromeDriverManager().install())</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://stackoverflow.com/questions/60296873/sessionnotcreatedexception-message-session-not-created-this-version-of-chrome">SessionNotCreatedException: Message: session not created: This version of ChromeDriver only supports Chrome version 81</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;åœ¨ä½¿ç”¨Seleniumè°ƒç”¨Chromeæµè§ˆå™¨çˆ¬å–äº’è”ç½‘æ•°æ®æ—¶ï¼Œä¼šé‡åˆ°Chromeå’ŒChromeDriverç‰ˆæœ¬ä¸å…¼å®¹çš„é—®é¢˜ï¼Œå¯¼è‡´çˆ¬å–å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç§è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œè¿›è¡Œç‰ˆæœ¬åŒ¹é…ã€‚ä½†æ˜¯éšç€æœ¬æœºChromeçš„æ›´æ–°ï¼Œæ¯æ¬¡éƒ½éœ€è¦éšä¹‹æ›´æ–°ChromeDriverç‰ˆæœ¬ã€‚&lt;/p&gt;
</summary>
      
    
    
    
    <category term="ç½‘ç»œçˆ¬è™«" scheme="https://gmet233.gitee.io/categories/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"/>
    
    
    <category term="ç½‘ç»œçˆ¬è™«" scheme="https://gmet233.gitee.io/tags/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"/>
    
    <category term="Selenium" scheme="https://gmet233.gitee.io/tags/Selenium/"/>
    
  </entry>
  
  <entry>
    <title>test_slides</title>
    <link href="https://gmet233.gitee.io/2022/04/11/test-slides/"/>
    <id>https://gmet233.gitee.io/2022/04/11/test-slides/</id>
    <published>2022-04-11T12:59:15.000Z</published>
    <updated>2022-04-11T13:01:32.660Z</updated>
    
    <content type="html"><![CDATA[<h1 id="è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢"><a href="#è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢" class="headerlink" title="è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢"></a>è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢</h1><p>===</p><p>å®ƒå¯ä»¥æŠŠmarkdownæ¸²æŸ“çš„åƒå¹»ç¯ç‰‡ä¸€æ ·</p><p>==</p><p>è¿˜æœ‰å‚ç›´åˆ‡æ¢</p><p>==</p><p>è¿˜å¯ä»¥åˆ‡æ¢èƒŒæ™¯ç­‰ã€‚</p><p>===</p><p>Have Fun~</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢&quot;&gt;&lt;a href=&quot;#è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢&quot; class=&quot;headerlink&quot; title=&quot;è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢&quot;&gt;&lt;/a&gt;è¿™æ˜¯ä¸€ä¸ªslidesæµ‹è¯•åšå®¢&lt;/h1&gt;&lt;p&gt;===&lt;/p&gt;
&lt;p&gt;å®ƒå¯ä»¥æŠŠmarkdow</summary>
      
    
    
    
    
    <category term="æµ‹è¯•" scheme="https://gmet233.gitee.io/tags/%E6%B5%8B%E8%AF%95/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºResNetçš„æ ‘å¶åˆ†ç±»ä»»åŠ¡</title>
    <link href="https://gmet233.gitee.io/2022/04/04/%E5%9F%BA%E4%BA%8EResNet%E7%9A%84%E6%A0%91%E5%8F%B6%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1/"/>
    <id>https://gmet233.gitee.io/2022/04/04/%E5%9F%BA%E4%BA%8EResNet%E7%9A%84%E6%A0%91%E5%8F%B6%E5%88%86%E7%B1%BB%E4%BB%BB%E5%8A%A1/</id>
    <published>2022-04-04T03:16:17.000Z</published>
    <updated>2022-04-04T09:17:56.792Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><blockquote><p>æœ¬æ–‡ä»»åŠ¡ã€æ•°æ®é›†æ¥æºäºã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹è¯¾ç¨‹ä¸­çš„æ ‘å¶åˆ†ç±»ç«èµ›ã€‚è¯¦è§å‚è€ƒèµ„æ–™1</p><p>æœ¬æ–‡ä»£ç ä¸»è¦å‚è€ƒkaggleç”¨æˆ·nekokikuç»™å‡ºçš„resnet baselineã€‚è¯¦è§å‚è€ƒèµ„æ–™2</p><p>é€šè¿‡æœ¬æ¬¡ç«èµ›å’Œä»£ç å¯ä»¥å­¦ä¹ åˆ°ï¼š</p><ul><li>ç®€å•çš„PyTorchæ·±åº¦å­¦ä¹ é¡¹ç›®ä»£ç ã€ç»“æ„æ˜¯æ€æ ·çš„</li><li>å¦‚ä½•ç»§æ‰¿PyTorchä¸­çš„Dataset, DataLoaderå®ç°è‡ªå·±çš„Dataset, DataLoaderç±»</li><li>å¦‚ä½•ä½¿ç”¨PyTorchå¿«é€Ÿå®ç°ResNetæ¨¡å‹ã€‚</li></ul></blockquote><h1 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h1><p>åˆ†æbaseline codeï¼Œæ€»ç»“ä¸€ä¸‹æ·±åº¦å­¦ä¹ çš„ä»£ç æµç¨‹ã€‚</p><ol><li>å¤„ç†æ•°æ®ï¼šåŒ…æ‹¬å…ƒæ•°æ®å’Œå›¾åƒæ•°æ®ã€‚æ¯”å¦‚çœ‹çœ‹æ•°æ®çš„æ ·å­ï¼Œæ ‡ç­¾çš„åˆ†å¸ƒï¼Œunique æ ‡ç­¾çš„æ•°é‡ç­‰ã€‚</li><li>å®ç°è‡ªå·±çš„Datasetã€DataLoaderç±»</li><li>CPU OR GPU</li><li>å®šä¹‰æ¨¡å‹</li><li>å®šä¹‰è¶…å‚æ•°ï¼šå­¦ä¹ ç‡ç­‰</li><li>train&amp;valid</li><li>ä½¿ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œé¢„æµ‹ã€‚</li></ol><h1 id="ç»“æ„"><a href="#ç»“æ„" class="headerlink" title="ç»“æ„"></a>ç»“æ„</h1><p>é’ˆå¯¹æœ¬æ¬¡ä»»åŠ¡é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">leaves_classification_competition/</span><br><span class="line">â””â”€data/</span><br><span class="line">    â””â”€classify-leaves/</span><br><span class="line">        â””â”€images/</span><br><span class="line">â””â”€train.csv</span><br><span class="line">â””â”€test.csv</span><br><span class="line">â””â”€script.ipynb</span><br></pre></td></tr></table></figure><p><code>data/</code>ç›®å½•ä¸‹æ˜¯æœ¬æ¬¡ä»»åŠ¡ç”¨åˆ°çš„æ•°æ®ã€‚å°†ä»kaggleä¸Šä¸‹è½½çš„æ•°æ®å‹ç¼©åŒ…è§£å‹åˆ°æœ¬æ–‡ä»¶å¤¹ã€‚</p><p><code>script.ipynb</code>æ˜¯ä»£ç è„šæœ¬ã€‚</p><p>åœ¨æ›´å¤§çš„è®­ç»ƒä¸­ï¼Œä»£ç åº”è¯¥æ‹†åˆ†ä¸ºå„ç§<code>.py</code>æ–‡ä»¶ã€‚</p><h1 id="baseline"><a href="#baseline" class="headerlink" title="baseline"></a>baseline</h1><h2 id="å¯¼å…¥åŒ…"><a href="#å¯¼å…¥åŒ…" class="headerlink" title="å¯¼å…¥åŒ…"></a>å¯¼å…¥åŒ…</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># é¦–å…ˆå¯¼å…¥åŒ…</span></span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">import</span> torch.nn <span class="keyword">as</span> nn</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> torch.utils.data <span class="keyword">import</span> Dataset, DataLoader</span><br><span class="line"><span class="keyword">from</span> torchvision <span class="keyword">import</span> transforms</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> torchvision.models <span class="keyword">as</span> models</span><br><span class="line"><span class="comment"># This is for the progress bar.</span></span><br><span class="line"><span class="keyword">from</span> tqdm <span class="keyword">import</span> tqdm</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®å¤„ç†"><a href="#æ•°æ®å¤„ç†" class="headerlink" title="æ•°æ®å¤„ç†"></a>æ•°æ®å¤„ç†</h2><p>çœ‹ä¸€çœ‹train.csvé•¿ä»€ä¹ˆæ ·</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">DATA_BASE_PATH = <span class="string">&#x27;./data/classify-leaves/&#x27;</span></span><br><span class="line"><span class="comment"># labelæ–‡ä»¶</span></span><br><span class="line">labels_df = pd.read_csv(os.path.join(DATA_BASE_PATH, <span class="string">&#x27;train.csv&#x27;</span>))</span><br><span class="line">labels_df.head()</span><br><span class="line"><span class="comment"># len(labels_df)</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">labels_df.describe()</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æŠŠæ ‘å¶çš„æ ‡ç­¾å»é‡æ˜ å°„ä¸ºæ•°å€¼</span></span><br><span class="line">leaves_labels = <span class="built_in">sorted</span>(<span class="built_in">list</span>(<span class="built_in">set</span>(labels_df[<span class="string">&#x27;label&#x27;</span>])))</span><br><span class="line">n_classes = <span class="built_in">len</span>(leaves_labels)</span><br><span class="line">class2num = <span class="built_in">dict</span>(<span class="built_in">zip</span>(leaves_labels, <span class="built_in">range</span>(n_classes)))</span><br><span class="line">class2num</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#x27;abies_concolor&#x27;: 0,</span><br><span class="line"> &#x27;abies_nordmanniana&#x27;: 1,</span><br><span class="line"> &#x27;acer_campestre&#x27;: 2,</span><br><span class="line">â€¦â€¦</span><br><span class="line"> &#x27;zelkova_serrata&#x27;: 175&#125;</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è½¬æ¢æˆkeyä¸ºæ•°å­—ï¼Œvalä¸ºæ ‘å¶ç±»å‹ï¼Œæ–¹ä¾¿é¢„æµ‹ã€‚</span></span><br><span class="line">num2class = &#123;v:k <span class="keyword">for</span> k, v <span class="keyword">in</span> class2num.items()&#125;</span><br><span class="line">num2class</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;0: &#x27;abies_concolor&#x27;,</span><br><span class="line"> 1: &#x27;abies_nordmanniana&#x27;,</span><br><span class="line"> 2: &#x27;acer_campestre&#x27;,</span><br><span class="line"> 3: &#x27;acer_ginnala&#x27;,</span><br><span class="line"> 4: &#x27;acer_griseum&#x27;,</span><br><span class="line">â€¦â€¦</span><br><span class="line"> 175: &#x27;zelkova_serrata&#x27;&#125;</span><br></pre></td></tr></table></figure><h2 id="å®ç°Dataset"><a href="#å®ç°Dataset" class="headerlink" title="å®ç°Dataset"></a>å®ç°Dataset</h2><p>ç»§æ‰¿Datasetç±»ï¼Œå®ç°è‡ªå·±çš„Datasetã€‚ç»§æ‰¿ä¹‹åï¼Œéœ€è¦å®ç°ä¸‰ä¸ªå‡½æ•°</p><ul><li><code>__init__</code>ï¼šä¼ å…¥å¿…è¦çš„å‚æ•°ï¼Œåˆå§‹åŒ–ï¼›</li><li><code>__getitem__</code>ï¼šè¿”å›itemï¼Œå¦‚æœæ˜¯trainæˆ–è€…validåˆ™è¿”å›imgå’Œlabelï¼Œå¦‚æœæ˜¯teståˆ™è¿”å›img</li><li><code>__len__</code>ï¼šæ•°æ®é›†é•¿åº¦</li><li>æ›´å¤šå‚è§å‚è€ƒèµ„æ–™3</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ç»§æ‰¿Datasetç±»ã€‚</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LeaveDataSet</span>(<span class="title class_ inherited__">Dataset</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, csv_path, img_path, mode=<span class="string">&#x27;train&#x27;</span>, valid_ratio = <span class="number">0.2</span>, resize_height = <span class="number">256</span>, resize_width = <span class="number">256</span></span>):</span><br><span class="line">        <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">        Args:</span></span><br><span class="line"><span class="string">          csv_path: labelæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="string">          img_path: å›¾ç‰‡å­˜æ”¾è·¯å¾„</span></span><br><span class="line"><span class="string">          mode: è®­ç»ƒæ¨¡å¼è¿˜æ˜¯æµ‹è¯•æ¨¡å¼</span></span><br><span class="line"><span class="string">          valid_ratio: éªŒè¯é›†æ¯”ä¾‹</span></span><br><span class="line"><span class="string">        &quot;&quot;&quot;</span></span><br><span class="line">        self.img_path = img_path</span><br><span class="line">        self.mode = mode</span><br><span class="line">        self.data_info = pd.read_csv(csv_path)</span><br><span class="line">        self.data_len = <span class="built_in">len</span>(self.data_info)</span><br><span class="line">        self.train_len = <span class="built_in">int</span>(self.data_len * (<span class="number">1</span> - valid_ratio))</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> mode == <span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">            <span class="comment"># ä¸ºå•¥è¦è½¬æˆnparray</span></span><br><span class="line">            self.train_image = np.asarray(self.data_info.iloc[:self.train_len, <span class="number">0</span>])</span><br><span class="line">            self.train_label = np.asarray(self.data_info.iloc[:self.train_len, <span class="number">1</span>])</span><br><span class="line">            <span class="comment"># ä¸ºäº†åœ¨ä¸åŒæ¨¡å¼ä¸‹ç»Ÿä¸€å˜é‡</span></span><br><span class="line">            self.image_arr = self.train_image</span><br><span class="line">            self.label_arr = self.train_label</span><br><span class="line"></span><br><span class="line">        <span class="keyword">elif</span> mode == <span class="string">&#x27;valid&#x27;</span>:</span><br><span class="line">            self.valid_image = np.asarray(self.data_info.iloc[self.train_len:,<span class="number">0</span>])</span><br><span class="line">            self.valid_label = np.asarray(self.data_info.iloc[self.train_len:,<span class="number">1</span>])</span><br><span class="line">            self.image_arr = self.valid_image</span><br><span class="line">            self.label_arr = self.valid_label</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.test_image = np.asarray(self.data_info.iloc[:,<span class="number">0</span>])</span><br><span class="line">            self.image_arr = self.test_image</span><br><span class="line">            <span class="comment">#test æ²¡æœ‰label</span></span><br><span class="line">        self.real_len = <span class="built_in">len</span>(self.image_arr)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Finished reading the &#123;&#125; set of Leaves Dataset. (&#123;&#125; samples found)&quot;</span>.<span class="built_in">format</span>(mode, self.real_len))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__getitem__</span>(<span class="params">self, index</span>):</span><br><span class="line"></span><br><span class="line">        single_image_name = self.image_arr[index]</span><br><span class="line">        img_as_img = Image.<span class="built_in">open</span>(os.path.join(self.img_path, single_image_name))</span><br><span class="line">        <span class="keyword">if</span> self.mode == <span class="string">&#x27;train&#x27;</span>:</span><br><span class="line">            transform = transforms.Compose([</span><br><span class="line">                transforms.Resize((<span class="number">224</span>, <span class="number">224</span>)),</span><br><span class="line">                transforms.RandomHorizontalFlip(p=<span class="number">0.5</span>),   <span class="comment">#éšæœºæ°´å¹³ç¿»è½¬ é€‰æ‹©ä¸€ä¸ªæ¦‚ç‡</span></span><br><span class="line">                transforms.ToTensor()</span><br><span class="line">            ])</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="comment"># validå’Œtestä¸åšæ•°æ®å¢å¼º</span></span><br><span class="line">            transform = transforms.Compose([</span><br><span class="line">                transforms.Resize((<span class="number">224</span>, <span class="number">224</span>)),</span><br><span class="line">                transforms.ToTensor()</span><br><span class="line">            ])</span><br><span class="line">        img_as_img = transform(img_as_img)</span><br><span class="line">        <span class="comment"># å…ˆä¸åšå›¾åƒè£å‰ªï¼Œå¢å¼ºå’Œç°åº¦å¤„ç†</span></span><br><span class="line">        <span class="keyword">if</span> self.mode == <span class="string">&#x27;test&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> img_as_img</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            label = self.label_arr[index]</span><br><span class="line">            <span class="comment"># labelè½¬æ•°å­—</span></span><br><span class="line">            number_label = class2num[label]</span><br><span class="line">            <span class="keyword">return</span> img_as_img, number_label</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__len__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="keyword">return</span> self.real_len</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç”Ÿæˆdatasetå¯¹è±¡</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">train_csv_path = <span class="string">&#x27;./data/classify-leaves/train.csv&#x27;</span></span><br><span class="line">test_csv_path = <span class="string">&#x27;./data/classify-leaves/test.csv&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># csvæ–‡ä»¶ä¸­å·²ç»imagesçš„è·¯å¾„äº†ï¼Œå› æ­¤è¿™é‡Œåªåˆ°ä¸Šä¸€çº§ç›®å½•</span></span><br><span class="line"></span><br><span class="line">img_path = <span class="string">&#x27;./data/classify-leaves/&#x27;</span></span><br><span class="line"></span><br><span class="line">train_dataset = LeaveDataSet(train_csv_path, img_path, mode=<span class="string">&#x27;train&#x27;</span>)</span><br><span class="line">test_dataset = LeaveDataSet(train_csv_path, img_path, mode=<span class="string">&#x27;test&#x27;</span>)</span><br><span class="line">valid_dataset = LeaveDataSet(train_csv_path, img_path, mode=<span class="string">&#x27;valid&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Finished reading the train set of Leaves Dataset (14681 samples found)</span><br><span class="line">Finished reading the test set of Leaves Dataset (18353 samples found)</span><br><span class="line">Finished reading the valid set of Leaves Dataset (3672 samples found)</span><br></pre></td></tr></table></figure><h2 id="å®ç°Dataloader"><a href="#å®ç°Dataloader" class="headerlink" title="å®ç°Dataloader"></a>å®ç°Dataloader</h2><p>å®šä¹‰trainï¼Œvalidï¼Œtestçš„dataloaderï¼Œå‚æ•°è¯¦è§å‚è€ƒèµ„æ–™4</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰ data loader</span></span><br><span class="line"><span class="comment"># dataloader å‚æ•°è¯¦è§£ï¼šhttps://blog.csdn.net/qq_36653505/article/details/84728855</span></span><br><span class="line"></span><br><span class="line">train_loader = DataLoader(</span><br><span class="line">    dataset=train_dataset,</span><br><span class="line">    batch_size=<span class="number">8</span>,</span><br><span class="line">    shuffle=<span class="literal">False</span>,</span><br><span class="line">    num_workers=<span class="number">5</span> <span class="comment"># ä½¿ç”¨nums_workersä¸ªçº¿ç¨‹è¯»æ•°æ®</span></span><br><span class="line">)</span><br><span class="line">valid_loader = DataLoader(</span><br><span class="line">    dataset=valid_dataset,</span><br><span class="line">    batch_size=<span class="number">8</span>,</span><br><span class="line">    shuffle=<span class="literal">False</span>,</span><br><span class="line">    num_workers=<span class="number">5</span></span><br><span class="line">)</span><br><span class="line">test_loader = DataLoader(</span><br><span class="line">    dataset=test_dataset,</span><br><span class="line">    batch_size=<span class="number">8</span>,</span><br><span class="line">    shuffle=<span class="literal">False</span>,</span><br><span class="line">    num_workers=<span class="number">5</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h2 id="è·å–GPU"><a href="#è·å–GPU" class="headerlink" title="è·å–GPU"></a>è·å–GPU</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># CPU OR GPU</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">get_device</span>():</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;cuda&#x27;</span> <span class="keyword">if</span> torch.cuda.is_available() <span class="keyword">else</span> <span class="string">&#x27;cpu&#x27;</span></span><br><span class="line"></span><br><span class="line">device = get_device()</span><br><span class="line"><span class="built_in">print</span>(device)</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cuda</span><br></pre></td></tr></table></figure><h2 id="å®šä¹‰æ¨¡å‹"><a href="#å®šä¹‰æ¨¡å‹" class="headerlink" title="å®šä¹‰æ¨¡å‹"></a>å®šä¹‰æ¨¡å‹</h2><p>è¿™é‡Œæ¨¡å‹ä½¿ç”¨resnet34</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å®šä¹‰resnet34</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">num_classes: ä¼ å…¥åˆ†ç±»ä»»åŠ¡çš„ç±»åˆ«æ•°ï¼Œç”±ä¸Šé¢çš„æ•°æ®å¯çŸ¥ï¼Œä¸€å…±æœ‰176ç§æ ‘å¶ï¼Œæ‰€ä»¥ä¸€ä¼šè°ƒç”¨è¯¥å‡½æ•°è¿”å›æ¨¡å‹æ—¶ï¼Œä¼ å…¥çš„num_classeså‚æ•°ä¸º176</span></span><br><span class="line"><span class="string">use_pretrained: æ˜¯å¦ä½¿ç”¨é¢„è®­ç»ƒæ¨¡å‹ã€‚</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">res_model</span>(<span class="params">num_classes, feature_extract = <span class="literal">False</span>, use_pretrained = <span class="literal">False</span></span>):</span><br><span class="line">    model_ft = models.resnet34(pretrained=use_pretrained)</span><br><span class="line">    <span class="comment"># set_parameter_requires_grad(model_ft, feature_extract)</span></span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯æƒ³è¦æŠŠåŸå§‹æ¨¡å‹çš„æœ€åä¸€å±‚å…¨è¿æ¥å±‚æ›¿æ¢æ‰ï¼Œæ›¿æ¢æˆè¾“å‡ºç±»åˆ«ä¸ºnum_classesçš„å…¨è¿æ¥å±‚ã€‚</span></span><br><span class="line">    <span class="comment"># ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹æˆ‘ä»¬éœ€è¦å…ˆçŸ¥é“åŸå§‹æ¨¡å‹çš„å…¨è¿æ¥å±‚çš„è¾“å…¥featureç»´åº¦ã€‚</span></span><br><span class="line">    num_ftrs = model_ft.fc.in_features</span><br><span class="line">    model_ft.fc = nn.Sequential(nn.Linear(num_ftrs, num_classes))</span><br><span class="line">    <span class="keyword">return</span> model_ft</span><br></pre></td></tr></table></figure><h2 id="å®šä¹‰è¶…å‚æ•°"><a href="#å®šä¹‰è¶…å‚æ•°" class="headerlink" title="å®šä¹‰è¶…å‚æ•°"></a>å®šä¹‰è¶…å‚æ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è¶…å‚æ•°</span></span><br><span class="line">lr = <span class="number">3e-4</span> <span class="comment">#å­¦ä¹ ç‡</span></span><br><span class="line">weight_decay = <span class="number">1e-3</span></span><br><span class="line">num_epoch = <span class="number">50</span> <span class="comment">#è¿­ä»£è½®æ•°</span></span><br><span class="line">model_path = <span class="string">&#x27;./pre_res_model.ckpt&#x27;</span> <span class="comment"># æ¨¡å‹ä¿å­˜ä½ç½®</span></span><br></pre></td></tr></table></figure><h2 id="train-amp-valid"><a href="#train-amp-valid" class="headerlink" title="train&amp;valid"></a>train&amp;valid</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ¨¡å‹åˆå§‹åŒ–ï¼Œå¹¶æ”¾åˆ°å…·ä½“çš„è®¾å¤‡ä¸­</span></span><br><span class="line">model = res_model(<span class="number">176</span>)</span><br><span class="line"><span class="comment"># å°†æ¨¡å‹æ”¾åˆ°deviceä¸Šã€‚</span></span><br><span class="line">model = model.to(device)</span><br><span class="line">model.device = device <span class="comment"># è¿™è¡Œä»£ç è²Œä¼¼æ²¡ä»€ä¹ˆç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ†ç±»ä»»åŠ¡ä½¿ç”¨äº¤å‰ç†µæŸå¤±ä½œä¸ºè¯„ä¼°æ ‡å‡†</span></span><br><span class="line">criterion = nn.CrossEntropyLoss()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Adamä¼˜åŒ–å™¨</span></span><br><span class="line">optimizer = torch.optim.Adam(model.parameters(), lr = lr, weight_decay= weight_decay)</span><br><span class="line"></span><br><span class="line">n_epochs = num_epoch</span><br><span class="line"></span><br><span class="line">best_acc = <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(n_epochs):</span><br><span class="line">    <span class="comment"># ------- train --------</span></span><br><span class="line">    <span class="comment"># è®­ç»ƒçš„æ—¶å€™ï¼Œè¦è°ƒç”¨è¯¥å‡½æ•°ï¼Œä½¿æ¨¡å‹å¤„äºè®­ç»ƒæ¨¡å¼</span></span><br><span class="line">    model.train()</span><br><span class="line">    <span class="comment"># è®°å½•æ¯æ¬¡ä½¿ç”¨ä¸€ä¸ªbatchè®­ç»ƒåï¼Œæ¨¡å‹çš„æŸå¤±å’Œç²¾ç¡®ç‡ã€‚</span></span><br><span class="line">    train_loss = []</span><br><span class="line">    train_accs = []</span><br><span class="line">    <span class="comment"># tqdmæ˜¯ä¸€ä¸ªæ˜¾ç¤ºè¿›åº¦æ¡çš„å·¥å…·åŒ…ï¼Œä¸ç”¨ç®¡ã€‚</span></span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> tqdm(train_loader):</span><br><span class="line">        <span class="comment"># A batch consists of image data and corresponding labels.</span></span><br><span class="line">        imgs, labels = batch</span><br><span class="line">        <span class="comment"># æŠŠæ•°æ®éƒ½æ”¾åˆ°åŒä¸€ä¸ªdeviceä¸Š</span></span><br><span class="line">        imgs = imgs.to(device)</span><br><span class="line">        labels = labels.to(device)</span><br><span class="line"></span><br><span class="line">        logits = model(imgs)</span><br><span class="line">        <span class="comment"># è®¡ç®—æ¨¡å‹è¾“å‡ºå’ŒçœŸå®labelä¹‹é—´çš„æŸå¤±ï¼Œåå‘ä¼ æ’­ã€‚ã€‚</span></span><br><span class="line">        loss = criterion(logits, labels)</span><br><span class="line">        optimizer.zero_grad()</span><br><span class="line">        loss.backward()</span><br><span class="line">        optimizer.step()</span><br><span class="line">        <span class="comment">#è¿™è¡Œcodeä¸æ˜¯å¾ˆæ‡‚ï¼Œå¤§æ¦‚å°±æ˜¯ç»Ÿè®¡é¢„æµ‹æ­£ç¡®æ ‡ç­¾çš„å æ¯”</span></span><br><span class="line">        <span class="comment"># å¼„æ˜ç™½ï¼šhttps://csbwang.github.io/dl_ch2#2161</span></span><br><span class="line">        acc = (logits.argmax(dim = -<span class="number">1</span>) == labels).<span class="built_in">float</span>().mean()</span><br><span class="line">        </span><br><span class="line">        train_loss.append(loss.item())</span><br><span class="line">        train_accs.append(acc)</span><br><span class="line">    <span class="comment"># è®¡ç®—æœ¬æ¬¡epochåçš„losså’Œacc</span></span><br><span class="line">    train_loss = <span class="built_in">sum</span>(train_loss) / <span class="built_in">len</span>(train_loss)</span><br><span class="line">    train_acc = <span class="built_in">sum</span>(train_accs) / <span class="built_in">len</span>(train_accs)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;[ Train | <span class="subst">&#123;epoch + <span class="number">1</span>:03d&#125;</span>/<span class="subst">&#123;n_epochs:03d&#125;</span> ] loss = <span class="subst">&#123;train_loss:<span class="number">.5</span>f&#125;</span>, acc = <span class="subst">&#123;train_acc:<span class="number">.5</span>f&#125;</span>&quot;</span>)</span><br><span class="line">    <span class="comment"># ------- valid --------</span></span><br><span class="line">    <span class="comment"># éªŒè¯æ—¶ï¼ŒæŠŠæ¨¡å‹è°ƒæˆè¯„ä¼°æ¨¡å¼</span></span><br><span class="line">    model.<span class="built_in">eval</span>()  <span class="comment"># evalå…·ä½“æ˜¯åšä»€ä¹ˆ?</span></span><br><span class="line"></span><br><span class="line">    valid_loss = []</span><br><span class="line">    valid_accs = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> batch <span class="keyword">in</span> tqdm(valid_loader):</span><br><span class="line">        imgs, labels = batch</span><br><span class="line">        <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">            logits = model(imgs.to(device))</span><br><span class="line">        loss = criterion(logits, labels.to(device))</span><br><span class="line"></span><br><span class="line">        <span class="comment"># acc = (logits.argmax(dim = -1) == labels).float().mean()</span></span><br><span class="line">        acc = (logits.argmax(dim = -<span class="number">1</span>) == labels.to(device)).<span class="built_in">float</span>().mean()</span><br><span class="line"></span><br><span class="line">        valid_loss.append(loss.item())</span><br><span class="line">        valid_accs.append(acc)</span><br><span class="line">    </span><br><span class="line">    valid_loss = <span class="built_in">sum</span>(valid_loss) / <span class="built_in">len</span>(valid_loss)</span><br><span class="line">    valid_acc = <span class="built_in">sum</span>(valid_accs) / <span class="built_in">len</span>(valid_accs)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&quot;[ Valid | <span class="subst">&#123;epoch + <span class="number">1</span>:03d&#125;</span>/<span class="subst">&#123;n_epochs:03d&#125;</span> ] loss = <span class="subst">&#123;valid_loss:<span class="number">.5</span>f&#125;</span>, acc = <span class="subst">&#123;valid_acc:<span class="number">.5</span>f&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># å¦‚æœåœ¨éªŒè¯é›†å¾—åˆ°çš„accå¤§äºå·²çŸ¥æœ€å¥½çš„accï¼Œåˆ™ä¿å­˜æ¨¡å‹ã€‚</span></span><br><span class="line">    <span class="keyword">if</span> valid_acc &gt; best_acc:</span><br><span class="line">        best_acc = valid_acc</span><br><span class="line">        torch.save(model.state_dict(), model_path)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;saving model with acc &#123;:.3f&#125;&#x27;</span>.<span class="built_in">format</span>(best_acc))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>//æ§åˆ¶å°è¾“å‡º</p><h2 id="é¢„æµ‹"><a href="#é¢„æµ‹" class="headerlink" title="é¢„æµ‹"></a>é¢„æµ‹</h2><p>ä¸Šé¢å°±æ˜¯è®­ç»ƒè¿‡ç¨‹ï¼Œä¸‹é¢ç”¨è®­ç»ƒå¥½çš„æ¨¡å‹è¿›è¡Œé¢„æµ‹</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">################ </span></span><br><span class="line">saveFileName = <span class="string">&#x27;./data/classify-leaves/submission.csv&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">## predict</span></span><br><span class="line">model = res_model(<span class="number">176</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># create model and load weights from checkpoint</span></span><br><span class="line">model = model.to(device)</span><br><span class="line">model.load_state_dict(torch.load(model_path))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make sure the model is in eval mode.</span></span><br><span class="line"><span class="comment"># Some modules like Dropout or BatchNorm affect if the model is in training mode.</span></span><br><span class="line">model.<span class="built_in">eval</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Initialize a list to store the predictions.</span></span><br><span class="line">predictions = []</span><br><span class="line"><span class="comment"># Iterate the testing set by batches.</span></span><br><span class="line"><span class="keyword">for</span> batch <span class="keyword">in</span> tqdm(test_loader):</span><br><span class="line">    </span><br><span class="line">    imgs = batch</span><br><span class="line">    <span class="keyword">with</span> torch.no_grad():</span><br><span class="line">        logits = model(imgs.to(device))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># Take the class with greatest logit as prediction and record it.</span></span><br><span class="line">    predictions.extend(logits.argmax(dim=-<span class="number">1</span>).cpu().numpy().tolist())</span><br><span class="line"></span><br><span class="line">preds = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> predictions:</span><br><span class="line">    preds.append(num2class[i])</span><br><span class="line"></span><br><span class="line">test_data = pd.read_csv(test_path)</span><br><span class="line">test_data[<span class="string">&#x27;label&#x27;</span>] = pd.Series(preds)</span><br><span class="line">submission = pd.concat([test_data[<span class="string">&#x27;image&#x27;</span>], test_data[<span class="string">&#x27;label&#x27;</span>]], axis=<span class="number">1</span>)</span><br><span class="line">submission.to_csv(saveFileName, index=<span class="literal">False</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Done!!!!!!!!!!!!!!!!!!!!!!!!!!!&quot;</span>)</span><br></pre></td></tr></table></figure><h1 id="æ”¹è¿›æ¨¡å‹"><a href="#æ”¹è¿›æ¨¡å‹" class="headerlink" title="æ”¹è¿›æ¨¡å‹"></a>æ”¹è¿›æ¨¡å‹</h1><p>//TODO</p><h1 id="åæ€"><a href="#åæ€" class="headerlink" title="åæ€"></a>åæ€</h1><p>åˆå­¦æ·±åº¦å­¦ä¹ ï¼Œä»£ç ä¸ŠçŠ¯äº†å¾ˆå¤šç»†èŠ‚ä¸Šçš„é”™è¯¯ã€‚å…¶æ¬¡ï¼Œå¾ˆå¤šç»†èŠ‚é—®é¢˜ä¸æ˜ç™½ï¼Œä¾‹å¦‚ï¼Œä¼˜åŒ–å™¨ï¼Ÿå„ç§è®¡ç®—å…¬å¼ç­‰ã€‚ä»¥åè¦å¼„æ‡‚ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.bilibili.com/video/BV1z64y1o7iz">ç¬¬äºŒéƒ¨åˆ†å®Œç»“ç«èµ›ï¼šå›¾ç‰‡åˆ†ç±»ã€åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ v2ã€‘</a></li><li><a href="https://www.kaggle.com/code/nekokiku/simple-resnet-baseline">nekokiku/simple-resnet-baseline</a></li><li><a href="https://blog.csdn.net/leviopku/article/details/99958182">Pytorchä¸­çš„datasetç±»â€”â€”åˆ›å»ºé€‚åº”ä»»æ„æ¨¡å‹çš„æ•°æ®é›†æ¥å£</a></li><li><a href="https://blog.csdn.net/qq_36653505/article/details/84728855">Pytorch ä¸­çš„æ•°æ®ç±»å‹ torch.utils.data.DataLoader å‚æ•°è¯¦è§£</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡ä»»åŠ¡ã€æ•°æ®é›†æ¥æºäºã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹è¯¾ç¨‹ä¸­çš„æ ‘å¶åˆ†ç±»ç«èµ›ã€‚è¯¦è§å‚è€ƒèµ„æ–™1&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»£ç ä¸»è¦å‚è€ƒkag</summary>
      
    
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>å¤ç°ResNet50ï¼ˆPyTorchï¼‰</title>
    <link href="https://gmet233.gitee.io/2022/03/29/%E5%A4%8D%E7%8E%B0ResNet50%EF%BC%88PyTorch%EF%BC%89/"/>
    <id>https://gmet233.gitee.io/2022/03/29/%E5%A4%8D%E7%8E%B0ResNet50%EF%BC%88PyTorch%EF%BC%89/</id>
    <published>2022-03-29T13:45:17.000Z</published>
    <updated>2022-03-30T13:47:01.221Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬ç¯‡åšå®¢ä»‹ç»äº† ResNet50 ç½‘ç»œ PyTorch å¤ç°ï¼ˆå¤ç°ä»£ç ä¸º PyTorch æºç ï¼‰</p></blockquote><h1 id="èƒŒæ™¯"><a href="#èƒŒæ™¯" class="headerlink" title="èƒŒæ™¯"></a>èƒŒæ™¯</h1><p>Residual Netï¼šæ®‹å·®ç½‘ç»œã€‚</p><p>å°†é å‰è‹¥å¹²å±‚çš„æŸä¸€å±‚æ•°æ®è¾“å‡ºç›´æ¥è·³è¿‡å¤šå±‚å¼•å…¥åˆ°åé¢æ•°æ®å±‚çš„è¾“å…¥éƒ¨åˆ†ã€‚æ„å‘³ç€åé¢çš„ç‰¹å¾å±‚çš„å†…å®¹ä¼šæœ‰ä¸€éƒ¨åˆ†ç”±å…¶å‰é¢çš„æŸä¸€å±‚çº¿æ€§è´¡çŒ®ã€‚</p><p><img src="image-20220329215711900.png" alt="æ®‹å·®å—"></p><p>æ·±åº¦æ®‹å·®ç½‘ç»œçš„è®¾è®¡æ˜¯ä¸ºäº†å…‹æœç”±äºç½‘ç»œæ·±åº¦åŠ æ·±è€Œäº§ç”Ÿçš„å­¦ä¹ æ•ˆç‡å˜ä½ä¸å‡†ç¡®ç‡æ— æ³•æœ‰æ•ˆæå‡çš„é—®é¢˜ã€‚</p><p>ä¸‹é¢è¿™å¼ å›¾æ¥è‡ªå‚è€ƒæ–‡çŒ®[1]ï¼Œç»™å‡ºäº†ResNet18ã€ResNet34ã€ResNet50ã€ResNet101ã€ResNet152çš„å—ç»“æ„ã€‚</p><p><img src="image-20220329220108463.png" alt="ResNet-XX ç½‘ç»œç»“æ„"></p><p>æ ¹æ®è¯¥å›¾ï¼Œæˆ‘ä»¬å¯ä»¥ç”»å‡ºResNet50çš„ç½‘ç»œç»“æ„ï¼Œ</p><p><img src="image-20220329220245960.png" alt="ResNet-50 ç½‘ç»œç»“æ„"></p><p>ç”±ä¸Šè¿°ç½‘ç»œç»“æ„å¯ä»¥çœ‹åˆ°ï¼ŒResNetåŒ…å«ä¸¤ç§Blockï¼šåˆ†åˆ«ä¸º<strong>Conv Block</strong>å’Œ<strong>Identity Block</strong>ã€‚</p><ul><li><strong>Conv Block</strong>è¾“å…¥å’Œè¾“å‡ºçš„ç»´åº¦ï¼ˆé€šé“æ•°å’Œsizeï¼‰æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥ç›¸åŒçš„Conv Blockä¸èƒ½è¿ç»­ä¸²è”ï¼Œå®ƒçš„ä½œç”¨æ˜¯æ”¹å˜ç½‘ç»œçš„ç»´åº¦ï¼›</li><li><strong>Identity Block</strong>è¾“å…¥ç»´åº¦å’Œè¾“å‡ºç»´åº¦ï¼ˆé€šé“æ•°å’Œsizeï¼‰ç›¸åŒï¼Œå¯ä»¥ä¸²è”ï¼Œç”¨äºåŠ æ·±ç½‘ç»œçš„ã€‚</li></ul><p>ä¸‹é¢æ˜¯ä¸¤ç§å—çš„ç»“æ„ï¼š</p><p><img src="image-20220329221454060.png" alt="Conv Block"></p><p><img src="image-20220329221531582.png" alt="Identity Block"></p><p>è¿™ä¸¤ç§å—çš„åŒºåˆ«åœ¨äºæ®‹å·®è¾¹æ˜¯å¦å·ç§¯ã€‚å¦‚æœç»è¿‡$1*1$å·ç§¯ã€‚ç»è¿‡å·ç§¯çš„æ˜¯Conv Blockï¼Œç›´è¿çš„æ˜¯Identity Blockã€‚</p><p>ç¨åç”¨ä¸€ä¸ªç±»<code>Bottleneck</code>å®ç°è¿™ä¸¤ç§å—ã€‚</p><p>ä¸‹é¢å‚è€ƒPyTorchæ¡†æ¶æºç ï¼Œå¯¹ ResNet50  ä¸€æ­¥æ­¥å¤ç°ã€‚</p><h1 id="å¤ç°"><a href="#å¤ç°" class="headerlink" title="å¤ç°"></a>å¤ç°</h1><h2 id="å¯¼åŒ…"><a href="#å¯¼åŒ…" class="headerlink" title="å¯¼åŒ…"></a>å¯¼åŒ…</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br></pre></td></tr></table></figure><h2 id="ResNet50-ç”Ÿæˆå‡½æ•°"><a href="#ResNet50-ç”Ÿæˆå‡½æ•°" class="headerlink" title="ResNet50 ç”Ÿæˆå‡½æ•°"></a>ResNet50 ç”Ÿæˆå‡½æ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">resnet50</span>(<span class="params">pretrained = <span class="literal">False</span>, **kwargs</span>):</span><br><span class="line">    <span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    Constructs a ResNet-50 model.</span></span><br><span class="line"><span class="string">    Args:</span></span><br><span class="line"><span class="string">        pretrained:(bool): If True, return a model pretrained on ImageNet</span></span><br><span class="line"><span class="string">    &#x27;&#x27;&#x27;</span></span><br><span class="line">    model = ResNet(Bottleneck, [<span class="number">3</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">3</span>], **kwargs)</span><br><span class="line">    <span class="keyword">if</span> pretrained:</span><br><span class="line">        <span class="comment"># model.load_state_dict(model_zoo.load_url(model_urls[&#x27;resnet50&#x27;]))</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"></span><br><span class="line">net = resnet50()</span><br></pre></td></tr></table></figure><p>é€šè¿‡ <code>model = ResNet(Bottleneck, [3, 4, 6, 3], **kwargs)</code> æ„é€ ç½‘ç»œç»“æ„ï¼Œä¸»è¦åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†å³ <code>Bottleneck</code>å’Œ <code>[3,4,6,3]</code> ç”±è¿™ä¸¤ä¸ªå‚æ•°å…±åŒå†³å®šäº†ResNet50çš„ç½‘ç»œç»“æ„ ï¼Œå½“<code>pretrained</code>ä¸º<code>True</code>æ—¶ï¼ŒmodelåŠ è½½ImageNetä¸­é¢„è®­ç»ƒçš„å‚æ•°ã€‚ï¼ˆè¿™å—æœ¬ç¯‡æ–‡ç« å…ˆä¸è€ƒè™‘ï¼‰</p><p><code>[3,4,6,3]</code>å¯¹åº”äºä¸Šå›¾ä¸­ResNet50ä¸­ conv2_xä¸­æœ‰ä¸‰ä¸ªï¼ˆ$1<em>1, 64$ï¼Œ$3</em>3, 64$ï¼Œ$1<em>1, 256$ï¼‰å·ç§¯å±‚çš„å †å  ï¼ŒåŒç†conv3_xä¸­æœ‰4ä¸ªï¼ˆ$1</em>1, 128$ï¼Œ$3<em>3, 128$ï¼Œ$1</em>1, 512$ï¼‰å·ç§¯å±‚çš„å †å ï¼ŒResNet50å°†å·ç§¯å±‚åˆ†ä¸º4ä¸ªå¤§å±‚ï¼Œ<code>[3,4,6,3]</code>ä»£è¡¨æ¯ä¸€ä¸ªå¤§å±‚ä¸­$1<em>1$ï¼Œ$3</em>3$ï¼Œ$1<em>1$å·ç§¯å±‚ç»„åˆçš„é‡å¤æ¬¡æ•°æ€»å…±1ï¼ˆç¬¬ä¸€ä¸ªå·ç§¯å±‚ï¼‰+1ï¼ˆç¬¬ä¸€ä¸ªæ± åŒ–å±‚ï¼‰+ï¼ˆ3+4+6+3ï¼‰</em>3 = 50å±‚ã€‚</p><p>è¿™é‡Œ<code>Bottleneck</code>ç±»ï¼Œå°±æ˜¯ä¸€ä¸ªåŸºç¡€å—ã€‚å¯¹åº”ä¸Šå›¾ï¼ˆ$1<em>1$ï¼Œ$3</em>3$ï¼Œ$1*1$ï¼‰çš„ä¸‰ä¸ªå·ç§¯å±‚ç»„åˆã€‚</p><h2 id="ResNetç±»"><a href="#ResNetç±»" class="headerlink" title="ResNetç±»"></a>ResNetç±»</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ResNet</span>(nn.Module):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">_make_layer</span>(<span class="params">self, block, planes, blocks, stride=<span class="number">1</span></span>):</span><br><span class="line">        downsample = <span class="literal">None</span></span><br><span class="line">        <span class="keyword">if</span> stride != <span class="number">1</span> <span class="keyword">or</span> self.inplanes != planes * block.expansion:</span><br><span class="line">            downsample = nn.Sequential(</span><br><span class="line">                nn.Conv2d(self.inplanes, planes * block.expansion,</span><br><span class="line">                kernel_size=<span class="number">1</span>, stride=stride, bias=<span class="literal">False</span>),</span><br><span class="line">                nn.BatchNorm2d(planes * block.expansion)</span><br><span class="line">            )</span><br><span class="line">        layers = []</span><br><span class="line">        layers.append(block(self.inplanes, planes, stride, downsample))</span><br><span class="line">        self.inplanes = planes * block.expansion</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, blocks): <span class="comment"># for (blocks - 1)</span></span><br><span class="line">            layers.append(block(self.inplanes, planes))</span><br><span class="line">        <span class="keyword">return</span> nn.Sequential(*layers)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, block, layers, num_classes = <span class="number">1000</span></span>):</span><br><span class="line">        self.inplanes = <span class="number">64</span></span><br><span class="line">        <span class="built_in">super</span>(ResNet, self).__init__() <span class="comment"># ?</span></span><br><span class="line">        self.conv1 = nn.Conv2d(<span class="number">3</span>, <span class="number">64</span>, kernel_size=<span class="number">7</span>, stride=<span class="number">2</span>, padding=<span class="number">3</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">        self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">        self.maxpool = nn.MaxPool2d(kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>)</span><br><span class="line">        self.layer1 = self._make_layer(block, <span class="number">64</span>, layers[<span class="number">0</span>])</span><br><span class="line">        self.layer2 = self._make_layer(block, <span class="number">128</span>, layers[<span class="number">1</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer3 = self._make_layer(block, <span class="number">256</span>, layers[<span class="number">2</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.layer4 = self._make_layer(block, <span class="number">512</span>, layers[<span class="number">3</span>], stride=<span class="number">2</span>)</span><br><span class="line">        self.avgpool = nn.AvgPool2d(<span class="number">7</span>, stride=<span class="number">1</span>)</span><br><span class="line">        <span class="comment">#å› ä¸ºæœ€åfeature mapåœ¨è¾“å…¥ä¸º224æ—¶ï¼Œç»è¿‡layer4ä¹‹åå¤§å°ä¸º7*7ï¼Œæ­¤æ—¶ç»è¿‡nn.AvgPool2d(7, stride=1)å¤§å°å˜ä¸º1*1ï¼Œå†ç»è¿‡å…¨è¿æ¥å±‚æ—¶ï¼Œself.fc = nn.Linear(512 * block.expansion, num_classes) å‰è€…æ˜¯è¾“å‡ºçš„æ‰€æœ‰channelæ•°ç›®ï¼Œå®é™…åº”è¯¥ä¸ºchannel*1*1ï¼Œåè€…ä¸ºåˆ†ç±»æ•°</span></span><br><span class="line">        self.fc = nn.Linear(<span class="number">512</span> * block.expansion, num_classes)</span><br><span class="line"><span class="comment"># ?</span></span><br><span class="line">        <span class="keyword">for</span> m <span class="keyword">in</span> self.modules():</span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">isinstance</span>(m, nn.Conv2d):</span><br><span class="line">                nn.init.kaiming_normal_(m.weight, mode=<span class="string">&#x27;fan_out&#x27;</span>, nonlinearity=<span class="string">&#x27;relu&#x27;</span>)</span><br><span class="line">            <span class="keyword">elif</span> <span class="built_in">isinstance</span>(m, nn.BatchNorm2d):</span><br><span class="line">                nn.init.constant_(m.weight, <span class="number">1</span>)</span><br><span class="line">                nn.init.constant_(m.bias, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    </span><br><span class="line">       self.avgpool = nn.AvgPool2d(<span class="number">7</span>, stride=<span class="number">1</span>)</span><br><span class="line">  x = self.avgpool(x)  </span><br><span class="line"></span><br><span class="line">  x = x.view(x.size(<span class="number">0</span>), -<span class="number">1</span>)     </span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        <span class="comment"># é¦–å…ˆå¯¹è¾“å…¥è¿›è¡Œ7*7çš„å·ç§¯</span></span><br><span class="line">        x = self.conv1(x)</span><br><span class="line">        x = self.bn1(x)</span><br><span class="line">        x = self.relu(x)</span><br><span class="line">        <span class="comment"># ç„¶åå¯¹xè¿›è¡Œ3*3çš„æœ€å¤§æ± åŒ–</span></span><br><span class="line">        x = self.maxpool(x)</span><br><span class="line"><span class="comment"># æ¥ç€è¿›å…¥å››ä¸ªlayer/stage</span></span><br><span class="line">        x = self.layer1(x)</span><br><span class="line">        x = self.layer2(x)</span><br><span class="line">        x = self.layer3(x)</span><br><span class="line">        x = self.layer4(x)</span><br><span class="line"><span class="comment">#æœ€åå¹³å‡æ± åŒ–</span></span><br><span class="line"></span><br><span class="line">        x = self.avgpool(x)</span><br><span class="line">        <span class="comment"># å°†æ•°æ®æ‹‰ä¼¸æˆbatchsize * channel * 1 * 1 ?</span></span><br><span class="line">        x = x.view(x.size(<span class="number">0</span>), -<span class="number">1</span>)</span><br><span class="line">        <span class="comment"># å¦‚æœè¾“å…¥å¤§å°ä¸ä¸º224  é‚£ä¹ˆç›¸åº”çš„å¯ä»¥ä¿®æ”¹AvgPool2d æˆ–è€…åœ¨å…¨è¿æ¥å±‚ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ä¹˜ä¸Šæœ€ç»ˆçš„width å’Œheight</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> x</span><br></pre></td></tr></table></figure><p>ResNet æ˜¯ç”±<code>__init__</code>å’Œ<code>forward</code>æ„æˆï¼Œä¸ºäº†æ–¹ä¾¿åˆ†æè¿™é‡Œé¦–å…ˆåˆ†æ<code>__init__</code>å‡½æ•°ã€‚</p><h3 id="init"><a href="#init" class="headerlink" title="init"></a>init</h3><p>åœ¨<code>__init__</code>ä¸­ï¼Œæœ€é‡è¦çš„æ˜¯<code>_make_layer</code>å‡½æ•°ï¼Œä»¥<code>layer1</code>ä¸ºä¾‹ï¼Œblockä¸ºBottleneckï¼Œplanes=64ï¼ˆå³channelæ•°ç›®ï¼‰blocks=3 ï¼ˆ<code>[3,4,6,3]</code>åˆ†åˆ«ä»£è¡¨æ¯ä¸€å±‚çš„blocksæ•°ç›®ï¼‰è¿™é‡Œè¦æ³¨æ„<code>layer1</code>çš„strideä¸º1ï¼Œå…¶ä»–layerçš„strideä¸º2ã€‚</p><p>å¯¹äº<code>layer1</code>è€Œè¨€ï¼Œ<code>inplanes=64</code>ï¼Œ <code>planes=64</code>ï¼Œ <code>block.expansion=4</code>ï¼Œå› æ­¤éœ€è¦ç»è¿‡downsampleæ‰èƒ½å¤Ÿä½¿å¾—æ®‹å·®å’Œç»è¿‡è¯¥å±‚çš„feature mapèƒ½å¤Ÿç›¸åŠ ï¼Œdownsampleå³ä¸ºå³è·¯éƒ¨åˆ†ã€‚ï¼ˆå¯ä»¥çœ‹<code>Bottleneck</code>çš„å®ç°ï¼‰</p><h3 id="forward"><a href="#forward" class="headerlink" title="forward"></a>forward</h3><p>è§ä¸Šé¢çš„ä»£ç æ³¨é‡Šã€‚</p><h2 id="Bottleneck"><a href="#Bottleneck" class="headerlink" title="Bottleneck"></a>Bottleneck</h2><p>æ¥ç€æˆ‘ä»¬çœ‹ä¸€ä¸‹Bottleneckçš„å®ç°ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">    Blockçš„å„ä¸ªplaneå€¼ï¼š</span></span><br><span class="line"><span class="string">        inplanesï¼šè¾“å‡ºblockçš„ä¹‹å‰çš„é€šé“æ•°</span></span><br><span class="line"><span class="string">        planesï¼šåœ¨blockä¸­é—´å¤„ç†çš„æ—¶å€™çš„é€šé“æ•°ï¼ˆè¿™ä¸ªå€¼æ˜¯è¾“å‡ºç»´åº¦çš„1/4ï¼‰</span></span><br><span class="line"><span class="string">        midplane*self.expansionï¼šè¾“å‡ºçš„ç»´åº¦</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Bottleneck</span>(nn.Module):</span><br><span class="line">    <span class="comment">#æ¯ä¸ªstageä¸­ç»´åº¦æ‹“å±•çš„å€æ•°</span></span><br><span class="line">    expansion = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># 1 * 1å·ç§¯æ ¸ä¸æ”¹å˜feature mapçš„å¤§å°ï¼Œ3 * 3å·ç§¯æ ¸padding=1&amp;&amp;stride=1ä¹Ÿä¸æ”¹å˜è¾“å…¥feature mapçš„å¤§å°ï¼Œå› æ­¤ç»è¿‡ä¸€ä¸ªBottleneckç»„æˆçš„å·ç§¯å±‚ç»„æ“ä½œåfeature mapå¤§å°ä¸ä¼šæ”¹å˜</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, inplanes, planes, stride = <span class="number">1</span>, downsample=<span class="literal">None</span></span>):</span><br><span class="line">        <span class="built_in">super</span>(Bottleneck, self).__init__()</span><br><span class="line">        self.conv1 = nn.Conv2d(inplanes, planes, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        self.bn1 = nn.BatchNorm2d(planes)</span><br><span class="line">        self.conv2 = nn.Conv2d(planes, planes, kernel_size=<span class="number">3</span>, stride=stride, padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        self.bn2 = nn.BatchNorm2d(planes)</span><br><span class="line">        self.conv3 = nn.Conv2d(planes, planes * self.expansion, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">        self.bn3 = nn.BatchNorm2d(planes * self.expansion)</span><br><span class="line">        self.relu = nn.ReLU(inplace= <span class="literal">True</span>)</span><br><span class="line">        self.downsample = downsample</span><br><span class="line">        self.stride = stride</span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">forward</span>(<span class="params">self, x</span>):</span><br><span class="line">        residual = x</span><br><span class="line">        out = self.conv1(x)</span><br><span class="line">        out = self.bn1(out)</span><br><span class="line">        out = self.conv2(out)</span><br><span class="line">        out = self.bn2(out)</span><br><span class="line">        out = self.conv3(out)</span><br><span class="line">        out = self.bn3(out)</span><br><span class="line">        <span class="keyword">if</span> self.downsample <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            residual = self.downsample(x)</span><br><span class="line">            <span class="keyword">pass</span></span><br><span class="line">        out += residual</span><br><span class="line">        out = self.relu(out)</span><br><span class="line">        <span class="keyword">return</span> out</span><br></pre></td></tr></table></figure><p>å…¶ä¸­å½“<code>downsample</code>ä¸ºNoneæ—¶ï¼Œæ®‹å·®è¾¹ç›´è¿ï¼Œæ­¤æ—¶ä¸ºIdentify Blockï¼Œå½“<code>downsample</code>ä¸ä¸ºNoneæ—¶ï¼Œæ®‹å·®è¾¹è¿›è¡Œå·ç§¯å†ç›¸åŠ ï¼Œæ­¤æ—¶ä¸ºConv Blockã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆè¦å…ˆå·ç§¯å†ç›¸åŠ å‘¢ï¼Ÿ</p><p>å› ä¸ºfeature mapçš„å¤§å°ä¸å˜ ä½†æ˜¯åœ¨ç»è¿‡Bottleneck ä¹‹åchannelå˜æˆäº†åŸæ¥çš„å››å€ï¼Œå› æ­¤æƒ³è¦å’ŒåŸå§‹çš„feature mapç›¸åŠ éœ€è¦å°†åŸå§‹çš„feature mapä¹Ÿå˜ä¸ºåŸæ¥çš„å››å€ ï¼Œdownsampleä½œç”¨æ˜¯residual+å½“å‰feature mapæ—¶å°†ç»´åº¦ç»Ÿä¸€ã€‚</p></blockquote><h1 id="ä»è¾“å…¥åˆ°layers"><a href="#ä»è¾“å…¥åˆ°layers" class="headerlink" title="ä»è¾“å…¥åˆ°layers"></a>ä»è¾“å…¥åˆ°layers</h1><p>é¦–å…ˆè¾“å…¥(3, 224, 224)ï¼Œå³ä¸‰ä¸ªé€šé“ï¼Œ224<em>224åƒç´ çš„è¾“å…¥ï¼Œç»è¿‡ä¸€ä¸ªè¾“å‡ºé€šé“æ•°ä¸º64çš„7\</em>7å·ç§¯å±‚ï¼Œä¸€ä¸ª3*3æ± åŒ–ï¼Œå¾—åˆ°(64, 56, 56)ã€‚ç„¶åå°†å…¶è¾“å…¥åˆ°layer1ã€2ã€3ã€4ã€‚</p><blockquote><p>è§£é‡Šä¸€ä¸‹ä¸ºä»€ä¹ˆæ˜¯(64, 56, 56)</p><p>å› ä¸ºResNetæ¥å—çš„å›¾åƒå¤§å°ä¸º224 * 224 ç»è¿‡ç¬¬ä¸€å±‚å·ç§¯å±‚<code>self.conv1 = nn.Conv2d(3, 64, kernel_size=7, stride=2, padding=3, bias=False)</code></p><script type="math/tex; mode=display">floor((224-7+3*2)/2)+1=112</script><p>ç»è¿‡ç¬¬ä¸€å±‚æ± åŒ–ä¹‹åï¼Œ<code>self.maxpool = nn.MaxPool2d(kernel_size=3, stride=2, padding=1)</code></p><script type="math/tex; mode=display">floor((112+2*1-3)/2)+1=56</script><p>å› æ­¤åœ¨è¾“å…¥åˆ°Bottleneckä¹‹å‰å¾—åˆ°ä¸€ä¸ª64(channel), 56(height)ï¼Œ56(weight)å¤§å°çš„feature mapã€‚</p></blockquote><h2 id="layer1-Bottleneck1"><a href="#layer1-Bottleneck1" class="headerlink" title="layer1/Bottleneck1"></a>layer1/Bottleneck1</h2><p>è¾“å…¥ ï¼š[batch_size,64,56,56]</p><p>è°ƒç”¨<code>_make_layer(block, 64, layers[0])</code>æ„é€ äº†layer1ï¼Œæ­¤æ—¶<code>self.inplanes</code>ä¸º64ï¼Œ<code>planes * block.expansion</code>=64 <em> 4ï¼Œä¸ç›¸ç­‰ï¼ˆä¹‹æ‰€ä»¥è¦äºŒè€…ç›¸ç­‰ï¼Œæ˜¯å› ä¸ºåœ¨<code>Bottleneck</code>ä¸»ä½“åˆ†æ”¯æœ€åä¸€ä¸ªå·ç§¯å±‚ä¼šå°†<code>channel</code>å˜ä¸º`planes</em>block.expansion<code>ï¼Œå¦‚æœ</code>inplanes<code>ï¼ˆå®é™…å°±æ˜¯è¾“å…¥çš„channelï¼‰ä¸ä¹‹ä¸ç›¸ç­‰åˆ™ä¸å¯ç›¸åŠ å› æ­¤æ„é€ å³è·¯</code>downsample` ï¼ˆ1*1å·ç§¯æ ¸çš„å·ç§¯å±‚æ‰©å±•channel+BNå±‚ï¼‰</p><p><img src="20181108104951863.png" alt="ä¸»ä½“åˆ†æ”¯"></p><p><img src="20181108105037539.png" alt="downsampleåˆ†æ”¯"></p><p>æ›´æ–° inplanes=64*4=256</p><h2 id="layer1-Bottleneck2"><a href="#layer1-Bottleneck2" class="headerlink" title="layer1/Bottleneck2"></a>layer1/Bottleneck2</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.conv1 = nn.Conv2d(<span class="number">256</span>, <span class="number">64</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">self.conv2 = nn.Conv2d(<span class="number">64</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, stride=stride, padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn2 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">self.conv3 = nn.Conv2d(<span class="number">64</span>,<span class="number">256</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn3 = nn.BatchNorm2d(planes * self.expansion)</span><br><span class="line">self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">self.downsample = <span class="literal">None</span></span><br><span class="line">self.stride = <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="layer1-Bottleneck3"><a href="#layer1-Bottleneck3" class="headerlink" title="layer1/Bottleneck3"></a>layer1/Bottleneck3</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.conv1 = nn.Conv2d(<span class="number">256</span>, <span class="number">64</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">self.conv2 = nn.Conv2d(<span class="number">64</span>, <span class="number">64</span>, kernel_size=<span class="number">3</span>, stride=stride,padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn2 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">self.conv3 = nn.Conv2d(<span class="number">64</span>,<span class="number">256</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn3 = nn.BatchNorm2d(planes * self.expansion)</span><br><span class="line">self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">self.downsample = <span class="literal">None</span></span><br><span class="line">self.stride = <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="layer2-Bottleneck1"><a href="#layer2-Bottleneck1" class="headerlink" title="layer2/Bottleneck1"></a>layer2/Bottleneck1</h2><p>æ­¤æ—¶<code>stride</code>=2ï¼Œ<code>self.inplanes</code>=256ï¼Œ <code>planes * block.expansion</code>=128*4ï¼Œéœ€è¦ç”Ÿæˆdownsampleå±‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">downsample = nn.Sequential(</span><br><span class="line">nn.Conv2d(<span class="number">256</span>, <span class="number">512</span>,kernel_size=<span class="number">1</span>, stride=<span class="number">2</span>, bias=<span class="literal">False</span>),</span><br><span class="line">nn.BatchNorm2d(<span class="number">512</span>),</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>ç”Ÿæˆç¬¬ä¸€ä¸ªBottleneckçš„ä¸»å¹²</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.conv1 = nn.Conv2d(<span class="number">256</span>, <span class="number">128</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn1 = nn.BatchNorm2d(planes)</span><br><span class="line"><span class="comment"># æ­¤æ—¶feature map å¤§å°ç”±56å˜æˆ28</span></span><br><span class="line">self.conv2 = nn.Conv2d(<span class="number">128</span>, <span class="number">128</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">2</span>, padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn2 = nn.BatchNorm2d(planes)</span><br><span class="line">self.conv3 = nn.Conv2d(<span class="number">128</span>, <span class="number">512</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn3 = nn.BatchNorm2d(planes * self.expansion)</span><br><span class="line">self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">self.downsample = downsample</span><br><span class="line">self.stride = stride</span><br></pre></td></tr></table></figure><p>æ›´æ–°inplanes=512</p><h2 id="layer2-Bottleneck234"><a href="#layer2-Bottleneck234" class="headerlink" title="layer2/Bottleneck234"></a>layer2/Bottleneck234</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">self.conv1 = nn.Conv2d(<span class="number">512</span>, <span class="number">128</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn1 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">self.conv2 = nn.Conv2d(<span class="number">128</span>, <span class="number">128</span>, kernel_size=<span class="number">3</span>, stride=<span class="number">1</span>,padding=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn2 = nn.BatchNorm2d(<span class="number">64</span>)</span><br><span class="line">self.conv3 = nn.Conv2d(<span class="number">128</span>,<span class="number">256</span>, kernel_size=<span class="number">1</span>, bias=<span class="literal">False</span>)</span><br><span class="line">self.bn3 = nn.BatchNorm2d(planes * self.expansion)</span><br><span class="line">self.relu = nn.ReLU(inplace=<span class="literal">True</span>)</span><br><span class="line">self.downsample = <span class="literal">None</span></span><br><span class="line">self.stride = <span class="number">1</span></span><br></pre></td></tr></table></figure><h2 id="layer3-4"><a href="#layer3-4" class="headerlink" title="layer3/4"></a>layer3/4</h2><p>å¯¹äºlayer3å’Œlayer4åŒç†ã€‚</p><h2 id="æ‰“å°å®Œæ•´çš„ç½‘ç»œç»“æ„"><a href="#æ‰“å°å®Œæ•´çš„ç½‘ç»œç»“æ„" class="headerlink" title="æ‰“å°å®Œæ•´çš„ç½‘ç»œç»“æ„"></a>æ‰“å°å®Œæ•´çš„ç½‘ç»œç»“æ„</h2><p>æœ€åï¼Œæˆ‘ä»¬æ‰“å°å®Œæ•´çš„ç½‘ç»œç»“æ„ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">net</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ResNet(</span><br><span class="line">  (conv1): Conv2d(3, 64, kernel_size=(7, 7), stride=(2, 2), padding=(3, 3), bias=False)</span><br><span class="line">  (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">  (relu): ReLU(inplace=True)</span><br><span class="line">  (maxpool): MaxPool2d(kernel_size=3, stride=2, padding=1, dilation=1, ceil_mode=False)</span><br><span class="line">  (layer1): Sequential(</span><br><span class="line">    (0): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(64, 64, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(64, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">      (downsample): Sequential(</span><br><span class="line">        (0): Conv2d(64, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">        (1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    (1): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(256, 64, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(64, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (2): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(256, 64, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(64, 64, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(64, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(64, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (layer2): Sequential(</span><br><span class="line">    (0): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(256, 128, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(128, 512, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">      (downsample): Sequential(</span><br><span class="line">        (0): Conv2d(256, 512, kernel_size=(1, 1), stride=(2, 2), bias=False)</span><br><span class="line">        (1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    (1): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(512, 128, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(128, 512, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (2): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(512, 128, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(128, 512, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (3): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(512, 128, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(128, 128, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(128, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(128, 512, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (layer3): Sequential(</span><br><span class="line">    (0): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(512, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(256, 1024, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(1024, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">      (downsample): Sequential(</span><br><span class="line">        (0): Conv2d(512, 1024, kernel_size=(1, 1), stride=(2, 2), bias=False)</span><br><span class="line">        (1): BatchNorm2d(1024, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    (1): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(1024, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(256, 1024, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(1024, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (2): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(1024, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(256, 1024, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(1024, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (3): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(1024, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(256, 1024, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(1024, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (4): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(1024, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(256, 1024, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(1024, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (5): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(1024, 256, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(256, 256, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(256, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(256, 1024, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(1024, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (layer4): Sequential(</span><br><span class="line">    (0): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(1024, 512, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(512, 512, kernel_size=(3, 3), stride=(2, 2), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(512, 2048, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(2048, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">      (downsample): Sequential(</span><br><span class="line">        (0): Conv2d(1024, 2048, kernel_size=(1, 1), stride=(2, 2), bias=False)</span><br><span class="line">        (1): BatchNorm2d(2048, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      )</span><br><span class="line">    )</span><br><span class="line">    (1): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(2048, 512, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(512, 2048, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(2048, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">    (2): Bottleneck(</span><br><span class="line">      (conv1): Conv2d(2048, 512, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn1): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv2): Conv2d(512, 512, kernel_size=(3, 3), stride=(1, 1), padding=(1, 1), bias=False)</span><br><span class="line">      (bn2): BatchNorm2d(512, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (conv3): Conv2d(512, 2048, kernel_size=(1, 1), stride=(1, 1), bias=False)</span><br><span class="line">      (bn3): BatchNorm2d(2048, eps=1e-05, momentum=0.1, affine=True, track_running_stats=True)</span><br><span class="line">      (relu): ReLU(inplace=True)</span><br><span class="line">    )</span><br><span class="line">  )</span><br><span class="line">  (avgpool): AvgPool2d(kernel_size=7, stride=1, padding=0)</span><br><span class="line">  (fc): Linear(in_features=2048, out_features=1000, bias=True)</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li>He K, Zhang X, Ren S, et al. Deep residual learning for image recognition[C]//Proceedings of the IEEE conference on computer vision and pattern recognition. 2016: 770-778.</li><li><a href="https://blog.csdn.net/a940902940902/article/details/83858694">ResNetç»“æ„åˆ†æ</a></li><li><a href="https://www.bilibili.com/video/BV1154y1S7WC">å²ä¸Šæœ€è¯¦ç»†ResNet50å¤ç°è§£æï¼ˆé¢å‘å°ç™½ï¼‰</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬ç¯‡åšå®¢ä»‹ç»äº† ResNet50 ç½‘ç»œ PyTorch å¤ç°ï¼ˆå¤ç°ä»£ç ä¸º PyTorch æºç ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;èƒŒæ™¯&quot;&gt;&lt;a href=&quot;#èƒŒæ™¯&quot; class=&quot;headerlink&quot; title=&quot;èƒŒæ™¯&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="ResNet" scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/ResNet/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="ResNet" scheme="https://gmet233.gitee.io/tags/ResNet/"/>
    
  </entry>
  
  <entry>
    <title>ã€ç¬”è®°ã€‘BFS ç®—æ³•è§£é¢˜å¥—è·¯æ¡†æ¶</title>
    <link href="https://gmet233.gitee.io/2022/03/09/%E3%80%90%E7%AC%94%E8%AE%B0%E3%80%91BFS-%E7%AE%97%E6%B3%95%E8%A7%A3%E9%A2%98%E5%A5%97%E8%B7%AF%E6%A1%86%E6%9E%B6/"/>
    <id>https://gmet233.gitee.io/2022/03/09/%E3%80%90%E7%AC%94%E8%AE%B0%E3%80%91BFS-%E7%AE%97%E6%B3%95%E8%A7%A3%E9%A2%98%E5%A5%97%E8%B7%AF%E6%A1%86%E6%9E%B6/</id>
    <published>2022-03-09T14:08:06.000Z</published>
    <updated>2022-03-09T14:09:12.964Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡FROMã€Šlabuladong ç®—æ³•ç§˜ç±ã€‹</p></blockquote><h1 id="ä»€ä¹ˆæ˜¯-BFS"><a href="#ä»€ä¹ˆæ˜¯-BFS" class="headerlink" title="ä»€ä¹ˆæ˜¯ BFS"></a>ä»€ä¹ˆæ˜¯ BFS</h1><p>BFS(Breadth First Search)ï¼Œå¹¿åº¦ä¼˜å…ˆæœç´¢ï¼Œèµ·æºäº<strong>æ ‘çš„å±‚æ¬¡éå†</strong>ã€‚å…¶æ ¸å¿ƒæ˜¯åˆ©ç”¨<strong>é˜Ÿåˆ—</strong>è¿™ç§æ•°æ®ç»“æ„ã€‚</p><p>BFS çš„æ ¸å¿ƒæ€æƒ³åº”è¯¥ä¸éš¾ç†è§£çš„ï¼Œå°±æ˜¯æŠŠâ¼€äº›é—®é¢˜æŠ½è±¡æˆå›¾ï¼Œä»â¼€ä¸ªç‚¹å¼€å§‹ï¼Œå‘å››å‘¨å¼€å§‹æ‰©æ•£ã€‚ </p><h1 id="BFS-çš„åº”ç”¨åœºæ™¯"><a href="#BFS-çš„åº”ç”¨åœºæ™¯" class="headerlink" title="BFS çš„åº”ç”¨åœºæ™¯"></a>BFS çš„åº”ç”¨åœºæ™¯</h1><p>BFS ç®—æ³•å¸¸è§äºæ±‚æœ€å€¼çš„åœºæ™¯ï¼Œå› ä¸º BFS çš„ç®—æ³•é€»è¾‘ä¿è¯äº†ç®—æ³•ç¬¬â¼€æ¬¡åˆ°è¾¾ç›®æ ‡æ—¶çš„ä»£ä»·æ˜¯æœ€å°çš„ï¼ˆï¼Ÿï¼‰ã€‚</p><p>ä¸¾ä¾‹â¼€ä¸‹ BFS å‡ºç°çš„å¸¸è§åœºæ™¯å¥½å§ï¼Œé—®é¢˜çš„æœ¬è´¨å°±æ˜¯è®©ä½ åœ¨â¼€å¹…ã€Œå›¾ã€ä¸­æ‰¾åˆ°ä»èµ·ç‚¹ start åˆ°ç»ˆç‚¹ target çš„æœ€è¿‘è·ç¦»ã€‚</p><p>è¿™ä¸ªå¹¿ä¹‰çš„æè¿°å¯ä»¥æœ‰å„ç§å˜ä½“ï¼Œæ¯”å¦‚èµ°è¿·å®«ï¼Œæœ‰çš„æ ¼å­æ˜¯å›´å¢™ä¸èƒ½èµ°ï¼Œä»èµ·ç‚¹åˆ°ç»ˆç‚¹çš„æœ€çŸ­è·ç¦»æ˜¯å¤šå°‘ï¼Ÿå¦‚æœè¿™ä¸ªè¿·å®«å¸¦ã€Œä¼ é€é—¨ã€å¯ä»¥ç¬é—´ä¼ é€å‘¢ï¼Ÿå†æ¯”å¦‚è¯´ä¸¤ä¸ªå•è¯ï¼Œè¦æ±‚ä½ é€šè¿‡æŸäº›æ›¿æ¢ï¼ŒæŠŠå…¶ä¸­ä¸€ä¸ªå˜æˆå¦ä¸€ä¸ªï¼Œæ¯æ¬¡åªèƒ½æ›¿æ¢ä¸€ä¸ªå­—ç¬¦ï¼Œæœ€å°‘è¦æ›¿æ¢å‡ æ¬¡ï¼Ÿå†æ¯”å¦‚è¯´è¿è¿çœ‹æ¸¸æˆï¼Œä¸¤ä¸ªæ–¹å—æ¶ˆé™¤çš„æ¡ä»¶ä¸ä»…ä»…æ˜¯å›¾æ¡ˆç›¸åŒï¼Œè¿˜å¾—ä¿è¯ä¸¤ä¸ªæ–¹å—ä¹‹é—´çš„æœ€çŸ­è¿çº¿ä¸èƒ½å¤šäºä¸¤ä¸ªæ‹ç‚¹ã€‚ä½ ç©è¿è¿çœ‹ï¼Œç‚¹å‡»ä¸¤ä¸ªåæ ‡ï¼Œæ¸¸æˆæ˜¯å¦‚ä½•åˆ¤æ–­å®ƒä¿©çš„æœ€çŸ­è¿çº¿æœ‰å‡ ä¸ªæ‹ç‚¹çš„ï¼Ÿ</p><h1 id="BFS-æ¡†æ¶ä»£ç "><a href="#BFS-æ¡†æ¶ä»£ç " class="headerlink" title="BFS æ¡†æ¶ä»£ç "></a>BFS æ¡†æ¶ä»£ç </h1><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è®¡ç®—ä»èµ·ç‚¹ start åˆ°ç»ˆç‚¹ target çš„æœ€è¿‘è·ç¦»</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">BFS</span><span class="params">(Node start, Node target)</span> &#123;</span><br><span class="line">    Queue&lt;Node&gt; q; <span class="comment">// æ ¸å¿ƒæ•°æ®ç»“æ„</span></span><br><span class="line">    Set&lt;Node&gt; visited; <span class="comment">// é¿å…èµ°å›å¤´è·¯</span></span><br><span class="line">    </span><br><span class="line">    q.offer(start); <span class="comment">// å°†èµ·ç‚¹åŠ å…¥é˜Ÿåˆ—</span></span><br><span class="line">    visited.add(start);</span><br><span class="line">    </span><br><span class="line">    <span class="type">int</span> <span class="variable">step</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// è®°å½•æ‰©æ•£çš„æ­¥æ•°</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> (q not empty) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">sz</span> <span class="operator">=</span> q.size();</span><br><span class="line">        <span class="comment">/* å°†å½“å‰é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹å‘å››å‘¨æ‰©æ•£ */</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; sz; i++) &#123;</span><br><span class="line">            <span class="type">Node</span> <span class="variable">cur</span> <span class="operator">=</span> q.poll();</span><br><span class="line">            <span class="comment">/* åˆ’é‡ç‚¹ï¼šè¿™é‡Œåˆ¤æ–­æ˜¯å¦åˆ°è¾¾ç»ˆç‚¹ */</span></span><br><span class="line">            <span class="keyword">if</span> (cur is target)</span><br><span class="line">                <span class="keyword">return</span> step;</span><br><span class="line">            <span class="comment">/* å°† cur çš„ç›¸é‚»èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ— */</span></span><br><span class="line">            <span class="keyword">for</span> (Node x : cur.adj()) &#123;</span><br><span class="line">                <span class="keyword">if</span> (x not in visited) &#123;</span><br><span class="line">                    q.offer(x);</span><br><span class="line">                    visited.add(x);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/* åˆ’é‡ç‚¹ï¼šæ›´æ–°æ­¥æ•°åœ¨è¿™é‡Œ */</span></span><br><span class="line">        step++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>é˜Ÿåˆ— <code>q</code> å°±ä¸è¯´äº†ï¼ŒBFS çš„æ ¸å¿ƒæ•°æ®ç»“æ„ï¼›<code>cur.adj()</code> æ³›æŒ‡ <code>cur</code> ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œæ¯”å¦‚è¯´äºŒç»´æ•°ç»„ä¸­ï¼Œ<code>cur</code> ä¸Šä¸‹å·¦å³å››é¢çš„ä½ç½®å°±æ˜¯ç›¸é‚»èŠ‚ç‚¹ï¼›<code>visited</code> çš„ä¸»è¦ä½œç”¨æ˜¯é˜²æ­¢èµ°å›å¤´è·¯ï¼Œå¤§éƒ¨åˆ†æ—¶å€™éƒ½æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯åƒä¸€èˆ¬çš„äºŒå‰æ ‘ç»“æ„ï¼Œæ²¡æœ‰å­èŠ‚ç‚¹åˆ°çˆ¶èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œä¸ä¼šèµ°å›å¤´è·¯å°±ä¸éœ€è¦ <code>visited</code>ã€‚</p><h1 id="ä¾‹é¢˜"><a href="#ä¾‹é¢˜" class="headerlink" title="ä¾‹é¢˜"></a>ä¾‹é¢˜</h1><p>LeetCode 111ã€752</p><h1 id="åŒå‘BFSï¼ˆäº†è§£ï¼‰"><a href="#åŒå‘BFSï¼ˆäº†è§£ï¼‰" class="headerlink" title="åŒå‘BFSï¼ˆäº†è§£ï¼‰"></a>åŒå‘BFSï¼ˆäº†è§£ï¼‰</h1><p>ä¼ ç»Ÿçš„ BFS æ¡†æ¶å°±æ˜¯ä»èµ·ç‚¹å¼€å§‹å‘å››å‘¨æ‰©æ•£ï¼Œé‡åˆ°ç»ˆç‚¹æ—¶åœæ­¢ï¼›è€ŒåŒå‘ BFS åˆ™æ˜¯ä»èµ·ç‚¹å’Œç»ˆç‚¹åŒæ—¶å¼€å§‹æ‰©æ•£ï¼Œå½“ä¸¤è¾¹æœ‰äº¤é›†çš„æ—¶å€™åœæ­¢ã€‚</p><h1 id="BFS-ä¸-DFS"><a href="#BFS-ä¸-DFS" class="headerlink" title="BFS ä¸ DFS"></a>BFS ä¸ DFS</h1><blockquote><p>è¿™éƒ¨åˆ†ä¸æ˜¯å¾ˆæ‡‚ï¼Œåé¢å†çœ‹</p></blockquote><p>BFS ç›¸å¯¹ DFS çš„æœ€ä¸»è¦çš„åŒºåˆ«æ˜¯ï¼šBFS æ‰¾åˆ°çš„è·¯å¾„â¼€å®šæ˜¯æœ€çŸ­çš„ï¼Œä½†ä»£ä»·å°±æ˜¯ç©ºé—´å¤æ‚åº¦å¯èƒ½æ¯” DFS å¤§å¾ˆå¤šã€‚</p><p><strong>1ã€ä¸ºä»€ä¹ˆ BFS å¯ä»¥æ‰¾åˆ°æœ€çŸ­è·ç¦»ï¼ŒDFS ä¸è¡Œå—</strong>ï¼Ÿ</p><p>é¦–å…ˆï¼Œä½ çœ‹ BFS çš„é€»è¾‘ï¼Œ<code>depth</code> æ¯å¢åŠ ä¸€æ¬¡ï¼Œé˜Ÿåˆ—ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½å‘å‰è¿ˆä¸€æ­¥ï¼Œè¿™ä¿è¯äº†ç¬¬ä¸€æ¬¡åˆ°è¾¾ç»ˆç‚¹çš„æ—¶å€™ï¼Œèµ°çš„æ­¥æ•°æ˜¯æœ€å°‘çš„ã€‚</p><p>DFS ä¸èƒ½æ‰¾æœ€çŸ­è·¯å¾„å—ï¼Ÿå…¶å®ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯æ—¶é—´å¤æ‚åº¦ç›¸å¯¹é«˜å¾ˆå¤šã€‚ä½ æƒ³å•Šï¼ŒDFS å®é™…ä¸Šæ˜¯é é€’å½’çš„å †æ ˆè®°å½•èµ°è¿‡çš„è·¯å¾„ï¼Œä½ è¦æ‰¾åˆ°æœ€çŸ­è·¯å¾„ï¼Œè‚¯å®šå¾—æŠŠäºŒå‰æ ‘ä¸­æ‰€æœ‰æ ‘æˆéƒ½æ¢ç´¢å®Œæ‰èƒ½å¯¹æ¯”å‡ºæœ€çŸ­çš„è·¯å¾„æœ‰å¤šé•¿å¯¹ä¸å¯¹ï¼Ÿè€Œ BFS å€ŸåŠ©é˜Ÿåˆ—åšåˆ°ä¸€æ¬¡ä¸€æ­¥ã€Œé½å¤´å¹¶è¿›ã€ï¼Œæ˜¯å¯ä»¥åœ¨ä¸éå†å®Œæ•´æ£µæ ‘çš„æ¡ä»¶ä¸‹æ‰¾åˆ°æœ€çŸ­è·ç¦»çš„ã€‚</p><p>å½¢è±¡ç‚¹è¯´ï¼ŒDFS æ˜¯çº¿ï¼ŒBFS æ˜¯é¢ï¼›DFS æ˜¯å•æ‰“ç‹¬æ–—ï¼ŒBFS æ˜¯é›†ä½“è¡ŒåŠ¨ã€‚è¿™ä¸ªåº”è¯¥æ¯”è¾ƒå®¹æ˜“ç†è§£å§ã€‚</p><p><strong>2ã€æ—¢ç„¶ BFS é‚£ä¹ˆå¥½ï¼Œä¸ºå•¥ DFS è¿˜è¦å­˜åœ¨</strong>ï¼Ÿ</p><p>BFS å¯ä»¥æ‰¾åˆ°æœ€çŸ­è·ç¦»ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦é«˜ï¼Œè€Œ DFS çš„ç©ºé—´å¤æ‚åº¦è¾ƒä½ã€‚</p><p>è¿˜æ˜¯æ‹¿åˆšæ‰æˆ‘ä»¬å¤„ç†äºŒå‰æ ‘é—®é¢˜çš„ä¾‹å­ï¼Œå‡è®¾ç»™ä½ çš„è¿™ä¸ªäºŒå‰æ ‘æ˜¯æ»¡äºŒå‰æ ‘ï¼ŒèŠ‚ç‚¹æ•°ä¸º <code>N</code>ï¼Œå¯¹äº DFS ç®—æ³•æ¥è¯´ï¼Œç©ºé—´å¤æ‚åº¦æ— éå°±æ˜¯é€’å½’å †æ ˆï¼Œæœ€åæƒ…å†µä¸‹é¡¶å¤šå°±æ˜¯æ ‘çš„é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯ <code>O(logN)</code>ã€‚</p><p>ä½†æ˜¯ä½ æƒ³æƒ³ BFS ç®—æ³•ï¼Œé˜Ÿåˆ—ä¸­æ¯æ¬¡éƒ½ä¼šå‚¨å­˜ç€äºŒå‰æ ‘ä¸€å±‚çš„èŠ‚ç‚¹ï¼Œè¿™æ ·çš„è¯æœ€åæƒ…å†µä¸‹ç©ºé—´å¤æ‚åº¦åº”è¯¥æ˜¯æ ‘çš„æœ€åº•å±‚èŠ‚ç‚¹çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯ <code>N/2</code>ï¼Œç”¨ Big O è¡¨ç¤ºçš„è¯ä¹Ÿå°±æ˜¯ <code>O(N)</code>ã€‚</p><p>ç”±æ­¤è§‚ä¹‹ï¼ŒBFS è¿˜æ˜¯æœ‰ä»£ä»·çš„ï¼Œä¸€èˆ¬æ¥è¯´åœ¨æ‰¾æœ€çŸ­è·¯å¾„çš„æ—¶å€™ä½¿ç”¨ BFSï¼Œå…¶ä»–æ—¶å€™è¿˜æ˜¯ DFS ä½¿ç”¨å¾—å¤šä¸€äº›ï¼ˆä¸»è¦æ˜¯é€’å½’ä»£ç å¥½å†™ï¼‰ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://labuladong.gitee.io/algo/4/30/113/">BFS ç®—æ³•è§£é¢˜å¥—è·¯æ¡†æ¶</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡FROMã€Šlabuladong ç®—æ³•ç§˜ç±ã€‹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;ä»€ä¹ˆæ˜¯-BFS&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-BFS&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ BFS&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ BFS</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="BFS" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/BFS/"/>
    
    
    <category term="ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="BFS" scheme="https://gmet233.gitee.io/tags/BFS/"/>
    
  </entry>
  
  <entry>
    <title>ä»€ä¹ˆæ˜¯ç«¯åˆ°ç«¯ï¼ˆend-to-endï¼‰çš„å­¦ä¹ æ¨¡å‹</title>
    <link href="https://gmet233.gitee.io/2022/03/07/%E4%BB%80%E4%B9%88%E6%98%AF%E7%AB%AF%E5%88%B0%E7%AB%AF%EF%BC%88end-to-end%EF%BC%89%E7%9A%84%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B/"/>
    <id>https://gmet233.gitee.io/2022/03/07/%E4%BB%80%E4%B9%88%E6%98%AF%E7%AB%AF%E5%88%B0%E7%AB%AF%EF%BC%88end-to-end%EF%BC%89%E7%9A%84%E5%AD%A6%E4%B9%A0%E6%A8%A1%E5%9E%8B/</id>
    <published>2022-03-07T12:25:03.000Z</published>
    <updated>2022-03-07T12:25:29.762Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><p><strong>ç«¯åˆ°ç«¯çš„å­¦ä¹ æ¨¡å‹</strong>æ˜¯æŒ‡å°†åŸå§‹æ•°æ®ä¸åšä»»ä½•çš„é¢„å¤„ç†ç›´æ¥å°†åŸå§‹æ•°æ®è¾“å…¥åˆ°æ¨¡å‹å½“ä¸­ï¼Œæœ€åå¾—åˆ°çš„è¾“å‡ºç»“æœä¸æœŸæœ›ç»“æœæœ‰è¯¯å·®ï¼Œè¿™è¯¯å·®åœ¨åå‘ä¼ æ’­æ¨¡å‹çš„å„å±‚ä¸­ï¼Œå°†å‚æ•°è¿›è¡Œä¼˜åŒ–ï¼Œä¸€ç›´åˆ°æœŸæœ›ç»“æœç»“æŸã€‚<strong>éç«¯åˆ°ç«¯</strong>æ˜¯å°†åŸå§‹æ•°æ®è¿›è¡Œæ ‡æ³¨ï¼Œå¾—åˆ°å…·æœ‰ç‰¹å¾çš„å¤„ç†åçš„æ•°æ®ï¼Œç„¶ååœ¨ä½œä¸ºè¾“å…¥ï¼Œè¿™æ ·çš„å¼Šç«¯æ˜¯å¦‚æœæå–æ•°æ®ç‰¹å¾æ—¶å‡ºç°é”™è¯¯ï¼Œå°†æ— æ³•è°ƒæ•´ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.its203.com/article/qq_42514225/108835224?2022-03-07">ä»€ä¹ˆæ˜¯ç«¯åˆ°ç«¯çš„å­¦ä¹ æ¨¡å‹</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ­£æ–‡&quot;&gt;&lt;a href=&quot;#æ­£æ–‡&quot; class=&quot;headerlink&quot; title=&quot;æ­£æ–‡&quot;&gt;&lt;/a&gt;æ­£æ–‡&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;ç«¯åˆ°ç«¯çš„å­¦ä¹ æ¨¡å‹&lt;/strong&gt;æ˜¯æŒ‡å°†åŸå§‹æ•°æ®ä¸åšä»»ä½•çš„é¢„å¤„ç†ç›´æ¥å°†åŸå§‹æ•°æ®è¾“å…¥åˆ°æ¨¡å‹å½“ä¸­ï¼Œæœ€åå¾—åˆ°çš„è¾“å‡ºç»“æœä¸æœŸæœ›ç»“æœæœ‰</summary>
      
    
    
    
    <category term="æœºå™¨å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="æœºå™¨å­¦ä¹ " scheme="https://gmet233.gitee.io/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>æœ€å¤§Må¯¹é½å­é›†</title>
    <link href="https://gmet233.gitee.io/2022/03/01/%E6%9C%80%E5%A4%A7M%E5%AF%B9%E9%BD%90%E5%AD%90%E9%9B%86/"/>
    <id>https://gmet233.gitee.io/2022/03/01/%E6%9C%80%E5%A4%A7M%E5%AF%B9%E9%BD%90%E5%AD%90%E9%9B%86/</id>
    <published>2022-03-01T13:52:37.000Z</published>
    <updated>2022-03-01T13:53:34.808Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>æœ‰ N ä¸ªç‚¹ä½äºä¸€æ¡çº¿ä¸Šï¼Œç¼–å·ä» 0 åˆ° N-1 ï¼Œå…¶åæ ‡åœ¨æ•°ç»„ A ä¸­ç»™å‡ºã€‚å¯¹äºæ¯ä¸ªI (0 â‰¤ l &lt;N)ï¼Œç›´çº¿ä¸Šç‚¹æ•° I çš„åæ ‡ä¸º A[l] ã€‚ç‚¹çš„åæ ‡å¯èƒ½ç›¸åŒã€‚</p><p>å¯¹äºç»™å®šçš„æ•´æ•° M ï¼Œå¦‚æœå­é›†å†…ä»»æ„ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è·ç¦»å¯è¢«Mæ•´é™¤ï¼Œåˆ™ç§°è¿™äº›ç‚¹çš„å­é›†ä¸ºM<strong>å¯¹é½</strong>ã€‚æ‚¨çš„ä»»åŠ¡æ˜¯æŸ¥æ‰¾ç»™å®š N ä¸ªç‚¹é›†çš„æœ€å¤§ M å¯¹é½å­é›†çš„å¤§å°ã€‚</p><p>ä¾‹å¦‚ï¼Œè€ƒè™‘æ•´æ•° M=3 å’Œæ•°ç»„ Aï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p><blockquote><p>A[0] = -3  A[1] = -2  A[2] = 1  A[3] = 0  A[4] = 8  A[5] = 7  A[6] = 1</p></blockquote><p>åŒ…å«ç¼–å·ä¸º1ã€2ã€5å’Œ6çš„ç‚¹çš„å­é›†ï¼Œåæ ‡åˆ†åˆ«ä¸º-2ã€1ã€7å’Œ1ï¼Œæ˜¯3å¯¹é½å­é›†çš„ç¤ºä¾‹ï¼Œå› ä¸ºï¼š</p><ul><li>ç¼–å·ä¸º1å’Œ2çš„ç‚¹ä¹‹é—´çš„è·ç¦»ä¸ºabs(A[1] - A[2]) = 3ï¼Œ</li><li>ä»5å·ç‚¹åˆ°ç¼–å·1å’Œ2çš„ç‚¹çš„è·ç¦»åˆ†åˆ«ä¸º9å’Œ6ï¼Œ</li><li>ä»6å·ç‚¹åˆ°ç¼–å·ä¸º1ã€2å’Œ5çš„ç‚¹çš„è·ç¦»åˆ†åˆ«ä¸º3ã€0å’Œ6ï¼Œ</li></ul><p>è¿™äº›è·ç¦»éƒ½å¯ä»¥è¢« M=3 æ•´é™¤ã€‚æ­¤å­é›†çš„å¤§å°ä¸º4ï¼Œå¹¶ä¸”æ²¡æœ‰æ›´å¤§çš„3å¯¹é½å­é›†ã€‚</p><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°:</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">solution</span><span class="params">(<span class="type">int</span>[] A, <span class="type">int</span> M)</span>;</span><br></pre></td></tr></table></figure><p>ç»™å®šä¸€ä¸ªç”± N ä¸ªæ•´æ•°å’Œä¸€ä¸ªæ•´æ•° M ç»„æˆçš„æ•°ç»„ Aï¼Œè¿”å›æœ€å¤§ M å¯¹é½å­é›†çš„å¤§å°ã€‚</p><p>ä¾‹å¦‚ï¼Œç»™å®š M=3 ä¸” A=[-3ï¼Œ-2ï¼Œ1ï¼Œ0ï¼Œ8ï¼Œ7ï¼Œ1]ï¼Œå‡½æ•°åº”è¿”å›4ï¼Œå¦‚ä¸Šæ‰€è¿°ï¼›</p><p>ç»™å®š M=8 ä¸” A=[7ï¼Œ1ï¼Œ11ï¼Œ8,4ï¼Œ10]ï¼Œå‡½æ•°åº”è¿”å›1ã€‚</p><h1 id="è§£"><a href="#è§£" class="headerlink" title="è§£"></a>è§£</h1><p>æŠŠæ‰€æœ‰æŒ‰ M çš„ä½™æ•°å­˜æˆä¸€ç»„å°±å¯ä»¥ï¼Œ<strong>åŒç»„çš„åˆšå¥½æŠŠä½™æ•°æ¶ˆæ‰å°±æ˜¯è·ç¦»æ•´é™¤</strong>ã€‚è¿”å›æœ€å¤§å³ä¸ºæ‰€æ±‚ã€‚</p><p><strong>æ³¨æ„</strong>ï¼šä½™æ•°ä¸ºè´Ÿçš„ï¼Œéœ€è¦è½¬ä¸ºæœ€å°æ­£ä½™æ•°ï¼ˆ+Mï¼‰</p><h2 id="Javaå®ç°"><a href="#Javaå®ç°" class="headerlink" title="Javaå®ç°"></a>Javaå®ç°</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">solution</span><span class="params">(<span class="type">int</span>[] A, <span class="type">int</span> M)</span>&#123;</span><br><span class="line">    <span class="comment">//remainders[i] = j, è¡¨ç¤ºä½™æ•°ä¸ºiçš„é¢‘æ¬¡æ˜¯j</span></span><br><span class="line">    <span class="type">int</span>[] remainders = <span class="keyword">new</span> <span class="title class_">int</span>[M];</span><br><span class="line">    <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// è®°å½•æœ€å¤§çš„é¢‘æ¬¡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">N</span> <span class="operator">=</span> A.length;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; N; i++) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">remainder</span> <span class="operator">=</span> A[i] % M;</span><br><span class="line">        <span class="keyword">if</span>(remainder &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            remainder += M;</span><br><span class="line">        &#125;</span><br><span class="line">        remainders[remainder] ++;</span><br><span class="line">        ans = Math.max(ans, remainders[remainder]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é¢˜ç›®&quot;&gt;&lt;a href=&quot;#é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®&quot;&gt;&lt;/a&gt;é¢˜ç›®&lt;/h1&gt;&lt;p&gt;æœ‰ N ä¸ªç‚¹ä½äºä¸€æ¡çº¿ä¸Šï¼Œç¼–å·ä» 0 åˆ° N-1 ï¼Œå…¶åæ ‡åœ¨æ•°ç»„ A ä¸­ç»™å‡ºã€‚å¯¹äºæ¯ä¸ªI (0 â‰¤ l &amp;lt;N)ï¼Œç›´çº¿ä¸Šç‚¹æ•° I çš„åæ ‡</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°è®º" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E8%AE%BA/"/>
    
    
    <category term="ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°è®º" scheme="https://gmet233.gitee.io/tags/%E6%95%B0%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>æ±‚æ•°å­—1åœ¨æ‰€æœ‰ä¸è¶…è¿‡Nçš„åè¿›åˆ¶æ­£æ•´æ•°ä¸­å‡ºç°çš„æ¬¡æ•°</title>
    <link href="https://gmet233.gitee.io/2022/03/01/%E6%B1%82%E6%95%B0%E5%AD%971%E5%9C%A8%E6%89%80%E6%9C%89%E4%B8%8D%E8%B6%85%E8%BF%87N%E7%9A%84%E5%8D%81%E8%BF%9B%E5%88%B6%E6%AD%A3%E6%95%B4%E6%95%B0%E4%B8%AD%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0/"/>
    <id>https://gmet233.gitee.io/2022/03/01/%E6%B1%82%E6%95%B0%E5%AD%971%E5%9C%A8%E6%89%80%E6%9C%89%E4%B8%8D%E8%B6%85%E8%BF%87N%E7%9A%84%E5%8D%81%E8%BF%9B%E5%88%B6%E6%AD%A3%E6%95%B4%E6%95%B0%E4%B8%AD%E5%87%BA%E7%8E%B0%E7%9A%84%E6%AC%A1%E6%95%B0/</id>
    <published>2022-03-01T13:51:19.000Z</published>
    <updated>2022-03-01T13:52:07.445Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>å†™ä¸€ä¸ªå‡½æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">solution</span><span class="params">(<span class="type">int</span> N)</span>;</span><br></pre></td></tr></table></figure><p>å³ç»™å®šä¸€ä¸ªæ•´æ•°Nï¼Œè¿”å›æ•°å­—1åœ¨æ‰€æœ‰ä¸è¶…è¿‡ N çš„æ­£æ•´æ•°çš„åè¿›åˆ¶è¡¨ç¤ºä¸­å‡ºç°çš„æ¬¡æ•°ã€‚</p><p>ä¾‹å¦‚ï¼Œç»™å®šN = 13ï¼Œè¯¥å‡½æ•°åº”è¿”å›6ï¼Œå› ä¸ºï¼š</p><ul><li>æ‰€æœ‰ä¸è¶…è¿‡13çš„æ­£æ•´æ•°æ˜¯1ã€2ã€3ã€4ã€5ã€6ã€7ã€8ã€9ã€10ã€11ã€12 å’Œ13ï¼›</li><li>æ•°å­—1å…±å‡ºç°å…­æ¬¡ï¼šä¸€æ¬¡åœ¨æ•°å­—1ä¸­ï¼Œä¸€æ¬¡åœ¨æ•°å­—10ä¸­ï¼Œä¸¤æ¬¡åœ¨æ•°å­—11ä¸­ï¼Œä¸€æ¬¡åœ¨æ•°å­—12ä¸­ï¼Œä¸€æ¬¡åœ¨æ•°å­—13ä¸­ã€‚</li></ul><p>N æ˜¯[0.. 100,000,000]èŒƒå›´å†…çš„æ•´æ•°ã€‚</p><h1 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h1><p>æš´åŠ›æ±‚è§£ï¼šéå†æ¯ä¸€ä¸ªæ•°ï¼Œå¯¹æ¯ä¸€ä¸ªæ•°æ±‚1çš„ä¸ªæ•°ï¼Œç„¶ååŠ èµ·æ¥å¾—å’Œã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">solution</span><span class="params">(<span class="type">int</span> N)</span><span class="comment">//ç»Ÿè®¡1-nä¸­1çš„ä¸ªæ•°</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">int</span> ans=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>; i&lt;=n; i++) &#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="type">int</span> j=i; j&gt;<span class="number">0</span>; j/=<span class="number">10</span>) &#123;</span><br><span class="line"><span class="keyword">if</span>(j%<span class="number">10</span>==<span class="number">1</span>)</span><br><span class="line">ans ++;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç®—æ³•æ—¶é—´å¤æ‚åº¦ï¼š$O(nlgn)$</p><h1 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h1><p>è€ƒè™‘ä¸¤ä½æ•°ã€‚å°†ä¸€ä¸ªæ­£æ•´æ•°ä¸­1çš„ä¸ªæ•°åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œä¸€éƒ¨åˆ†æ˜¯ä¸ªä½ä¸Šå‡ºç°1çš„æ•°ç›®f1(n)ï¼Œä¸€éƒ¨åˆ†æ˜¯åä½ä¸Šå‡ºç°1çš„æ•°ç›®f2(n) ã€‚</p><p>n=10ï¼Œ f1(10)=1ï¼ˆ1-10ä¸ªä½å‡ºç°çš„1çš„ä¸ªæ•°ä¸º1ï¼‰ï¼Œf2(10)=1ï¼ˆ1-10ä¸ªä½å‡ºç°çš„1çš„åæ•°ä¸º1ï¼‰ã€‚</p><p>ä¸¾ä¸€äº›ä»£è¡¨æ€§çš„æ•°ï¼š</p><div class="table-container"><table><thead><tr><th>n</th><th>f1(n)</th><th>f2(n)</th><th>f(n)</th></tr></thead><tbody><tr><td>10</td><td>1</td><td>1</td><td>2</td></tr><tr><td>11</td><td>2</td><td>2</td><td>4</td></tr><tr><td>12</td><td>2</td><td>3</td><td>5</td></tr><tr><td>13</td><td>2</td><td>4</td><td>6</td></tr><tr><td>20</td><td>2</td><td>10</td><td>12</td></tr><tr><td>21</td><td>3</td><td>10</td><td>13</td></tr><tr><td>22</td><td>3</td><td>10</td><td>13</td></tr><tr><td>23</td><td>3</td><td>10</td><td>13</td></tr><tr><td>30</td><td>3</td><td>10</td><td>13</td></tr><tr><td>31</td><td>4</td><td>10</td><td>14</td></tr><tr><td>32</td><td>4</td><td>10</td><td>14</td></tr><tr><td>33</td><td>4</td><td>10</td><td>14</td></tr></tbody></table></div><p>å…ˆæ¥çœ‹åä½ï¼Œå½“åä½ä¸Šçš„æ•°ä¸º1æ—¶ï¼Œ</p><div class="table-container"><table><thead><tr><th>n</th><th>f2(n)</th></tr></thead><tbody><tr><td>10</td><td>1</td></tr><tr><td>11</td><td>2</td></tr><tr><td>12</td><td>3</td></tr><tr><td>13</td><td>4</td></tr></tbody></table></div><p>f2(n)=å½“å‰æ•°ä¸ªä½æ•°å­—+1ï¼›</p><p>å½“åä½ä¸Šçš„æ•°å¤§äº1æ—¶ï¼Œ</p><div class="table-container"><table><thead><tr><th>n</th><th>f2(n)</th></tr></thead><tbody><tr><td>20</td><td>10</td></tr><tr><td>21</td><td>10</td></tr><tr><td>22</td><td>10</td></tr><tr><td>23</td><td>10</td></tr><tr><td>30</td><td>10</td></tr><tr><td>31</td><td>10</td></tr><tr><td>32</td><td>10</td></tr><tr><td>33</td><td>10</td></tr></tbody></table></div><p>f2(n) = 10ï¼Œä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶åä½ä¸Š1çš„æ•°ç›®ä»…ä»…å’Œåä½æœ‰å…³ç³»ï¼Œä¹Ÿå°±æ˜¯<strong>åä½çš„ä½å› å­</strong>10ã€‚</p><p>å†æ¥çœ‹ä¸ªä½ï¼Œå½“ä¸ªä½ä¸Šçš„æ•°ä¸º1çš„æ—¶å€™</p><div class="table-container"><table><thead><tr><th>n</th><th>f1(n)</th></tr></thead><tbody><tr><td>11</td><td>2</td></tr><tr><td>21</td><td>3</td></tr><tr><td>31</td><td>4</td></tr></tbody></table></div><p>f1(n) = å½“å‰æ•°åä½æ•°å­—+1ï¼›</p><p>å½“ä¸ªä½ä¸Šçš„æ•°å¤§äº1æ—¶ï¼Œ</p><div class="table-container"><table><thead><tr><th>n</th><th>f1(n)</th></tr></thead><tbody><tr><td>22</td><td>3</td></tr><tr><td>23</td><td>3</td></tr><tr><td>32</td><td>4</td></tr><tr><td>33</td><td>4</td></tr></tbody></table></div><p>f1(n) = å½“å‰æ•°åä½æ•°å­—+1ï¼›</p><p>è¿˜æœ‰å½“ä¸ªä½ä¸Šçš„æ•°ç­‰äº0æ—¶ï¼Œ</p><div class="table-container"><table><thead><tr><th>n</th><th>f1(n)</th></tr></thead><tbody><tr><td>10</td><td>1</td></tr><tr><td>20</td><td>2</td></tr><tr><td>30</td><td>3</td></tr></tbody></table></div><p>f1(n) = å½“å‰æ•°åä½æ•°å­—ã€‚</p><p>è¿™è¿˜ä¸å¤Ÿï¼Œæˆ‘ä»¬è¿˜æ²¡æœ‰åˆ†æä¸¤ä½æ•°ä»¥ä¸Šçš„æ•°å­—ï¼Œæ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å°†å½“å‰ä½åˆ†ä¸ºä¸‰ç§æƒ…å†µï¼š=0ï¼Œ=1ï¼Œ&gt;1ã€‚</p><p>å½“ç™¾ä½ä¸Šçš„æ•°å­—æ˜¯0çš„æ—¶å€™ï¼Œå‡è®¾n=12013ã€‚æ­¤æ—¶1-12013çš„æ‰€æœ‰æ•´æ•°ä¸­ï¼Œç™¾ä½ä¸Šå‡ºç°1çš„æ•°æ˜¯100~199ï¼Œ1100~1199ï¼Œ2100~2199â€¦â€¦11100~11199ã€‚ä¹Ÿå°±æ˜¯12ä¸ª100ï¼Œ1200ä¸ªã€‚ä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶ç™¾ä½ä¸Š1çš„æ•°ç›®æ˜¯ç”±é«˜ä½ï¼ˆ12ï¼‰å†³å®šçš„ï¼Œè€Œä¸”ç­‰äºé«˜ä½ï¼ˆ12ï¼‰* å½“å‰ä½å› å­ï¼ˆ100ï¼‰ã€‚</p><p>å½“ç™¾ä½ä¸Šçš„æ•°å­—æ˜¯1çš„æ—¶å€™ï¼Œå‡è®¾n=12113ã€‚æ­¤æ—¶1-12113çš„æ‰€æœ‰æ•´æ•°ä¸­ï¼Œç™¾ä½ä¸Šå‡ºç°1çš„æ•°æ˜¯100~199ï¼Œ1100~1199ï¼Œ2100~2199â€¦â€¦11100~11199ï¼Œ12100~12113ã€‚ä¹Ÿå°±æ˜¯13ä¸ª100ï¼Œ1300ä¸ªã€‚ä¹Ÿå°±æ˜¯è¯´æ­¤æ—¶ç™¾ä½ä¸Š1çš„æ•°ç›®æ˜¯ç”±é«˜ä½ï¼ˆ12ï¼‰å†³å®šçš„ï¼Œè€Œä¸”ç­‰äºï¼ˆé«˜ä½ï¼ˆ12ï¼‰+1ï¼‰* å½“å‰ä½å› å­ï¼ˆ100ï¼‰ã€‚</p><p>è¿˜æœ‰ä¸€ä¸ªå°é—®é¢˜å°±æ˜¯å¦‚ä½•æ±‚ä¸€ä¸ªæ•°çš„é«˜ä½å’Œä½ä½ï¼Œè¿˜æœ‰å½“å‰ä½ã€‚è¿™å’Œå½“å‰ä½çš„ä½å› å­æœ‰å…³ç³»ã€‚</p><p>å¯¹äº12345ï¼Œå‡è®¾å½“å‰ä½æ˜¯ç™¾ä½ï¼ˆ100ï¼‰ï¼Œåˆ™</p><ul><li>ä½ä½æ•°å­—ï¼š12345 - (12345 / 100) *100 = 45</li><li>é«˜ä½æ•°å­—ï¼š12345 / (100 * 10) = 12</li><li>å½“å‰ä½æ•°å­—ï¼š12345 / 100 = 123ï¼Œ123 % 10 = 3ã€‚</li></ul><p>ä»¥ä¸Šåˆ†æå¯ä»¥å†™å‡ºå®Œæ•´ä»£ç ã€‚</p><h2 id="Javaå®ç°"><a href="#Javaå®ç°" class="headerlink" title="Javaå®ç°"></a>Javaå®ç°</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">solution</span><span class="params">(<span class="type">int</span> N)</span>&#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">    <span class="type">int</span> <span class="variable">lowNum</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// å½“å‰ä½çš„ä½ä½çš„æ•°å­—</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">currNum</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// å½“å‰ä½æ•°å­—</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">highNum</span> <span class="operator">=</span> <span class="number">0</span>; <span class="comment">// å½“å‰ä½çš„é«˜ä½çš„æ•°å­—</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">factor</span> <span class="operator">=</span> <span class="number">1</span>; factor &lt;= N; factor *= <span class="number">10</span>) &#123; <span class="comment">// ä½å› å­</span></span><br><span class="line">        lowNum = N - (N / factor) * factor;</span><br><span class="line">        currNum = (N / factor) % <span class="number">10</span>;</span><br><span class="line">        highNum = N / (factor * <span class="number">10</span>);</span><br><span class="line">        <span class="keyword">if</span>(currNum == <span class="number">0</span>) &#123;</span><br><span class="line">            ans += highNum * factor;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(currNum == <span class="number">1</span>) &#123;</span><br><span class="line">            ans += highNum * factor + lowNum +<span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ans += (highNum + <span class="number">1</span>) * factor;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ—¶é—´å¤æ‚åº¦åªä¸Nçš„ä½æ•°æœ‰å…³ï¼Œä¸º$O(lgn)$ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://blog.csdn.net/liangbopirates/article/details/9323727">æ±‚1-Nä¸­åè¿›åˆ¶æ­£æ•´æ•°1çš„ä¸ªæ•°</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é¢˜ç›®&quot;&gt;&lt;a href=&quot;#é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®&quot;&gt;&lt;/a&gt;é¢˜ç›®&lt;/h1&gt;&lt;p&gt;å†™ä¸€ä¸ªå‡½æ•°&lt;/p&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>ã€ä¸ä¼šåšã€‘çŸ©é˜µè·¯å¾„å½¢æˆçš„æœ€å¤§æ•´æ•°</title>
    <link href="https://gmet233.gitee.io/2022/03/01/%E3%80%90%E4%B8%8D%E4%BC%9A%E5%81%9A%E3%80%91%E7%9F%A9%E9%98%B5%E8%B7%AF%E5%BE%84%E5%BD%A2%E6%88%90%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0/"/>
    <id>https://gmet233.gitee.io/2022/03/01/%E3%80%90%E4%B8%8D%E4%BC%9A%E5%81%9A%E3%80%91%E7%9F%A9%E9%98%B5%E8%B7%AF%E5%BE%84%E5%BD%A2%E6%88%90%E7%9A%84%E6%9C%80%E5%A4%A7%E6%95%B4%E6%95%B0/</id>
    <published>2022-03-01T13:47:55.000Z</published>
    <updated>2022-03-01T13:50:26.391Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>æ‚¨å°†è·å¾—ä¸€ä¸ªç”± N è¡Œå’Œ M åˆ—ç»„æˆçš„æ¿ã€‚ç”µè·¯æ¿çš„æ¯ä¸ªå­—æ®µï¼ˆå…¶å®å°±æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªåæ ‡ç‚¹ï¼Œä½œè€…æ³¨ï¼‰éƒ½åŒ…å«ä¸€ä¸ªæ•°å­— (0-9)ã€‚</p><p>æ‚¨å¸Œæœ›æŸ¥æ‰¾ç”±å››ä¸ªç›¸é‚»å­—æ®µç»„æˆçš„è·¯å¾„ã€‚å¦‚æœä¸¤ä¸ªå­—æ®µå…±äº«ä¸€ä¸ªå…±åŒç‚¹ï¼Œåˆ™å®ƒä»¬æ˜¯ç›¸é‚»çš„ã€‚æ­¤å¤–ï¼Œè·¯å¾„ä¸­çš„å­—æ®µåº”è¯¥æ˜¯ä¸åŒçš„ï¼ˆä¸èƒ½ä¸¤æ¬¡è®¿é—®åŒä¸€å­—æ®µï¼‰ã€‚</p><p>è·¯å¾„çš„å››ä½æ•°å­—ï¼ˆæŒ‰æ‚¨è®¿é—®å®ƒä»¬çš„é¡ºåºï¼‰åˆ›å»ºä¸€ä¸ª æ•´æ•°ã€‚é€šè¿‡è¿™ç§æ–¹å¼å¯ä»¥å®ç°çš„æœ€å¤§æ•´æ•°æ˜¯å¤šå°‘?</p><p>ç¼–å†™å‡½æ•°</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">solution</span> <span class="params">(<span class="type">int</span>[][] board)</span> ;</span><br></pre></td></tr></table></figure><p>ç»™å®šè¡¨ç¤ºä¸ºç”± N è¡Œå’Œ M åˆ—ç»„æˆçš„æ•´æ•°çŸ©é˜µçš„æ¿ï¼Œåˆ™è¿”å›åœ¨é•¿åº¦ä¸º 4 çš„è·¯å¾„ä¸­è¿æ¥å€¼æ—¶å¯ä»¥å®ç°çš„æœ€å¤§æ•´æ•°ã€‚<br>ä¾‹å­ï¼šç»™å®šä»¥ä¸‹æ¿ï¼ˆN=3, M=5ï¼‰ :</p><p><img src="image-20220228105252210.png" alt="å›¾1"></p><p>è¯¥å‡½æ•°åº”è¿”å›9121ã€‚æ‚¨å¯ä»¥é€‰æ‹©ä»¥ä¸‹è·¯å¾„ï¼ˆç¬¬ä¸€ ä¸ªå­—æ®µç”¨çº¢è‰²è¡¨ç¤º)ï¼š</p><p><img src="image-20220228105416502.png" alt="å›¾2"></p><h1 id="è§£"><a href="#è§£" class="headerlink" title="è§£"></a>è§£</h1><p>çŸ¥é“ç”¨å›æº¯æˆ–è€…BFSï¼Œä½†æ˜¯ä»£ç å†™ä¸å‡ºæ¥ã€‚ğŸ˜“</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é¢˜ç›®&quot;&gt;&lt;a href=&quot;#é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®&quot;&gt;&lt;/a&gt;é¢˜ç›®&lt;/h1&gt;&lt;p&gt;æ‚¨å°†è·å¾—ä¸€ä¸ªç”± N è¡Œå’Œ M åˆ—ç»„æˆçš„æ¿ã€‚ç”µè·¯æ¿çš„æ¯ä¸ªå­—æ®µï¼ˆå…¶å®å°±æ˜¯æ•°ç»„ä¸­çš„ä¸€ä¸ªåæ ‡ç‚¹ï¼Œä½œè€…æ³¨ï¼‰éƒ½åŒ…å«ä¸€ä¸ªæ•°å­— (0-9)ã€‚&lt;/p&gt;
&lt;p&gt;</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="å›æº¯" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E5%9B%9E%E6%BA%AF/"/>
    
    
    <category term="ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="å›æº¯" scheme="https://gmet233.gitee.io/tags/%E5%9B%9E%E6%BA%AF/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„å¥èº«åŠ¨ä½œ</title>
    <link href="https://gmet233.gitee.io/2022/02/28/%E4%B8%AA%E4%BA%BA%E6%AF%94%E8%BE%83%E5%96%9C%E6%AC%A2%E7%9A%84%E5%81%A5%E8%BA%AB%E5%8A%A8%E4%BD%9C/"/>
    <id>https://gmet233.gitee.io/2022/02/28/%E4%B8%AA%E4%BA%BA%E6%AF%94%E8%BE%83%E5%96%9C%E6%AC%A2%E7%9A%84%E5%81%A5%E8%BA%AB%E5%8A%A8%E4%BD%9C/</id>
    <published>2022-02-28T15:31:17.000Z</published>
    <updated>2022-03-03T12:52:44.478Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ•´ç†ä¸€ä¸‹ä¸ªäººæ¯”è¾ƒå–œæ¬¢å¥èº«åŠ¨ä½œã€‚å¹¶å¤‡æ³¨åŠ¨ä½œè¦ç‚¹</p></blockquote><h1 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h1><h2 id="å¹³æ¿æ”¯æ’‘"><a href="#å¹³æ¿æ”¯æ’‘" class="headerlink" title="å¹³æ¿æ”¯æ’‘"></a>å¹³æ¿æ”¯æ’‘</h2><p>æ”¹å–„çš„å¹³æ¿æ”¯æ’‘ï¼š</p><ol><li>èº«ä½“åç§»</li><li>éª¨ç›†åå€¾ï¼šæ”¶ç´§è‡€éƒ¨ï¼Œæ„Ÿè§‰ä¸Šå‘åé¡¶</li><li>çº æ­£èº«ä½“ä½ç½®ã€‚è‚©è†€ç”¨åŠ›å‘å‰æ¨ï¼Œä¸Šè‚¢ç¦»åœ°æ›´è¿œã€‚</li></ol><p>æ–°æ‰‹å…ˆåšåˆ°ç¬¬äºŒç‚¹å»¶é•¿åˆ°60ç§’ï¼Œå†ä¸¤ç‚¹ä¸€èµ·åšã€‚</p><p>ç¦å¿Œï¼š</p><ol><li>æ‰‹è‡‚åç¼©</li><li>æè‡€æˆ–è€…è‡€å¤ªä½ã€‚ç›¸åè¦ç”¨åŠ›æ”¶ç´§éª¨ç›†</li></ol><h1 id="è‡€è…¿"><a href="#è‡€è…¿" class="headerlink" title="è‡€è…¿"></a>è‡€è…¿</h1><h2 id="æ·±è¹²"><a href="#æ·±è¹²" class="headerlink" title="æ·±è¹²"></a>æ·±è¹²</h2><p>ä½¿ç”¨å¼¹åŠ›å¸¦åŠ å¤§æ·±è¹²çš„é˜»åŠ›ã€‚</p><h2 id="å•è…¿ç½—é©¬å°¼äºšç¡¬æ‹‰"><a href="#å•è…¿ç½—é©¬å°¼äºšç¡¬æ‹‰" class="headerlink" title="å•è…¿ç½—é©¬å°¼äºšç¡¬æ‹‰"></a>å•è…¿ç½—é©¬å°¼äºšç¡¬æ‹‰</h2><p>é”»ç‚¼è‡€è‚Œã€è…˜ç»³è‚Œï¼Œé”»ç‚¼å•è…¿ç«™ç«‹çš„ç¨³å®šæ€§ï¼Œè†å…³èŠ‚å¾—ç¨³å®šæ€§ã€‚</p><p>è§†é¢‘ï¼š<a href="https://www.bilibili.com/video/BV1Ci4y1R72o?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV1Ci4y1R72o?spm_id_from=333.999.0.0</a></p><h1 id="èƒŒéƒ¨"><a href="#èƒŒéƒ¨" class="headerlink" title="èƒŒéƒ¨"></a>èƒŒéƒ¨</h1><h2 id="å¼•ä½“å‘ä¸Š"><a href="#å¼•ä½“å‘ä¸Š" class="headerlink" title="å¼•ä½“å‘ä¸Š"></a>å¼•ä½“å‘ä¸Š</h2><p>å¦‚æœåšä¸æ¥å¯ä»¥ä½¿ç”¨å¼¹åŠ›ç»³è¾…åŠ©ã€‚</p><h1 id="å‰é”¯è‚Œ"><a href="#å‰é”¯è‚Œ" class="headerlink" title="å‰é”¯è‚Œ"></a>å‰é”¯è‚Œ</h1><p>å¾…æ•´ç†ï¼š<a href="https://www.bilibili.com/video/BV1qq4y1k7oP?spm_id_from=333.999.0.0">https://www.bilibili.com/video/BV1qq4y1k7oP?spm_id_from=333.999.0.0</a></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.bilibili.com/video/BV1SP4y1j71R?spm_id_from=333.999.0.0">æ ¸å¿ƒå¤ªå¼±ï¼Œè‚šå­è‚¯å®šå¤§ï¼ˆ3ä¸ªæŠ€å·§å¿«é€Ÿæ”¹å–„ï¼‰</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ•´ç†ä¸€ä¸‹ä¸ªäººæ¯”è¾ƒå–œæ¬¢å¥èº«åŠ¨ä½œã€‚å¹¶å¤‡æ³¨åŠ¨ä½œè¦ç‚¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;æ ¸å¿ƒ&quot;&gt;&lt;a href=&quot;#æ ¸å¿ƒ&quot; class=&quot;headerlink&quot; title=&quot;æ ¸å¿ƒ&quot;&gt;&lt;/a&gt;æ ¸å¿ƒ&lt;/h1&gt;&lt;h2 id=&quot;å¹³æ¿æ”¯æ’‘&quot;&gt;</summary>
      
    
    
    
    <category term="æ–¹æ³•è®º" scheme="https://gmet233.gitee.io/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/"/>
    
    <category term="å¥èº«" scheme="https://gmet233.gitee.io/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/%E5%81%A5%E8%BA%AB/"/>
    
    
    <category term="å¥èº«" scheme="https://gmet233.gitee.io/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>Keepä¸Šä¸é”™çš„è¯¾ç¨‹åˆé›†</title>
    <link href="https://gmet233.gitee.io/2022/02/28/Keep%E4%B8%8A%E4%B8%8D%E9%94%99%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%90%88%E9%9B%86/"/>
    <id>https://gmet233.gitee.io/2022/02/28/Keep%E4%B8%8A%E4%B8%8D%E9%94%99%E7%9A%84%E8%AF%BE%E7%A8%8B%E5%90%88%E9%9B%86/</id>
    <published>2022-02-28T15:24:57.000Z</published>
    <updated>2022-03-27T06:16:18.005Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ•´ç†äº†ä¸€äº›é€‚åˆè‡ªå·±çš„Keepè¯¾ç¨‹ï¼Œè¿™äº›è¯¾ç¨‹éƒ½äº²è‡ªåšè¿‡ä¸€éã€‚</p><p>æœ¬æ–‡ä¼šä¸æ–­æ›´æ–°ã€‚</p></blockquote><div class="table-container"><table><thead><tr><th>è¯¾ç¨‹åç§°</th><th>è¯¾ç¨‹é“¾æ¥</th><th>éš¾åº¦</th><th>éƒ¨ä½</th><th>å™¨æ¢°</th><th>æ„Ÿå—</th></tr></thead><tbody><tr><td>HIIT - è…¹è‚Œå¡‘é€ </td><td><a href="https://show.gotokeep.com/course/607fefaa1310a35004149bc4">https://show.gotokeep.com/course/607fefaa1310a35004149bc4</a></td><td>3</td><td>è…¹éƒ¨</td><td>ä¸éœ€è¦</td><td>æŒºç´¯çš„ï¼Œä½†æ˜¯ä¸éš¾ã€‚åšå®Œè…¹éƒ¨æœ‰æ˜æ˜¾é…¸ç—›</td></tr><tr><td>å“‘é“ƒå…¨æ–¹ä½èƒ¸éƒ¨åˆºæ¿€-ç½—æ´ªRic</td><td><a href="https://show.gotokeep.com/course/6051a1b41310a33405483f53">https://show.gotokeep.com/course/6051a1b41310a33405483f53</a></td><td>4</td><td>èƒ¸éƒ¨</td><td>å“‘é“ƒ</td><td>å¾ˆæœ‰æ„Ÿè§‰ã€‚</td></tr><tr><td>å“‘é“ƒæ‰‹è‡‚è½°ç‚¸</td><td><a href="https://show.gotokeep.com/course/59ddde95a29e342161e42290">https://show.gotokeep.com/course/59ddde95a29e342161e42290</a></td><td>3</td><td>æ‰‹è‡‚</td><td>å“‘é“ƒ</td><td>ç»ƒäº†å¥½å‡ æ¬¡ï¼Œå¿«æ²¡æ„Ÿè§‰äº†ï¼Œå¯èƒ½éœ€è¦åŠ å¤§é‡é‡</td></tr><tr><td>è·ƒåŠ¨ç‡ƒè„‚å¼ºåŒ–</td><td><a href="https://show.gotokeep.com/course/5b1e349aa29e343df182c7c0">https://show.gotokeep.com/course/5b1e349aa29e343df182c7c0</a></td><td>4</td><td>å…¨èº«</td><td>ä¸éœ€è¦</td><td>æŒºç´¯çš„ã€‚ã€‚</td></tr><tr><td>å®¶åº­å“‘é“ƒå¢è‚Œç‰¹è®­ Â· å¼ºåŠ›è‡€è…¿</td><td><a href="https://show.gotokeep.com/course/601696ae627efb1bdd12ae13">https://show.gotokeep.com/course/601696ae627efb1bdd12ae13</a></td><td>3</td><td>è‡€è…¿</td><td>å“‘é“ƒ</td><td>å¿˜è®°äº†ã€‚</td></tr><tr><td>æ ¸å¿ƒåŠŸèƒ½å¼ºåŒ–</td><td><a href="https://show.gotokeep.com/course/5b90af2da29e342ee240c94f">https://show.gotokeep.com/course/5b90af2da29e342ee240c94f</a></td><td>4</td><td>è…°è…¹</td><td>ä¸éœ€è¦</td><td>å’Œâ€œHIIT - è…¹è‚Œå¡‘é€ â€æœ‰ç‚¹é‡å¤</td></tr></tbody></table></div>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ•´ç†äº†ä¸€äº›é€‚åˆè‡ªå·±çš„Keepè¯¾ç¨‹ï¼Œè¿™äº›è¯¾ç¨‹éƒ½äº²è‡ªåšè¿‡ä¸€éã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¼šä¸æ–­æ›´æ–°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&quot;table-container&quot;&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è¯¾ç¨‹å</summary>
      
    
    
    
    <category term="æ–¹æ³•è®º" scheme="https://gmet233.gitee.io/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/"/>
    
    <category term="å¥èº«" scheme="https://gmet233.gitee.io/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/%E5%81%A5%E8%BA%AB/"/>
    
    
    <category term="å¥èº«" scheme="https://gmet233.gitee.io/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>é“¶è¡Œè½¬è´¦</title>
    <link href="https://gmet233.gitee.io/2022/02/27/%E9%93%B6%E8%A1%8C%E8%BD%AC%E8%B4%A6/"/>
    <id>https://gmet233.gitee.io/2022/02/27/%E9%93%B6%E8%A1%8C%E8%BD%AC%E8%B4%A6/</id>
    <published>2022-02-27T02:06:55.000Z</published>
    <updated>2022-02-28T15:10:27.229Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡FROM å¾®è½¯ è½¯å¼€ ç¬”è¯•é¢˜</p></blockquote><h1 id="é¢˜ç›®"><a href="#é¢˜ç›®" class="headerlink" title="é¢˜ç›®"></a>é¢˜ç›®</h1><p>æ‚¨å°†è·å¾—ä¸¤ä¸ªé“¶è¡Œä¹‹é—´çš„Næ¬¡è½¬è´¦åˆ—è¡¨ï¼ˆç¼–å·0åˆ°N-1ï¼‰ï¼šé“¶è¡ŒAå’Œé“¶è¡ŒBï¼Œç¬¬Kæ¬¡ä¼ è¾“ç”±ä¸¤ä¸ªå€¼æè¿°ï¼š</p><ul><li>R[K]ï¼ˆAæˆ–Bï¼‰ä»£è¡¨æ”¶æ¬¾äººï¼ˆè½¬è´¦å‘é€åˆ°çš„é“¶è¡Œï¼‰ï¼›</li><li>V[K]è¡¨ç¤ºé€šè¿‡ä¼ è¾“å‘é€çš„å€¼ã€‚</li></ul><p>æ‰€æœ‰è½¬ç§»å‡æŒ‰ä»–ä»¬åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„é¡ºåºå®Œæˆã€‚é“¶è¡Œä¸æƒ³è´Ÿå€ºï¼ˆå³ä»–ä»¬çš„è´¦æˆ·ä½™é¢å¯èƒ½ä¸ä¼šä½äº0ï¼‰ã€‚æ¯å®¶é“¶è¡Œçš„åˆå§‹è´¦æˆ·ä½™é¢æœ€ä½æ˜¯å¤šå°‘æ‰èƒ½å®Œæˆè½¬è´¦ï¼Ÿ</p><p>ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] solution(String R, <span class="type">int</span>[] V);</span><br></pre></td></tr></table></figure><p>ç»™å®šä¸€ä¸ªå­—ç¬¦ä¸²Rå’Œä¸€ä¸ªé•¿åº¦å‡ä¸ºNçš„æ•´æ•°æ•°ç»„Vï¼Œè¿”å›ä¸€ä¸ªç”±ä¸¤ä¸ªæ•´æ•°ç»„æˆçš„æ•°ç»„ã€‚è¯ä¹¦åº”æŒ‰ä»¥ä¸‹é¡ºåºè¡¨ç¤ºé“¶è¡ŒAå’ŒBçš„æœ€å°åˆå§‹è´¦æˆ·ä½™é¢ï¼š[é“¶è¡ŒA, é“¶è¡ŒB]ã€‚</p><p>ç»“æœæ•°ç»„åº”ä½œä¸ºæ•´æ•°å‘é‡è¿”å›ã€‚</p><p>ä¾‹å­ï¼š</p><ol><li>ç»™å®šR = â€œBAABAâ€ä¸”V=[2,4,1,1,2]ï¼Œå‡½æ•°åº”è¯¥è¿”å›[2, 4]ã€‚æ¯æ¬¡è½¬è´¦åçš„é“¶è¡Œè´¦æˆ·ä½™é¢å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š</li></ol><div class="table-container"><table><thead><tr><th></th><th>A</th><th>B</th></tr></thead><tbody><tr><td>åˆå§‹ä½™é¢</td><td>2</td><td>4</td></tr><tr><td>A -&gt; Bï¼šè½¬ç§» 2</td><td>0</td><td>6</td></tr><tr><td>B -&gt; Aï¼šè½¬ç§» 4</td><td>4</td><td>2</td></tr><tr><td>B -&gt; Aï¼šè½¬ç§» 1</td><td>5</td><td>1</td></tr><tr><td>A -&gt; Bï¼šè½¬ç§» 1</td><td>4</td><td>2</td></tr><tr><td>B -&gt; Aï¼šè½¬ç§» 2</td><td>6</td><td>0</td></tr></tbody></table></div><ol><li>ç»™å®šR = â€œABABâ€ä¸”V=[10,5,10,15]ï¼Œå‡½æ•°åº”è¿”å›[0, 15]ã€‚</li><li>ç»™å®šR = â€œBâ€ä¸”V=[100]ï¼Œå‡½æ•°åº”è¿”å›[100, 0]ã€‚</li></ol><p>ä¸ºä»¥ä¸‹å‡è®¾ç¼–å†™æœ‰æ•ˆç®—æ³•ã€‚</p><h1 id="è§£"><a href="#è§£" class="headerlink" title="è§£"></a>è§£</h1><p>ä»¥ä¾‹1ä¸ºä¾‹ï¼Œè®¾è®¡é“¶è¡ŒAçš„åˆå§‹ä½™é¢ä¸ºXï¼Œé“¶è¡ŒBçš„åˆå§‹ä½™é¢ä¸ºYã€‚åˆ™æ¯ä¸€æ¬¡è½¬è´¦åAçš„ä½™é¢åˆ†åˆ«ä¸ºï¼š</p><p>X-2, X+2, X+3, X+2, X+4ï¼›Bçš„ä½™é¢åˆ†åˆ«ä¸ºï¼š</p><p>Y+2, Y-2, Y-3, Y-2, Y-4ï¼›</p><p>æ ¹æ®é¢˜ç›®è¦æ±‚å¾—any(X, X-2, X+2, X+3, X+2, X+4) &gt;=0 &amp;&amp; any(Y, Y+2, Y-2, Y-3, Y-2, Y-4)&gt;=0</p><p>å³è¦æ±‚X-2&gt;=0; Y-4&gt;=0;</p><p>é¢˜ç›®æ±‚æœ€å°åˆå§‹ä½™é¢ï¼Œå¯å¾—ï¼ŒX=2ï¼› Y=4</p><p>ä¸‹é¢æ˜¯ä»£ç å®ç°ã€‚</p><h2 id="Javaå®ç°"><a href="#Javaå®ç°" class="headerlink" title="Javaå®ç°"></a>Javaå®ç°</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">int</span>[] solution(String R, <span class="type">int</span>[] V) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> V.length;</span><br><span class="line">    <span class="type">int</span>[] A = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">    <span class="type">int</span>[] B = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//base case</span></span><br><span class="line">    <span class="keyword">if</span>(R.charAt(<span class="number">0</span>) == <span class="string">&#x27;B&#x27;</span>) &#123;</span><br><span class="line">        B[<span class="number">0</span>] = V[<span class="number">0</span>];</span><br><span class="line">        A[<span class="number">0</span>] = -V[<span class="number">0</span>];</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        B[<span class="number">0</span>] = -V[<span class="number">0</span>];</span><br><span class="line">        A[<span class="number">0</span>] = V[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> <span class="variable">min_A</span> <span class="operator">=</span> A[<span class="number">0</span>];</span><br><span class="line">    <span class="type">int</span> <span class="variable">min_B</span> <span class="operator">=</span> B[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span>(R.charAt(i) == <span class="string">&#x27;B&#x27;</span>) &#123;</span><br><span class="line">            A[i] = A[i-<span class="number">1</span>] - V[i];</span><br><span class="line">            B[i] = B[i-<span class="number">1</span>] + V[i];</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            A[i] = A[i-<span class="number">1</span>] + V[i];</span><br><span class="line">            B[i] = B[i-<span class="number">1</span>] - V[i];</span><br><span class="line">        &#125;</span><br><span class="line">        min_A = Math.min(min_A, A[i]);</span><br><span class="line">        min_B = Math.min(min_B, B[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//min_Aå’Œmin_Bä¸èƒ½æ˜¯è´Ÿæ•°</span></span><br><span class="line">    min_A = Math.max(<span class="number">0</span>, -min_A);</span><br><span class="line">    min_B = Math.max(<span class="number">0</span>, -min_B);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;min_A, min_B&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡FROM å¾®è½¯ è½¯å¼€ ç¬”è¯•é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;é¢˜ç›®&quot;&gt;&lt;a href=&quot;#é¢˜ç›®&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®&quot;&gt;&lt;/a&gt;é¢˜ç›®&lt;/h1&gt;&lt;p&gt;æ‚¨å°†è·å¾—ä¸¤ä¸ªé“¶è¡Œä¹‹é—´çš„Næ¬¡è½¬è´¦åˆ—è¡¨ï¼ˆç¼–</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°ç»„" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84/"/>
    
    
    <category term="ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°ç»„" scheme="https://gmet233.gitee.io/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>æ‰¾åˆ°æ•°ç»„ä¸­æ¯”å·¦è¾¹å…ƒç´ éƒ½å¤§åŒæ—¶æ¯”å³è¾¹å…ƒç´ éƒ½å°çš„å…ƒç´ </title>
    <link href="https://gmet233.gitee.io/2022/02/23/%E6%89%BE%E5%88%B0%E6%95%B0%E7%BB%84%E4%B8%AD%E6%AF%94%E5%B7%A6%E8%BE%B9%E5%85%83%E7%B4%A0%E9%83%BD%E5%A4%A7%E5%90%8C%E6%97%B6%E6%AF%94%E5%8F%B3%E8%BE%B9%E5%85%83%E7%B4%A0%E9%83%BD%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0/"/>
    <id>https://gmet233.gitee.io/2022/02/23/%E6%89%BE%E5%88%B0%E6%95%B0%E7%BB%84%E4%B8%AD%E6%AF%94%E5%B7%A6%E8%BE%B9%E5%85%83%E7%B4%A0%E9%83%BD%E5%A4%A7%E5%90%8C%E6%97%B6%E6%AF%94%E5%8F%B3%E8%BE%B9%E5%85%83%E7%B4%A0%E9%83%BD%E5%B0%8F%E7%9A%84%E5%85%83%E7%B4%A0/</id>
    <published>2022-02-23T12:33:29.000Z</published>
    <updated>2022-02-23T12:34:38.886Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¢˜ç›®æè¿°"><a href="#é¢˜ç›®æè¿°" class="headerlink" title="é¢˜ç›®æè¿°"></a>é¢˜ç›®æè¿°</h1><p>æ±‚æ•°ç»„ä¸­æ¯”å·¦è¾¹å…ƒç´ éƒ½å¤§åŒæ—¶æ¯”å³è¾¹å…ƒç´ éƒ½å°çš„å…ƒç´ ï¼Œè¿”å›è¿™äº›å…ƒç´ çš„ç´¢å¼•ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦$O(N)$</p><blockquote><p>è¾“å…¥ï¼š[2, 3, 1, 8, 9, 20, 12]<br>è¾“å‡ºï¼š3, 4<br>è§£é‡Šï¼šæ•°ç»„ä¸­ 8, 9 æ»¡è¶³é¢˜ç›®è¦æ±‚ï¼Œä»–ä»¬çš„ç´¢å¼•åˆ†åˆ«æ˜¯ 3ã€4</p></blockquote><h1 id="è§£æ³•"><a href="#è§£æ³•" class="headerlink" title="è§£æ³•"></a>è§£æ³•</h1><h2 id="æ€è·¯"><a href="#æ€è·¯" class="headerlink" title="æ€è·¯"></a>æ€è·¯</h2><p>æœ€ç®€å•æœ€æš´åŠ›çš„å°±æ˜¯æ²¡ä»å¤´åˆ°å°¾éå†å…ƒç´ ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ åˆ†åˆ«å¾€å‰ã€å¾€åéå†ä¸€ä¸‹ï¼Œçœ‹çœ‹æ˜¯å¦å®ƒæ˜¯å¦æ»¡è¶³æ¡ä»¶ã€‚</p><p>è¿™ç§è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸º$O(N^2)$ï¼Œä¸ç¬¦åˆé¢˜ç›®è¦æ±‚ã€‚</p><p>é€šè¿‡åˆ†æå¯ä»¥å¾—åˆ°ï¼Œå¯¹äºæ¯ä¸ªå…ƒç´ ï¼Œå¦‚æœå®ƒæ¯”<strong>å·¦ä¾§æœ€å¤§çš„å€¼</strong>è¦å¤§ï¼ŒåŒæ—¶æ¯”<strong>å³ä¾§æœ€å°çš„å€¼</strong>è¦å°ï¼Œå°±æ»¡è¶³æ¡ä»¶ã€‚</p><p>é‚£å¦‚æœæœ‰è¿™æ ·ä¸¤ä¸ªæ•°ç»„ï¼Œ</p><p><code>left_max[i]</code> è¡¨ç¤ºåŸæ•°ç»„ [0, i) çš„æœ€å¤§å€¼</p><p><code>right_min[i]</code> è¡¨ç¤ºåŸæ•°ç»„ (i, n) çš„æœ€å°å€¼</p><p>å†…å¾ªç¯å°±å¯ä»¥é€šè¿‡ <code>left_max[i] &lt; nums[i] &amp;&amp; nums[i] &lt; right_min[i]</code> æ¥åˆ¤æ–­äº†ã€‚</p><p>å¯¹äº left_max å’Œ right_min è¿™ä¸¤æ•°ç»„ï¼Œæå‰å…ˆç®—å¥½ï¼Œæ¯ä¸ªæ•°ç»„éƒ½èƒ½$O(N)$å¾—åˆ°ã€‚</p><p>left_max å’Œ right_min é€’æ¨å¼å¦‚ä¸‹ï¼š</p><blockquote><p>left_max[i] = max(left_max[i-1], nums[i])</p><p>right_min[i] = min(right_min[i-1], nums[i])</p></blockquote><p>æ€»æ—¶é—´å¤æ‚åº¦ä¸º $O(N)$</p><h2 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> ...</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">find</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="type">int</span>[] left_max = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        <span class="type">int</span>[] right_min = <span class="keyword">new</span> <span class="title class_">int</span>[n];</span><br><span class="line">        Arrays.fill(left_max, Integer.MIN_VALUE);</span><br><span class="line">        Arrays.fill(right_min, Integer.MAX_VALUE);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">            left_max[i] = Math.max(left_max[i-<span class="number">1</span>], nums[i-<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> n-<span class="number">2</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            right_min[i] = Math.min(right_min[i+<span class="number">1</span>], nums[i+<span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">        List&lt;Integer&gt; res = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; n-<span class="number">1</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; left_max[i] &amp;&amp; nums[i] &lt; right_min[i]) &#123;</span><br><span class="line">                res.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://mp.weixin.qq.com/s/ilOdw4qdu_EJZNXvybqdag">ä¸€é“çƒ­ä¹çš„å­—èŠ‚ä¸‰é¢åŸåˆ›é¢˜</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é¢˜ç›®æè¿°&quot;&gt;&lt;a href=&quot;#é¢˜ç›®æè¿°&quot; class=&quot;headerlink&quot; title=&quot;é¢˜ç›®æè¿°&quot;&gt;&lt;/a&gt;é¢˜ç›®æè¿°&lt;/h1&gt;&lt;p&gt;æ±‚æ•°ç»„ä¸­æ¯”å·¦è¾¹å…ƒç´ éƒ½å¤§åŒæ—¶æ¯”å³è¾¹å…ƒç´ éƒ½å°çš„å…ƒç´ ï¼Œè¿”å›è¿™äº›å…ƒç´ çš„ç´¢å¼•ã€‚è¦æ±‚æ—¶é—´å¤æ‚åº¦$O(N)$&lt;/p&gt;
&lt;blockquot</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°ç»„/é“¾è¡¨" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84-%E9%93%BE%E8%A1%A8/"/>
    
    
    <category term="ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°ç»„" scheme="https://gmet233.gitee.io/tags/%E6%95%B0%E7%BB%84/"/>
    
  </entry>
  
  <entry>
    <title>å¦‚ä½•è¯»è®ºæ–‡</title>
    <link href="https://gmet233.gitee.io/2022/02/22/%E5%A6%82%E4%BD%95%E8%AF%BB%E8%AE%BA%E6%96%87/"/>
    <id>https://gmet233.gitee.io/2022/02/22/%E5%A6%82%E4%BD%95%E8%AF%BB%E8%AE%BA%E6%96%87/</id>
    <published>2022-02-22T13:37:55.000Z</published>
    <updated>2022-02-22T14:51:44.730Z</updated>
    
    <content type="html"><![CDATA[<h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><p>ä¸€ç¯‡è®ºæ–‡å¾€å¾€åˆ†ä¸º<strong>æ ‡é¢˜ï¼Œæ‘˜è¦ï¼Œå¯¼è¨€ï¼Œç®—æ³•ï¼Œå®éªŒï¼Œç»“è®º</strong>ã€‚</p><p><strong>ç®—æ³•</strong>å°±æ˜¯è®ºæ–‡ä½œè€…æå‡ºçš„æ–°çš„æ–¹æ³•ï¼›<strong>å®éªŒ</strong>æ˜¯ä¸ºäº†è¯æ˜æå‡ºçš„ç®—æ³•ã€‚</p><h2 id="è¯»ç¬¬ä¸€é"><a href="#è¯»ç¬¬ä¸€é" class="headerlink" title="è¯»ç¬¬ä¸€é"></a>è¯»ç¬¬ä¸€é</h2><p>å…³æ³¨<strong>æ ‡é¢˜</strong>ï¼Œ<strong>æ‘˜è¦</strong>å’Œ<strong>ç»“è®º</strong>ï¼›ç»“è®ºå’Œæ‘˜è¦å¾€å¾€æ˜¯ä¸€ä¸ªä¸œè¥¿ï¼Œä½†æ˜¯ç»“è®ºä¼šæŠŠæ‘˜è¦çš„é—®é¢˜ç»™è¯æ˜ä¸€ä¸‹ï¼›é¡ºä¾¿çœ‹ä¸€ä¸‹ç®—æ³•å’Œå®éªŒéƒ¨åˆ†çš„å›¾æ ‡ã€‚</p><p><strong>ç›®çš„</strong>ï¼š</p><ul><li>è¿™ç¯‡è®ºæ–‡ä»‹ç»äº†ä»€ä¹ˆ</li><li>æ˜¯å¦ä¸è‡ªå·±ç›¸å…³</li><li>è´¨é‡æ€ä¹ˆæ ·</li><li>æ˜¯å¦ç»§ç»­è¯»ä¸‹å»</li></ul><h2 id="è¯»ç¬¬äºŒé"><a href="#è¯»ç¬¬äºŒé" class="headerlink" title="è¯»ç¬¬äºŒé"></a>è¯»ç¬¬äºŒé</h2><p>å¦‚æœç¬¬ä¸€éè®¤ä¸ºè¯¥è®ºæ–‡éœ€è¦è¯»ä¸‹å»ï¼Œåˆ™è¿›è¡Œç¬¬äºŒéé€šè¯»ï¼Œå¯ä»¥å¿½ç•¥å¾ˆç»†èŠ‚çš„éƒ¨åˆ†ï¼Œä¾‹å¦‚å…¬å¼è¯æ˜ã€‚</p><p>åœˆå‡ºå¼•ç”¨çš„é‡è¦çš„ç›¸å…³çš„æ–‡çŒ®ï¼Œä¾‹å¦‚ï¼Œä½œè€…è§£å†³çš„é—®é¢˜æ˜¯å“ªç¯‡è®ºæ–‡æå‡ºçš„ï¼Œä½œè€…çš„æ–¹æ³•æ˜¯å“ªç¯‡è®ºæ–‡æ”¹è¿›æ¥çš„ã€‚</p><p><strong>ç›®çš„ï¼š</strong></p><ul><li>æŒæ¡è®ºæ–‡ä¸­çš„æ¯ä¸€ä¸ªå›¾ã€è¡¨æ˜¯ä»€ä¹ˆæ„æ€ï¼›</li><li>ä½œè€…çš„æ–¹æ³•å’Œåˆ«äººçš„æ–¹æ³•æ˜¯æ€ä¹ˆå¯¹æ¯”çš„ï¼Œå·®è·æœ‰å¤šå¤§</li></ul><h2 id="è¯»ç¬¬ä¸‰é"><a href="#è¯»ç¬¬ä¸‰é" class="headerlink" title="è¯»ç¬¬ä¸‰é"></a>è¯»ç¬¬ä¸‰é</h2><p>è¯¦ç»†é˜…è¯»ç¬¬ä¸‰éï¼Œè¯»æ‡‚æ¯ä¸€å¥è¯ï¼Œæ¯ä¸€ä¸ªç»†èŠ‚ã€‚æ„ŸåŒèº«å—çš„å»è¯»ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.bilibili.com/video/BV1H44y1t75x">å¦‚ä½•è¯»è®ºæ–‡ - ææ²</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;æ­£æ–‡&quot;&gt;&lt;a href=&quot;#æ­£æ–‡&quot; class=&quot;headerlink&quot; title=&quot;æ­£æ–‡&quot;&gt;&lt;/a&gt;æ­£æ–‡&lt;/h1&gt;&lt;p&gt;ä¸€ç¯‡è®ºæ–‡å¾€å¾€åˆ†ä¸º&lt;strong&gt;æ ‡é¢˜ï¼Œæ‘˜è¦ï¼Œå¯¼è¨€ï¼Œç®—æ³•ï¼Œå®éªŒï¼Œç»“è®º&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®—æ³•&lt;/strong&gt;</summary>
      
    
    
    
    <category term="æ–¹æ³•è®º" scheme="https://gmet233.gitee.io/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/"/>
    
    <category term="é˜…è¯»AIè®ºæ–‡" scheme="https://gmet233.gitee.io/categories/%E6%96%B9%E6%B3%95%E8%AE%BA/%E9%98%85%E8%AF%BBAI%E8%AE%BA%E6%96%87/"/>
    
    
    <category term="æ–¹æ³•è®º" scheme="https://gmet233.gitee.io/tags/%E6%96%B9%E6%B3%95%E8%AE%BA/"/>
    
  </entry>
  
  <entry>
    <title>_Python æŠ›å‡ºå¼‚å¸¸åç¨‹åºç»§ç»­æ‰§è¡Œ</title>
    <link href="https://gmet233.gitee.io/2022/02/22/Python-%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E5%90%8E%E7%A8%8B%E5%BA%8F%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C/"/>
    <id>https://gmet233.gitee.io/2022/02/22/Python-%E6%8A%9B%E5%87%BA%E5%BC%82%E5%B8%B8%E5%90%8E%E7%A8%8B%E5%BA%8F%E7%BB%A7%E7%BB%AD%E6%89%A7%E8%A1%8C/</id>
    <published>2022-02-22T13:09:15.000Z</published>
    <updated>2022-02-22T13:16:04.092Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡æ˜¯ä¸€ä¸ªçŸ¥è¯†ç¢ç‰‡</p></blockquote><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><p>å½“é‡åˆ°å¼‚å¸¸æ—¶ï¼Œä¸ºäº†è®©ç¨‹åºç»§ç»­æ‰§è¡Œè€Œä¸ä¸­æ–­ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># å¯èƒ½æŠ›å‡ºå¼‚å¸¸çš„ä»£ç å—</span></span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>æ³¨ï¼š<strong>è¿™æ ·åšéœ€è¦è°¨æ…</strong>ï¼ŒåŸå› å¦‚ä¸‹ï¼š</p><ol><li>è¿™æ ·åšæŠ›å‡ºå¼‚å¸¸çš„ç±»å‹ä¸æ˜ç¡®ã€‚å¯èƒ½æŠ›å‡ºäº†ä½ å¹¶ä¸æƒ³å¿½ç•¥çš„å¼‚å¸¸ï¼›</li><li>è¿™æ ·åšè¿‡äºæ•·è¡ï¼ˆé™¤éä½ æ˜¯æœ‰ç›®çš„çš„è¿™ä¹ˆåšï¼‰</li></ol><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://blog.csdn.net/weixin_43307577/article/details/87710251">Pythonå¼‚å¸¸å¤„ç† -è·³è¿‡å¼‚å¸¸ç»§ç»­æ‰§è¡Œ</a></li><li><a href="https://developer.aliyun.com/article/803360">é—®é¢˜ï¼šä¸ºä»€ä¹ˆâ€œexcept:passâ€æ˜¯ä¸€ä¸ªä¸å¥½çš„ç¼–ç¨‹ä¹ æƒ¯ï¼Ÿ</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æ˜¯ä¸€ä¸ªçŸ¥è¯†ç¢ç‰‡&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;æ­£æ–‡&quot;&gt;&lt;a href=&quot;#æ­£æ–‡&quot; class=&quot;headerlink&quot; title=&quot;æ­£æ–‡&quot;&gt;&lt;/a&gt;æ­£æ–‡&lt;/h1&gt;&lt;p&gt;å½“é‡åˆ°å¼‚å¸¸æ—¶ï¼Œä¸ºäº†è®©ç¨‹åºç»§ç»­æ‰§è¡Œè€Œä¸ä¸­æ–­ï¼Œä»£ç å¦‚ä¸‹ï¼š</summary>
      
    
    
    
    <category term="Python" scheme="https://gmet233.gitee.io/categories/Python/"/>
    
    <category term="å¼‚å¸¸" scheme="https://gmet233.gitee.io/categories/Python/%E5%BC%82%E5%B8%B8/"/>
    
    
    <category term="Python" scheme="https://gmet233.gitee.io/tags/Python/"/>
    
  </entry>
  
</feed>
