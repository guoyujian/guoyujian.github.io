<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Gmet&#39;s Blog</title>
  
  <subtitle>Eureka!</subtitle>
  <link href="https://gmet233.gitee.io/atom.xml" rel="self"/>
  
  <link href="https://gmet233.gitee.io/"/>
  <updated>2022-01-12T15:25:51.531Z</updated>
  <id>https://gmet233.gitee.io/</id>
  
  <author>
    <name>Met Guo</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ç¥ç»ç½‘ç»œè®­ç»ƒåˆä½“éªŒ: æˆ¿ä»·é¢„æµ‹æ¯”èµ›</title>
    <link href="https://gmet233.gitee.io/2022/01/12/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E8%AE%AD%E7%BB%83%E5%88%9D%E4%BD%93%E9%AA%8C-%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B%E6%AF%94%E8%B5%9B/"/>
    <id>https://gmet233.gitee.io/2022/01/12/%E7%A5%9E%E7%BB%8F%E7%BD%91%E7%BB%9C%E8%AE%AD%E7%BB%83%E5%88%9D%E4%BD%93%E9%AA%8C-%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B%E6%AF%94%E8%B5%9B/</id>
    <published>2022-01-12T15:05:47.000Z</published>
    <updated>2022-01-12T15:25:51.531Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æœ¬æ–‡FROMã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ç¬¬å››ç« ç¬¬åèŠ‚ï¼Œé“¾æ¥è¯¦è§<em>å‚è€ƒèµ„æ–™1</em></p></blockquote><h1 id="å·¥ä½œç¯å¢ƒ"><a href="#å·¥ä½œç¯å¢ƒ" class="headerlink" title="å·¥ä½œç¯å¢ƒ"></a>å·¥ä½œç¯å¢ƒ</h1><div class="table-container"><table><thead><tr><th>è½¯ä»¶åç§°</th><th>è¯´æ˜</th><th>å¤‡æ³¨</th></tr></thead><tbody><tr><td>anaconda</td><td>Pythonç¯å¢ƒå’Œå¼€æºæ¨¡å—ç®¡ç†å·¥å…·</td><td>é»˜è®¤</td></tr><tr><td>Python</td><td>å¼€å‘è¯­è¨€</td><td>3.8</td></tr><tr><td>torchã€torchvision</td><td>æ·±åº¦å­¦ä¹ æ¡†æ¶</td><td>é»˜è®¤</td></tr><tr><td>d2l</td><td>åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ å®˜æ–¹æ¨¡å—</td><td>é»˜è®¤</td></tr><tr><td>VS Code</td><td>å¼€å‘IDE</td><td>é»˜è®¤</td></tr></tbody></table></div><h1 id="åˆ›å»ºé¡¹ç›®"><a href="#åˆ›å»ºé¡¹ç›®" class="headerlink" title="åˆ›å»ºé¡¹ç›®"></a>åˆ›å»ºé¡¹ç›®</h1><p>åˆ›å»ºé¡¹ç›®æ–‡ä»¶å¤¹<code>kaggle-house-prices</code>ï¼ˆè‡ªå®šä¹‰å‘½åï¼‰ä»¥åŠ<code>code</code>å­æ–‡ä»¶å¤¹ï¼Œ<code>code/</code>ä¸‹åˆ›å»ºJupyter notebookï¼Œæ‰€æœ‰ä»£ç å†™åœ¨è¿™é‡Œé¢ã€‚</p><p>ç”Ÿæˆçš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kaggle-house-prices/</span><br><span class="line">code/</span><br><span class="line">kaggle-house-prices.ipynb</span><br></pre></td></tr></table></figure><h1 id="ä¸‹è½½æ•°æ®é›†"><a href="#ä¸‹è½½æ•°æ®é›†" class="headerlink" title="ä¸‹è½½æ•°æ®é›†"></a>ä¸‹è½½æ•°æ®é›†</h1><p>æ•°æ®é›†æ¥è‡ªäºKaggleä¸Šçš„ä¸€ä¸ªç«èµ›ã€‚ç½‘å€ï¼š<a href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data">https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data</a></p><p>ä½ å¯ä»¥ç›´æ¥ä»ä¸Šé¢ä¸‹è½½æ•°æ®é›†ï¼›ï¼ˆåŒ…å«è®­ç»ƒé›†ã€æµ‹è¯•é›†ã€æ•°æ®æè¿°å’Œæäº¤æ ·ä¾‹ï¼‰</p><p>æˆ–è€…ä½ å¯ä»¥ä½¿ç”¨ä¹¦ä¸­çš„æ–¹å¼ä¸‹è½½ä»£ç ï¼Œè¿™é‡Œæˆ‘æŠŠå®Œæ•´çš„ä»£ç è´´ä¸€ä¸‹ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> tarfile</span><br><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># è¿™ä¸ªäºŒå…ƒç»„åŒ…å«æ•°æ®é›†çš„urlå’ŒéªŒè¯æ–‡ä»¶å®Œæ•´æ€§çš„sha-1å¯†é’¥</span></span><br><span class="line">DATA_HUB = <span class="built_in">dict</span>()</span><br><span class="line">DATA_URL = <span class="string">&#x27;http://d2l-data.s3-accelerate.amazonaws.com/&#x27;</span></span><br><span class="line">DATA_HUB[<span class="string">&#x27;kaggle_house_train&#x27;</span>] = (</span><br><span class="line">    DATA_URL + <span class="string">&#x27;kaggle_house_pred_train.csv&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;585e9cc93e70b39160e7921475f9bcd7d31219ce&#x27;</span>)</span><br><span class="line"></span><br><span class="line">DATA_HUB[<span class="string">&#x27;kaggle_house_test&#x27;</span>] = (</span><br><span class="line">    DATA_URL + <span class="string">&#x27;kaggle_house_pred_test.csv&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;fa19780a7b011d9b009e8bff8e99922a8ee2eb90&#x27;</span>)</span><br><span class="line"></span><br><span class="line">DATA_URL = <span class="string">&#x27;http://d2l-data.s3-accelerate.amazonaws.com/&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">å®šä¹‰äº†ä¸€å †ä¸‹è½½ã€è§£å‹çš„å‡½æ•°</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download</span>(<span class="params">name, cache_dir=os.path.join(<span class="params"><span class="string">&#x27;..&#x27;</span>, <span class="string">&#x27;data&#x27;</span></span>)</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸‹è½½ä¸€ä¸ªDATA_HUBä¸­çš„æ–‡ä»¶ï¼Œè¿”å›æœ¬åœ°æ–‡ä»¶å&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">assert</span> name <span class="keyword">in</span> DATA_HUB, <span class="string">f&quot;<span class="subst">&#123;name&#125;</span> ä¸å­˜åœ¨äº <span class="subst">&#123;DATA_HUB&#125;</span>&quot;</span></span><br><span class="line">    url, sha1_hash = DATA_HUB[name]</span><br><span class="line">    os.makedirs(cache_dir, exist_ok=<span class="literal">True</span>)</span><br><span class="line">    fname = os.path.join(cache_dir, url.split(<span class="string">&#x27;/&#x27;</span>)[-<span class="number">1</span>])</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(fname):</span><br><span class="line">        sha1 = hashlib.sha1()</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(fname, <span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">                data = f.read(<span class="number">1048576</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> data:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                sha1.update(data)</span><br><span class="line">        <span class="keyword">if</span> sha1.hexdigest() == sha1_hash:</span><br><span class="line">            <span class="keyword">return</span> fname  <span class="comment"># å‘½ä¸­ç¼“å­˜</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;æ­£åœ¨ä»<span class="subst">&#123;url&#125;</span>ä¸‹è½½<span class="subst">&#123;fname&#125;</span>...&#x27;</span>)</span><br><span class="line">    r = requests.get(url, stream=<span class="literal">True</span>, verify=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(fname, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(r.content)</span><br><span class="line">    <span class="keyword">return</span> fname</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_extract</span>(<span class="params">name, folder=<span class="literal">None</span></span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸‹è½½å¹¶è§£å‹zip/taræ–‡ä»¶&quot;&quot;&quot;</span></span><br><span class="line">    fname = download(name)</span><br><span class="line">    base_dir = os.path.dirname(fname)</span><br><span class="line">    data_dir, ext = os.path.splitext(fname)</span><br><span class="line">    <span class="keyword">if</span> ext == <span class="string">&#x27;.zip&#x27;</span>:</span><br><span class="line">        fp = zipfile.ZipFile(fname, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="keyword">elif</span> ext <span class="keyword">in</span> (<span class="string">&#x27;.tar&#x27;</span>, <span class="string">&#x27;.gz&#x27;</span>):</span><br><span class="line">        fp = tarfile.<span class="built_in">open</span>(fname, <span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">assert</span> <span class="literal">False</span>, <span class="string">&#x27;åªæœ‰zip/taræ–‡ä»¶å¯ä»¥è¢«è§£å‹ç¼©&#x27;</span></span><br><span class="line">    fp.extractall(base_dir)</span><br><span class="line">    <span class="keyword">return</span> os.path.join(base_dir, folder) <span class="keyword">if</span> folder <span class="keyword">else</span> data_dir</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_all</span>():</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;ä¸‹è½½DATA_HUBä¸­çš„æ‰€æœ‰æ–‡ä»¶&quot;&quot;&quot;</span></span><br><span class="line">    <span class="keyword">for</span> name <span class="keyword">in</span> DATA_HUB:</span><br><span class="line">        download(name)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä¸‹è½½è®­ç»ƒé›†å’Œæµ‹è¯•é›†</span></span><br><span class="line">download_all()</span><br></pre></td></tr></table></figure><pre><code>æ­£åœ¨ä»http://d2l-data.s3-accelerate.amazonaws.com/kaggle_house_pred_train.csvä¸‹è½½..\data\kaggle_house_pred_train.csv...æ­£åœ¨ä»http://d2l-data.s3-accelerate.amazonaws.com/kaggle_house_pred_test.csvä¸‹è½½..\data\kaggle_house_pred_test.csv...</code></pre><p>ä½¿ç”¨ä¹¦ä¸­çš„ä»£ç ä¸‹è½½çš„æ•°æ®é›†å­˜æ”¾åœ¨<code>../data/</code>ä¸­ã€‚ç»“æ„ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kaggle-house-prices/</span><br><span class="line">code/</span><br><span class="line">kaggle-house-prices.ipynb</span><br><span class="line">    data/</span><br><span class="line">    kaggle_house_pred_train.csv</span><br><span class="line">    kaggle_house_pred_test.csv</span><br></pre></td></tr></table></figure><p>ä¸‹é¢è¿›è¡Œæ•°æ®è¯»å–å’Œé¢„å¤„ç†ã€‚</p><h1 id="è¯»å–æ•°æ®é›†"><a href="#è¯»å–æ•°æ®é›†" class="headerlink" title="è¯»å–æ•°æ®é›†"></a>è¯»å–æ•°æ®é›†</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¦‚æœpandasæ²¡æœ‰è¢«å®‰è£…ï¼Œè¯·å–æ¶ˆä¸‹ä¸€å¥çš„æ³¨é‡Šã€‚</span></span><br><span class="line"><span class="comment"># !pip install pandas</span></span><br><span class="line"></span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> torch <span class="keyword">import</span> nn</span><br><span class="line"><span class="keyword">from</span> d2l <span class="keyword">import</span> torch <span class="keyword">as</span> d2l</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">train_data = pd.read_csv(<span class="string">&quot;../data/kaggle_house_pred_train.csv&quot;</span>)</span><br><span class="line">test_data = pd.read_csv(<span class="string">&quot;../data/kaggle_house_pred_train.csv&quot;</span>)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ‰“å°ä»–ä»¬çš„è¡Œåˆ—æ•°ï¼Œè¿™é‡Œtest_dataçš„åˆ—æ¯”train_dataå°‘1ï¼Œå°‘çš„æ˜¯æ ‡ç­¾ä¸€åˆ—</span></span><br><span class="line"><span class="built_in">print</span>(train_data.shape)</span><br><span class="line"><span class="built_in">print</span>(test_data.shape)</span><br></pre></td></tr></table></figure><pre><code>(1460, 81)(1460, 81)</code></pre><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># print train_data ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æŒ‡å‡ºæ‰“å°çš„è¡Œï¼ˆæ ·æœ¬ï¼‰å’Œåˆ—ï¼ˆç‰¹å¾ï¼‰</span></span><br><span class="line"><span class="built_in">print</span>(train_data.iloc[<span class="number">0</span>:<span class="number">4</span>, [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, -<span class="number">3</span>, -<span class="number">2</span>, -<span class="number">1</span>]])</span><br></pre></td></tr></table></figure><pre><code>   Id  MSSubClass MSZoning  LotFrontage SaleType SaleCondition  SalePrice0   1          60       RL         65.0       WD        Normal     2085001   2          20       RL         80.0       WD        Normal     1815002   3          60       RL         68.0       WD        Normal     2235003   4          70       RL         60.0       WD       Abnorml     140000</code></pre><p>å°†train_dataå’Œtest_dataå»æ‰ç¬¬ä¸€ä¸ªç‰¹å¾ï¼ˆç¬¬ä¸€ä¸ªç‰¹å¾æ˜¯IDï¼Œå¯¹è®­ç»ƒæ— æ„ä¹‰ï¼‰çš„æ‰€æœ‰ç‰¹å¾éƒ½æ”¾åˆ°all_featuresä¸­ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">all_features = pd.concat((train_data.iloc[:, <span class="number">1</span>:-<span class="number">1</span>], test_data.iloc[:, <span class="number">1</span>:]))</span><br></pre></td></tr></table></figure><h2 id="æ•°æ®é¢„å¤„ç†"><a href="#æ•°æ®é¢„å¤„ç†" class="headerlink" title="æ•°æ®é¢„å¤„ç†"></a>æ•°æ®é¢„å¤„ç†</h2><p>åœ¨å¼€å§‹å»ºæ¨¡ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚</p><p>å¯¹äºæ•°å­—ç‰¹å¾ï¼Œé¦–å…ˆï¼Œ<strong>å°†æ‰€æœ‰ç¼ºå¤±çš„å€¼æ›¿æ¢ä¸ºç›¸åº”ç‰¹å¾çš„å¹³å‡å€¼ï¼›</strong></p><p>ç„¶åï¼Œä¸ºäº†å°†æ‰€æœ‰ç‰¹å¾æ”¾åœ¨ä¸€ä¸ªå…±åŒçš„å°ºåº¦ä¸Šï¼Œæˆ‘ä»¬<strong>é€šè¿‡å°†ç‰¹å¾é‡æ–°ç¼©æ”¾åˆ°é›¶å‡å€¼å’Œå•ä½æ–¹å·®æ¥æ ‡å‡†åŒ–æ•°æ®</strong>ï¼š</p><script type="math/tex; mode=display">x \leftarrow \frac{x - \mu}{\sigma}.</script><p>æ­¤æ—¶ï¼Œç‰¹å¾å³å…·æœ‰é›¶å‡å€¼å’Œå•ä½æ–¹å·®ï¼Œå³ $E[\frac{x-\mu}{\sigma}] = \frac{\mu - \mu}{\sigma} = 0$å’Œ$E[(x-\mu)^2] = (\sigma^2 + \mu^2) - 2\mu^2+\mu^2 = \sigma^2$ã€‚</p><p>æ ‡å‡†åŒ–æ•°æ®æœ‰ä¸¤ä¸ªåŸå› ï¼š</p><ul><li>æ–¹ä¾¿ä¼˜åŒ–ï¼›</li><li>æˆ‘ä»¬ä¸çŸ¥é“å“ªäº›ç‰¹å¾æ˜¯ç›¸å…³çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸æƒ³è®©æƒ©ç½šåˆ†é…ç»™ä¸€ä¸ªç‰¹å¾çš„ç³»æ•°æ¯”åˆ†é…ç»™å…¶ä»–ä»»ä½•ç‰¹å¾çš„ç³»æ•°æ›´å¤§ï¼›</li><li>å–æ¶ˆç”±äºé‡çº²ä¸åŒã€è‡ªèº«å˜å¼‚æˆ–è€…æ•°å€¼ç›¸å·®è¾ƒå¤§æ‰€å¼•èµ·çš„è¯¯å·®ã€‚</li></ul><p>æ›´å¤šå…³äºæ ‡å‡†åŒ–çš„çŸ¥è¯†è¯·è§<em>å‚è€ƒèµ„æ–™2</em></p><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œä¹¦ä¸­æåˆ°çš„æ˜¯å…ˆå¤„ç†ç¼ºå¤±å€¼ï¼Œå†æ ‡å‡†åŒ–ï¼›è€Œå®é™…ä»£ç æ˜¯å…ˆæ ‡å‡†åŒ–ï¼Œå†å¤„ç†ç¼ºå¤±å€¼ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># è‹¥æ— æ³•è·å¾—æµ‹è¯•æ•°æ®ï¼Œåˆ™å¯æ ¹æ®è®­ç»ƒæ•°æ®è®¡ç®—å‡å€¼å’Œæ ‡å‡†å·®</span></span><br><span class="line"><span class="comment"># å–å‡ºæ•°å­—ç±»å‹çš„ç‰¹å¾ç´¢å¼•</span></span><br><span class="line">numeric_features = all_features.dtypes[all_features.dtypes != <span class="string">&#x27;object&#x27;</span>].index</span><br><span class="line"><span class="comment"># å°†æ•°å­—ç±»å‹çš„ç‰¹å¾æ ‡å‡†åŒ–</span></span><br><span class="line">all_features[numeric_features] = all_features[numeric_features].apply(</span><br><span class="line">    <span class="keyword">lambda</span> x: (x - x.mean()) / (x.std()))</span><br><span class="line"><span class="comment"># åœ¨æ ‡å‡†åŒ–æ•°æ®ä¹‹åï¼Œæ‰€æœ‰å‡å€¼æ¶ˆå¤±ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å°†ç¼ºå¤±å€¼è®¾ç½®ä¸º0</span></span><br><span class="line">all_features[numeric_features] = all_features[numeric_features].fillna(<span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>å¯¹äºç¦»æ•£å€¼ï¼Œæˆ‘ä»¬ä½¿ç”¨one-hotç¼–ç ï¼Œå°±æ˜¯ç‰¹å¾çš„ç¦»æ•£å€¼è½¬æ¢ä¸ºå‘é‡ã€‚ä¾‹å¦‚ï¼Œç‰¹å¾â€œtypeâ€çš„å€¼åŒ…æ‹¬catï¼Œdogï¼Œratï¼Œé‚£ä¹ˆç»è¿‡one-hotç¼–ç åä¼šç”Ÿæˆä¸‰ä¸ªç‰¹å¾â€œtype_catâ€ï¼Œâ€œtype_dogâ€ï¼Œâ€œtype_ratâ€ã€‚å¦‚æœåŸæ¥â€œtypeâ€=catï¼Œåˆ™â€œtype_catâ€=1ï¼Œâ€œtype_dogâ€=0ï¼Œâ€œtype_ratâ€=0ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># â€œDummy_na=Trueâ€å°†â€œnaâ€ï¼ˆç¼ºå¤±å€¼ï¼‰è§†ä¸ºæœ‰æ•ˆçš„ç‰¹å¾å€¼ï¼Œå¹¶ä¸ºå…¶åˆ›å»ºæŒ‡ç¤ºç¬¦ç‰¹å¾</span></span><br><span class="line">all_features = pd.get_dummies(all_features, dummy_na=<span class="literal">True</span>)</span><br><span class="line">all_features.shape</span><br></pre></td></tr></table></figure><pre><code>(2920, 332)</code></pre><p>å¯ä»¥çœ‹åˆ°ï¼Œæ­¤è½¬æ¢ä¼šå°†ç‰¹å¾çš„æ€»æ•°é‡ä»79ä¸ªå¢åŠ åˆ°331ä¸ªã€‚ æœ€åï¼Œé€šè¿‡valueså±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ ä»pandasæ ¼å¼ä¸­æå–NumPyæ ¼å¼ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå¼ é‡è¡¨ç¤ºç”¨äºè®­ç»ƒã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">n_train = train_data.shape[<span class="number">0</span>]  <span class="comment"># å–å¾—train_dataçš„è¡Œæ•°</span></span><br><span class="line"><span class="comment"># å–å‡ºall_featuresçš„train_dataè½¬æ¢æˆtensor</span></span><br><span class="line">train_features = torch.tensor(all_features[:n_train].values, dtype=torch.float32)</span><br><span class="line"><span class="comment"># å–å‡ºall_featuresçš„test_dataè½¬æ¢æˆtensor</span></span><br><span class="line">test_features = torch.tensor(all_features[n_train:].values, dtype=torch.float32)</span><br><span class="line"><span class="comment"># train_labels.shape[0] == n_train</span></span><br><span class="line"><span class="comment"># reshape(-1, 1)ç›¸å½“äºæŠŠlabelsä¸€è¡Œè½¬ä¸ºä¸€åˆ—å’Œtrain_featuresä¸€ä¸€å¯¹åº”</span></span><br><span class="line">train_labels = torch.tensor(</span><br><span class="line">    train_data.SalePrice.values.reshape(-<span class="number">1</span>, <span class="number">1</span>), dtype=torch.float32)</span><br></pre></td></tr></table></figure><h1 id="è®­ç»ƒ"><a href="#è®­ç»ƒ" class="headerlink" title="è®­ç»ƒ"></a>è®­ç»ƒ</h1><p>é¦–å…ˆï¼Œæˆ‘ä»¬è®­ç»ƒä¸€ä¸ªå¸¦æœ‰æŸå¤±å¹³æ–¹çš„çº¿æ€§æ¨¡å‹ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œçº¿æ€§æ¨¡å‹å°†ä½œä¸ºåŸºçº¿ï¼ˆbaselineï¼‰æ¨¡å‹ï¼Œ è®©æˆ‘ä»¬ç›´è§‚åœ°çŸ¥é“æœ€å¥½çš„æ¨¡å‹æœ‰è¶…å‡ºç®€å•çš„æ¨¡å‹å¤šå°‘ã€‚</p><p>æŸå¤±å‡½æ•°ï¼šMSE Loss</p><p>åŸºçº¿æ¨¡å‹ï¼šï¼ˆä¸ªäººç†è§£ï¼‰æœ€å…ˆæƒ³åˆ°çš„ã€æœ€ç®€å•çš„ã€ç»“æœæ¯”è¾ƒå·®ã€ä¸€èˆ¬åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¼˜åŒ–çš„æ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">loss = nn.MSELoss()</span><br><span class="line">in_features = train_features.shape[<span class="number">1</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_net</span>():</span></span><br><span class="line">    net = nn.Sequential(nn.Linear(in_features,<span class="number">1</span>))</span><br><span class="line">    <span class="keyword">return</span> net</span><br></pre></td></tr></table></figure><p>å¯¹äºæˆ¿ä»·ï¼Œå°±åƒè‚¡ç¥¨ä»·æ ¼ä¸€æ ·ï¼Œæˆ‘ä»¬å…³å¿ƒçš„æ˜¯ç›¸å¯¹æ•°é‡ï¼Œè€Œä¸æ˜¯ç»å¯¹æ•°é‡ã€‚å› æ­¤ï¼Œ[<strong>æˆ‘ä»¬æ›´å…³å¿ƒç›¸å¯¹è¯¯å·®$\frac{y - \hat{y}}{y}$ï¼Œ</strong>]è€Œä¸æ˜¯ç»å¯¹è¯¯å·®$y - \hat{y}$ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ä¿„äº¥ä¿„å·å†œæ‘åœ°åŒºä¼°è®¡ä¸€æ ‹æˆ¿å­çš„ä»·æ ¼æ—¶ï¼Œæˆ‘ä»¬çš„é¢„æµ‹åå·®äº†10ä¸‡ç¾å…ƒï¼Œåœ¨é‚£é‡Œä¸€æ ‹å…¸å‹çš„æˆ¿å­çš„ä»·å€¼æ˜¯12.5ä¸‡ç¾å…ƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½åšå¾—å¾ˆç³Ÿç³•ã€‚å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åŠ å·è±ªå®…åŒºçš„é¢„æµ‹å‡ºç°äº†è¿™ä¸ªæ•°å­—çš„åå·®ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæƒŠäººçš„å‡†ç¡®é¢„æµ‹ï¼ˆåœ¨é‚£é‡Œï¼Œæˆ¿ä»·å‡å€¼è¶…è¿‡400ä¸‡ç¾å…ƒï¼‰ã€‚</p><p>(<strong>è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ç§æ–¹æ³•æ˜¯ç”¨ä»·æ ¼é¢„æµ‹çš„å¯¹æ•°æ¥è¡¡é‡å·®å¼‚</strong>)ã€‚äº‹å®ä¸Šï¼Œè¿™ä¹Ÿæ˜¯æ¯”èµ›ä¸­å®˜æ–¹ç”¨æ¥è¯„ä»·æäº¤è´¨é‡çš„è¯¯å·®æŒ‡æ ‡ã€‚å³å°† $\delta$ for $|\log y - \log \hat{y}| \leq \delta$è½¬æ¢ä¸º$e^{-\delta} \leq \frac{\hat{y}}{y} \leq e^\delta$ã€‚è¿™ä½¿å¾—é¢„æµ‹ä»·æ ¼çš„å¯¹æ•°ä¸çœŸå®æ ‡ç­¾ä»·æ ¼çš„å¯¹æ•°ä¹‹é—´å‡ºç°ä»¥ä¸‹å‡æ–¹æ ¹è¯¯å·®ï¼š</p><script type="math/tex; mode=display">\sqrt{\frac{1}{n}\sum_{i=1}^n\left(\log y_i -\log \hat{y}_i\right)^2}.</script><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">log_rmse</span>(<span class="params">net, features, labels</span>):</span></span><br><span class="line">    <span class="comment"># ä¸ºäº†åœ¨å–å¯¹æ•°æ—¶è¿›ä¸€æ­¥ç¨³å®šè¯¥å€¼ï¼Œå°†å°äº1çš„å€¼è®¾ç½®ä¸º1</span></span><br><span class="line">    <span class="comment"># clampæ–¹æ³•è¯´æ˜è¯¦è§ å‚è€ƒèµ„æ–™5</span></span><br><span class="line">    clipped_preds = torch.clamp(net(features), <span class="number">1</span>, <span class="built_in">float</span>(<span class="string">&#x27;inf&#x27;</span>))</span><br><span class="line">    rmse = torch.sqrt(loss(torch.log(clipped_preds),</span><br><span class="line">                           torch.log(labels)))</span><br><span class="line">    <span class="keyword">return</span> rmse.item()</span><br></pre></td></tr></table></figure><blockquote><p>åœ¨è¿™é‡Œï¼Œæˆ‘ä¸€å¼€å§‹å¯¹æŸå¤±å‡½æ•°ï¼ˆlossï¼‰å’Œè¯„ä»·æŒ‡æ ‡ï¼ˆmetricsï¼‰æ²¡æœ‰ç†è§£ï¼Œæ‰€ä»¥æˆ‘å¯¹losså’Œlog_rmseçº ç»“äº†å¾ˆä¹…ã€‚</p><p>è¿™é‡Œæˆ‘çš„ç†è§£æ˜¯ï¼Œ</p><p>lossæ˜¯éœ€è¦ä¸¢åˆ°ç½‘ç»œé‡Œçš„ï¼Œæ˜¯ç½‘ç»œä¼˜åŒ–çš„ç›®æ ‡å‡½æ•°ï¼›å› ä¸ºéœ€è¦é€šè¿‡æ¢¯åº¦ä¸‹é™æ¥åå‘ä¼ æ’­ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯å¯å¯¼çš„ï¼›</p><p>metricsæ˜¯è¯„ä»·ç½‘ç»œçš„ä¸€ç§æŒ‡æ ‡ï¼Œä¸å‚ä¸ä¼˜åŒ–ï¼›ä¸éœ€è¦å¯å¯¼ã€‚</p><p>æ›´å¤šå…³äºæŸå¤±å‡½æ•°å’Œè¯„ä»·æŒ‡æ ‡è¯·å‚è§<em>å‚è€ƒèµ„æ–™3</em>ï¼Œ<em>å‚è€ƒèµ„æ–™4</em></p></blockquote><hr><p>æˆ‘ä»¬çš„è®­ç»ƒå‡½æ•°å°†å€ŸåŠ©Adamä¼˜åŒ–å™¨ã€‚</p><p>Adamä¼˜åŒ–å™¨çš„ä¸»è¦å¸å¼•åŠ›åœ¨äºå®ƒå¯¹åˆå§‹å­¦ä¹ ç‡ä¸é‚£ä¹ˆæ•æ„Ÿã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train</span>(<span class="params">net, train_features, train_labels, test_features, test_labels,</span></span></span><br><span class="line"><span class="params"><span class="function">          num_epochs, learning_rate, weight_decay, batch_size</span>):</span></span><br><span class="line">    train_ls, test_ls = [], []</span><br><span class="line">    train_iter = d2l.load_array((train_features, train_labels), batch_size)</span><br><span class="line">    <span class="comment"># è¿™é‡Œä½¿ç”¨çš„æ˜¯Adamä¼˜åŒ–ç®—æ³•</span></span><br><span class="line">    optimizer = torch.optim.Adam(net.parameters(),</span><br><span class="line">                                 lr = learning_rate,</span><br><span class="line">                                 weight_decay = weight_decay)</span><br><span class="line">    <span class="keyword">for</span> epoch <span class="keyword">in</span> <span class="built_in">range</span>(num_epochs):</span><br><span class="line">        <span class="keyword">for</span> X, y <span class="keyword">in</span> train_iter:</span><br><span class="line">            optimizer.zero_grad()</span><br><span class="line">            l = loss(net(X), y)</span><br><span class="line">            l.backward()</span><br><span class="line">            optimizer.step()</span><br><span class="line">        train_ls.append(log_rmse(net, train_features, train_labels))</span><br><span class="line">        <span class="keyword">if</span> test_labels <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            test_ls.append(log_rmse(net, test_features, test_labels))</span><br><span class="line">    <span class="keyword">return</span> train_ls, test_ls</span><br></pre></td></tr></table></figure><h1 id="K-æŠ˜äº¤å‰éªŒè¯"><a href="#K-æŠ˜äº¤å‰éªŒè¯" class="headerlink" title="K-æŠ˜äº¤å‰éªŒè¯"></a>K-æŠ˜äº¤å‰éªŒè¯</h1><p>æ‰€è°“K-æŠ˜äº¤å‰éªŒè¯å°±æ˜¯æŠŠtrain dataåˆ†ä¸ºKä»½ï¼Œæ¯æ¬¡1/Kä»½ä½œä¸ºéªŒè¯é›†ï¼ŒæŠŠå¦å¤–çš„1 - 1/Kä»½ä½œä¸ºè®­ç»ƒé›†ã€‚äº‹å®ä¸Šï¼Œ<code>get_k_fold_data</code>å°±æ˜¯åœ¨åšè¿™ä»¶äº‹ã€‚</p><p>K-æŠ˜äº¤å‰éªŒè¯æœ‰åŠ©äºæ¨¡å‹é€‰æ‹©å’Œè¶…å‚æ•°è°ƒæ•´ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_k_fold_data</span>(<span class="params">k, i, X, y</span>):</span></span><br><span class="line">    <span class="keyword">assert</span> k &gt; <span class="number">1</span></span><br><span class="line">    fold_size = X.shape[<span class="number">0</span>] // k</span><br><span class="line">    X_train, y_train = <span class="literal">None</span>, <span class="literal">None</span></span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">        <span class="comment"># sliceæ–¹æ³•è¯´æ˜è¯¦è§å‚è€ƒèµ„æ–™6</span></span><br><span class="line">        idx = <span class="built_in">slice</span>(j * fold_size, (j + <span class="number">1</span>) * fold_size)</span><br><span class="line">        X_part, y_part = X[idx, :], y[idx]</span><br><span class="line">        <span class="keyword">if</span> j == i:</span><br><span class="line">            X_valid, y_valid = X_part, y_part</span><br><span class="line">        <span class="keyword">elif</span> X_train <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">            X_train, y_train = X_part, y_part</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            X_train = torch.cat([X_train, X_part], <span class="number">0</span>) <span class="comment"># å°†å·²æœ‰çš„X_trainå’ŒX_partè¿æ¥èµ·æ¥</span></span><br><span class="line">            y_train = torch.cat([y_train, y_part], <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> X_train, y_train, X_valid, y_valid</span><br></pre></td></tr></table></figure><p><code>k_fold</code>ä¸­å…ˆæ±‚æ¯ä¸€æŠ˜å¾—åˆ°çš„trian-loss, valid-lossï¼Œæ³¨æ„train_lså’Œvalid_lsæ˜¯ä¸€ä¸ªlistï¼Œå­˜æ”¾äº†æ¯æ¬¡è¿­ä»£ålosså€¼ï¼Œæˆ‘ä»¬å–train_ls[-1]ï¼Œä¹Ÿå°±æ˜¯æœ€ç»ˆçš„é‚£ä¸ªloss</p><p>æœ€åæŠŠæ‰€æœ‰K-æŠ˜å¾—åˆ°çš„train-lossçš„å¹³å‡å’Œvalid-lossçš„å¹³å‡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">k_fold</span>(<span class="params">k, X_train, y_train, num_epochs, learning_rate, weight_decay,</span></span></span><br><span class="line"><span class="params"><span class="function">           batch_size</span>):</span></span><br><span class="line">    train_l_sum, valid_l_sum = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(k):</span><br><span class="line">        <span class="comment"># è¿™é‡Œdataå®é™…æ˜¯ä¸€ä¸ªå…ƒç»„(X_train, y_train, X_valid, y_valid)</span></span><br><span class="line">        data = get_k_fold_data(k, i, X_train, y_train)</span><br><span class="line">        net = get_net()</span><br><span class="line">        <span class="comment"># æŠŠdataè¿™ä¸ªå…ƒç»„ä¼ å…¥ï¼Œå¯¹åº”trainä¸­çš„train_features, train_labels, test_features, test_labelså››ä¸ªå‚æ•°</span></span><br><span class="line">        train_ls, valid_ls = train(net, *data, num_epochs, learning_rate,</span><br><span class="line">                                   weight_decay, batch_size)</span><br><span class="line">        train_l_sum += train_ls[-<span class="number">1</span>]</span><br><span class="line">        valid_l_sum += valid_ls[-<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> i == <span class="number">0</span>:</span><br><span class="line">            d2l.plot(<span class="built_in">list</span>(<span class="built_in">range</span>(<span class="number">1</span>, num_epochs + <span class="number">1</span>)), [train_ls, valid_ls],</span><br><span class="line">                     xlabel=<span class="string">&#x27;epoch&#x27;</span>, ylabel=<span class="string">&#x27;rmse&#x27;</span>, xlim=[<span class="number">1</span>, num_epochs],</span><br><span class="line">                     legend=[<span class="string">&#x27;train&#x27;</span>, <span class="string">&#x27;valid&#x27;</span>], yscale=<span class="string">&#x27;log&#x27;</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">f&#x27;æŠ˜<span class="subst">&#123;i + <span class="number">1</span>&#125;</span>ï¼Œè®­ç»ƒlog rmse<span class="subst">&#123;<span class="built_in">float</span>(train_ls[-<span class="number">1</span>]):f&#125;</span>, &#x27;</span></span><br><span class="line">              <span class="string">f&#x27;éªŒè¯log rmse<span class="subst">&#123;<span class="built_in">float</span>(valid_ls[-<span class="number">1</span>]):f&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> train_l_sum / k, valid_l_sum / k</span><br></pre></td></tr></table></figure><h1 id="æ¨¡å‹é€‰æ‹©"><a href="#æ¨¡å‹é€‰æ‹©" class="headerlink" title="æ¨¡å‹é€‰æ‹©"></a>æ¨¡å‹é€‰æ‹©</h1><p>ä¸‹é¢æ˜¯ä¸€ç»„è¶…å‚æ•°ï¼Œåé¢æˆ‘ä»¬å¯ä»¥å¯¹æ­¤è¿›è¡Œè°ƒä¼˜ï¼ˆæ”¹æ”¹æ•°ï¼Œ run run codeï¼‰</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">k, num_epochs, lr, weight_decay, batch_size = <span class="number">5</span>, <span class="number">100</span>, <span class="number">5</span>, <span class="number">0</span>, <span class="number">64</span></span><br><span class="line">train_l, valid_l = k_fold(k, train_features, train_labels, num_epochs, lr,</span><br><span class="line">                          weight_decay, batch_size)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&#x27;<span class="subst">&#123;k&#125;</span>-æŠ˜éªŒè¯: å¹³å‡è®­ç»ƒlog rmse: <span class="subst">&#123;<span class="built_in">float</span>(train_l):f&#125;</span>, &#x27;</span></span><br><span class="line">      <span class="string">f&#x27;å¹³å‡éªŒè¯log rmse: <span class="subst">&#123;<span class="built_in">float</span>(valid_l):f&#125;</span>&#x27;</span>)</span><br></pre></td></tr></table></figure><pre><code>æŠ˜1ï¼Œè®­ç»ƒlog rmse0.168934, éªŒè¯log rmse0.158768æŠ˜2ï¼Œè®­ç»ƒlog rmse0.162051, éªŒè¯log rmse0.186553æŠ˜3ï¼Œè®­ç»ƒlog rmse0.163633, éªŒè¯log rmse0.167966æŠ˜4ï¼Œè®­ç»ƒlog rmse0.167716, éªŒè¯log rmse0.154111æŠ˜5ï¼Œè®­ç»ƒlog rmse0.161381, éªŒè¯log rmse0.1841885-æŠ˜éªŒè¯: å¹³å‡è®­ç»ƒlog rmse: 0.164743, å¹³å‡éªŒè¯log rmse: 0.170317</code></pre><p><img src="kaggle-house-prices_31_1.svg" alt="svg"></p><p>è¯·æ³¨æ„ï¼Œæœ‰æ—¶ä¸€ç»„è¶…å‚æ•°çš„è®­ç»ƒè¯¯å·®å¯èƒ½éå¸¸ä½ï¼Œä½† K æŠ˜äº¤å‰éªŒè¯çš„è¯¯å·®è¦é«˜å¾—å¤šï¼Œ è¿™è¡¨æ˜æ¨¡å‹è¿‡æ‹Ÿåˆäº†ã€‚ åœ¨æ•´ä¸ªè®­ç»ƒè¿‡ç¨‹ä¸­ï¼Œä½ å°†å¸Œæœ›ç›‘æ§è®­ç»ƒè¯¯å·®å’ŒéªŒè¯è¯¯å·®è¿™ä¸¤ä¸ªæ•°å­—ã€‚ è¾ƒå°‘çš„è¿‡æ‹Ÿåˆå¯èƒ½è¡¨æ˜ç°æœ‰æ•°æ®å¯ä»¥æ”¯æ’‘ä¸€ä¸ªæ›´å¼ºå¤§çš„æ¨¡å‹ï¼Œ è¾ƒå¤§çš„è¿‡æ‹Ÿåˆå¯èƒ½æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­£åˆ™åŒ–æŠ€æœ¯æ¥è·ç›Šã€‚</p><h1 id="æäº¤Kaggleé¢„æµ‹"><a href="#æäº¤Kaggleé¢„æµ‹" class="headerlink" title="æäº¤Kaggleé¢„æµ‹"></a>æäº¤Kaggleé¢„æµ‹</h1><p>å½“æˆ‘ä»¬ç”¨ä¸Šé¢çš„K-æŠ˜äº¤å‰éªŒè¯ç¡®å®šå‚æ•°åï¼Œæˆ‘ä»¬å°†è¶…å‚æ•°å›ºå®šä½ï¼ŒæŠŠæ‰€æœ‰çš„train dataæ‹¿æ¥trainã€‚</p><p>å¦‚æœæµ‹è¯•é›†ä¸Šçš„é¢„æµ‹ä¸ K å€äº¤å‰éªŒè¯è¿‡ç¨‹ä¸­çš„é¢„æµ‹ç›¸ä¼¼ï¼Œ é‚£å°±æ˜¯æ—¶å€™æŠŠå®ƒä»¬ä¸Šä¼ åˆ°Kaggleäº†ã€‚ ä¸‹é¢çš„ä»£ç å°†ç”Ÿæˆä¸€ä¸ªåä¸ºsubmission.csvçš„æ–‡ä»¶ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">train_and_pred</span>(<span class="params">train_features, test_feature, train_labels, test_data,</span></span></span><br><span class="line"><span class="params"><span class="function">                   num_epochs, lr, weight_decay, batch_size</span>):</span></span><br><span class="line">    net = get_net()</span><br><span class="line">    train_ls, _ = train(net, train_features, train_labels, <span class="literal">None</span>, <span class="literal">None</span>,</span><br><span class="line">                        num_epochs, lr, weight_decay, batch_size)</span><br><span class="line">    d2l.plot(np.arange(<span class="number">1</span>, num_epochs + <span class="number">1</span>), [train_ls], xlabel=<span class="string">&#x27;epoch&#x27;</span>,</span><br><span class="line">             ylabel=<span class="string">&#x27;log rmse&#x27;</span>, xlim=[<span class="number">1</span>, num_epochs], yscale=<span class="string">&#x27;log&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">f&#x27;è®­ç»ƒlog rmseï¼š<span class="subst">&#123;<span class="built_in">float</span>(train_ls[-<span class="number">1</span>]):f&#125;</span>&#x27;</span>)</span><br><span class="line">    <span class="comment"># å°†ç½‘ç»œåº”ç”¨äºæµ‹è¯•é›†ã€‚</span></span><br><span class="line">    preds = net(test_features).detach().numpy()</span><br><span class="line">    <span class="comment"># å°†å…¶é‡æ–°æ ¼å¼åŒ–ä»¥å¯¼å‡ºåˆ°Kaggle</span></span><br><span class="line">    test_data[<span class="string">&#x27;SalePrice&#x27;</span>] = pd.Series(preds.reshape(<span class="number">1</span>, -<span class="number">1</span>)[<span class="number">0</span>])</span><br><span class="line">    submission = pd.concat([test_data[<span class="string">&#x27;Id&#x27;</span>], test_data[<span class="string">&#x27;SalePrice&#x27;</span>]], axis=<span class="number">1</span>)</span><br><span class="line">    submission.to_csv(<span class="string">&#x27;submission.csv&#x27;</span>, index=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line">train_and_pred(train_features, test_features, train_labels, test_data,</span><br><span class="line">               num_epochs, lr, weight_decay, batch_size)</span><br></pre></td></tr></table></figure><pre><code>è®­ç»ƒlog rmseï¼š0.162150</code></pre><p><img src="kaggle-house-prices_34_1.svg" alt="svg"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†ç”Ÿæˆçš„<code>submission.csv</code>æ–‡ä»¶æäº¤åˆ°Kaggleï¼š</p><ul><li>è®¿é—®<a href="https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data">https://www.kaggle.com/c/house-prices-advanced-regression-techniques/data</a></li><li>ç‚¹å‡»â€œSubmit Predictionsâ€</li><li>é€‰æ‹©ä½ è¦ä¸Šä¼ çš„é¢„æµ‹æ–‡ä»¶<code>submission.csv</code></li><li>ç‚¹å‡»é¡µé¢åº•éƒ¨çš„â€œMake Submissionâ€æŒ‰é’®ï¼Œå³å¯æŸ¥çœ‹ç»“æœã€‚</li></ul><h1 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h1><ul><li>çœŸå®æ•°æ®é€šå¸¸æ··åˆäº†ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œéœ€è¦è¿›è¡Œé¢„å¤„ç†ã€‚</li><li>å¸¸ç”¨çš„é¢„å¤„ç†æ–¹æ³•ï¼šå°†å®å€¼æ•°æ®é‡æ–°ç¼©æ”¾ä¸ºé›¶å‡å€¼å’Œå•ä½æ–¹æ³•ï¼›ç”¨å‡å€¼æ›¿æ¢ç¼ºå¤±å€¼ã€‚</li><li>å°†ç±»åˆ«ç‰¹å¾è½¬åŒ–ä¸ºæŒ‡æ ‡ç‰¹å¾ï¼Œå¯ä»¥ä½¿æˆ‘ä»¬æŠŠè¿™ä¸ªç‰¹å¾å½“ä½œä¸€ä¸ªç‹¬çƒ­å‘é‡æ¥å¯¹å¾…ã€‚</li><li>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ K æŠ˜äº¤å‰éªŒè¯æ¥é€‰æ‹©æ¨¡å‹å¹¶è°ƒæ•´è¶…å‚æ•°ã€‚</li><li>å¯¹æ•°å¯¹äºç›¸å¯¹è¯¯å·®å¾ˆæœ‰ç”¨ã€‚</li></ul><h1 id="æ›´è¿›ä¸€æ­¥"><a href="#æ›´è¿›ä¸€æ­¥" class="headerlink" title="æ›´è¿›ä¸€æ­¥"></a>æ›´è¿›ä¸€æ­¥</h1><p>è¿™é‡Œæ˜¯ä¹¦ä¸­ç»™å‡ºçš„ä¸€äº›æ€è€ƒé—®é¢˜ï¼Œæˆ‘æ²¡åšï¼Œä½†æ˜¯ä¾ç„¶åˆ—å‡ºæ¥ä¾›å‚è€ƒï¼š</p><ol><li>å°†è¯•å›¾é¢„æµ‹ä»·æ ¼æ”¹ä¸ºè¯•å›¾é¢„æµ‹ä»·æ ¼çš„å¯¹æ•°ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li><li>ç”¨å¹³å‡å€¼æ›¿æ¢ç¼ºå¤±å€¼æ€»æ˜¯å¥½ä¸»æ„å—ï¼Ÿæç¤ºï¼šä½ èƒ½æ„é€ ä¸€ä¸ªä¸éšæœºä¸¢å¤±å€¼çš„æƒ…å†µå—ï¼Ÿ</li><li>é€šè¿‡ K æŠ˜äº¤å‰éªŒè¯è°ƒæ•´è¶…å‚æ•°ï¼Œä»è€Œæé«˜Kaggleçš„å¾—åˆ†ã€‚</li><li>é€šè¿‡æ”¹è¿›æ¨¡å‹ï¼ˆä¾‹å¦‚ï¼Œå±‚ã€æƒé‡è¡°å‡å’Œdropoutï¼‰æ¥æé«˜åˆ†æ•°ã€‚</li><li>å¦‚æœæˆ‘ä»¬æ²¡æœ‰åƒæœ¬èŠ‚æ‰€åšçš„é‚£æ ·æ ‡å‡†åŒ–è¿ç»­çš„æ•°å€¼ç‰¹å¾ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</li></ol><h1 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h1><p>æˆ‘ä»”ç»†é˜…è¯»åŸæ–‡ï¼Œæ‹äº†ä¸€è¾¹ä»£ç ã€‚</p><p>åŸºç¡€æ¯”è¾ƒå·®ï¼Œæœ‰äº›åœ°æ–¹è®¤è¯†ä¸å¤ªæ¸…æ™°ï¼Œå…¨å‡­è‡ªå·±ç†è§£ï¼Œå¦‚æœ‰é”™è¯¯ï¼Œè¯·å¤šåŒ…æ¶µï¼Œæˆ–ç›´æ¥é‚®ç®±è”ç³»æˆ‘ã€‚</p><p>æˆ‘åŸä»¥ä¸ºä¼šæœ‰è®­ç»ƒæ¨¡å‹é”™è¯¯ç‡ä¸æ–­é™ä½çš„æˆå°±æ„Ÿã€‚ã€‚ä½†å®é™…ä¸Šå…¨æ˜¯å¤åˆ¶ç²˜è´´run codeã€‚</p><p>å¥½åƒå­¦åˆ°äº†åˆå¥½åƒæ²¡å­¦åˆ°ã€‚ğŸ¤¦â€</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="http://zh-v2.d2l.ai/chapter_multilayer-perceptrons/kaggle-house-price.html#id6">ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ 4.10. å®æˆ˜Kaggleæ¯”èµ›ï¼šé¢„æµ‹æˆ¿ä»·</a></li><li><a href="https://www.cnblogs.com/wangqiang9/p/9285594.html">æ•°æ®é¢„å¤„ç†ä¹‹ä¸­å¿ƒåŒ–ï¼ˆé›¶å‡å€¼åŒ–ï¼‰ä¸æ ‡å‡†åŒ–ï¼ˆå½’ä¸€åŒ–ï¼‰</a></li><li><a href="https://zhuanlan.zhihu.com/p/373032887">æœºå™¨å­¦ä¹ â€”â€”æŸå¤±å‡½æ•°(loss)ä¸è¯„ä»·æŒ‡æ ‡(metric)çš„åŒºåˆ«ï¼Ÿ</a></li><li><a href="https://codeantenna.com/a/7p6uOqnNhx">kerasä¸­compileæ–¹æ³•çš„ loss å’Œ metrics åŒºåˆ«</a></li><li><a href="https://pytorch.org/docs/stable/generated/torch.clamp.html">torch.clampæ–¹æ³•è¯´æ˜</a></li><li><a href="https://www.runoob.com/python/python-func-slice.html">Python sliceæ–¹æ³•è¯´æ˜</a></li><li><a href="https://blog.csdn.net/m0_37871195/article/details/79829488">æ·±åº¦å­¦ä¹ ä¸­iterationã€epochã€batchsizeçš„å®šä¹‰</a></li><li><a href="https://pytorch.org/docs/1.9.1/generated/torch.Tensor.detach.html">torch.detachæ–¹æ³•è¯´æ˜</a></li><li><a href="https://pytorch.org/docs/stable/generated/torch.cat.html#torch.cat">torch.catæ–¹æ³•è¯´æ˜</a></li><li><a href="https://csbwang.github.io/dl_ch2">æœºå™¨å­¦ä¹ åŸºç¡€</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡FROMã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹ç¬¬å››ç« ç¬¬åèŠ‚ï¼Œé“¾æ¥è¯¦è§&lt;em&gt;å‚è€ƒèµ„æ–™1&lt;/em&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&quot;å·¥ä½œç¯å¢ƒ&quot;&gt;&lt;a href=&quot;#å·¥ä½œç¯å¢ƒ&quot; class=&quot;headerlink&quot; title=&quot;å·¥ä½œç¯å¢ƒ&quot;&gt;&lt;/a</summary>
      
    
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹è¯»ä¹¦ç¬”è®°ï¼ˆä¸€ï¼‰ å‰è¨€</title>
    <link href="https://gmet233.gitee.io/2022/01/10/%E3%80%8A%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89-%E5%89%8D%E8%A8%80/"/>
    <id>https://gmet233.gitee.io/2022/01/10/%E3%80%8A%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89-%E5%89%8D%E8%A8%80/</id>
    <published>2022-01-10T10:00:11.000Z</published>
    <updated>2022-01-12T15:15:33.301Z</updated>
    
    <content type="html"><![CDATA[<p><em>æœ¬åšå®¢è®°å½•é˜…è¯»ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹çš„è¯»ä¹¦ç¬”è®°ã€‚</em></p><blockquote><p>åŸæ–‡åœ°å€ï¼š<a href="http://zh-v2.d2l.ai/chapter_introduction/index.html">http://zh-v2.d2l.ai/chapter_introduction/index.html</a></p></blockquote><h1 id="æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æœºå™¨å­¦ä¹ "><a href="#æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æœºå™¨å­¦ä¹ " class="headerlink" title="æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æœºå™¨å­¦ä¹ "></a>æ—¥å¸¸ç”Ÿæ´»ä¸­çš„æœºå™¨å­¦ä¹ </h1><p>æˆ‘ä»¬å¯ä»¥æŠŠ<strong>å‚æ•°</strong>çœ‹ä½œæ—‹é’®ï¼Œæˆ‘ä»¬å¯ä»¥è½¬åŠ¨æ—‹é’®æ¥è°ƒæ•´ç¨‹åºçš„è¡Œä¸ºã€‚</p><p>ä»»ä¸€è°ƒæ•´å‚æ•°åçš„ç¨‹åºï¼Œæˆ‘ä»¬ç§°ä¸º<strong>æ¨¡å‹</strong>ï¼ˆmodelï¼‰ã€‚</p><p>é€šè¿‡æ“ä½œå‚æ•°è€Œç”Ÿæˆçš„æ‰€æœ‰ä¸åŒç¨‹åºï¼ˆè¾“å…¥-è¾“å‡ºæ˜ å°„ï¼‰çš„é›†åˆç§°ä¸ºâ€œ<strong>æ¨¡å‹æ—</strong>â€ã€‚</p><p>ä½¿ç”¨æ•°æ®é›†æ¥é€‰æ‹©å‚æ•°çš„å…ƒç¨‹åºè¢«ç§°ä¸º<strong>å­¦ä¹ ç®—æ³•</strong>ï¼ˆlearning algorithmï¼‰ã€‚</p><p>åœ¨æˆ‘ä»¬å¼€å§‹ç”¨æœºå™¨å­¦ä¹ ç®—æ³•è§£å†³é—®é¢˜ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»ç²¾ç¡®åœ°å®šä¹‰é—®é¢˜ï¼Œç¡®å®š<strong>è¾“å…¥ï¼ˆinputï¼‰å’Œè¾“å‡ºï¼ˆoutputï¼‰</strong>çš„æ€§è´¨ï¼Œå¹¶é€‰æ‹©åˆé€‚çš„æ¨¡å‹æ—ã€‚</p><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œ<strong>å­¦ä¹ </strong>ï¼ˆlearningï¼‰æ˜¯ä¸€ä¸ªè®­ç»ƒæ¨¡å‹çš„è¿‡ç¨‹ã€‚ é€šè¿‡è¿™ä¸ªè¿‡ç¨‹ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ­£ç¡®çš„å‚æ•°é›†ï¼Œä»è€Œä½¿æ¨¡å‹å¼ºåˆ¶æ‰§è¡Œæ‰€éœ€çš„è¡Œä¸ºã€‚ æ¢å¥è¯è¯´ï¼Œæˆ‘ä»¬ç”¨æ•°æ®<strong>è®­ç»ƒ</strong>ï¼ˆtrainï¼‰æˆ‘ä»¬çš„æ¨¡å‹ã€‚ </p><p>è®­ç»ƒè¿‡ç¨‹é€šå¸¸åŒ…å«å¦‚ä¸‹æ­¥éª¤ï¼š</p><ol><li>ä»ä¸€ä¸ªéšæœºåˆå§‹åŒ–å‚æ•°çš„æ¨¡å‹å¼€å§‹ï¼Œè¿™ä¸ªæ¨¡å‹åŸºæœ¬æ¯«ä¸â€œæ™ºèƒ½â€ã€‚</li><li>è·å–ä¸€äº›æ•°æ®æ ·æœ¬ï¼ˆä¾‹å¦‚ï¼ŒéŸ³é¢‘ç‰‡æ®µä»¥åŠå¯¹åº”çš„{æ˜¯,å¦}æ ‡ç­¾ï¼‰ã€‚</li><li>è°ƒæ•´å‚æ•°ï¼Œä½¿æ¨¡å‹åœ¨è¿™äº›æ ·æœ¬ä¸­è¡¨ç°å¾—æ›´å¥½ã€‚</li><li>é‡å¤ç¬¬2æ­¥å’Œç¬¬3æ­¥ï¼Œç›´åˆ°æ¨¡å‹åœ¨ä»»åŠ¡ä¸­çš„è¡¨ç°ä»¤ä½ æ»¡æ„ã€‚</li></ol><p><img src="ml-loop.png" alt="å…¸å‹çš„è®­ç»ƒè¿‡ç¨‹"></p><h1 id="å…³é”®ç»„ä»¶"><a href="#å…³é”®ç»„ä»¶" class="headerlink" title="å…³é”®ç»„ä»¶"></a>å…³é”®ç»„ä»¶</h1><p>æ— è®ºæˆ‘ä»¬é‡åˆ°ä»€ä¹ˆç±»å‹çš„æœºå™¨å­¦ä¹ é—®é¢˜ï¼Œè¿™äº›ç»„ä»¶éƒ½å°†ä¼´éšæˆ‘ä»¬å·¦å³ï¼š</p><ol><li>æˆ‘ä»¬å¯ä»¥å­¦ä¹ çš„<strong>æ•°æ®</strong>ï¼ˆdataï¼‰ã€‚</li><li>å¦‚ä½•è½¬æ¢æ•°æ®çš„<strong>æ¨¡å‹</strong>ï¼ˆmodelï¼‰ã€‚</li><li>ä¸€ä¸ª<strong>ç›®æ ‡å‡½æ•°</strong>ï¼ˆobjective functionï¼‰ï¼Œç”¨æ¥é‡åŒ–æ¨¡å‹çš„æœ‰æ•ˆæ€§ã€‚</li><li>è°ƒæ•´æ¨¡å‹å‚æ•°ä»¥ä¼˜åŒ–ç›®æ ‡å‡½æ•°çš„<strong>ç®—æ³•</strong>ï¼ˆalgorithmï¼‰ã€‚</li></ol><h2 id="æ•°æ®"><a href="#æ•°æ®" class="headerlink" title="æ•°æ®"></a>æ•°æ®</h2><p>æ¯ä¸ªæ•°æ®é›†ç”±ä¸€ä¸ªä¸ª<strong>æ ·æœ¬</strong>ï¼ˆexample, sampleï¼‰ç»„æˆï¼Œå¤§å¤šæ—¶å€™ï¼Œå®ƒä»¬éµå¾ªç‹¬ç«‹åŒåˆ†å¸ƒ(independently and identically distributed, i.i.d.)ã€‚ æ ·æœ¬æœ‰æ—¶ä¹Ÿå«åš<strong>æ•°æ®ç‚¹</strong>ï¼ˆdata pointï¼‰æˆ–è€…<strong>æ•°æ®å®ä¾‹</strong>ï¼ˆdata instanceï¼‰ï¼Œé€šå¸¸æ¯ä¸ªæ ·æœ¬ç”±ä¸€ç»„ç§°ä¸º<strong>ç‰¹å¾</strong>ï¼ˆfeaturesï¼Œæˆ–<strong>åå˜é‡</strong>ï¼ˆcovariatesï¼‰ï¼‰çš„å±æ€§ç»„æˆã€‚ æœºå™¨å­¦ä¹ æ¨¡å‹ä¼šæ ¹æ®è¿™äº›å±æ€§è¿›è¡Œé¢„æµ‹ã€‚ </p><p><strong>æ ‡ç­¾</strong>ï¼šé¢„æµ‹çš„ä¸€ä¸ªç‰¹æ®Šå±æ€§ï¼Œä¾‹å¦‚æ˜¯/å¦ï¼ŒçŒ«/ç‹—ç­‰ã€‚</p><p>å½“æ¯ä¸ªæ ·æœ¬çš„ç‰¹å¾ç±»åˆ«æ•°é‡éƒ½æ˜¯ç›¸åŒçš„æ—¶å€™ï¼Œå…¶ç‰¹å¾å‘é‡æ˜¯å›ºå®šé•¿åº¦çš„ï¼Œè¿™ä¸ªé•¿åº¦è¢«ç§°ä¸ºæ•°æ®çš„ç»´æ•°ï¼ˆdimensionalityï¼‰ã€‚ å›ºå®šé•¿åº¦çš„ç‰¹å¾å‘é‡æ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„å±æ€§ï¼Œå®ƒæœ‰åŠ©äºæˆ‘ä»¬é‡åŒ–å­¦ä¹ å¤§é‡æ ·æœ¬ã€‚</p><p>ç„¶è€Œï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æ•°æ®éƒ½å¯ä»¥ç”¨â€œå›ºå®šé•¿åº¦â€çš„å‘é‡è¡¨ç¤ºã€‚ä¾‹å¦‚ä¸åŒçš„å›¾ç‰‡å¤§å°ï¼Œæ–‡æœ¬é•¿åº¦ã€‚ä¸ä¼ ç»Ÿæœºå™¨å­¦ä¹ æ–¹æ³•ç›¸æ¯”ï¼Œæ·±åº¦å­¦ä¹ çš„ä¸€ä¸ªä¸»è¦ä¼˜åŠ¿æ˜¯å¯ä»¥å¤„ç†ä¸åŒé•¿åº¦çš„æ•°æ®ã€‚</p><h2 id="æ¨¡å‹"><a href="#æ¨¡å‹" class="headerlink" title="æ¨¡å‹"></a>æ¨¡å‹</h2><h2 id="ç›®æ ‡å‡½æ•°"><a href="#ç›®æ ‡å‡½æ•°" class="headerlink" title="ç›®æ ‡å‡½æ•°"></a>ç›®æ ‡å‡½æ•°</h2><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ¨¡å‹çš„ä¼˜åŠ£ç¨‹åº¦çš„åº¦é‡ï¼Œè¿™ä¸ªåº¦é‡åœ¨å¤§å¤šæ•°æƒ…å†µæ˜¯â€œå¯ä¼˜åŒ–â€çš„ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸º<strong>ç›®æ ‡å‡½æ•°</strong>ï¼ˆobjective functionï¼‰ã€‚ æˆ‘ä»¬é€šå¸¸å®šä¹‰ä¸€ä¸ªç›®æ ‡å‡½æ•°ï¼Œå¹¶å¸Œæœ›ä¼˜åŒ–å®ƒåˆ°æœ€ä½ç‚¹ã€‚ å› ä¸ºè¶Šä½è¶Šå¥½ï¼Œæ‰€ä»¥è¿™äº›å‡½æ•°æœ‰æ—¶è¢«ç§°ä¸º<strong>æŸå¤±å‡½æ•°</strong>ï¼ˆloss functionï¼Œæˆ–cost functionï¼‰ã€‚</p><p>å½“ä»»åŠ¡åœ¨è¯•å›¾é¢„æµ‹æ•°å€¼æ—¶ï¼Œæœ€å¸¸è§çš„æŸå¤±å‡½æ•°æ˜¯<strong>å¹³æ–¹è¯¯å·®</strong>ï¼ˆsquared errorï¼‰ï¼Œå³é¢„æµ‹å€¼ä¸å®é™…å€¼ä¹‹å·®çš„å¹³æ–¹ã€‚ å½“è¯•å›¾è§£å†³åˆ†ç±»é—®é¢˜æ—¶ï¼Œæœ€å¸¸è§çš„ç›®æ ‡å‡½æ•°æ˜¯æœ€å°åŒ–é”™è¯¯ç‡ï¼Œå³é¢„æµ‹ä¸å®é™…æƒ…å†µä¸ç¬¦çš„æ ·æœ¬æ¯”ä¾‹ã€‚ æœ‰äº›ç›®æ ‡å‡½æ•°ï¼ˆå¦‚å¹³æ–¹è¯¯å·®ï¼‰å¾ˆå®¹æ˜“è¢«ä¼˜åŒ–ï¼Œæœ‰äº›ç›®æ ‡ï¼ˆå¦‚é”™è¯¯ç‡ï¼‰ç”±äºä¸å¯å¾®æ€§æˆ–å…¶ä»–å¤æ‚æ€§éš¾ä»¥ç›´æ¥ä¼˜åŒ–ã€‚ åœ¨è¿™äº›æƒ…å†µä¸‹ï¼Œé€šå¸¸ä¼šä¼˜åŒ–æ›¿ä»£ç›®æ ‡ã€‚</p><p> åœ¨ä¸€ä¸ªæ•°æ®é›†ä¸Šï¼Œæˆ‘ä»¬é€šè¿‡æœ€å°åŒ–æ€»æŸå¤±æ¥å­¦ä¹ æ¨¡å‹å‚æ•°çš„æœ€ä½³å€¼ã€‚ è¯¥æ•°æ®é›†ç”±ä¸€äº›ä¸ºè®­ç»ƒè€Œæ”¶é›†çš„æ ·æœ¬ç»„æˆï¼Œç§°ä¸º<strong>è®­ç»ƒæ•°æ®é›†</strong>ï¼ˆtraining datasetï¼Œæˆ–ç§°ä¸ºè®­ç»ƒé›†ï¼ˆtraining setï¼‰ï¼‰ã€‚ ç„¶è€Œï¼Œåœ¨è®­ç»ƒæ•°æ®ä¸Šè¡¨ç°è‰¯å¥½çš„æ¨¡å‹ï¼Œå¹¶ä¸ä¸€å®šåœ¨â€œæ–°æ•°æ®é›†â€ä¸Šæœ‰åŒæ ·çš„æ•ˆèƒ½ï¼Œè¿™é‡Œçš„â€œæ–°æ•°æ®é›†â€é€šå¸¸ç§°ä¸ºæµ‹è¯•æ•°æ®é›†ï¼ˆtest datasetï¼Œæˆ–ç§°ä¸º<strong>æµ‹è¯•é›†</strong>ï¼ˆtest setï¼‰ï¼‰ã€‚</p><p>ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬é€šå¸¸å°†å¯ç”¨æ•°æ®é›†åˆ†æˆä¸¤éƒ¨åˆ†ï¼š<strong>è®­ç»ƒæ•°æ®é›†ç”¨äºæ‹Ÿåˆæ¨¡å‹å‚æ•°ï¼Œæµ‹è¯•æ•°æ®é›†ç”¨äºè¯„ä¼°æ‹Ÿåˆçš„æ¨¡å‹ã€‚</strong> ç„¶åæˆ‘ä»¬è§‚å¯Ÿæ¨¡å‹åœ¨è¿™ä¸¤éƒ¨åˆ†æ•°æ®é›†çš„æ•ˆèƒ½ã€‚ ä½ å¯ä»¥æŠŠâ€œä¸€ä¸ªæ¨¡å‹åœ¨è®­ç»ƒæ•°æ®é›†ä¸Šçš„æ•ˆèƒ½â€æƒ³è±¡æˆâ€œä¸€ä¸ªå­¦ç”Ÿåœ¨æ¨¡æ‹Ÿè€ƒè¯•ä¸­çš„åˆ†æ•°â€ã€‚ è¿™ä¸ªåˆ†æ•°ç”¨æ¥ä¸ºä¸€äº›çœŸæ­£çš„æœŸæœ«è€ƒè¯•åšå‚è€ƒï¼Œå³ä½¿æˆç»©ä»¤äººé¼“èˆï¼Œä¹Ÿä¸èƒ½ä¿è¯æœŸæœ«è€ƒè¯•æˆåŠŸã€‚ æ¢è¨€ä¹‹ï¼Œæµ‹è¯•æ€§èƒ½å¯èƒ½ä¼šæ˜¾è‘—åç¦»è®­ç»ƒæ€§èƒ½ã€‚ å½“ä¸€ä¸ªæ¨¡å‹åœ¨è®­ç»ƒé›†ä¸Šè¡¨ç°è‰¯å¥½ï¼Œä½†ä¸èƒ½æ¨å¹¿åˆ°æµ‹è¯•é›†æ—¶ï¼Œæˆ‘ä»¬è¯´è¿™ä¸ªæ¨¡å‹æ˜¯â€œ<strong>è¿‡æ‹Ÿåˆ</strong>â€ï¼ˆoverfittingï¼‰çš„ã€‚</p><h2 id="ä¼˜åŒ–ç®—æ³•"><a href="#ä¼˜åŒ–ç®—æ³•" class="headerlink" title="ä¼˜åŒ–ç®—æ³•"></a>ä¼˜åŒ–ç®—æ³•</h2><p>ä¸€æ—¦æˆ‘ä»¬è·å¾—äº†ä¸€äº›æ•°æ®æºåŠå…¶è¡¨ç¤ºã€ä¸€ä¸ªæ¨¡å‹å’Œä¸€ä¸ªåˆé€‚çš„æŸå¤±å‡½æ•°ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±éœ€è¦ä¸€ç§ç®—æ³•ï¼Œå®ƒèƒ½å¤Ÿæœç´¢å‡ºæœ€ä½³å‚æ•°ï¼Œä»¥æœ€å°åŒ–æŸå¤±å‡½æ•°ã€‚ æ·±åº¦å­¦ä¹ ä¸­ï¼Œå¤§å¤šæµè¡Œçš„ä¼˜åŒ–ç®—æ³•é€šå¸¸åŸºäºä¸€ç§åŸºæœ¬æ–¹æ³•â€“<strong>æ¢¯åº¦ä¸‹é™</strong>ï¼ˆgradient descentï¼‰ã€‚ ç®€è€Œè¨€ä¹‹ï¼Œåœ¨æ¯ä¸ªæ­¥éª¤ä¸­ï¼Œæ¢¯åº¦ä¸‹é™æ³•éƒ½ä¼šæ£€æŸ¥æ¯ä¸ªå‚æ•°ï¼Œçœ‹çœ‹å¦‚æœä½ ä»…å¯¹è¯¥å‚æ•°è¿›è¡Œå°‘é‡å˜åŠ¨ï¼Œè®­ç»ƒé›†æŸå¤±ä¼šæœå“ªä¸ªæ–¹å‘ç§»åŠ¨ã€‚ ç„¶åï¼Œå®ƒåœ¨å¯ä»¥å‡å°‘æŸå¤±çš„æ–¹å‘ä¸Šä¼˜åŒ–å‚æ•°ã€‚</p><h1 id="å„ç§æœºå™¨å­¦ä¹ é—®é¢˜"><a href="#å„ç§æœºå™¨å­¦ä¹ é—®é¢˜" class="headerlink" title="å„ç§æœºå™¨å­¦ä¹ é—®é¢˜"></a>å„ç§æœºå™¨å­¦ä¹ é—®é¢˜</h1><h2 id="ç›‘ç£å­¦ä¹ "><a href="#ç›‘ç£å­¦ä¹ " class="headerlink" title="ç›‘ç£å­¦ä¹ "></a>ç›‘ç£å­¦ä¹ </h2><p>ç›‘ç£å­¦ä¹ ï¼ˆsupervised learningï¼‰æ“…é•¿åœ¨â€œ<strong>ç»™å®šè¾“å…¥ç‰¹å¾</strong>â€çš„æƒ…å†µä¸‹é¢„æµ‹æ ‡ç­¾ã€‚</p><p>ç›‘ç£å­¦ä¹ ä¸¾ä¾‹ï¼šæ ¹æ®è®¡ç®—æœºæ–­å±‚æ‰«æï¼ˆCTï¼‰è‚¿ç˜¤å›¾åƒï¼Œé¢„æµ‹æ˜¯å¦ä¸ºç™Œç—‡ï¼›æ ¹æ®æœ¬æœˆçš„è´¢åŠ¡æŠ¥å‘Šæ•°æ®ï¼Œé¢„æµ‹ä¸‹ä¸ªæœˆè‚¡ç¥¨çš„ä»·æ ¼ã€‚</p><p>åœ¨å·¥ä¸šä¸­ï¼Œå¤§éƒ¨åˆ†æœºå™¨å­¦ä¹ çš„æˆåŠŸåº”ç”¨éƒ½æ˜¯ç›‘ç£å­¦ä¹ ã€‚ è¿™æ˜¯å› ä¸ºåœ¨ä¸€å®šç¨‹åº¦ä¸Šï¼Œè®¸å¤šé‡è¦çš„ä»»åŠ¡å¯ä»¥æ¸…æ™°åœ°æè¿°ä¸ºï¼šåœ¨ç»™å®šä¸€ç»„ç‰¹å®šçš„å¯ç”¨æ•°æ®çš„æƒ…å†µä¸‹ï¼Œä¼°è®¡æœªçŸ¥äº‹ç‰©çš„æ¦‚ç‡ã€‚</p><p><img src="supervised-learning.png" alt="ç›‘ç£å­¦ä¹ "></p><h3 id="å›å½’"><a href="#å›å½’" class="headerlink" title="å›å½’"></a>å›å½’</h3><p>å›å½’ï¼ˆregressionï¼‰æ˜¯æœ€ç®€å•çš„ç›‘ç£å­¦ä¹ ä»»åŠ¡ä¹‹ä¸€ã€‚</p><p>å½“æ ‡ç­¾å–ä»»æ„æ•°å€¼æ—¶ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºå›å½’é—®é¢˜ã€‚ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç”Ÿæˆä¸€ä¸ªæ¨¡å‹ï¼Œå®ƒçš„é¢„æµ‹éå¸¸æ¥è¿‘å®é™…æ ‡ç­¾å€¼ã€‚</p><p>å›å½’é—®é¢˜ä¸¾ä¾‹ï¼šé¢„æµ‹æˆ¿ä»·ï¼›é¢„æµ‹ç”¨æˆ·å¯¹ä¸€éƒ¨ç”µå½±çš„è¯„åˆ†ã€‚</p><h3 id="åˆ†ç±»"><a href="#åˆ†ç±»" class="headerlink" title="åˆ†ç±»"></a>åˆ†ç±»</h3><p>äºŒåˆ†ç±»ï¼Œå¤šåˆ†ç±»ã€‚</p><p>åˆ†ç±»å¯èƒ½å˜å¾—æ¯”äºŒå…ƒåˆ†ç±»ã€å¤šå…ƒåˆ†ç±»å¤æ‚å¾—å¤šã€‚ ä¾‹å¦‚ï¼Œæœ‰ä¸€äº›åˆ†ç±»ä»»åŠ¡çš„å˜ä½“å¯ä»¥ç”¨äºå¯»æ‰¾å±‚æ¬¡ç»“æ„ï¼Œå±‚æ¬¡ç»“æ„å‡å®šåœ¨è®¸å¤šç±»ä¹‹é—´å­˜åœ¨æŸç§å…³ç³»ã€‚å› æ­¤ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„é”™è¯¯éƒ½æ˜¯å‡ç­‰çš„ã€‚ æˆ‘ä»¬å®æ„¿é”™è¯¯åœ°åˆ†å…¥ä¸€ä¸ªç›¸å…³çš„ç±»åˆ«ï¼Œä¹Ÿä¸æ„¿é”™è¯¯åœ°åˆ†å…¥ä¸€ä¸ªé¥è¿œçš„ç±»åˆ«ï¼Œè¿™é€šå¸¸è¢«ç§°ä¸º<strong>å±‚æ¬¡åˆ†ç±»</strong>(hierarchical classification)ã€‚</p><h3 id="æ ‡è®°é—®é¢˜"><a href="#æ ‡è®°é—®é¢˜" class="headerlink" title="æ ‡è®°é—®é¢˜"></a>æ ‡è®°é—®é¢˜</h3><p>å­¦ä¹ é¢„æµ‹ä¸ç›¸äº’æ’æ–¥çš„ç±»åˆ«çš„é—®é¢˜ç§°ä¸º<strong>å¤šæ ‡ç­¾åˆ†ç±»</strong>ï¼ˆmulti-label classificationï¼‰ã€‚</p><p> ä¸¾ä¸ªä¾‹å­ï¼Œäººä»¬åœ¨æŠ€æœ¯åšå®¢ä¸Šè´´çš„æ ‡ç­¾ï¼Œæ¯”å¦‚â€œæœºå™¨å­¦ä¹ â€ã€â€œæŠ€æœ¯â€ã€â€œå°å·¥å…·â€ã€â€œç¼–ç¨‹è¯­è¨€â€ã€â€œLinuxâ€ã€â€œäº‘è®¡ç®—â€ã€‚ ä¸€ç¯‡å…¸å‹çš„æ–‡ç« å¯èƒ½ä¼šç”¨5-10ä¸ªæ ‡ç­¾ï¼Œå› ä¸ºè¿™äº›æ¦‚å¿µæ˜¯ç›¸äº’å…³è”çš„ã€‚</p><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><p>åœ¨ä¿¡æ¯æ£€ç´¢é¢†åŸŸï¼Œæˆ‘ä»¬å¸Œæœ›å¯¹ä¸€ç»„é¡¹ç›®è¿›è¡Œæ’åºã€‚ ä»¥ç½‘ç»œæœç´¢ä¸ºä¾‹ï¼Œæˆ‘ä»¬çš„ç›®æ ‡ä¸æ˜¯ç®€å•çš„â€œæŸ¥è¯¢ï¼ˆqueryï¼‰-ç½‘é¡µï¼ˆpageï¼‰â€åˆ†ç±»ï¼Œè€Œæ˜¯åœ¨æµ·é‡æœç´¢ç»“æœä¸­æ‰¾åˆ°ç”¨æˆ·æœ€éœ€è¦çš„é‚£éƒ¨åˆ†ã€‚</p><h3 id="æ¨èç³»ç»Ÿ"><a href="#æ¨èç³»ç»Ÿ" class="headerlink" title="æ¨èç³»ç»Ÿ"></a>æ¨èç³»ç»Ÿ</h3><h3 id="åºåˆ—å­¦ä¹ "><a href="#åºåˆ—å­¦ä¹ " class="headerlink" title="åºåˆ—å­¦ä¹ "></a>åºåˆ—å­¦ä¹ </h3><p>æœ‰äº›æ—¶å€™ï¼Œè¾“å…¥æ˜¯è¿ç»­çš„ã€‚æˆ‘ä»¬çš„æ¨¡å‹å¯èƒ½å°±éœ€è¦æ‹¥æœ‰â€œè®°å¿†â€åŠŸèƒ½ã€‚</p><p>æ¯”å¦‚æ–‡å­—åºåˆ—ï¼Œå›¾åƒåºåˆ—ï¼ˆè§†é¢‘ï¼‰</p><p>ä»¥ä¸‹æ˜¯åºåˆ—å­¦ä¹ çš„ç‰¹æ®Šæƒ…å†µï¼š</p><ul><li><strong>æ ‡è®°å’Œè§£æ</strong></li><li><strong>è¯­éŸ³è¯†åˆ«</strong></li><li><strong>æ–‡æœ¬åˆ°è¯­éŸ³</strong></li><li><strong>æœºå™¨ç¿»è¯‘</strong></li></ul><h2 id="æ— ç›‘ç£å­¦ä¹ "><a href="#æ— ç›‘ç£å­¦ä¹ " class="headerlink" title="æ— ç›‘ç£å­¦ä¹ "></a>æ— ç›‘ç£å­¦ä¹ </h2><p> æ¯”å¦‚ï¼Œä½ çš„è€æ¿å¯èƒ½ä¼šç»™ä½ ä¸€å¤§å †æ•°æ®ï¼Œç„¶åè®©ä½ ç”¨å®ƒåšä¸€äº›æ•°æ®ç§‘å­¦ç ”ç©¶ï¼Œå´æ²¡æœ‰å¯¹ç»“æœæœ‰è¦æ±‚ã€‚ æˆ‘ä»¬ç§°è¿™ç±»æ•°æ®ä¸­ä¸å«æœ‰â€œç›®æ ‡â€çš„æœºå™¨å­¦ä¹ é—®é¢˜ä¸º<strong>æ— ç›‘ç£å­¦ä¹ </strong>ï¼ˆunsupervised learningï¼‰</p><p>ä»¥ä¸‹åˆ—ä¸¾äº†é›†ä¸­æ— ç›‘ç£å­¦ä¹ ï¼š</p><ul><li><strong>èšç±»</strong>ï¼ˆclusteringï¼‰é—®é¢˜ï¼šæ²¡æœ‰æ ‡ç­¾çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æ˜¯å¦èƒ½ç»™æ•°æ®åˆ†ç±»</li><li><strong>ä¸»æˆåˆ†åˆ†æ</strong>ï¼ˆprincipal component analysisï¼‰é—®é¢˜ï¼šæˆ‘ä»¬èƒ½å¦æ‰¾åˆ°å°‘é‡çš„å‚æ•°æ¥å‡†ç¡®åœ°æ•æ‰æ•°æ®çš„çº¿æ€§ç›¸å…³å±æ€§ï¼Ÿæ¯”å¦‚ï¼Œä¸€ä¸ªçƒçš„è¿åŠ¨è½¨è¿¹å¯ä»¥ç”¨çƒçš„é€Ÿåº¦ã€ç›´å¾„å’Œè´¨é‡æ¥æè¿°ã€‚</li><li><strong>å› æœå…³ç³»</strong>ï¼ˆcausalityï¼‰å’Œæ¦‚ç‡å›¾æ¨¡å‹ï¼ˆprobabilistic graphical modelsï¼‰é—®é¢˜ï¼šæˆ‘ä»¬èƒ½å¦æè¿°è§‚å¯Ÿåˆ°çš„è®¸å¤šæ•°æ®çš„æ ¹æœ¬åŸå› ï¼Ÿ</li><li><strong>ç”Ÿæˆå¯¹æŠ—æ€§ç½‘ç»œ</strong>ï¼ˆgenerative adversarial networksï¼‰ï¼šä¸ºæˆ‘ä»¬æä¾›ä¸€ç§åˆæˆæ•°æ®çš„æ–¹æ³•ï¼Œç”šè‡³åƒå›¾åƒå’ŒéŸ³é¢‘è¿™æ ·å¤æ‚çš„ç»“æ„åŒ–æ•°æ®ã€‚</li></ul><h3 id="ä¸ç¯å¢ƒäº’åŠ¨"><a href="#ä¸ç¯å¢ƒäº’åŠ¨" class="headerlink" title="ä¸ç¯å¢ƒäº’åŠ¨"></a>ä¸ç¯å¢ƒäº’åŠ¨</h3><p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä¸ç®¡æ˜¯ç›‘ç£å­¦ä¹ è¿˜æ˜¯æ— ç›‘ç£å­¦ä¹ ï¼Œæˆ‘ä»¬éƒ½ä¼šé¢„å…ˆè·å–å¤§é‡æ•°æ®ï¼Œç„¶åå¯åŠ¨æ¨¡å‹ï¼Œä¸å†ä¸ç¯å¢ƒäº¤äº’ã€‚ è¿™é‡Œæ‰€æœ‰å­¦ä¹ éƒ½æ˜¯åœ¨ç®—æ³•ä¸ç¯å¢ƒæ–­å¼€åè¿›è¡Œçš„ï¼Œè¢«ç§°ä¸º<strong>ç¦»çº¿å­¦ä¹ </strong>ï¼ˆoffline learningï¼‰ã€‚</p><p>è¿™ç§ç®€å•çš„ç¦»çº¿å­¦ä¹ æœ‰å®ƒçš„é­…åŠ›ã€‚ å¥½çš„ä¸€é¢æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥å­¤ç«‹åœ°è¿›è¡Œæ¨¡å¼è¯†åˆ«ï¼Œè€Œä¸å¿…åˆ†å¿ƒäºå…¶ä»–é—®é¢˜ã€‚ ä½†ç¼ºç‚¹æ˜¯ï¼Œè§£å†³çš„é—®é¢˜ç›¸å½“æœ‰é™ã€‚ ä¸é¢„æµ‹ä¸åŒï¼Œâ€œä¸çœŸå®ç¯å¢ƒäº’åŠ¨â€å®é™…ä¸Šä¼šå½±å“ç¯å¢ƒã€‚ è¿™é‡Œçš„äººå·¥æ™ºèƒ½æ˜¯â€œæ™ºèƒ½ä»£ç†â€ï¼Œè€Œä¸ä»…æ˜¯â€œé¢„æµ‹æ¨¡å‹â€ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»è€ƒè™‘åˆ°å®ƒçš„è¡Œä¸ºå¯èƒ½ä¼šå½±å“æœªæ¥çš„è§‚å¯Ÿç»“æœã€‚</p><p>è€ƒè™‘â€œä¸çœŸå®ç¯å¢ƒäº’åŠ¨â€å°†æ‰“å¼€ä¸€æ•´å¥—æ–°çš„å»ºæ¨¡é—®é¢˜ã€‚ä»¥ä¸‹åªæ˜¯å‡ ä¸ªä¾‹å­ï¼š</p><ul><li>ç¯å¢ƒè¿˜è®°å¾—æˆ‘ä»¬ä»¥å‰åšè¿‡ä»€ä¹ˆå—ï¼Ÿ</li><li>ç¯å¢ƒæ˜¯å¦æœ‰åŠ©äºæˆ‘ä»¬å»ºæ¨¡ï¼Ÿä¾‹å¦‚ï¼Œç”¨æˆ·å°†æ–‡æœ¬è¯»å…¥è¯­éŸ³è¯†åˆ«å™¨ã€‚</li><li>ç¯å¢ƒæ˜¯å¦æƒ³è¦æ‰“è´¥æ¨¡å‹ï¼Ÿä¾‹å¦‚ï¼Œä¸€ä¸ªå¯¹æŠ—æ€§çš„è®¾ç½®ï¼Œå¦‚åƒåœ¾é‚®ä»¶è¿‡æ»¤æˆ–ç©æ¸¸æˆï¼Ÿ</li><li>ç¯å¢ƒæ˜¯å¦é‡è¦ï¼Ÿ</li><li>ç¯å¢ƒæ˜¯å¦å˜åŒ–ï¼Ÿä¾‹å¦‚ï¼Œæœªæ¥çš„æ•°æ®æ˜¯å¦æ€»æ˜¯ä¸è¿‡å»ç›¸ä¼¼ï¼Œè¿˜æ˜¯éšç€æ—¶é—´çš„æ¨ç§»ä¼šå‘ç”Ÿå˜åŒ–ï¼Ÿæ˜¯è‡ªç„¶å˜åŒ–è¿˜æ˜¯å“åº”æˆ‘ä»¬çš„è‡ªåŠ¨åŒ–å·¥å…·è€Œå‘ç”Ÿå˜åŒ–ï¼Ÿ</li></ul><p>å½“è®­ç»ƒå’Œæµ‹è¯•æ•°æ®ä¸åŒæ—¶ï¼Œæœ€åä¸€ä¸ªé—®é¢˜æå‡ºäº†<strong>åˆ†å¸ƒåç§»</strong>ï¼ˆdistribution shiftï¼‰çš„é—®é¢˜ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ç®€è¦æè¿°å¼ºåŒ–å­¦ä¹ é—®é¢˜ï¼Œè¿™æ˜¯ä¸€ç±»æ˜ç¡®è€ƒè™‘ä¸ç¯å¢ƒäº¤äº’çš„é—®é¢˜ã€‚</p><h3 id="å¼ºåŒ–å­¦ä¹ "><a href="#å¼ºåŒ–å­¦ä¹ " class="headerlink" title="å¼ºåŒ–å­¦ä¹ "></a>å¼ºåŒ–å­¦ä¹ </h3><p><em>ä¸æ˜¯å¤ªæ‡‚</em></p><p>åœ¨å¼ºåŒ–å­¦ä¹ é—®é¢˜ä¸­ï¼Œagentåœ¨ä¸€ç³»åˆ—çš„æ—¶é—´æ­¥éª¤ä¸Šä¸ç¯å¢ƒäº¤äº’ã€‚ åœ¨æ¯ä¸ªç‰¹å®šæ—¶é—´ç‚¹ï¼Œagentä»ç¯å¢ƒæ¥æ”¶ä¸€äº›è§‚å¯Ÿï¼ˆobservationï¼‰ï¼Œå¹¶ä¸”å¿…é¡»é€‰æ‹©ä¸€ä¸ªåŠ¨ä½œï¼ˆactionï¼‰ï¼Œç„¶åé€šè¿‡æŸç§æœºåˆ¶ï¼ˆæœ‰æ—¶ç§°ä¸ºæ‰§è¡Œå™¨ï¼‰å°†å…¶ä¼ è¾“å›ç¯å¢ƒï¼Œæœ€åagentä»ç¯å¢ƒä¸­è·å¾—å¥–åŠ±ï¼ˆrewardï¼‰ã€‚ æ­¤åæ–°ä¸€è½®å¾ªç¯å¼€å§‹ï¼Œagentæ¥æ”¶åç»­è§‚å¯Ÿï¼Œå¹¶é€‰æ‹©åç»­æ“ä½œï¼Œä¾æ­¤ç±»æ¨ã€‚</p><p><img src="rl-environment.png" alt="å¼ºåŒ–å­¦ä¹ "></p><p>å¼ºåŒ–å­¦ä¹ æ¡†æ¶çš„é€šç”¨æ€§ååˆ†å¼ºå¤§ã€‚ ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»»ä½•ç›‘ç£å­¦ä¹ é—®é¢˜è½¬åŒ–ä¸ºå¼ºåŒ–å­¦ä¹ é—®é¢˜ã€‚</p><p>å½“ç„¶ï¼Œå¼ºåŒ–å­¦ä¹ è¿˜å¯ä»¥è§£å†³è®¸å¤šç›‘ç£å­¦ä¹ æ— æ³•è§£å†³çš„é—®é¢˜ã€‚ ä¾‹å¦‚ï¼Œåœ¨ç›‘ç£å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯å¸Œæœ›<strong>è¾“å…¥ä¸æ­£ç¡®çš„æ ‡ç­¾ç›¸å…³è”</strong>ã€‚ ä½†åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬<strong>å¹¶ä¸å‡è®¾ç¯å¢ƒå‘Šè¯‰agentæ¯ä¸ªè§‚æµ‹çš„æœ€ä¼˜åŠ¨ä½œ</strong>ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œagentåªæ˜¯å¾—åˆ°ä¸€äº›å¥–åŠ±ã€‚ æ­¤å¤–ï¼Œç¯å¢ƒç”šè‡³å¯èƒ½ä¸ä¼šå‘Šè¯‰æˆ‘ä»¬æ˜¯å“ªäº›è¡Œä¸ºå¯¼è‡´äº†å¥–åŠ±ã€‚</p><p>å¼ºåŒ–å­¦ä¹ å¯èƒ½è¿˜å¿…é¡»å¤„ç†éƒ¨åˆ†å¯è§‚æµ‹æ€§é—®é¢˜ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“å‰çš„è§‚å¯Ÿç»“æœå¯èƒ½æ— æ³•é˜è¿°æœ‰å…³å½“å‰çŠ¶æ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚ æ¯”æ–¹è¯´ï¼Œä¸€ä¸ªæ¸…æ´æœºå™¨äººå‘ç°è‡ªå·±è¢«å›°åœ¨ä¸€ä¸ªè®¸å¤šç›¸åŒçš„å£æ©±çš„æˆ¿å­é‡Œã€‚ æ¨æ–­æœºå™¨äººçš„ç²¾ç¡®ä½ç½®ï¼ˆä»è€Œæ¨æ–­å…¶çŠ¶æ€ï¼‰ï¼Œéœ€è¦åœ¨è¿›å…¥å£æ©±ä¹‹å‰è€ƒè™‘å®ƒä¹‹å‰çš„è§‚å¯Ÿç»“æœã€‚</p><p>æœ€åï¼Œåœ¨ä»»ä½•æ—¶é—´ç‚¹ä¸Šï¼Œå¼ºåŒ–å­¦ä¹ agentå¯èƒ½çŸ¥é“ä¸€ä¸ªå¥½çš„ç­–ç•¥ï¼Œä½†å¯èƒ½æœ‰è®¸å¤šæ›´å¥½çš„ç­–ç•¥ä»æœªå°è¯•è¿‡çš„ã€‚ å¼ºåŒ–å­¦ä¹ agentå¿…é¡»ä¸æ–­åœ°åšå‡ºé€‰æ‹©ï¼šæ˜¯åº”è¯¥åˆ©ç”¨å½“å‰æœ€å¥½çš„ç­–ç•¥ï¼Œè¿˜æ˜¯æ¢ç´¢æ–°çš„ç­–ç•¥ç©ºé—´ï¼ˆæ”¾å¼ƒä¸€äº›çŸ­æœŸå›æŠ¥æ¥æ¢å–çŸ¥è¯†ï¼‰ã€‚</p><p>ä¸€èˆ¬çš„å¼ºåŒ–å­¦ä¹ é—®é¢˜æ˜¯ä¸€ä¸ªéå¸¸æ™®éçš„é—®é¢˜ã€‚ agentçš„åŠ¨ä½œä¼šå½±å“åç»­çš„è§‚å¯Ÿï¼Œè€Œå¥–åŠ±åªä¸æ‰€é€‰çš„åŠ¨ä½œç›¸å¯¹åº”ã€‚ ç¯å¢ƒå¯ä»¥æ˜¯å®Œæ•´è§‚å¯Ÿåˆ°çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯éƒ¨åˆ†è§‚å¯Ÿåˆ°çš„ï¼Œè§£é‡Šæ‰€æœ‰è¿™äº›å¤æ‚æ€§å¯èƒ½ä¼šå¯¹ç ”ç©¶äººå‘˜è¦æ±‚å¤ªé«˜ã€‚ æ­¤å¤–ï¼Œå¹¶ä¸æ˜¯æ¯ä¸ªå®é™…é—®é¢˜éƒ½è¡¨ç°å‡ºæ‰€æœ‰è¿™äº›å¤æ‚æ€§ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;&lt;em&gt;æœ¬åšå®¢è®°å½•é˜…è¯»ã€ŠåŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ ã€‹çš„è¯»ä¹¦ç¬”è®°ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸæ–‡åœ°å€ï¼š&lt;a href=&quot;http://zh-v2.d2l.ai/chapter_introduction/index.html&quot;&gt;http://zh-v2.d2l.a</summary>
      
    
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    <category term="åŠ¨æ‰‹å­¦æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/categories/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/%E5%8A%A8%E6%89%8B%E5%AD%A6%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
    
    <category term="æ·±åº¦å­¦ä¹ " scheme="https://gmet233.gitee.io/tags/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/"/>
    
  </entry>
  
  <entry>
    <title>åŸºäºScrapyçš„ç½‘ç»œçˆ¬è™«æ¡ˆä¾‹</title>
    <link href="https://gmet233.gitee.io/2022/01/09/%E5%9F%BA%E4%BA%8EScrapy%E7%9A%84%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E6%A1%88%E4%BE%8B/"/>
    <id>https://gmet233.gitee.io/2022/01/09/%E5%9F%BA%E4%BA%8EScrapy%E7%9A%84%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB%E6%A1%88%E4%BE%8B/</id>
    <published>2022-01-09T03:14:08.000Z</published>
    <updated>2022-01-09T05:29:09.015Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>è¿™æ˜¯åœ¨å…¬å¸å®ä¹ æ—¶ï¼Œé¢†å¯¼ç»™å‡ºçš„ä¸€ä¸ªæ•°æ®çˆ¬å–éœ€æ±‚ã€‚ï¼ˆæ‰€ä»¥æ¶‰åŠæ³•å¾‹é—®é¢˜è¯·æ‰¾å…¬å¸çš„éº»çƒ¦ï¼Œä¸è¦è”ç³»æˆ‘ğŸ˜‚ï¼‰</p><p>è™½ç„¶æˆ‘ä¹‹å‰ä¹Ÿå¹²è¿‡ç½‘ç»œçˆ¬è™«ï¼Œä½†éƒ½æ˜¯åœ¨æ¯”è¾ƒå®Œæ•´çš„æ¡†æ¶ä¸‹è¿›è¡Œå®ç°ï¼šä»¥å‰åªéœ€è¦å®ç°URLè§£æå’Œç½‘é¡µæºç æŠ½å–æ¥å£ï¼Œå…¶ä»–åƒç½‘ç»œçˆ¬è™«é…ç½®ï¼Œæ•°æ®å­˜å‚¨ï¼Œæ•°æ®æŠ½å–ï¼Œæ•°æ®å¯¼å‡ºï¼Œä»»åŠ¡å¯åŠ¨å’Œåœæ­¢ç­‰æ¨¡å—åªéœ€è¦é¼ æ ‡clickä¸€ä¸‹æˆ–è€…æ ¹æœ¬å°±æ˜¯â€œé»‘ç›’â€çš„ï¼Œä¸éœ€è¦æˆ‘æ“å¿ƒã€‚ã€‚</p><p>è¿™ä¸€æ¬¡ï¼Œæˆ‘åŸºæœ¬æ˜¯ä»â€œ0â€å¼€å§‹ã€‚æ‰€ä»¥åœ¨å®Œæˆä»»åŠ¡çš„è¿‡ç¨‹ä¸­å­¦åˆ°äº†å¾ˆå¤šã€‚ï¼ˆå½“ç„¶ä¹Ÿè¿˜ä¸å¤Ÿå¤šï¼‰</p><p>ç”±äºçˆ¬å–çš„ç½‘ç«™æ˜¯ä¸€ä¸ªç»å…¸çš„â€œåˆ—è¡¨-è¯¦æƒ…â€ç»“æ„ï¼Œä¸”çˆ¬å–éš¾åº¦ä¸éš¾ï¼ˆç½‘ç«™æ²¡æœ‰è®¾ç½®åçˆ¬ï¼‰ï¼Œä½œä¸ºçˆ¬è™«åˆå­¦è€…å¾ˆåˆé€‚ï¼Œæ‰€ä»¥æˆ‘æŠŠè¯¥ä»»åŠ¡çš„å®ç°è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿è‡ªå·±å­¦ä¹ ã€‚</p><p>æœ¬ç¯‡åšå®¢å°†è®°å½•æˆ‘åœ¨å®ç°è¯¥ä»»åŠ¡æ—¶ï¼Œå­¦åˆ°çš„çŸ¥è¯†ã€é‡åˆ°çš„å›°éš¾ã€å¯¹åº”çš„è§£å†³æ–¹æ¡ˆã€‚</p><p>é€šè¿‡é˜…è¯»æœ¬ç¯‡åšå®¢ä½ å°†è·å¾—</p><ul><li>ä½¿ç”¨Scrapyè¿›è¡Œç®€å•çš„ç½‘é¡µæ•°æ®çˆ¬å–</li><li>ä½¿ç”¨BeautifulSoupè§£æHTML</li><li>ä½¿ç”¨Pandasåšç®€å•çš„æ•°æ®è¯»å–ã€å»é‡ã€åˆ†ææ“ä½œ</li></ul><p>ä¸èƒ½è·å¾—ï¼š</p><ul><li>Scrapyé«˜çº§ä½¿ç”¨ã€æ¡†æ¶ç»“æ„ã€åº•å±‚åŸç†</li><li>ç ´è§£æ•°æ®é‡‡é›†æ—¶é‡åˆ°çš„åçˆ¬</li></ul><p>åºŸè¯æ¯”è¾ƒå¤šã€‚å…ˆæ¥çœ‹ä¸€ä¸‹é˜…è¯»æœ¬æ–‡éœ€è¦çš„å‰ç½®çŸ¥è¯†ã€‚</p><h1 id="é˜…è¯»æœ¬æ–‡éœ€è¦çš„å‰ç½®çŸ¥è¯†"><a href="#é˜…è¯»æœ¬æ–‡éœ€è¦çš„å‰ç½®çŸ¥è¯†" class="headerlink" title="é˜…è¯»æœ¬æ–‡éœ€è¦çš„å‰ç½®çŸ¥è¯†"></a>é˜…è¯»æœ¬æ–‡éœ€è¦çš„å‰ç½®çŸ¥è¯†</h1><p>é˜…è¯»æœ¬ç¯‡åšå®¢éœ€è¦ä¸€å®šçš„å‰ç½®çŸ¥è¯†ã€‚æˆ‘å°†åˆ—ä¸¾ä¸€äº›ï¼Œå¯èƒ½ä¸å…¨ã€‚</p><ul><li>ç½‘ç»œçˆ¬è™«ï¼šä»€ä¹ˆæ˜¯ç½‘ç»œçˆ¬è™«</li><li>//Condaï¼šä»€ä¹ˆæ˜¯Condaï¼ŒCondaå®‰è£…ã€ç¯å¢ƒåˆ›å»ºç­‰</li><li>Python åŸºç¡€ï¼šåŸºç¡€æ•°æ®ç»“æ„åŠæ“ä½œã€æ–‡ä»¶I/Oæ“ä½œ</li><li>PyCharmä½¿ç”¨ï¼šå¦‚ä½•é…ç½®å¼€å‘ç¯å¢ƒï¼Œè¿æ¥è¿œç¨‹ç¯å¢ƒè¿›è¡Œå¼€å‘ç­‰</li><li>//Linux æœåŠ¡å™¨åŸºæœ¬å‘½ä»¤</li><li>HTMLåŸºç¡€ã€CSSé€‰æ‹©å™¨ç­‰å‰ç«¯åŸºç¡€çŸ¥è¯†ã€‚</li><li>XPathæ•°æ®å®šä½ã€æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ç­‰çŸ¥è¯†ã€‚</li></ul><p>å¦‚æœä½ æœ‰ä»¥ä¸ŠåŸºç¡€ï¼Œé‚£ä¹ˆé˜…è¯»æœ¬ç¯‡åšå®¢åŸºæœ¬æ²¡æœ‰éšœç¢ã€‚</p><p>ä¸‹é¢ä»‹ç»æˆ‘çš„å·¥ä½œç¯å¢ƒã€‚</p><h1 id="å·¥ä½œç¯å¢ƒ"><a href="#å·¥ä½œç¯å¢ƒ" class="headerlink" title="å·¥ä½œç¯å¢ƒ"></a>å·¥ä½œç¯å¢ƒ</h1><table><thead><tr><th>è½¯ä»¶åç§°</th><th>å¤‡æ³¨</th><th>ç‰ˆæœ¬</th></tr></thead><tbody><tr><td>Windows</td><td>æ“ä½œç³»ç»Ÿ</td><td>10</td></tr><tr><td>PyCharm</td><td>å¼€å‘IDE</td><td>2019.3.5</td></tr><tr><td>Ananconda</td><td>Pythonç¯å¢ƒç®¡ç†å’ŒåŒ…ç®¡ç†å·¥å…·</td><td>æ‡’å¾—å†™äº†</td></tr><tr><td>Scrapy</td><td>Pythonå¼€æºæ¨¡å—ï¼Œçˆ¬è™«æ¡†æ¶</td><td>æ‡’å¾—å†™äº†</td></tr><tr><td>BeautifulSoup</td><td>Pythonå¼€æºæ¨¡å—ï¼Œè§£æHTML</td><td>æ‡’å¾—å†™äº†</td></tr><tr><td>Pandas</td><td>Pythonå¼€æºæ¨¡å—ï¼Œè¿™é‡Œç”¨å®ƒåšç®€å•çš„æ•°æ®æå–</td><td>æ‡’å¾—å†™äº†</td></tr></tbody></table><p>ä¸‹é¢ä»‹ç»å…·ä½“éœ€æ±‚ã€‚</p><h1 id="éœ€æ±‚"><a href="#éœ€æ±‚" class="headerlink" title="éœ€æ±‚"></a>éœ€æ±‚</h1><p>çˆ¬å–ç½‘ç«™ <a href="https://www.yunyubaike.com/">å­•è‚²ç™¾ç§‘</a> å„åˆ†ç±»ä¸‹çš„å­•è‚²é—®ç­”ã€‚ç»“æœä»¥CSVæ ¼å¼ç»™å‡ºã€‚</p><h2 id="æµç¨‹"><a href="#æµç¨‹" class="headerlink" title="æµç¨‹"></a>æµç¨‹</h2><p>æ‰“å¼€ <a href="https://www.yunyubaike.com/">å­•è‚²ç™¾ç§‘</a> å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤šå­•è‚²ç™¾ç§‘çš„åˆ†ç±»ï¼Œé€‰æ‹©ä¸€ä¸ªåˆ†ç±»ï¼Œæ¯”å¦‚ï¼Œè¿™é‡Œæˆ‘ä»¬é€‰æ‹©ã€å‡†å¤‡æ€€å­•ã€‘ã€‚</p><p><img src="image-20220107161453957.png" alt="åˆ†ç±»"></p><p>æ–°æ‰“å¼€çš„ç½‘é¡µä¸º<a href="https://www.yunyubaike.com/beiyun/">https://www.yunyubaike.com/beiyun/</a></p><p>å¯ä»¥çœ‹åˆ°è¿™é‡Œæœ‰ä¸€äº›å­åˆ†ç±»ï¼š</p><p><img src="image-20220107162138428.png" alt="åˆ†ç±»å’Œå­åˆ†ç±»"></p><p>è¿™äº›åˆ†ç±»å’Œå­åˆ†ç±»ä¸‹æœ‰å¾ˆå¤šå­•è‚²ç™¾ç§‘é—®ç­”ï¼Œæˆ‘ä»¬ç‚¹å‡»ä¸€ä¸ªé—®é¢˜çš„è¶…é“¾æ¥ï¼Œåœ¨å¼¹å‡ºçš„è¯¦æƒ…é¡µä¸­ç»™å‡ºé—®é¢˜çš„ç­”æ¡ˆï¼Œå¦‚å›¾ï¼š</p><p><img src="image-20220107162808046.png" alt="å­•è‚²ç™¾ç§‘-è¯¦æƒ…é¡µ"></p><p>æŠŠè¿™äº›é—®é¢˜å’Œç­”æ¡ˆâ€œæŠ½å–â€åˆ°åˆ°CSVæ–‡ä»¶ä¸­ï¼Œä½œä¸ºæœ€ç»ˆç»“æœã€‚</p><h2 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h2><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ†æè¯¥ç½‘ç«™ï¼Œä¾‹å¦‚ç½‘ç«™æ•°æ®é‡å¤§å°ï¼Œç½‘ç«™ç½‘é¡µç»“æ„ï¼Œç½‘ç«™è·³è½¬æ–¹å¼ï¼Œæ•°æ®ä¼ è¾“æ–¹å¼ï¼Œæ•°æ®æ˜¯å¦åŠ å¯†ï¼Œç½‘ç«™åçˆ¬ä¸¥ä¸ä¸¥é‡ç­‰ç­‰ã€‚</p><p>å¯ä»¥æŠ“åŒ…ã€å†™ç½‘é¡µä¸‹è½½ä»£ç æµ‹è¯•ä¸€ä¸‹ã€‚</p><p>æ®æ­¤æŒ‡å®šç½‘ç«™é‡‡é›†ç­–ç•¥ï¼Œæ˜¯ä½¿ç”¨æœ¬åœ°IPå°±å¯ä»¥é‡‡é›†è¿˜æ˜¯éœ€è¦è®¾ç½®ä¸€æ‰¹ä»£ç†IPï¼Œæ•°æ®æ–‡ä»¶æ˜¯å­˜æ”¾åˆ°æœ¬åœ°è¿˜æ˜¯éœ€è¦å­˜æ”¾åˆ°Hadoopï¼Œæ˜¯å¦éœ€è¦å¯è§†åŒ–ï¼ˆSeleniumï¼‰é‡‡é›†ç­‰ç­‰ã€‚</p><h2 id="é‡‡é›†ç­–ç•¥"><a href="#é‡‡é›†ç­–ç•¥" class="headerlink" title="é‡‡é›†ç­–ç•¥"></a>é‡‡é›†ç­–ç•¥</h2><ol><li>å…ˆé‡‡é›†åˆ†ç±»ï¼ˆé¦–é¡µï¼‰URLï¼›</li><li>æ ¹æ®åˆ†ç±»ï¼ˆé¦–é¡µï¼‰URLä¸æ–­å¾ªç¯ç”Ÿæˆåˆ†é¡µï¼ˆåˆ—è¡¨é¡µï¼‰ï¼›</li><li>çˆ¬å–æ¯ä¸ªåˆ—è¡¨é¡µä¸­çš„è¯¦æƒ…URLï¼›</li><li>ä¸‹è½½è¯¦æƒ…URLçš„HTMLæ–‡ä»¶ï¼Œä¿å­˜åˆ°æœ¬åœ°ï¼›</li><li>è§£ææœ¬åœ°HTMLï¼Œç”ŸæˆCSVæ–‡ä»¶ã€‚</li></ol><h1 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h1><h2 id="é‡‡é›†åˆ†ç±»"><a href="#é‡‡é›†åˆ†ç±»" class="headerlink" title="é‡‡é›†åˆ†ç±»"></a>é‡‡é›†åˆ†ç±»</h2><p>ä»”ç»†åˆ†æç½‘ç«™å¯ä»¥å‘ç°ï¼Œåœ¨é‡‡é›†åˆ†ç±»å­˜åœ¨ä¸¤ä¸ªå‘ã€‚</p><ul><li>ä¸æ˜¯æ‰€æœ‰åˆ†ç±»éƒ½æ˜¯å­•è‚²ç™¾ç§‘ï¼šå¯¹äºä¸æ˜¯åˆ†ç±»çš„URLå¯ä»¥ç›´æ¥ä¸¢å¼ƒã€‚</li><li>å­åˆ†ç±»ä¸‹å’Œåˆ†ç±»å­˜åœ¨é‡å¤ï¼šå»é‡ã€‚</li></ul><p>ç”±äºå­åˆ†ç±»å’Œåˆ†ç±»ä¸æ˜¯å¾ˆå¤šï¼Œè¿™é‡Œä½¿ç”¨çš„æ‰‹å·¥é‡‡é›†ã€‚</p><p>è™½è¯´æ‰‹å·¥é‡‡é›†ï¼Œä½†è¿˜æ˜¯éœ€è¦ä¸€ç‚¹å°å°çš„æŠ€å·§ã€‚è¿™é‡Œä¸æ˜¯æŒ¨ä¸ªå¤åˆ¶ç½‘é¡µæºç ä¸­çš„åˆ†ç±»è¿æ¥ï¼Œè€Œæ˜¯é€šè¿‡Chromeçš„ä¸€ä¸ªæ’ä»¶<a href="https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl?utm_source=chrome-ntp-icon">XPath Helper</a>ã€‚</p><p>è¯¥æ’ä»¶æ”¯æŒé€šè¿‡å†™XPathçš„æ–¹å¼æ‰¹é‡è·å¾—ä¿¡æ¯ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬è¦è·å–ä¸Šå›¾ã€åˆ†ç±»å’Œå­åˆ†ç±»ã€‘ä¸­çš„å­åˆ†ç±»ã€‚å…ˆæŸ¥çœ‹è¿™éƒ¨åˆ†çš„ç½‘é¡µæºç </p><p><img src="image-20220107165203546.png" alt="å­åˆ†ç±»ç½‘é¡µæºç "></p><p>æ‰“å¼€XPath Helperï¼Œå†™å…¥XPathè·å¾—ç»“æœã€‚</p><p><img src="image-20220107165324295.png" alt="XPath Helperæˆªå›¾"></p><p>æœ€ç»ˆè·å¾—å¤§å°åˆ†ç±»å…±72ä¸ªã€‚</p><h2 id="åˆ—è¡¨é¡µç¿»é¡µé‡‡é›†è¯¦æƒ…é¡µURL"><a href="#åˆ—è¡¨é¡µç¿»é¡µé‡‡é›†è¯¦æƒ…é¡µURL" class="headerlink" title="åˆ—è¡¨é¡µç¿»é¡µé‡‡é›†è¯¦æƒ…é¡µURL"></a>åˆ—è¡¨é¡µç¿»é¡µé‡‡é›†è¯¦æƒ…é¡µURL</h2><p>æ¯ä¸ªåˆ†ç±»ä¸‹æœ‰å¾ˆå¤šç¿»é¡µï¼Œé€šè¿‡ä¸æ–­çš„ç¿»é¡µé‡‡é›†æ‰€æœ‰çš„è¯¦æƒ…URLã€‚</p><p><img src="image-20220107165646544.png" alt="ç¿»é¡µ"></p><p>è¿™é‡Œæˆ‘ä¸€å¼€å§‹å·æ‡’ï¼Œç”¨çš„â€œå…«çˆªé±¼é‡‡é›†å™¨â€ã€‚åæ¥å‘ç°è¿™è½¯ä»¶è™½ç„¶ä¸éœ€è¦å†™ä»£ç ï¼Œä½†æ˜¯å¯¹äºå¤§äº1Wçš„æ•°æ®éœ€è¦æ”¶è´¹ï¼Œå°±æ”¾å¼ƒäº†ã€‚</p><p>åç»­æˆ‘åŸºäºScrapyçˆ¬è™«æ¡†æ¶å®Œæˆé‡‡é›†ã€‚</p><h3 id="æ–°å»ºScrapyé¡¹ç›®"><a href="#æ–°å»ºScrapyé¡¹ç›®" class="headerlink" title="æ–°å»ºScrapyé¡¹ç›®"></a>æ–°å»ºScrapyé¡¹ç›®</h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ–°å»ºä¸€ä¸ªScrapyé¡¹ç›®ï¼ˆå‰ææ˜¯å·²ç»å®‰è£…äº†Scrapyï¼‰</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scrapy startproject yybkSpider</span><br></pre></td></tr></table></figure><p>å…¶ä¸­ï¼Œ yybkSpiderä¸ºé¡¹ç›®åç§°ï¼Œå¯ä»¥çœ‹åˆ°å°†ä¼šåˆ›å»ºä¸€ä¸ªyybkSpideræ–‡ä»¶å¤¹ï¼Œç›®å½•ç»“æ„å¤§è‡´å¦‚ä¸‹ï¼š</p><p>ä¸‹é¢æ¥ç®€å•ä»‹ç»ä¸€ä¸‹å„ä¸ªä¸»è¦æ–‡ä»¶çš„ä½œç”¨ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yybkSpider/</span><br><span class="line">    scrapy.cfg</span><br><span class="line">    yybkSpider/</span><br><span class="line">        __init__.py</span><br><span class="line">        items.py</span><br><span class="line">        pipelines.py</span><br><span class="line">        settings.py</span><br><span class="line">        spiders/</span><br><span class="line">            __init__.py</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä»‹ç»æˆ‘è®¤ä¸ºæ¯”è¾ƒé‡è¦çš„æ–‡ä»¶ï¼š</p><ul><li>settings.py: é¡¹ç›®çš„é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤ä¸‹è½½çš„ç½‘é¡µæ˜¯Unicodeï¼Œéœ€è¦åœ¨è¿™é‡Œé…ç½®ä¸ºUTF-8ç¼–ç ã€‚</li><li>yybkSpider/: é¡¹ç›®çš„Pythonæ¨¡å—ï¼Œå°†ä¼šä»è¿™é‡Œå¼•ç”¨ä»£ç ã€‚</li><li>yybkSpider/items.py: ä¿å­˜æ•°æ®çš„å®ä½“ï¼Œæœ‰ç‚¹åƒJava Beanã€‚</li><li>yybkSpider/yybkSpider/: å­˜å‚¨çˆ¬è™«ä»£ç ç›®å½•ã€‚</li></ul><h3 id="ä¿®æ”¹é…ç½®"><a href="#ä¿®æ”¹é…ç½®" class="headerlink" title="ä¿®æ”¹é…ç½®"></a>ä¿®æ”¹é…ç½®</h3><p>è¿™é‡Œé»˜è®¤ä¸‹è½½çš„ç½‘é¡µä¸ºUTF-8ï¼Œæ‰€ä»¥éœ€è¦åœ¨<code>settings.py</code>ä¸­å¢åŠ é…ç½®<code>FEED_EXPORT_ENCODING = &#39;utf-8&#39;</code></p><p>è¿˜å¯ä»¥ä¿®æ”¹ä¸‹è½½çš„çº¿ç¨‹æ•°ã€‚ä½†æ˜¯æˆ‘æŸ¥é˜…äº†ç½‘ä¸Šçš„ç›¸å…³èµ„æ–™ï¼Œå¥½åƒä½œç”¨å¹¶ä¸å¤§ã€‚ç”±äºå¯¹Pythonå’ŒScrapyä¸æ˜¯å¾ˆäº†è§£ï¼Œè¿™é‡Œç›´æ¥ç»™å‡ºè¿æ¥ï¼š</p><ul><li><a href="https://www.zhihu.com/question/23474039">ä¸ºä»€ä¹ˆæœ‰äººè¯´ Python çš„å¤šçº¿ç¨‹æ˜¯é¸¡è‚‹å‘¢ï¼Ÿ</a></li><li><a href="https://www.zhihu.com/question/26062225">scrapyåœ¨çˆ¬ç½‘é¡µçš„æ—¶å€™æ˜¯è‡ªåŠ¨é‡‡ç”¨å¤šçº¿ç¨‹çš„å—ï¼Ÿ</a></li></ul><h3 id="åˆ¶ä½œçˆ¬è™«"><a href="#åˆ¶ä½œçˆ¬è™«" class="headerlink" title="åˆ¶ä½œçˆ¬è™«"></a>åˆ¶ä½œçˆ¬è™«</h3><p>ç´§æ¥ç€ï¼Œåˆ¶ä½œä¸€ä¸ªçˆ¬è™«ï¼š</p><ul><li>Inputï¼šæ‰€æœ‰åˆ†ç±»é¦–é¡µ</li><li>Outputï¼š<ul><li>æ‰€æœ‰åˆ—è¡¨é¡µ</li><li>æ¯ä¸ªåˆ—è¡¨é¡µçš„è¯¦æƒ…URLå’Œå…¶ä»–ä¿¡æ¯ã€‚</li></ul></li></ul><p>è¿›å…¥<code>yybkSpider/</code>ç›®å½•ä¸‹ï¼Œè¾“å…¥å‘½ä»¤åˆ›å»ºçˆ¬è™«ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scrapy genspider yybk_list &quot;yunyubaike.com&quot;</span><br></pre></td></tr></table></figure><ul><li><code>yybk_list</code>æ˜¯çˆ¬è™«çš„åç§°</li><li><code>&quot;yunyubaike.com&quot;</code>æŒ‡å‡ºè¯¥çˆ¬è™«çˆ¬å–çš„åŸŸåï¼Œè¶…å‡ºåŸŸåçš„ä¸ä¼šçˆ¬å–ã€‚</li></ul><p>ä¹‹åå¯ä»¥çœ‹åˆ°åœ¨<code>yybkSpider/yybkSpider/</code>ç”Ÿæˆäº†ä¸€ä¸ªæ–‡ä»¶<code>yybk_list.py</code>ï¼Œå®ƒé»˜è®¤å¢åŠ äº†ä¸‹åˆ—ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YybkListSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&#x27;yybk_list&#x27;</span></span><br><span class="line">    allowed_domains = [<span class="string">&#x27;yunyubaike.com&#x27;</span>]</span><br><span class="line">    start_urls = []</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line"><span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>name = â€œâ€ ï¼šè¿™ä¸ªçˆ¬è™«çš„è¯†åˆ«åç§°ï¼Œå¿…é¡»æ˜¯å”¯ä¸€çš„ï¼Œåœ¨ä¸åŒçš„çˆ¬è™«å¿…é¡»å®šä¹‰ä¸åŒçš„åå­—ã€‚</p><p>allow_domains = [] æ˜¯æœç´¢çš„åŸŸåèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯çˆ¬è™«çš„çº¦æŸåŒºåŸŸï¼Œè§„å®šçˆ¬è™«åªçˆ¬å–è¿™ä¸ªåŸŸåä¸‹çš„ç½‘é¡µï¼Œä¸å­˜åœ¨çš„URLä¼šè¢«å¿½ç•¥ã€‚</p><p>start_urls = [] ï¼šçˆ¬å–çš„URLåˆ—è¡¨ã€‚çˆ¬è™«ä»è¿™é‡Œå¼€å§‹æŠ“å–æ•°æ®ï¼Œæ‰€ä»¥ï¼Œç¬¬ä¸€æ¬¡ä¸‹è½½çš„æ•°æ®å°†ä¼šä»è¿™äº›urlså¼€å§‹ã€‚å…¶ä»–å­URLå°†ä¼šä»è¿™äº›èµ·å§‹URLä¸­ç»§æ‰¿æ€§ç”Ÿæˆã€‚</p><p>parse(self, response) ï¼šè§£æçš„æ–¹æ³•ï¼Œæ¯ä¸ªåˆå§‹URLå®Œæˆä¸‹è½½åå°†è¢«è°ƒç”¨ï¼Œè°ƒç”¨çš„æ—¶å€™ä¼ å…¥ä»æ¯ä¸€ä¸ªURLä¼ å›çš„Responseå¯¹è±¡æ¥ä½œä¸ºå”¯ä¸€å‚æ•°ï¼Œä¸»è¦ä½œç”¨å¦‚ä¸‹ï¼š</p><ul><li>è´Ÿè´£è§£æè¿”å›çš„ç½‘é¡µæ•°æ®(response.body)ï¼Œæå–ç»“æ„åŒ–æ•°æ®(ç”Ÿæˆitem)</li><li>ç”Ÿæˆéœ€è¦ä¸‹ä¸€é¡µçš„URLè¯·æ±‚ã€‚</li></ul><p>æ¥ä¸‹æ¥æˆ‘ä»¬å®Œæˆè¯¥çˆ¬è™«ã€‚é¦–å…ˆstart_urlsä¸æ˜¯ä¸€ä¸ªè€Œæ˜¯72ä¸ªåˆ†ç±»é¦–é¡µURLã€‚å†è€…æˆ‘ä»¬è¦åœ¨parseæ–¹æ³•ä¸­å®Œæˆä¸¤ä»¶äº‹ï¼š</p><ol><li>ä¸æ–­ç”Ÿæˆä¸‹ä¸€é¡µ</li><li>å¯¹äºæ¯ä¸ªåˆ—è¡¨é¡µè§£æå…¶ä¸­çš„æ•°æ®ã€‚</li></ol><p>ä¸‹é¢æ˜¯å®Œæ•´ä»£ç ï¼Œè¿™éƒ¨åˆ†å‚è€ƒäº†å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.scrapy.org/en/latest/intro/overview.html%E3%80%82">https://docs.scrapy.org/en/latest/intro/overview.htmlã€‚</a></p><p>è¿™é‡Œæœ‰å‡ ä¸ªåœ°æ–¹å€¼å¾—æ³¨æ„ï¼š</p><ol><li>é€šè¿‡<code>response.url</code>è·å¾—å½“å‰é‡‡é›†çš„URL</li><li><code>response.xpath(&#39;&#39;)</code>è¿”å›çš„æ˜¯ä¸€ç»„å…ƒç´ </li><li>æˆ‘æŠŠ<code>response.xpath(&#39;&#39;)[0].get()</code>éƒ½æ”¹å†™äº†ï¼ŒåŸå› æ˜¯å¦‚æœ<code>response.xpath(&#39;&#39;)</code>ä¸ºç©ºåœ¨æ‰§è¡Œ<code>[0]</code>æ“ä½œå°±ä¼šæŠ¥é”™ï¼Œå¯¼è‡´çˆ¬å–å¤±è´¥</li><li>ä½¿ç”¨<code>get()</code>è€Œä¸æ˜¯<code>exract()</code>ã€‚åŸå› å¦‚ä¸‹ï¼š </li></ol><blockquote><p>get() ã€getall() æ˜¯æ–°ç‰ˆæœ¬çš„æ–¹æ³•ï¼Œextract() ã€extract_first()æ˜¯æ—§ç‰ˆæœ¬çš„æ–¹æ³•ã€‚</p><p>å‰è€…æ›´å¥½ç”¨ï¼Œå–ä¸åˆ°å°±è¿”å›Noneï¼Œåè€…å–ä¸åˆ°å°±raiseä¸€ä¸ªé”™è¯¯ã€‚</p></blockquote><ol start="5"><li>æƒ³è¦åœ¨å½“å‰å…ƒç´ ä¸‹ç»§ç»­é€šè¿‡XPathé€‰å–å…ƒç´ ï¼Œéœ€è¦åœ¨XPathå¼€å¤´åŠ ä¸€ä¸ª<code>.</code></li><li>æ³¨æ„<code>yield</code>çš„ä½¿ç”¨</li><li>è¿™é‡Œé‡‡é›†äº†å¾ˆå¤šâ€œå¤šä½™â€çš„å­—æ®µï¼Œä¾‹å¦‚é¡µç ï¼Œæ€»æ•°ï¼Œå½“å‰urlã€‚è¿™æ˜¯ä¸ºäº†åç»­éªŒè¯é‡‡é›†çš„æ•°æ®æ˜¯å¦å®Œæ•´æ­£ç¡®è€Œå¢åŠ çš„å†—ä½™å­—æ®µã€‚</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YybkListSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&#x27;yybk_list&#x27;</span></span><br><span class="line">    allowed_domains = [<span class="string">&#x27;yunyubaike.com&#x27;</span>]</span><br><span class="line">    <span class="comment"># ä¸€å…±æ˜¯72ä¸ªURLï¼Œè¿™é‡Œæ²¡æœ‰åˆ—å…¨</span></span><br><span class="line">    start_urls = [<span class="string">&#x27;https://www.yunyubaike.com/yunqi/&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;https://www.yunyubaike.com/yichuanyousheng/&#x27;</span>,</span><br><span class="line">                  <span class="string">&#x27;https://www.yunyubaike.com/beiyun/&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        domain_url = <span class="string">&quot;https://www.yunyubaike.com&quot;</span></span><br><span class="line">        <span class="comment"># items = []</span></span><br><span class="line">        this_url = response.url</span><br><span class="line">        page_nums = response.xpath(<span class="string">&quot;//div[@class=&#x27;pagebar&#x27;]/b/text()&quot;</span>)</span><br><span class="line">        page_num = <span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> page_nums:</span><br><span class="line">            page_num = page_nums[<span class="number">0</span>].get()</span><br><span class="line">        <span class="comment"># page_num = response.xpath(&quot;//div[@class=&#x27;pagebar&#x27;]/b/text()&quot;)[0].get()</span></span><br><span class="line">        counts = response.xpath(<span class="string">&quot;//div[@class=&#x27;pagebar&#x27;]/a[@title]/b/text()&quot;</span>)</span><br><span class="line">        count=<span class="string">&#x27;&#x27;</span></span><br><span class="line">        <span class="keyword">if</span> counts:</span><br><span class="line">            count = counts[<span class="number">0</span>].get()</span><br><span class="line">        <span class="comment"># count = response.xpath(&quot;//div[@class=&#x27;pagebar&#x27;]/a[@title]/b/text()&quot;)[0].get()</span></span><br><span class="line">        <span class="keyword">for</span> li <span class="keyword">in</span> response.xpath(<span class="string">&quot;//div[@class=&#x27;list&#x27;]/ul/li&quot;</span>):</span><br><span class="line">            titles = li.xpath(<span class="string">&#x27;.//h2/a/text()&#x27;</span>)</span><br><span class="line">            title = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            <span class="keyword">if</span> titles:</span><br><span class="line">                title = titles[<span class="number">0</span>].get()</span><br><span class="line">            detail_urls = li.xpath(<span class="string">&#x27;.//h2/a/@href&#x27;</span>)</span><br><span class="line">            detail_url = <span class="string">&#x27;&#x27;</span></span><br><span class="line">            <span class="keyword">if</span> detail_urls:</span><br><span class="line">                detail_url = detail_urls[<span class="number">0</span>].get()</span><br><span class="line">            <span class="comment"># detail_url = li.xpath(&#x27;.//h2/a/@href&#x27;)[0].get()</span></span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">&#x27;this_url&#x27;</span>: this_url,  <span class="comment"># å½“å‰é‡‡é›†çš„URL</span></span><br><span class="line">                <span class="string">&#x27;page_num&#x27;</span>: page_num,  <span class="comment"># ç¬¬å‡ é¡µ</span></span><br><span class="line">                <span class="string">&#x27;count&#x27;</span>: count,  <span class="comment"># è¯¥åˆ†ç±»ä¸‹çš„é—®ç­”æ€»æ•°</span></span><br><span class="line">                <span class="string">&#x27;title&#x27;</span>: title,  <span class="comment"># é—®ç­”æ ‡é¢˜</span></span><br><span class="line">                <span class="string">&#x27;detail_url&#x27;</span>: domain_url + detail_url  <span class="comment"># è¯¦æƒ…URL</span></span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment"># ç”Ÿæˆä¸‹ä¸€é¡µ</span></span><br><span class="line">        next_pages = response.xpath(<span class="string">&quot;//a[text()=&#x27;ä¸‹ä¸€é¡µ&#x27;]/@href&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> next_pages:</span><br><span class="line">            next_page = next_pages[<span class="number">0</span>].get()</span><br><span class="line">            <span class="comment"># next_page = response.xpath(&quot;//a[text()=&#x27;ä¸‹ä¸€é¡µ&#x27;]/@href&quot;)[0].get()</span></span><br><span class="line">            <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">                <span class="keyword">yield</span> response.follow(domain_url + next_page, self.parse)  <span class="comment"># å°†ä¸‹ä¸€é¡µçš„è¿æ¥ä¼ é€’ç»™çˆ¬è™«ç»§ç»­è§£æã€‚</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h3 id="å¯åŠ¨çˆ¬è™«"><a href="#å¯åŠ¨çˆ¬è™«" class="headerlink" title="å¯åŠ¨çˆ¬è™«"></a>å¯åŠ¨çˆ¬è™«</h3><p>æœ€åå¯åŠ¨çˆ¬è™«ï¼Œä¿å­˜æ•°æ®ã€‚åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹è¿è¡Œ</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scrapy crawl yybk_list -o urls.json</span><br></pre></td></tr></table></figure><p>å¯ä»¥å‘ç°ï¼Œåœ¨é¡¹ç›®æ ¹ç›®å½•å¤šå‡ºäº†urls.jsonæ–‡ä»¶ï¼Œé‡Œé¢æ˜¯æˆ‘ä»¬ä¿å­˜çš„æ‰€æœ‰åˆ—è¡¨æ•°æ®ã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥ä¿å­˜ä¸ºå…¶ä»–æ ¼å¼ã€‚è¿™é‡Œä¸å†èµ˜è¿°ã€‚</p><p>è¿™æ ·æˆ‘ä»¬å°±å¾—åˆ°äº†å¤§çº¦27Wçš„è¯¦æƒ…è¿æ¥ã€‚ä¸‹é¢æˆ‘ä»¬æŠŠè¿™äº›è¿æ¥å¯¹åº”çš„HTMLä¿å­˜åˆ°æœ¬åœ°ã€‚</p><h2 id="ä¸‹è½½è¯¦æƒ…ç½‘é¡µæºç "><a href="#ä¸‹è½½è¯¦æƒ…ç½‘é¡µæºç " class="headerlink" title="ä¸‹è½½è¯¦æƒ…ç½‘é¡µæºç "></a>ä¸‹è½½è¯¦æƒ…ç½‘é¡µæºç </h2><h3 id="åˆ¶ä½œçˆ¬è™«-1"><a href="#åˆ¶ä½œçˆ¬è™«-1" class="headerlink" title="åˆ¶ä½œçˆ¬è™«"></a>åˆ¶ä½œçˆ¬è™«</h3><p>è¿›å…¥<code>yybkSpider/</code>ç›®å½•ä¸‹ï¼Œè¾“å…¥å‘½ä»¤åˆ›å»ºçˆ¬è™«ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scrapy genspider yybk_detail_down &quot;yunyubaike.com&quot;</span><br></pre></td></tr></table></figure><p>å’Œä¸Šé¢ç±»ä¼¼ï¼Œåœ¨<code>yybkSpider/yybkSpider/yybk_detail_down.py</code>å†™å…¥ä»£ç ï¼š</p><p>è¿™é‡Œéœ€è¦æ³¨æ„ï¼š</p><ol><li>start_urlsæ˜¯éœ€è¦ä»æ–‡ä»¶ä¸­è¯»å–çš„</li><li>ä¸ºäº†è¯»æ•°æ®ã€å–æ•°æ®æ–¹ä¾¿ï¼Œæˆ‘ä½¿ç”¨äº†pands</li><li>è·å¾—ç½‘é¡µæºç ï¼Œä½¿ç”¨<code>response.text</code></li><li>è¿™é‡Œæ²¡æœ‰å¯¹ç½‘é¡µæºç ç›´æ¥è§£æï¼Œè€Œæ˜¯å…ˆä¿å­˜ï¼Œå†åœ¨åç»­è§£æã€‚æé«˜å®¹é”™ã€‚</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YybkDetailDownSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&#x27;yybk_detail_down&#x27;</span></span><br><span class="line">    allowed_domains = [<span class="string">&#x27;yunyubaike.com&#x27;</span>]</span><br><span class="line">    df = pd.read_json(<span class="string">&quot;yybkSpider/urls.json&quot;</span>)</span><br><span class="line">    <span class="comment"># 273179æ¡æ•°æ®</span></span><br><span class="line">    <span class="comment"># å–detail_urlåˆ—ï¼Œå»é‡ï¼Œè½¬æ¢æˆlist</span></span><br><span class="line">    start_urls = df[<span class="string">&#x27;detail_url&#x27;</span>].drop_duplicates().tolist()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        url = response.url</span><br><span class="line">        <span class="comment"># è·å¾—ç½‘é¡µæºç </span></span><br><span class="line">        content = response.text</span><br><span class="line"></span><br><span class="line">        file_name = url.replace(<span class="string">&quot;https://www.yunyubaike.com/&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">        file_name = <span class="string">&#x27;html/&#x27;</span> + file_name.replace(<span class="string">&#x27;/&#x27;</span>, <span class="string">&#x27;_&#x27;</span>)   <span class="comment"># html/huaiyun_wiki_270163.html</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ä¿å­˜æ–‡ä»¶ï¼š&quot;</span> + file_name)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(file_name, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(content)</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>æ­¤å¤–ï¼Œæˆ‘æ‹…å¿ƒdetail_urlæ ¼å¼æ˜¯å¦ä¸€è‡´ï¼Œæ‰€ä»¥åœ¨Python Shellä¸­æ‰§è¡Œäº†å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>df = pd.read_json(<span class="string">&quot;yybkSpider/urls.json&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>df[df[<span class="string">&#x27;detail_url&#x27;</span>].<span class="built_in">str</span>.match(<span class="string">r&#x27;https://www.yunyubaike.com/\w+/\d+\.html&#x27;</span>) == <span class="literal">False</span>]</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œç»“æœä¸ºç©ºï¼Œè¿™è¯æ˜detail_urlæ ¼å¼ä¸€è‡´ã€‚</p><h3 id="å¯åŠ¨çˆ¬è™«-1"><a href="#å¯åŠ¨çˆ¬è™«-1" class="headerlink" title="å¯åŠ¨çˆ¬è™«"></a>å¯åŠ¨çˆ¬è™«</h3><p>ç´§æ¥ç€å¯åŠ¨çˆ¬è™«ï¼Œå’Œä¸Šé¢ç±»ä¼¼ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scrapy crawl yybk_detail_down</span><br></pre></td></tr></table></figure><p>ç”±äºè¿™é‡Œä¸éœ€è¦ç”Ÿæˆæ–‡ä»¶ï¼Œæ‰€ä»¥æ²¡æœ‰<code>-o</code></p><p>ç­‰å¾…ä»£ç æ‰§è¡Œå®Œæ¯•åï¼Œå¯ä»¥å‘ç°åœ¨é¡¹ç›®æ ¹ç›®å½•äº§ç”Ÿäº†ä¸€ä¸ª<code>html/</code>æ–‡ä»¶å¤¹ï¼Œä¸‹é¢ä¿å­˜äº†æ‰€æœ‰è¯¦æƒ…é¡µçš„ç½‘é¡µæºç ã€‚</p><h2 id="è§£æè¯¦æƒ…é¡µ"><a href="#è§£æè¯¦æƒ…é¡µ" class="headerlink" title="è§£æè¯¦æƒ…é¡µ"></a>è§£æè¯¦æƒ…é¡µ</h2><h3 id="åˆ†æ-1"><a href="#åˆ†æ-1" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>æ‰“å¼€ä¸€ä¸ªè¯¦æƒ…é¡µï¼š</p><p><img src="image-20220109124722467.png" alt="è¯¦æƒ…é¡µ"></p><p>å¯ä»¥å®šä½åˆ°ï¼šåœ¨<code>&lt;div class=&#39;article_content&#39; /&gt;</code>æ ‡ç­¾ä¸‹ï¼Œæ‰€æœ‰çš„å¸¦æ–‡å­—çš„pæ ‡ç­¾æ˜¯æˆ‘ä»¬éœ€è¦çš„ã€‚æ¯ä¸ªpæ ‡ç­¾æ˜¯ä¸€ä¸ªæ®µè½ï¼Œåœ¨ä¿å­˜çš„æ—¶å€™ï¼Œæ®µè½ä¿¡æ¯æ˜¯ä¸èƒ½ä¸¢å¤±çš„ã€‚ä¹Ÿå°±æ˜¯è¯´æ¢è¡Œç¬¦æ˜¯éœ€è¦çš„ã€‚</p><h3 id="ä»£ç "><a href="#ä»£ç " class="headerlink" title="ä»£ç "></a>ä»£ç </h3><p>è¿™ä¸€æ­¥æ˜¯è„±ç¦»äºScrapyæ¡†æ¶çš„ã€‚</p><p>è‡ªå®šä¹‰ä¸€ä¸ªPythonè„šæœ¬ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">input_dir = <span class="string">&#x27;html/&#x27;</span>  <span class="comment"># ä¸Šä¸€æ­¥ä¿å­˜æºç çš„æ–‡ä»¶å¤¹è·¯å¾„</span></span><br><span class="line">output_file_base_name = <span class="string">&#x27;yybkSpider/output/yybk_&#123;&#125;.csv&#x27;</span>  <span class="comment"># ç”Ÿæˆçš„CSVæ–‡ä»¶çš„ä¿å­˜è·¯å¾„</span></span><br><span class="line">MAX_ROWS = <span class="number">50000</span>    <span class="comment"># å•ä¸ªcsvæ–‡ä»¶å†™å…¥çš„æœ€å¤§è¡Œæ•°</span></span><br><span class="line"></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">è§£ææ–¹æ³•ï¼Œä¼ å…¥æ–‡ä»¶å</span></span><br><span class="line"><span class="string">è¿”å›éœ€è¦çš„å­—æ®µ</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">file_name</span>):</span></span><br><span class="line">    soup = BeautifulSoup(<span class="built_in">open</span>(file_name, encoding=<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="comment"># titleè§£æ</span></span><br><span class="line">    title = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    h1 = soup.find_all(<span class="string">&quot;h1&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span> h1:</span><br><span class="line">        title = h1[<span class="number">0</span>].get_text()</span><br><span class="line">    <span class="comment"># contentè§£æ</span></span><br><span class="line">    p_list = soup.select(<span class="string">&quot;div.article_content &gt; p&quot;</span>)</span><br><span class="line">    content = <span class="string">&#x27;&#x27;</span></span><br><span class="line">    <span class="keyword">for</span> p <span class="keyword">in</span> p_list:</span><br><span class="line">        p_text = p.get_text()</span><br><span class="line">        <span class="keyword">if</span> p_text != <span class="string">&#x27;&#x27;</span>:</span><br><span class="line">            <span class="comment"># ä¸ºäº†é¿å…csvè§£æå¤±è´¥</span></span><br><span class="line">            p_text = p_text.replace(<span class="string">&quot;,&quot;</span>, <span class="string">&quot;ï¼Œ&quot;</span>).replace(<span class="string">&#x27;&quot;&#x27;</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            content += p_text + <span class="string">&quot;\n&quot;</span></span><br><span class="line">    content = content.rstrip().lstrip()</span><br><span class="line">    <span class="keyword">return</span> title, content</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    htmls = os.listdir(input_dir)</span><br><span class="line">    <span class="comment"># è®¡ç®—æœ€ç»ˆç”Ÿæˆçš„æ–‡ä»¶ä¸ªæ•°</span></span><br><span class="line">    file_num = (<span class="built_in">len</span>(htmls) + MAX_ROWS - <span class="number">1</span>) // MAX_ROWS</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(file_num):</span><br><span class="line">        <span class="comment"># iä»0å¼€å§‹</span></span><br><span class="line">        <span class="comment"># ç¬¬iä¸ªæ–‡ä»¶ä¿å­˜ i*MAX_ROWS[ä¸‹æ ‡] åˆ° (i+1)*MAX_ROWS - 1</span></span><br><span class="line">        start_index = i*MAX_ROWS</span><br><span class="line">        end_index = (i+<span class="number">1</span>)*MAX_ROWS - <span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> end_index &gt; <span class="built_in">len</span>(htmls):</span><br><span class="line">            end_index = <span class="built_in">len</span>(htmls)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(output_file_base_name.<span class="built_in">format</span>(i), <span class="string">&quot;w&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;parsing :start_index:&#123;&#125;, end_index:&#123;&#125;; saving as &#123;&#125;&quot;</span></span><br><span class="line">                  .<span class="built_in">format</span>(start_index, end_index, output_file_base_name.<span class="built_in">format</span>(i)))</span><br><span class="line">            f.write(<span class="string">&quot;article_id,content,title\n&quot;</span>)</span><br><span class="line">            <span class="keyword">for</span> html_name <span class="keyword">in</span> htmls[start_index: end_index]:</span><br><span class="line">                title, content = parse(os.path.join(input_dir, html_name))</span><br><span class="line">                f.write(html_name + <span class="string">&#x27;,&quot;&#x27;</span> + content + <span class="string">&#x27;&quot;,&#x27;</span> + title + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>åœ¨<code>parse</code>æ–¹æ³•ä¸­éœ€è¦æ³¨æ„ä»¥ä¸‹å‡ ç‚¹ï¼š</p><ol><li><code>soup.select(&quot;div.article_content &gt; p&quot;)</code>è¿™é‡Œä½¿ç”¨äº†CSSé€‰æ‹©å™¨ï¼Œåˆ¶å®šäº†divä¸‹çš„ç›´æ¥å­æ ‡ç­¾ï¼›</li><li><code>p.get_text()</code>è·å¾—pæ ‡ç­¾ä¸‹çš„æ‰€æœ‰æ–‡å­—ï¼›</li><li>ä¸ºäº†é¿å…CSVè§£æå¤±è´¥ï¼Œè¿™é‡ŒæŠŠè‹±æ–‡é€—å·æ¢æˆä¸­æ–‡é€—å·ï¼ŒæŠŠè‹±æ–‡çš„å¼•å·å…¨éƒ¨å»æ‰ã€‚ï¼ˆCSVæ–‡ä»¶ç”¨è‹±æ–‡é€—å·åšå­—æ®µåˆ†å‰²ï¼›å½“æˆ‘ä»¬éœ€è¦æŠŠå¤šè¡Œæ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªå­—æ®µä¸­æ—¶ï¼Œéœ€è¦æŠŠå¤šè¡Œæ•°æ®ç”¨è‹±æ–‡å¼•å·åŒ…èµ·æ¥ï¼‰ï¼›</li><li>ä½¿ç”¨BeautifulSoupè§£æHTMLã€‚</li></ol><p>åœ¨<code>main</code>æ–¹æ³•ä¸­éœ€è¦æ³¨æ„ï¼š</p><ol><li>27Wè¡Œä¿å­˜åˆ°ä¸€ä¸ªCSVæ–‡ä»¶ä¸­ï¼Œæˆ‘æ‹…å¿ƒä¸å¥½æŠŠæ§ï¼Œæ‰€ä»¥æˆ‘å°†27Wè¡Œæ•°æ®æ¯5Wè¡Œä¿å­˜ä¸ºä¸€ä¸ªCSV</li><li>å½“éœ€è¦å¯¹é™¤æ³•ç»“æœå››èˆäº”å…¥æ—¶ï¼Œè¿™æ ·åšæ¯”è¾ƒç®€å•ï¼š<code>(è¢«é™¤æ•°+é™¤æ•°-1)/é™¤æ•°</code></li></ol><h3 id="è¿è¡Œè„šæœ¬"><a href="#è¿è¡Œè„šæœ¬" class="headerlink" title="è¿è¡Œè„šæœ¬"></a>è¿è¡Œè„šæœ¬</h3><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python xxx.py</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå¯¼å‡º6ä¸ªCSVæ–‡ä»¶ã€‚ä»»åŠ¡å®Œæˆã€‚</p><h1 id="æºç ä¸‹è½½"><a href="#æºç ä¸‹è½½" class="headerlink" title="æºç ä¸‹è½½"></a>æºç ä¸‹è½½</h1><p>//TODO: ç¨åä¸Šä¼ åˆ°git</p><h1 id="æ­¤å¤–â€¦"><a href="#æ­¤å¤–â€¦" class="headerlink" title="æ­¤å¤–â€¦"></a>æ­¤å¤–â€¦</h1><h2 id="Scrapy-Shellå¿«é€Ÿæµ‹è¯•"><a href="#Scrapy-Shellå¿«é€Ÿæµ‹è¯•" class="headerlink" title="Scrapy Shellå¿«é€Ÿæµ‹è¯•"></a>Scrapy Shellå¿«é€Ÿæµ‹è¯•</h2><p>åœ¨ä½¿ç”¨Scrapyçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘æƒ³å…ˆä¼ å…¥ä¸€æ¡URLæµ‹è¯•è¿”å›çš„resonpseã€‚ç»è¿‡æŸ¥é˜…ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">scrapy shell &lt;url&gt;</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œåï¼Œè¿›å…¥Python Consoleï¼Œå†…ç½®çš„responseå¯¹è±¡å³æ˜¯&lt;url&gt;çš„response</p><h2 id="åœ¨æœåŠ¡å™¨è¿è¡Œ"><a href="#åœ¨æœåŠ¡å™¨è¿è¡Œ" class="headerlink" title="åœ¨æœåŠ¡å™¨è¿è¡Œ"></a>åœ¨æœåŠ¡å™¨è¿è¡Œ</h2><p>å¦‚æœåœ¨æœ¬æœºæ‰§è¡Œçˆ¬è™«ä»£ç ï¼Œä¼šå ç”¨è¾ƒå¤šçš„èµ„æºï¼Œä¹Ÿä¸æ–¹ä¾¿ã€‚æ­¤æ—¶å¯ä»¥æŠŠçˆ¬è™«ä»£ç åŒæ­¥åˆ°æœåŠ¡å™¨è¿è¡Œã€‚æˆ‘ä½¿ç”¨PyChramè¿æ¥è¿œç¨‹æœåŠ¡å™¨ï¼Œåœ¨æœ¬æœºç¼–å†™çˆ¬è™«ä»£ç ï¼Œç„¶ååŒæ­¥åˆ°æœåŠ¡å™¨ä¸­æ‰§è¡Œã€‚ï¼ˆå…·ä½“è¯·è‡ªè¡Œç™¾åº¦ï¼‰</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://docs.scrapy.org/en/latest/intro/overview.html">Scrapy at a glance</a></li><li><a href="https://www.runoob.com/w3cnote/scrapy-detail.html">Scrapy å…¥é—¨æ•™ç¨‹</a></li><li><a href="https://www.runoob.com/cssref/css-selectors.html">CSSé€‰æ‹©å™¨</a></li><li><a href="https://scrapy-chs.readthedocs.io/zh_CN/1.0/topics/shell.html">Scrapy shell</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;è¿™æ˜¯åœ¨å…¬å¸å®ä¹ æ—¶ï¼Œé¢†å¯¼ç»™å‡ºçš„ä¸€ä¸ªæ•°æ®çˆ¬å–éœ€æ±‚ã€‚ï¼ˆæ‰€ä»¥æ¶‰åŠæ³•å¾‹é—®é¢˜è¯·æ‰¾å…¬å¸çš„éº»çƒ¦ï¼Œä¸è¦è”ç³»æˆ‘ğŸ˜‚ï¼‰&lt;/p&gt;
&lt;p&gt;è™½ç„¶æˆ‘ä¹‹å‰ä¹Ÿå¹²è¿‡ç½‘ç»œçˆ¬è™«ï¼Œä½†</summary>
      
    
    
    
    <category term="ç½‘ç»œçˆ¬è™«" scheme="https://gmet233.gitee.io/categories/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"/>
    
    
    <category term="ç½‘ç»œçˆ¬è™«" scheme="https://gmet233.gitee.io/tags/%E7%BD%91%E7%BB%9C%E7%88%AC%E8%99%AB/"/>
    
    <category term="Scrapy" scheme="https://gmet233.gitee.io/tags/Scrapy/"/>
    
  </entry>
  
  <entry>
    <title>è¯¦è§£HTTPåè®®</title>
    <link href="https://gmet233.gitee.io/2022/01/05/%E8%AF%A6%E8%A7%A3HTTP%E5%8D%8F%E8%AE%AE/"/>
    <id>https://gmet233.gitee.io/2022/01/05/%E8%AF%A6%E8%A7%A3HTTP%E5%8D%8F%E8%AE%AE/</id>
    <published>2022-01-05T13:43:14.000Z</published>
    <updated>2022-01-05T13:49:02.193Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¼•å…¥"><a href="#å¼•å…¥" class="headerlink" title="å¼•å…¥"></a>å¼•å…¥</h1><p><strong>è¶…æ–‡æœ¬ä¼ è¾“åè®®</strong>ï¼ˆHTTPï¼ŒHyperText Transfer Protocolï¼‰æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ä¸€ç§ç½‘ç»œåè®®ã€‚æ‰€æœ‰çš„WWWæ–‡ä»¶éƒ½å¿…é¡»éµå®ˆè¿™ä¸ªæ ‡å‡†ã€‚è®¾è®¡HTTPæœ€åˆçš„ç›®çš„æ˜¯ä¸ºäº†æä¾›ä¸€ç§å‘å¸ƒå’Œæ¥æ”¶HTMLé¡µé¢çš„æ–¹æ³•ã€‚1960å¹´ç¾å›½äººTed Nelsonæ„æ€äº†ä¸€ç§é€šè¿‡è®¡ç®—æœºå¤„ç†æ–‡æœ¬ä¿¡æ¯çš„æ–¹æ³•ï¼Œå¹¶ç§°ä¹‹ä¸ºè¶…æ–‡æœ¬ï¼ˆhypertextï¼‰,è¿™æˆä¸ºäº†HTTPè¶…æ–‡æœ¬ä¼ è¾“åè®®æ ‡å‡†æ¶æ„çš„å‘å±•æ ¹åŸºã€‚Ted Nelsonç»„ç»‡åè°ƒä¸‡ç»´ç½‘åä¼šï¼ˆWorld Wide Web Consortiumï¼‰å’Œäº’è”ç½‘å·¥ç¨‹å·¥ä½œå°ç»„ï¼ˆInternet Engineering Task Force ï¼‰å…±åŒåˆä½œç ”ç©¶ï¼Œæœ€ç»ˆå‘å¸ƒäº†ä¸€ç³»åˆ—çš„RFCï¼Œå…¶ä¸­è‘—åçš„RFC 2616å®šä¹‰äº†HTTP 1.1ã€‚</p><h1 id="HTTPåè®®çš„ä½œç”¨åŠç‰¹ç‚¹"><a href="#HTTPåè®®çš„ä½œç”¨åŠç‰¹ç‚¹" class="headerlink" title="HTTPåè®®çš„ä½œç”¨åŠç‰¹ç‚¹"></a>HTTPåè®®çš„ä½œç”¨åŠç‰¹ç‚¹</h1><p>HTTPæ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ï¼ˆTCPï¼‰ã€‚å®¢æˆ·ç«¯æ˜¯ç»ˆç«¯ç”¨æˆ·ï¼ŒæœåŠ¡å™¨ç«¯æ˜¯ç½‘ç«™ã€‚</p><p>é€šè¿‡ä½¿ç”¨Webæµè§ˆå™¨ã€ç½‘ç»œçˆ¬è™«æˆ–è€…å…¶å®ƒçš„å·¥å…·ï¼Œå®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªåˆ°æœåŠ¡å™¨ä¸ŠæŒ‡å®šç«¯å£ï¼ˆ<strong>é»˜è®¤ç«¯å£ä¸º80</strong>ï¼‰çš„HTTPè¯·æ±‚ã€‚ï¼ˆæˆ‘ä»¬ç§°è¿™ä¸ªå®¢æˆ·ç«¯ï¼‰å«<strong>ç”¨æˆ·ä»£ç†ï¼ˆuser agentï¼‰</strong>ã€‚åº”ç­”çš„æœåŠ¡å™¨ä¸Šå­˜å‚¨ç€ï¼ˆä¸€äº›ï¼‰èµ„æºï¼Œæ¯”å¦‚HTMLæ–‡ä»¶å’Œå›¾åƒã€‚ï¼ˆæˆ‘ä»¬ç§°ï¼‰è¿™ä¸ªåº”ç­”æœåŠ¡å™¨ä¸ºæºæœåŠ¡å™¨ï¼ˆorigin serverï¼‰ã€‚åœ¨ç”¨æˆ·ä»£ç†å’ŒæºæœåŠ¡å™¨ä¸­é—´å¯èƒ½å­˜åœ¨å¤šä¸ªä¸­é—´å±‚ï¼Œæ¯”å¦‚ä»£ç†ï¼Œç½‘å…³ï¼Œæˆ–è€…éš§é“ï¼ˆtunnelsï¼‰ã€‚å°½ç®¡TCP/IPåè®®æ˜¯äº’è”ç½‘ä¸Šæœ€æµè¡Œçš„åº”ç”¨ï¼ŒHTTPåè®®å¹¶æ²¡æœ‰è§„å®šå¿…é¡»ä½¿ç”¨å®ƒå’Œï¼ˆåŸºäºï¼‰å®ƒæ”¯æŒçš„å±‚ã€‚ äº‹å®ä¸Šï¼ŒHTTPå¯ä»¥åœ¨ä»»ä½•å…¶ä»–äº’è”ç½‘åè®®ä¸Šï¼Œæˆ–è€…åœ¨å…¶ä»–ç½‘ç»œä¸Šå®ç°ã€‚HTTPåªå‡å®šï¼ˆå…¶ä¸‹å±‚åè®®æä¾›ï¼‰å¯é çš„ä¼ è¾“ï¼Œä»»ä½•èƒ½å¤Ÿæä¾›è¿™ç§ä¿è¯çš„åè®®éƒ½å¯ä»¥è¢«å…¶ä½¿ç”¨ã€‚</p><p>é€šå¸¸ï¼Œç”±HTTPå®¢æˆ·ç«¯å‘èµ·ä¸€ä¸ªè¯·æ±‚ï¼Œå»ºç«‹ä¸€ä¸ªåˆ°æœåŠ¡å™¨æŒ‡å®šç«¯å£ï¼ˆé»˜è®¤æ˜¯80ç«¯å£ï¼‰çš„TCPè¿æ¥ã€‚HTTPæœåŠ¡å™¨åˆ™åœ¨é‚£ä¸ªç«¯å£ç›‘å¬å®¢æˆ·ç«¯å‘é€è¿‡æ¥çš„è¯·æ±‚ã€‚ä¸€æ—¦æ”¶åˆ°è¯·æ±‚ï¼ŒæœåŠ¡å™¨ï¼ˆå‘å®¢æˆ·ç«¯ï¼‰å‘å›ä¸€ä¸ªçŠ¶æ€è¡Œï¼Œæ¯”å¦‚â€HTTP/1.1 200 OKâ€ï¼Œå’Œï¼ˆå“åº”çš„ï¼‰æ¶ˆæ¯ï¼Œæ¶ˆæ¯çš„æ¶ˆæ¯ä½“å¯èƒ½æ˜¯è¯·æ±‚çš„æ–‡ä»¶ã€é”™è¯¯æ¶ˆæ¯ã€æˆ–è€…å…¶å®ƒä¸€äº›ä¿¡æ¯ã€‚<strong>HTTPä½¿ç”¨TCPè€Œä¸æ˜¯UDPçš„åŸå› åœ¨äºï¼ˆæ‰“å¼€ï¼‰ä¸€ä¸ªç½‘é¡µå¿…é¡»ä¼ é€å¾ˆå¤šæ•°æ®ï¼Œè€ŒTCPåè®®æä¾›ä¼ è¾“æ§åˆ¶ï¼ŒæŒ‰é¡ºåºç»„ç»‡æ•°æ®ï¼Œå’Œé”™è¯¯çº æ­£ã€‚</strong></p><p>é€šè¿‡HTTPæˆ–è€…HTTPSåè®®è¯·æ±‚çš„èµ„æºç”±<strong>ç»Ÿä¸€èµ„æºæ ‡ç¤ºç¬¦</strong>ï¼ˆUniform Resource Identifiersï¼‰ï¼ˆæˆ–è€…ï¼Œæ›´å‡†ç¡®ä¸€äº›ï¼ŒURLsï¼‰æ¥æ ‡è¯†ã€‚</p><ol><li>åŸºäºè¯·æ±‚/å“åº”æ¨¡å‹çš„åè®®ã€‚è¯·æ±‚å’Œå“åº”å¿…é¡»æˆå¯¹ï¼Œå…ˆæœ‰è¯·æ±‚åæœ‰å“åº”</li><li>HTTPåè®®é»˜è®¤ç«¯å£:80</li><li>ç®€å•å¿«é€Ÿï¼šå®¢æˆ·å‘æœåŠ¡å™¨è¯·æ±‚æœåŠ¡æ—¶ï¼Œåªéœ€ä¼ é€è¯·æ±‚æ–¹æ³•å’Œè·¯å¾„ã€‚è¯·æ±‚æ–¹æ³•å¸¸ç”¨çš„æœ‰GETã€HEADã€POSTç­‰ã€‚æ¯ç§æ–¹æ³•è§„å®šäº†å®¢æˆ·ä¸æœåŠ¡å™¨è”ç³»çš„ç±»å‹ä¸åŒã€‚ç”±äºHTTPåè®®ç®€å•ï¼Œä½¿å¾—HTTPæœåŠ¡å™¨çš„ç¨‹åºè§„æ¨¡å°ï¼Œå› è€Œé€šä¿¡é€Ÿåº¦å¾ˆå¿«ã€‚</li><li>çµæ´»ï¼š<strong>HTTPå…è®¸ä¼ è¾“ä»»æ„ç±»å‹çš„æ•°æ®å¯¹è±¡ã€‚</strong>æ­£åœ¨ä¼ è¾“çš„ç±»å‹ç”±Content-TypeåŠ ä»¥æ ‡è®°ã€‚</li><li><strong>æ— è¿æ¥</strong>ï¼šæ— è¿æ¥çš„å«ä¹‰æ˜¯é™åˆ¶æ¯æ¬¡è¿æ¥åªå¤„ç†ä¸€ä¸ªè¯·æ±‚ã€‚æœåŠ¡å™¨å¤„ç†å®Œå®¢æˆ·çš„è¯·æ±‚ï¼Œå¹¶æ”¶åˆ°å®¢æˆ·çš„åº”ç­”åï¼Œå³æ–­å¼€è¿æ¥ã€‚é‡‡ç”¨è¿™ç§æ–¹å¼å¯ä»¥èŠ‚çœä¼ è¾“æ—¶é—´ã€‚</li><li><strong>æ— çŠ¶æ€</strong>ï¼šHTTPåè®®æ˜¯æ— çŠ¶æ€åè®®ã€‚æ— çŠ¶æ€æ˜¯æŒ‡åè®®å¯¹äºäº‹åŠ¡å¤„ç†æ²¡æœ‰è®°å¿†èƒ½åŠ›ã€‚ç¼ºå°‘çŠ¶æ€æ„å‘³ç€å¦‚æœåç»­å¤„ç†éœ€è¦å‰é¢çš„ä¿¡æ¯ï¼Œåˆ™å®ƒå¿…é¡»é‡ä¼ ï¼Œè¿™æ ·å¯èƒ½å¯¼è‡´æ¯æ¬¡è¿æ¥ä¼ é€çš„æ•°æ®é‡å¢å¤§ã€‚å¦ä¸€æ–¹é¢ï¼Œåœ¨æœåŠ¡å™¨ä¸éœ€è¦å…ˆå‰ä¿¡æ¯æ—¶å®ƒçš„åº”ç­”å°±è¾ƒå¿«ã€‚</li></ol><h1 id="åè®®åŠŸèƒ½"><a href="#åè®®åŠŸèƒ½" class="headerlink" title="åè®®åŠŸèƒ½"></a>åè®®åŠŸèƒ½</h1><p>HTTPåè®®æ˜¯ç”¨äºä»WWWæœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ã€‚å®ƒå¯ä»¥ä½¿æµè§ˆå™¨æ›´åŠ é«˜æ•ˆï¼Œä½¿ç½‘ç»œä¼ è¾“å‡å°‘ã€‚å®ƒä¸ä»…ä¿è¯è®¡ç®—æœºæ­£ç¡®å¿«é€Ÿåœ°ä¼ è¾“è¶…æ–‡æœ¬æ–‡æ¡£ï¼Œè¿˜ç¡®å®šä¼ è¾“æ–‡æ¡£ä¸­çš„å“ªä¸€éƒ¨åˆ†ï¼Œä»¥åŠå“ªéƒ¨åˆ†å†…å®¹é¦–å…ˆæ˜¾ç¤º(å¦‚æ–‡æœ¬å…ˆäºå›¾å½¢)ç­‰ã€‚</p><p>HTTPæ˜¯å®¢æˆ·ç«¯æµè§ˆå™¨æˆ–å…¶ä»–ç¨‹åºä¸WebæœåŠ¡å™¨ä¹‹é—´çš„<strong>åº”ç”¨å±‚é€šä¿¡åè®®</strong>ã€‚åœ¨Internetä¸Šçš„WebæœåŠ¡å™¨ä¸Šå­˜æ”¾çš„éƒ½æ˜¯è¶…æ–‡æœ¬ä¿¡æ¯ï¼Œå®¢æˆ·æœºéœ€è¦é€šè¿‡HTTPåè®®ä¼ è¾“æ‰€è¦è®¿é—®çš„è¶…æ–‡æœ¬ä¿¡æ¯ã€‚HTTPåŒ…å«å‘½ä»¤å’Œä¼ è¾“ä¿¡æ¯ï¼Œä¸ä»…å¯ç”¨äºWebè®¿é—®ï¼Œä¹Ÿå¯ä»¥ç”¨äºå…¶ä»–å› ç‰¹ç½‘/å†…è”ç½‘åº”ç”¨ç³»ç»Ÿä¹‹é—´çš„é€šä¿¡ï¼Œä»è€Œå®ç°å„ç±»åº”ç”¨èµ„æºè¶…åª’ä½“è®¿é—®çš„é›†æˆã€‚</p><p>æˆ‘ä»¬åœ¨æµè§ˆå™¨çš„åœ°å€æ é‡Œè¾“å…¥çš„ç½‘ç«™åœ°å€å«åšURL (Uniform Resource Locatorï¼Œç»Ÿä¸€èµ„æºå®šä½ç¬¦)ã€‚å°±åƒæ¯å®¶æ¯æˆ·éƒ½æœ‰ä¸€ä¸ªé—¨ç‰Œåœ°å€ä¸€æ ·ï¼Œæ¯ä¸ªç½‘é¡µä¹Ÿéƒ½æœ‰ä¸€ä¸ªInternetåœ°å€ã€‚å½“ä½ åœ¨æµè§ˆå™¨çš„åœ°å€æ¡†ä¸­è¾“å…¥ä¸€ä¸ªURLæˆ–æ˜¯å•å‡»ä¸€ä¸ªè¶…çº§é“¾æ¥æ—¶ï¼ŒURLå°±ç¡®å®šäº†è¦æµè§ˆçš„åœ°å€ã€‚æµè§ˆå™¨é€šè¿‡è¶…æ–‡æœ¬ä¼ è¾“åè®®(HTTP)ï¼Œå°†WebæœåŠ¡å™¨ä¸Šç«™ç‚¹çš„ç½‘é¡µä»£ç æå–å‡ºæ¥ï¼Œå¹¶ç¿»è¯‘æˆæ¼‚äº®çš„ç½‘é¡µã€‚</p><h1 id="HTTPåè®®çš„ç‰ˆæœ¬"><a href="#HTTPåè®®çš„ç‰ˆæœ¬" class="headerlink" title="HTTPåè®®çš„ç‰ˆæœ¬"></a>HTTPåè®®çš„ç‰ˆæœ¬</h1><p>HTTP/1.0ï¼Œå‘é€è¯·æ±‚ï¼Œåˆ›å»ºä¸€æ¬¡è¿æ¥ï¼Œè·å¾—<strong>ä¸€ä¸ª</strong>webèµ„æºï¼Œè¿æ¥æ–­å¼€</p><p>HTTP/1.1ï¼Œå‘é€è¯·æ±‚ï¼Œåˆ›å»ºä¸€æ¬¡è¿æ¥ï¼Œè·å¾—<strong>å¤šä¸ª</strong>webèµ„æºï¼Œè¿æ¥æ–­å¼€</p><p>HTTP/2.0</p><h1 id="HTTPåè®®çš„ç»„æˆ"><a href="#HTTPåè®®çš„ç»„æˆ" class="headerlink" title="HTTPåè®®çš„ç»„æˆ"></a>HTTPåè®®çš„ç»„æˆ</h1><p>HTTPåè®®ç”±<strong>HTTPè¯·æ±‚</strong>å’Œ<strong>HTTPå“åº”</strong>ç»„æˆï¼Œå½“åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ç½‘å€è®¿é—®æŸä¸ªç½‘ç«™æ—¶ï¼Œ ä½ çš„æµè§ˆå™¨ä¼šå°†ä½ çš„è¯·æ±‚å°è£…æˆä¸€ä¸ªHTTPè¯·æ±‚å‘é€ç»™æœåŠ¡å™¨ç«™ç‚¹ï¼ŒæœåŠ¡å™¨æ¥æ”¶åˆ°è¯·  æ±‚åä¼šç»„ç»‡å“åº”æ•°æ®å°è£…æˆä¸€ä¸ªHTTPå“åº”è¿”å›ç»™æµè§ˆå™¨ã€‚å³æ²¡æœ‰è¯·æ±‚å°±æ²¡æœ‰å“åº”ã€‚</p><p><strong>HTTPè¯·æ±‚åŒ…æ‹¬ï¼šè¯·æ±‚è¡Œã€è¯·æ±‚å¤´ã€è¯·æ±‚ä½“</strong></p><p><strong>HTTPå“åº”åŒ…æ‹¬ï¼šå“åº”è¡Œã€å“åº”å¤´ã€å“åº”ä½“</strong></p><h1 id="HTTPè¯·æ±‚æŠ¥æ–‡"><a href="#HTTPè¯·æ±‚æŠ¥æ–‡" class="headerlink" title="HTTPè¯·æ±‚æŠ¥æ–‡"></a>HTTPè¯·æ±‚æŠ¥æ–‡</h1><p>HTTPè¯·æ±‚æŠ¥æ–‡ç”±3éƒ¨åˆ†ç»„æˆï¼ˆè¯·æ±‚è¡Œ+è¯·æ±‚å¤´+è¯·æ±‚ä½“ï¼‰ï¼š</p><p><img src="HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87.png" alt="HTTPè¯·æ±‚æŠ¥æ–‡"></p><h2 id="è¯·æ±‚è¡Œ"><a href="#è¯·æ±‚è¡Œ" class="headerlink" title="è¯·æ±‚è¡Œ"></a>è¯·æ±‚è¡Œ</h2><p>ä¾‹å¦‚ï¼š<code>POST /chapter17/user.html HTTP/1.1</code></p><p>æ ¼å¼ï¼š<code>è¯·æ±‚æ–¹å¼ èµ„æºè·¯å¾„ åè®®/ç‰ˆæœ¬</code></p><p>è¯·æ±‚è¡Œå¿…é¡»åœ¨HTTPè¯·æ±‚æ ¼å¼çš„ç¬¬ä¸€è¡Œã€‚</p><blockquote><p>GETè¯·æ±‚</p></blockquote><ul><li>å°†è¯·æ±‚å‚æ•°è¿½åŠ åœ¨URLåé¢ï¼Œä¸å®‰å…¨</li><li>URLé•¿åº¦é™åˆ¶GETè¯·æ±‚æ–¹å¼æ•°æ®çš„å¤§å°</li><li>æ²¡æœ‰è¯·æ±‚ä½“</li><li>ä¸€èˆ¬çš„HTTPè¯·æ±‚å¤§å¤šéƒ½æ˜¯GETã€‚</li><li>å¸¸è§GETè¯·æ±‚ï¼šåœ°å€æ ç›´æ¥è®¿é—®ã€&lt;a href=â€â€&gt;ã€&lt;img src=â€â€&gt;ç­‰</li></ul><blockquote><p>POSTè¯·æ±‚</p></blockquote><p>è¯·æ±‚å‚æ•°åœ¨è¯·æ±‚ä½“å¤„ï¼Œè¾ƒå®‰å…¨ã€‚</p><p>è¯·æ±‚æ•°æ®å¤§å°æ²¡æœ‰é™åˆ¶</p><p>åªæœ‰è¡¨å•è®¾ç½®ä¸ºmethod=â€œpostâ€æ‰æ˜¯POSTè¯·æ±‚ï¼Œå…¶ä»–éƒ½æ˜¯GETè¯·æ±‚</p><blockquote><p>HEADè¯·æ±‚</p></blockquote><p>HEADè·ŸGETç›¸ä¼¼ï¼Œä¸è¿‡æœåŠ¡ç«¯æ¥æ”¶åˆ°HEADè¯·æ±‚æ—¶<strong>åªè¿”å›å“åº”å¤´</strong>ï¼Œä¸å‘é€å“åº”å†…å®¹ã€‚æ‰€ä»¥ï¼Œå¦‚æœåªéœ€è¦æŸ¥çœ‹æŸä¸ªé¡µé¢çš„çŠ¶æ€æ—¶ï¼Œç”¨HEADæ›´é«˜æ•ˆï¼Œå› ä¸ºçœå»äº†ä¼ è¾“é¡µé¢å†…å®¹çš„æ—¶é—´ã€‚</p><blockquote><p>DELETEè¯·æ±‚</p></blockquote><p>åˆ é™¤æŸä¸€ä¸ªèµ„æºã€‚</p><blockquote><p>OPTIONSè¯·æ±‚</p></blockquote><p>ç”¨äºè·å–å½“å‰URLæ‰€æ”¯æŒçš„æ–¹æ³•ã€‚è‹¥è¯·æ±‚æˆåŠŸï¼Œä¼šåœ¨HTTPå¤´ä¸­åŒ…å«ä¸€ä¸ªåä¸ºâ€œAllowâ€çš„å¤´ï¼Œå€¼æ˜¯æ‰€æ”¯æŒçš„æ–¹æ³•ï¼Œå¦‚â€GET, POSTâ€ã€‚</p><blockquote><p>PUTè¯·æ±‚</p></blockquote><p>æŠŠä¸€ä¸ªèµ„æºå­˜æ”¾åœ¨æŒ‡å®šçš„ä½ç½®ä¸Šã€‚</p><p>æœ¬è´¨ä¸Šæ¥è®²ï¼Œ PUTå’ŒPOSTæä¸ºç›¸ä¼¼ï¼Œéƒ½æ˜¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦åŒºåˆ«ï¼ŒPUTé€šå¸¸æŒ‡å®šäº†èµ„æºçš„å­˜æ”¾ä½ç½®ï¼Œè€ŒPOSTåˆ™æ²¡æœ‰ï¼ŒPOSTçš„æ•°æ®å­˜æ”¾ä½ç½®ç”±æœåŠ¡å™¨è‡ªå·±å†³å®šã€‚</p><blockquote><p>TRACEè¯·æ±‚</p></blockquote><p>å›æ˜¾æœåŠ¡å™¨æ”¶åˆ°çš„è¯·æ±‚ï¼Œä¸»è¦ç”¨äºæµ‹è¯•æˆ–è¯Šæ–­ã€‚</p><blockquote><p>CONNECTè¯·æ±‚</p></blockquote><p>CONNECTæ–¹æ³•æ˜¯HTTP/1.1åè®®é¢„ç•™çš„ï¼Œèƒ½å¤Ÿå°†è¿æ¥æ”¹ä¸ºç®¡é“æ–¹å¼çš„ä»£ç†æœåŠ¡å™¨ã€‚é€šå¸¸ç”¨äºSSLåŠ å¯†æœåŠ¡å™¨çš„é“¾æ¥ä¸éåŠ å¯†çš„HTTPä»£ç†æœåŠ¡å™¨çš„é€šä¿¡ã€‚</p><p><strong>åœ¨ REST æ¶æ„é£æ ¼ä¸­ï¼Œæœ‰ä¸¥æ ¼è§„å®šå¯¹äºä¸åŒçš„è¯·æ±‚ç±»å‹è¦è®¾ç½®åˆé€‚çš„è¯·æ±‚æ–¹æ³•ã€‚</strong></p><p>ä¹Ÿæ˜¯é¿å…å‡ºç°å› ä¸ºä¹±ç”¨å¯¼è‡´æ··ä¹±çš„é—®é¢˜ã€‚è¿™é‡Œæåˆ°äº†RESTæ¶æ„ï¼Œç°åœ¨å¾ˆå¤šåŒå­¦éƒ½åœ¨å†™RESTï¼Œæœ‰æ²¡æœ‰äººèƒ½å¤Ÿæ˜ç™½ä¸ºä»€ä¹ˆè¦å®šä¹‰RESTè¿™ä¸ªæ¶æ„é£æ ¼ï¼Ÿï¼ˆä½¿ç”¨RESTï¼‰</p><ol><li>éšç€æœåŠ¡åŒ–æ¶æ„çš„æ™®åŠï¼ŒHTTPåè®®çš„ä½¿ç”¨é¢‘ç‡è¶Šæ¥è¶Šé«˜</li><li>å¾ˆå¤šäººåœ¨é”™è¯¯çš„ä½¿ç”¨HTTPåè®®å®šä¹‰æ¥å£ï¼Œæ¯”å¦‚å„ç§å„æ ·çš„å‘½åï¼Œä»€ä¹ˆ getUserInfoByIdï¼Œ deleteById ä¹‹ç±»çš„ã€<strong>æœ‰çŠ¶æ€å’Œæ— çŠ¶æ€è¯·æ±‚æ··ç”¨ã€‚</strong></li><li>å¯¹äº http åè®®æœ¬èº«æä¾›çš„è§„åˆ™å¹¶æ²¡æœ‰å¾ˆå¥½çš„åˆ©ç”¨</li></ol><p>æ‰€ä»¥ï¼Œä¸ºäº†æ›´å¥½çš„è§£å†³è¿™äº›é—®é¢˜ï¼Œå¹²è„†å°±å®šä¹‰ä¸€å¥—è§„åˆ™ï¼Œè¿™å¥—è§„åˆ™å¹¶æ²¡æœ‰å¼•å…¥æ–°çš„ä¸œè¥¿ï¼Œæ— éå°±æ˜¯å¯¹ http åè®®æœ¬èº«çš„ä½¿ç”¨åšäº†ä¸€äº›çº¦æŸï¼Œæ¯”å¦‚è¯´</p><ol><li><strong>RESTæ˜¯é¢å‘èµ„æº</strong>ï¼Œæ¯ä¸€ä¸ª URI ä»£è¡¨ä¸€ä¸ªèµ„æº</li><li>å¼ºè°ƒ<strong>æ— çŠ¶æ€åŒ–</strong>ï¼ŒæœåŠ¡å™¨ç«¯ä¸èƒ½å­˜å‚¨æ¥è‡ªæŸä¸ªå®¢æˆ·çš„æŸä¸ªè¯·æ±‚ä¸­çš„ä¿¡æ¯ï¼Œå¹¶åœ¨è¯¥å®¢æˆ·çš„å…¶ä»– è¯·æ±‚ä¸­ä½¿ç”¨</li><li>å¼ºè°ƒ URL æš´éœ²èµ„æºæ—¶ï¼Œ<strong>ä¸è¦åœ¨ URI ä¸­å‡ºç°åŠ¨è¯</strong></li><li>åˆç†çš„åˆ©ç”¨ http çŠ¶æ€ç ã€è¯·æ±‚æ–¹æ³•ã€‚</li></ol><p>å› æ­¤å¤§å®¶åœ¨å‚ç…§è¿™ç§æ ‡å‡†å»ä½¿ç”¨ REST é£æ ¼æ—¶ï¼Œè¦æ˜ç™½ä½ éµå¾ªçš„æ˜¯ä»€ä¹ˆä»¥åŠè¦è§£å†³ä»€ä¹ˆé—®é¢˜ã€‚</p><h2 id="è¯·æ±‚å¤´"><a href="#è¯·æ±‚å¤´" class="headerlink" title="è¯·æ±‚å¤´"></a>è¯·æ±‚å¤´</h2><p>ä¾‹å¦‚ï¼šHost: 39.108.107.149:8080</p><p>è¯·æ±‚å¤´ä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œåˆ°ç¬¬ä¸€ä¸ªç©ºæ ¼ç»“æŸã€‚è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ä¹‹é—´å­˜åœ¨ä¸€ä¸ªç©ºæ ¼(å¦‚ä¸‹)</p><p>ä¾‹å¦‚ï¼šHost: 39.108.107.149:8080</p><p>è¯·æ±‚å¤´ä»ç¬¬äºŒè¡Œå¼€å§‹ï¼Œåˆ°ç¬¬ä¸€ä¸ªç©ºæ ¼ç»“æŸã€‚è¯·æ±‚å¤´å’Œè¯·æ±‚ä½“ä¹‹é—´å­˜åœ¨ä¸€ä¸ªç©ºæ ¼(å¦‚ä¸‹)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST http://39.108.107.149:8080/vk/app/rest/ddp/iModelServiceImpl/findModelByType HTTP/1.1</span><br><span class="line">User-Agent: Fiddler</span><br><span class="line">Host: 39.108.107.149:8080</span><br><span class="line">Content-Length: 11</span><br><span class="line"> </span><br><span class="line">name=åŸå¸‚</span><br></pre></td></tr></table></figure><p>è¯·æ±‚å¤´é€šå¸¸ä»¥é”®å€¼å¯¹{key:value}æ–¹å¼ä¼ é€’æ•°æ®ã€‚</p><p>keyä¸ºè§„èŒƒçš„å›ºå®šå€¼</p><p>valueä¸ºkeyå¯¹åº”çš„å–å€¼ï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå€¼ï¼Œå¯èƒ½æ˜¯ä¸€ç»„ã€‚</p><h3 id="å¸¸è§çš„è¯·æ±‚å¤´å±æ€§"><a href="#å¸¸è§çš„è¯·æ±‚å¤´å±æ€§" class="headerlink" title="å¸¸è§çš„è¯·æ±‚å¤´å±æ€§"></a>å¸¸è§çš„è¯·æ±‚å¤´å±æ€§</h3><p><strong>Referer:</strong> è¡¨ç¤ºè¿™ä¸ªè¯·æ±‚æ˜¯ä»å“ªä¸ªurlè·³è¿‡æ¥çš„ï¼Œé€šè¿‡ç™¾åº¦æ¥æœç´¢æ·˜å®ç½‘,é‚£ä¹ˆåœ¨è¿›å…¥æ·˜å®ç½‘çš„è¯·æ±‚æŠ¥æ–‡ä¸­ï¼ŒRefererçš„å€¼å°±æ˜¯:<a href="http://www.baidu.com./">www.baidu.comã€‚</a> å¦‚æœæ˜¯ç›´æ¥è®¿é—®å°±ä¸ä¼šæœ‰è¿™ä¸ªå¤´ã€‚</p><p>å¸¸ç”¨äºï¼šé˜²ç›—é“¾ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Referer: no-referrer-when-downgrade</span><br></pre></td></tr></table></figure><p><strong>Accept:</strong> å‘Šè¯‰æœåŠ¡ç«¯ï¼Œè¯¥è¯·æ±‚æ‰€èƒ½æ”¯æŒçš„å“åº”æ•°æ®ç±»å‹ï¼Œä¸“ä¸šæœ¯è¯­ç§°ä¸ºMIME ç±»å‹(æ–‡ä»¶ç±»å‹çš„ä¸€ç§æè¿°æ–¹å¼)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8</span><br></pre></td></tr></table></figure><p>MIMEæ ¼å¼ï¼šå¤§ç±»å‹/å°ç±»å‹[;å‚æ•°]</p><p>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,<em>/</em>;q=0.8</p><p>ä¾‹å¦‚:</p><p>text/html,htmlæ–‡ä»¶</p><p>text/css,cssæ–‡ä»¶</p><p>text/javascript,jsæ–‡ä»¶</p><p>image/*ï¼Œæ‰€æœ‰å›¾ç‰‡æ–‡ä»¶</p><p><strong>Cookie:</strong> å®¢æˆ·ç«¯çš„Cookieå°±æ˜¯é€šè¿‡è¿™ä¸ªæŠ¥æ–‡å¤´å±æ€§ä¼ ç»™æœåŠ¡ç«¯çš„å“¦ï¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cookie: JSESSIONID=15982C27F7507C7FDAF0F97161F634B5</span><br></pre></td></tr></table></figure><p>è¿™é‡Œå°±å‡ºäº†ä¸€ä¸ªé—®é¢˜,ç½‘ç«™Aæ€ä¹ˆä¿è¯è‡ªå·±è¯·æ±‚ä½“ä¸­ä¿å­˜çš„cookieå°±æ˜¯ç½‘ç«™Açš„cookieè€Œä¸æ˜¯ç½‘ç«™Bçš„cookieå‘¢,è¿™å°±å’Œcookieé‡Œé¢çš„jsessionidæœ‰å…³ç³»äº†ï¼Œå…³äºcookie,session,sessionid,jsessionidçš„åŒºåˆ«è”ç³»ï¼Œå¯ä»¥å‚è€ƒè¿™ä¸ªåšæ–‡:</p><p><a href="http://www.cnblogs.com/fnng/archive/2012/08/14/2637279.html">http://www.cnblogs.com/fnng/archive/2012/08/14/2637279.html</a></p><p><strong>User-Agent:</strong> æµè§ˆå™¨é€šçŸ¥æœåŠ¡å™¨ï¼Œå®¢æˆ·ç«¯æµè§ˆå™¨ä¸æ“ä½œç³»ç»Ÿç›¸å…³ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/69.0.3497.100 Safari/537.36</span><br></pre></td></tr></table></figure><p><strong>Connection:</strong> è¡¨ç¤ºå®¢æˆ·ç«¯ä¸æœåŠ¡è¿æ¥ç±»å‹ï¼›Keep-Aliveè¡¨ç¤ºæŒä¹…è¿æ¥ï¼Œcloseå·²å…³é—­</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Connection: keep-alive</span><br></pre></td></tr></table></figure><p><strong>Host:</strong> è¯·æ±‚çš„æœåŠ¡å™¨ä¸»æœºå</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Host: sczpkj.f3322.net:3000</span><br></pre></td></tr></table></figure><p><strong>Content-Length:</strong> è¯·æ±‚ä½“çš„é•¿åº¦</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST http://39.108.107.149:8080/vk/app/rest/ddp/iModelServiceImpl/findModelByType HTTP/1.1</span><br><span class="line">User-Agent: Fiddler</span><br><span class="line">Host: 39.108.107.149:8080</span><br><span class="line">Content-Length: 11</span><br><span class="line"> </span><br><span class="line">name=åŸå¸‚</span><br></pre></td></tr></table></figure><p><strong>Content-Type:</strong> è¯·æ±‚çš„ä¸å®ä½“å¯¹åº”çš„MIMEä¿¡æ¯ã€‚å¦‚æœæ˜¯POSTè¯·æ±‚,ä¼šæœ‰è¿™ä¸ªå¤´,é»˜è®¤å€¼ä¸ºapplication/x-www-form-urlencodedï¼Œè¡¨ç¤ºè¯·æ±‚ä½“å†…å®¹ä½¿ç”¨urlç¼–ç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Content-Type: application/x-www-form-urlencoded</span><br></pre></td></tr></table></figure><blockquote><h4 id="Content-Typeè¯¦è§£"><a href="#Content-Typeè¯¦è§£" class="headerlink" title="Content-Typeè¯¦è§£"></a>Content-Typeè¯¦è§£</h4><p>å¸¸è§çš„Content-Typeï¼š</p><table><thead><tr><th>Content-Type</th><th>è§£é‡Š</th></tr></thead><tbody><tr><td>text/html</td><td>htmlæ ¼å¼</td></tr><tr><td>text/plain</td><td>çº¯æ–‡æœ¬æ ¼å¼</td></tr><tr><td>text/css</td><td>CSSæ ¼å¼</td></tr><tr><td>text/javascript</td><td>jsæ ¼å¼</td></tr><tr><td>image/gif</td><td>gifå›¾ç‰‡æ ¼å¼</td></tr><tr><td>image/jpeg</td><td>jpgå›¾ç‰‡æ ¼å¼</td></tr><tr><td>image/png</td><td>pngå›¾ç‰‡æ ¼å¼</td></tr><tr><td>application/x-www-form-urlencoded</td><td>POSTä¸“ç”¨ï¼šæ™®é€šçš„è¡¨å•æäº¤é»˜è®¤æ˜¯é€šè¿‡è¿™ç§æ–¹å¼ã€‚formè¡¨å•æ•°æ®è¢«ç¼–ç ä¸ºkey/valueæ ¼å¼å‘é€åˆ°æœåŠ¡å™¨ã€‚</td></tr><tr><td>application/json</td><td>POSTä¸“ç”¨ï¼šç”¨æ¥å‘Šè¯‰æœåŠ¡ç«¯æ¶ˆæ¯ä¸»ä½“æ˜¯åºåˆ—åŒ–åçš„ JSON å­—ç¬¦ä¸²</td></tr><tr><td>text/xml</td><td>POSTä¸“ç”¨ï¼šå‘é€xmlæ•°æ®</td></tr><tr><td>multipart/form-data</td><td>POSTä¸“ç”¨ï¼šä¸‹é¢è®²è§£</td></tr></tbody></table><p><strong>application/x-www-form-urlencoded</strong> </p><p>æœ€å¸¸è§çš„postæäº¤æ•°æ®çš„æ–¹å¼ã€‚æµè§ˆå™¨åŸç”Ÿçš„formè¡¨å•ï¼Œå¦‚æœä¸è®¾ç½®<strong>enctypeå±æ€§</strong>ï¼Œé‚£ä¹ˆæœ€ç»ˆå°±ä¼šä»¥application/x-www-form-urlencoded æ–¹å¼æäº¤æ•°æ®</p><p>ç¤ºä¾‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST http://39.108.107.149:8080/vk/app/rest/ddp/iModelServiceImpl/findModelByType HTTP/1.1</span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">cache-control: no-cache</span><br><span class="line">Postman-Token: 8e602802-b4f5-4d05-96d7-e1c7a1951719</span><br><span class="line">User-Agent: PostmanRuntime/7.1.1</span><br><span class="line">Accept: */*</span><br><span class="line">Host: 39.108.107.149:8080</span><br><span class="line">cookie: JSESSIONID=6CD80B7028062D9190717CEE001C3194</span><br><span class="line">accept-encoding: gzip, deflate</span><br><span class="line">content-length: 32</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">name=%E5%9F%8E%E5%B8%82&amp;status=1</span><br></pre></td></tr></table></figure><p>é¦–å…ˆï¼ŒContent-Type è¢«æŒ‡å®šä¸º application/x-www-form-urlencodedï¼›å…¶æ¬¡ï¼Œæäº¤çš„æ•°æ®æŒ‰ç…§ key1=val1&amp;key2=val2 çš„æ–¹å¼è¿›è¡Œç¼–ç ï¼Œkey å’Œ val éƒ½è¿›è¡Œäº† URL è½¬ç ã€‚å¤§éƒ¨åˆ†æœåŠ¡ç«¯è¯­è¨€éƒ½å¯¹è¿™ç§æ–¹å¼æœ‰å¾ˆå¥½çš„æ”¯æŒã€‚</p><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬ç”¨ Ajax æäº¤æ•°æ®æ—¶ï¼Œä¹Ÿæ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼ã€‚ä¾‹å¦‚ JQuery å’Œ QWrap çš„ Ajaxï¼ŒContent-Type é»˜è®¤ã€Œapplication/x-www-form-urlencoded;charset=utf-8ã€ã€‚ </p><p><strong>multipart/form-data</strong> </p><p>è¿™åˆæ˜¯ä¸€ä¸ªå¸¸è§çš„ POST æ•°æ®æäº¤çš„æ–¹å¼ã€‚æˆ‘ä»¬<strong>ä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶</strong>æ—¶ï¼Œå¿…é¡»è®© form çš„ enctyped ç­‰äºè¿™ä¸ªå€¼ã€‚</p><p>æ­¤æ—¶ï¼ˆå½“ä½¿ç”¨è¡¨å•ä¸Šä¼ æ–‡ä»¶æ—¶ï¼‰ï¼ŒHTTPè¯·æ±‚æŠ¥æ–‡æ ¼å¼å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST http://39.108.107.149:8080/vk/app/rest/ddp/iDataSourcesBaseService/file HTTP/1.1</span><br><span class="line">Content-Type: multipart/form-data; boundary=--------------------------629236571647111133881449</span><br><span class="line">cache-control: no-cache</span><br><span class="line">Postman-Token: 2146b4b3-2d30-469c-bbcd-fbc4693934d9</span><br><span class="line">User-Agent: PostmanRuntime/7.1.1</span><br><span class="line">Accept: */*</span><br><span class="line">Host: 39.108.107.149:8080</span><br><span class="line">cookie: JSESSIONID=6CD80B7028062D9190717CEE001C3194</span><br><span class="line">accept-encoding: gzip, deflate</span><br><span class="line">content-length: 435</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">----------------------------629236571647111133881449</span><br><span class="line">Content-Disposition: form-data; name=&quot;file&quot;; filename=&quot;test.txt&quot;</span><br><span class="line">Content-Type: text/plain</span><br><span class="line"></span><br><span class="line">test upload</span><br><span class="line">----------------------------629236571647111133881449</span><br><span class="line">Content-Disposition: form-data; name=&quot;extCode&quot;</span><br><span class="line"></span><br><span class="line">test</span><br><span class="line">----------------------------629236571647111133881449</span><br><span class="line">Content-Disposition: form-data; name=&quot;extId&quot;</span><br><span class="line"></span><br><span class="line">3306</span><br><span class="line">----------------------------629236571647111133881449--  //ç»“æŸæ ‡è¯†</span><br></pre></td></tr></table></figure><p>é¦–å…ˆç”Ÿæˆäº†ä¸€ä¸ª boundary ç”¨äºåˆ†å‰²ä¸åŒçš„å­—æ®µï¼Œä¸ºäº†é¿å…ä¸æ­£æ–‡å†…å®¹é‡å¤ï¼Œboundary å¾ˆé•¿å¾ˆå¤æ‚ã€‚ç„¶å Content-Type é‡ŒæŒ‡æ˜äº†æ•°æ®æ˜¯ä»¥ mutipart/form-data æ¥ç¼–ç ï¼Œæœ¬æ¬¡è¯·æ±‚çš„ boundary æ˜¯ä»€ä¹ˆå†…å®¹ã€‚</p><p>æ¶ˆæ¯ä¸»ä½“é‡ŒæŒ‰ç…§å­—æ®µä¸ªæ•°åˆåˆ†ä¸ºå¤šä¸ªç»“æ„ç±»ä¼¼çš„éƒ¨åˆ†ï¼Œæ¯éƒ¨åˆ†éƒ½æ˜¯<strong>ä»¥â€“boundaryå¼€å§‹</strong>ï¼Œç´§æ¥ç€å†…å®¹æè¿°ä¿¡æ¯ï¼Œç„¶åæ˜¯å›è½¦ï¼Œæœ€åæ˜¯æœ€åæ˜¯å­—æ®µå…·ä½“å†…å®¹ï¼ˆæ–‡æœ¬æˆ–äºŒè¿›åˆ¶ï¼‰ï¼Œå¦‚æœä¼ è¾“çš„æ˜¯æ–‡ä»¶ï¼Œè¿˜è¦åŒ…å«æ–‡ä»¶åå’Œæ–‡ä»¶ç±»å‹ä¿¡æ¯ã€‚æ¶ˆæ¯ä¸»ä½“æœ€å<strong>ä»¥â€“boundaryâ€“æ ‡ç¤ºç»“æŸ</strong>ã€‚</p><p>ä¸Šé¢æåˆ°çš„è¿™ä¸¤ç§ POST æ•°æ®çš„æ–¹å¼ï¼Œéƒ½æ˜¯æµè§ˆå™¨åŸç”Ÿæ”¯æŒçš„ï¼Œè€Œä¸”ç°é˜¶æ®µåŸç”Ÿ form è¡¨å•ä¹Ÿåªæ”¯æŒè¿™ä¸¤ç§æ–¹å¼ã€‚ä½†æ˜¯éšç€è¶Šæ¥è¶Šå¤šçš„ Web ç«™ç‚¹ï¼Œå°¤å…¶æ˜¯ WebAppï¼Œå…¨éƒ¨ä½¿ç”¨ Ajax è¿›è¡Œæ•°æ®äº¤äº’ä¹‹åï¼Œæˆ‘ä»¬å®Œå…¨å¯ä»¥å®šä¹‰æ–°çš„æ•°æ®æäº¤æ–¹å¼ï¼Œç»™å¼€å‘å¸¦æ¥æ›´å¤šä¾¿åˆ©ã€‚ </p><p><strong>application/json</strong></p><p>application/json è¿™ä¸ª Content-Type ä½œä¸ºå“åº”å¤´å¤§å®¶è‚¯å®šä¸é™Œç”Ÿã€‚å®é™…ä¸Šï¼Œç°åœ¨è¶Šæ¥è¶Šå¤šçš„äººæŠŠå®ƒä½œä¸ºè¯·æ±‚å¤´ï¼Œç”¨æ¥å‘Šè¯‰æœåŠ¡ç«¯æ¶ˆæ¯ä¸»ä½“æ˜¯åºåˆ—åŒ–åçš„ JSON å­—ç¬¦ä¸²ã€‚ç”±äº JSON è§„èŒƒçš„æµè¡Œï¼Œé™¤äº†ä½ç‰ˆæœ¬ IE ä¹‹å¤–çš„å„å¤§æµè§ˆå™¨éƒ½åŸç”Ÿæ”¯æŒ JSON.stringifyï¼ŒæœåŠ¡ç«¯è¯­è¨€ä¹Ÿéƒ½æœ‰å¤„ç† JSON çš„å‡½æ•°ï¼Œä½¿ç”¨ JSON ä¸ä¼šé‡ä¸Šä»€ä¹ˆéº»çƒ¦ã€‚ <strong>JSON æ ¼å¼æ”¯æŒæ¯”é”®å€¼å¯¹å¤æ‚å¾—å¤šçš„ç»“æ„åŒ–æ•°æ®ï¼Œè¿™ä¸€ç‚¹ä¹Ÿå¾ˆæœ‰ç”¨ã€‚</strong></p><p>å½“<code>Content-Type: application/json</code>æ—¶è¯·æ±‚æŠ¥æ–‡å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST http://39.108.107.149:8080/vk/app/rest/ddp/vkIndexsService/queryVkIndxs HTTP/1.1</span><br><span class="line">Content-Type: application/json</span><br><span class="line">cache-control: no-cache</span><br><span class="line">Postman-Token: 5014bc39-0777-49d5-bb8a-73db9a981e49</span><br><span class="line">User-Agent: PostmanRuntime/7.1.1</span><br><span class="line">Accept: */*</span><br><span class="line">Host: 39.108.107.149:8080</span><br><span class="line">cookie: JSESSIONID=6CD80B7028062D9190717CEE001C3194</span><br><span class="line">accept-encoding: gzip, deflate</span><br><span class="line">content-length: 132</span><br><span class="line">Connection: keep-alive</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line"> &quot;name&quot;:&quot;828éªŒè¯ç»§æ‰¿&quot;,</span><br><span class="line"> &quot;getresultType&quot;:&quot;2&quot;,</span><br><span class="line"> &quot;createTime&quot;:&quot;Tue Sep 11 2018 00:00:00 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ç§æ–¹æ¡ˆï¼Œå¯ä»¥æ–¹ä¾¿çš„æäº¤å¤æ‚çš„ç»“æ„åŒ–æ•°æ®ï¼Œç‰¹åˆ«é€‚åˆ RESTful çš„æ¥å£ã€‚å„å¤§æŠ“åŒ…å·¥å…·å¦‚ Chrome è‡ªå¸¦çš„å¼€å‘è€…å·¥å…·ã€Firebugã€Fiddlerï¼Œéƒ½ä¼šä»¥æ ‘å½¢ç»“æ„å±•ç¤º JSON æ•°æ®ï¼Œéå¸¸å‹å¥½ã€‚</p></blockquote><p><strong>Accept-Encoding:</strong> æµè§ˆå™¨é€šçŸ¥æœåŠ¡å™¨ï¼Œæµè§ˆå™¨æ”¯æŒçš„æ•°æ®å‹ç¼©æ ¼å¼ã€‚å¦‚GZIPå‹ç¼©</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Accept-Encoding: gzip, deflate</span><br></pre></td></tr></table></figure><p><strong>Accept-Language:</strong> æµè§ˆå™¨é€šçŸ¥æœåŠ¡å™¨ï¼Œæµè§ˆå™¨æ”¯æŒçš„è¯­è¨€ã€‚å„å›½è¯­è¨€(å›½é™…åŒ–i18n)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br></pre></td></tr></table></figure><p><strong>Cache-Control:</strong> æŒ‡å®šè¯·æ±‚å’Œå“åº”éµå¾ªçš„ç¼“å­˜æœºåˆ¶</p><p>å¯¹ç¼“å­˜è¿›è¡Œæ§åˆ¶ï¼Œå¦‚ä¸€ä¸ªè¯·æ±‚å¸Œæœ›å“åº”è¿”å›çš„å†…å®¹åœ¨å®¢æˆ·ç«¯è¦è¢«ç¼“å­˜ä¸€å¹´ï¼Œæˆ–ä¸å¸Œæœ›è¢«ç¼“å­˜å°±å¯ä»¥é€šè¿‡è¿™ä¸ªæŠ¥æ–‡å¤´è¾¾åˆ°ç›®çš„ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cache-Control: no-cache</span><br></pre></td></tr></table></figure><p>æ›´å¤šè¯·æ±‚å¤´å±æ€§å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« :<a href = "http://tools.jb51.net/table/http_header">HTTPå“åº”å¤´å’Œè¯·æ±‚å¤´ä¿¡æ¯å¯¹ç…§è¡¨</a></p><h2 id="è¯·æ±‚ä½“"><a href="#è¯·æ±‚ä½“" class="headerlink" title="è¯·æ±‚ä½“"></a>è¯·æ±‚ä½“</h2><p>å½“è¯·æ±‚æ–¹å¼æ˜¯postçš„æ—¶ï¼Œè¯·æ±‚ä½“ä¼šæœ‰è¯·æ±‚çš„å‚æ•°ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><p>username=zhangsan&amp;password=123</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">POST http://39.108.107.149:8080/vk/app/rest/ddp/iModelServiceImpl/findModelByType HTTP/1.1</span><br><span class="line">User-Agent: Fiddler</span><br><span class="line">Host: 39.108.107.149:8080</span><br><span class="line">Content-Length: 20</span><br><span class="line"> </span><br><span class="line">name=åŸå¸‚&amp;status=1</span><br></pre></td></tr></table></figure><h1 id="HTTPå“åº”æŠ¥æ–‡"><a href="#HTTPå“åº”æŠ¥æ–‡" class="headerlink" title="HTTPå“åº”æŠ¥æ–‡"></a>HTTPå“åº”æŠ¥æ–‡</h1><p>HTTPçš„å“åº”æŠ¥æ–‡ä¹Ÿç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼ˆå“åº”è¡Œ+å“åº”å¤´+å“åº”ä½“ï¼‰</p><p><img src="HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87.png" alt="HTTPå“åº”æŠ¥æ–‡"></p><h2 id="å“åº”è¡Œ"><a href="#å“åº”è¡Œ" class="headerlink" title="å“åº”è¡Œ"></a>å“åº”è¡Œ</h2><p>ä¾‹å¦‚ï¼š<code>HTTP/1.1 200 OK</code></p><p>æ ¼å¼ï¼š<code>æŠ¥æ–‡åè®®åŠç‰ˆæœ¬ çŠ¶æ€ç åŠçŠ¶æ€æè¿°</code></p><h3 id="å¸¸è§çš„çŠ¶æ€ç "><a href="#å¸¸è§çš„çŠ¶æ€ç " class="headerlink" title="å¸¸è§çš„çŠ¶æ€ç "></a>å¸¸è§çš„çŠ¶æ€ç </h3><p>çŠ¶æ€ç ï¼šç”±3ä½æ•°å­—ç»„æˆï¼Œç¬¬ä¸€ä¸ªæ•°å­—å®šä¹‰äº†å“åº”çš„ç±»åˆ«</p><p>1xxï¼šæŒ‡ç¤ºä¿¡æ¯ï¼Œè¡¨ç¤ºè¯·æ±‚å·²æ¥æ”¶ï¼Œç»§ç»­å¤„ç†</p><p>2xxï¼šæˆåŠŸï¼Œè¡¨ç¤ºè¯·æ±‚å·²è¢«æˆåŠŸæ¥å—ï¼Œå¤„ç†ã€‚</p><ul><li>200 OKï¼šå®¢æˆ·ç«¯è¯·æ±‚æˆåŠŸ</li><li>204 No Contentï¼šæ— å†…å®¹ã€‚æœåŠ¡å™¨æˆåŠŸå¤„ç†ï¼Œä½†æœªè¿”å›å†…å®¹ã€‚ä¸€èˆ¬ç”¨åœ¨åªæ˜¯å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€ä¿¡æ¯ï¼Œè€ŒæœåŠ¡å™¨ä¸ç”¨å‘å®¢æˆ·ç«¯è¿”å›ä»€ä¹ˆä¿¡æ¯çš„æƒ…å†µã€‚ä¸ä¼šåˆ·æ–°é¡µé¢ã€‚</li><li>206 Partial Contentï¼šæœåŠ¡å™¨å·²ç»å®Œæˆäº†éƒ¨åˆ†GETè¯·æ±‚ï¼ˆå®¢æˆ·ç«¯è¿›è¡Œäº†èŒƒå›´è¯·æ±‚ï¼‰ã€‚å“åº”æŠ¥æ–‡ä¸­åŒ…å«Content-RangeæŒ‡å®šèŒƒå›´çš„å®ä½“å†…å®¹</li></ul><p>3xxï¼šé‡å®šå‘</p><ul><li>301 Moved Permanentlyï¼šæ°¸ä¹…é‡å®šå‘ï¼Œè¡¨ç¤ºè¯·æ±‚çš„èµ„æºå·²ç»æ°¸ä¹…çš„æ¬åˆ°äº†å…¶ä»–ä½ç½®ã€‚</li><li>302 Foundï¼šä¸´æ—¶é‡å®šå‘ï¼Œè¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸´æ—¶æ¬åˆ°äº†å…¶ä»–ä½ç½®</li><li>303 See Otherï¼šä¸´æ—¶é‡å®šå‘ï¼Œåº”ä½¿ç”¨GETå®šå‘è·å–è¯·æ±‚èµ„æºã€‚303åŠŸèƒ½ä¸302ä¸€æ ·ï¼ŒåŒºåˆ«åªæ˜¯303æ˜ç¡®å®¢æˆ·ç«¯åº”è¯¥ä½¿ç”¨GETè®¿é—®</li><li>307 Temporary Redirectï¼šä¸´æ—¶é‡å®šå‘ï¼Œå’Œ302æœ‰ç€ç›¸åŒå«ä¹‰ã€‚POSTä¸ä¼šå˜æˆGET</li><li>304 Not Modifiedï¼šè¡¨ç¤ºå®¢æˆ·ç«¯å‘é€é™„å¸¦æ¡ä»¶çš„è¯·æ±‚ï¼ˆGETæ–¹æ³•è¯·æ±‚æŠ¥æ–‡ä¸­çš„IFâ€¦ï¼‰æ—¶ï¼Œæ¡ä»¶ä¸æ»¡è¶³ã€‚è¿”å›304æ—¶ï¼Œä¸åŒ…å«ä»»ä½•å“åº”ä¸»ä½“ã€‚è™½ç„¶304è¢«åˆ’åˆ†åœ¨3XXï¼Œä½†å’Œé‡å®šå‘ä¸€æ¯›é’±å…³ç³»éƒ½æ²¡æœ‰</li></ul><p>4xxï¼šå®¢æˆ·ç«¯é”™è¯¯</p><ul><li>400 Bad Requestï¼šå®¢æˆ·ç«¯è¯·æ±‚æœ‰è¯­æ³•é”™è¯¯ï¼ŒæœåŠ¡å™¨æ— æ³•ç†è§£ã€‚</li><li>401 Unauthorizedï¼šè¯·æ±‚æœªç»æˆæƒï¼Œè¿™ä¸ªçŠ¶æ€ä»£ç å¿…é¡»å’ŒWWW-AuthenticateæŠ¥å¤´åŸŸä¸€èµ·ä½¿ç”¨ã€‚</li><li>403 Forbiddenï¼šæœåŠ¡å™¨æ”¶åˆ°è¯·æ±‚ï¼Œä½†æ˜¯æ‹’ç»æä¾›æœåŠ¡</li><li>404 Not Foundï¼šè¯·æ±‚èµ„æºä¸å­˜åœ¨ã€‚æ¯”å¦‚ï¼Œè¾“å…¥äº†é”™è¯¯çš„url</li><li>415 Unsupported media typeï¼šä¸æ”¯æŒçš„åª’ä½“ç±»å‹</li></ul><p>5xxï¼šæœåŠ¡å™¨ç«¯é”™è¯¯ï¼ŒæœåŠ¡å™¨æœªèƒ½å®ç°åˆæ³•çš„è¯·æ±‚ã€‚</p><ul><li>500 Internal Server Errorï¼šæœåŠ¡å™¨å‘ç”Ÿä¸å¯é¢„æœŸçš„é”™è¯¯ã€‚</li><li>503 Server Unavailableï¼šæœåŠ¡å™¨å½“å‰ä¸èƒ½å¤„ç†å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œä¸€æ®µæ—¶é—´åå¯èƒ½æ¢å¤æ­£å¸¸ï¼Œ</li></ul><h2 id="å“åº”å¤´"><a href="#å“åº”å¤´" class="headerlink" title="å“åº”å¤´"></a>å“åº”å¤´</h2><p>å“åº”æŠ¥æ–‡å¤´ï¼Œä¹Ÿæ˜¯ç”±å¤šä¸ªå±æ€§ç»„æˆï¼›</p><p>å“åº”å¤´ä¹Ÿæ˜¯ç”¨é”®å€¼å¯¹ï¼›</p><p>æœåŠ¡å™¨é€šè¿‡å“åº”å¤´æ¥æ§åˆ¶æµè§ˆå™¨çš„è¡Œä¸ºï¼Œä¸åŒçš„å¤´æµè§ˆå™¨æ“ä½œä¸åŒ</p><table><thead><tr><th>å¸¸è§è¯·æ±‚å¤´</th><th>æè¿°</th></tr></thead><tbody><tr><td>Location</td><td>æŒ‡å®šå“åº”çš„è·¯å¾„ï¼Œéœ€è¦ä¸çŠ¶æ€ç 302é…åˆä½¿ç”¨ï¼Œå®Œæˆè·³è½¬ã€‚</td></tr><tr><td>Content-Type</td><td>å“åº”æ­£æ–‡çš„ç±»å‹ï¼ˆMIMEç±»å‹ï¼‰ï¼›å–å€¼ï¼štext/html;charset=UTF-8</td></tr><tr><td>Content-Disposition</td><td>é€šè¿‡æµè§ˆå™¨ä»¥ä¸‹è½½æ–¹å¼è§£ææ­£æ–‡ï¼›  å–å€¼ï¼šattachment;filename=xx.zip</td></tr><tr><td>Set-Cookie</td><td>ä¸ä¼šè¯ç›¸å…³æŠ€æœ¯ã€‚æœåŠ¡å™¨å‘æµè§ˆå™¨å†™å…¥Cookie</td></tr><tr><td>Content-Encoding</td><td>æœåŠ¡å™¨ä½¿ç”¨çš„å‹ç¼©æ ¼å¼ï¼›å–å€¼ï¼šgzip</td></tr><tr><td>Content-length</td><td>å“åº”æ­£æ–‡çš„é•¿åº¦</td></tr><tr><td>Refresh</td><td>å®šæ—¶åˆ·æ–°ï¼Œæ ¼å¼ï¼šç§’æ•°;url=è·¯å¾„ã€‚urlå¯çœç•¥ï¼Œé»˜è®¤å€¼ä¸ºå½“å‰é¡µã€‚å–å€¼ï¼š3;url=<a href="http://www.itcast.cn/">www.itcast.cn</a>    //ä¸‰ç§’åˆ·æ–°é¡µé¢åˆ°<a href="http://www.itcast.cn/">www.itcast.cn</a></td></tr><tr><td>Server</td><td>æŒ‡çš„æ˜¯æœåŠ¡å™¨åç§°ï¼Œé»˜è®¤å€¼ï¼šApache-Coyote/1.1ã€‚å¯ä»¥é€šè¿‡conf/server.xmlé…ç½®è¿›è¡Œä¿®æ”¹ã€‚&lt;Connector port=â€8080â€ â€¦ server=â€itcastâ€/&gt;</td></tr><tr><td>Last-Modified</td><td>æœåŠ¡å™¨é€šçŸ¥æµè§ˆå™¨ï¼Œæ–‡ä»¶çš„æœ€åä¿®æ”¹æ—¶é—´ã€‚ä¸If-Modified-Sinceä¸€èµ·ä½¿ç”¨ã€‚</td></tr><tr><td>Cache-Control</td><td>å“åº”è¾“å‡ºåˆ°å®¢æˆ·ç«¯åï¼ŒæœåŠ¡ç«¯é€šè¿‡è¯¥æŠ¥æ–‡å¤´å±å‘Šè¯‰å®¢æˆ·ç«¯å¦‚ä½•æ§åˆ¶å“åº”å†…å®¹çš„ç¼“å­˜ã€‚å¸¸è§çš„å–å€¼æœ‰å¸¸è§çš„å–å€¼æœ‰privateã€publicã€no-cacheã€max-ageï¼Œno-storeï¼Œé»˜è®¤ä¸ºprivateã€‚ç¼“å­˜æ—¶é—´ä¸º31536000ç§’ï¼ˆ365å¤©ï¼‰</td></tr></tbody></table><p>æ›´å¤šè¯·æ±‚å¤´å±æ€§å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼š<a href="http://tools.jb51.net/table/http_header">HTTPå“åº”å¤´å’Œè¯·æ±‚å¤´ä¿¡æ¯å¯¹ç…§è¡¨</a></p><h2 id="å“åº”ä½“"><a href="#å“åº”ä½“" class="headerlink" title="å“åº”ä½“"></a>å“åº”ä½“</h2><p>å“åº”æŠ¥æ–‡ä½“ï¼ŒæœåŠ¡å™¨å‘é€ç»™æµè§ˆå™¨çš„æ­£æ–‡ï¼Œå³æˆ‘ä»¬çœŸæ­£è¦çš„â€œå¹²è´§â€ ï¼›</p><p>å“åº”ä½“ï¼Œå“åº”ä½“æ˜¯æœåŠ¡å™¨å›å†™ç»™å®¢æˆ·ç«¯çš„é¡µé¢æ­£æ–‡ï¼Œæµè§ˆå™¨å°†æ­£æ–‡åŠ è½½åˆ°å†…å­˜ï¼Œç„¶åè§£ææ¸²æŸ“ï¼Œæ˜¾ç¤ºé¡µé¢å†…å®¹ã€‚</p><h1 id="HTTPåè®®æ‰©å±•"><a href="#HTTPåè®®æ‰©å±•" class="headerlink" title="HTTPåè®®æ‰©å±•"></a>HTTPåè®®æ‰©å±•</h1><blockquote><p><strong>å¦‚æœä¼ è¾“çš„æ–‡ä»¶è¿‡å¤§æ€ä¹ˆåŠ</strong></p></blockquote><p>æœåŠ¡å™¨ä¸Šè¿”å›çš„èµ„æºæ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œæ¯”å¦‚æœ‰äº› js æ–‡ä»¶å¤§å°å¯èƒ½å°±æœ‰å‡ å…†ã€‚æ–‡ä»¶è¿‡å¤§å°±ä¼šå½±å“ä¼  è¾“çš„æ•ˆç‡ï¼ŒåŒæ—¶ä¹Ÿä¼šå¸¦æ¥å¸¦å®½çš„æ¶ˆè€—ã€‚æ€ä¹ˆåŠå‘¢ï¼Ÿ</p><ol><li>å¸¸è§çš„æ‰‹æ®µæ˜¯ï¼Œå¯¹æ–‡ä»¶è¿›è¡Œ<strong>å‹ç¼©</strong>ï¼Œå‡å°‘æ–‡ä»¶å¤§å°ã€‚é‚£å‹ç¼©å’Œè§£å‹ç¼©çš„æµç¨‹æ€ä¹ˆå®ç°å‘¢ï¼Ÿ é¦–å…ˆæœåŠ¡ç«¯éœ€è¦èƒ½æ”¯æŒæ–‡ä»¶çš„å‹ç¼©åŠŸèƒ½ï¼Œå…¶æ¬¡æµè§ˆå™¨èƒ½å¤Ÿé’ˆå¯¹è¢«å‹ç¼©çš„æ–‡ä»¶è¿›è¡Œè§£å‹ç¼©ã€‚æµè§ˆå™¨å¯ä»¥æŒ‡å®š Accept-Encoding æ¥é«˜é€ŸæœåŠ¡å™¨æˆ‘å½“å‰æ”¯æŒçš„ç¼–ç ç±»å‹ Accept-Encoding:gzip,deflate é‚£æœåŠ¡ç«¯ä¼šæ ¹æ®æ”¯æŒçš„ç¼–ç ç±»å‹ï¼Œé€‰æ‹©åˆé€‚çš„ç±»å‹è¿›è¡Œå‹ç¼©ã€‚å¸¸è§çš„ç¼–ç æ–¹å¼æœ‰ï¼šgzip/deflate</li><li><strong>åˆ†å‰²</strong>ä¼ è¾“ åœ¨ä¼ è¾“å¤§å®¹é‡æ•°æ®æ—¶ï¼Œé€šè¿‡æŠŠæ•°æ®åˆ†å‰²æˆå¤šå—ï¼Œèƒ½å¤Ÿè®©æµè§ˆå™¨é€æ­¥æ˜¾ç¤ºé¡µé¢ã€‚è¿™ç§æŠŠå®ä½“ä¸»ä½“åˆ†å—çš„åŠŸèƒ½ç§°ä¸ºåˆ†å—ä¼ è¾“ç¼–ç ï¼ˆChunked Transfer Codingï¼‰ã€‚</li></ol><blockquote><p><strong>æ¯æ¬¡è¯·æ±‚éƒ½è¦å»ºç«‹è¿æ¥å—ï¼Ÿ</strong></p></blockquote><p>åœ¨æœ€æ—©çš„ HTTP åè®®ä¸­ï¼Œæ¯è¿›è¡Œä¸€æ¬¡ HTTP é€šä¿¡ï¼Œå°±éœ€è¦åšä¸€æ¬¡ TCP çš„è¿æ¥ã€‚è€Œä¸€æ¬¡è¿æ¥éœ€è¦è¿›è¡Œ 3 æ¬¡æ¡æ‰‹ï¼Œè¿™ç§é€šä¿¡æ–¹å¼ä¼šå¢åŠ é€šä¿¡é‡çš„å¼€é”€ã€‚</p><p><img src="HTTP%E4%B8%80%E6%AC%A1%E9%80%9A%E4%BF%A1.png" alt="HTTPä¸€æ¬¡é€šä¿¡"></p><p>æ‰€ä»¥åœ¨ <strong>HTTP/1.1 ä¸­æ”¹ç”¨äº†æŒä¹…è¿æ¥</strong>ï¼Œå°±æ˜¯åœ¨ä¸€æ¬¡è¿æ¥å»ºç«‹ä¹‹åï¼Œåªè¦å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯æ²¡æœ‰ æ˜ç¡®æå‡ºæ–­å¼€è¿æ¥ï¼Œé‚£ä¹ˆè¿™ä¸ª tcp è¿æ¥ä¼šä¸€ç›´ä¿æŒè¿æ¥çŠ¶æ€ æŒä¹…è¿æ¥çš„ä¸€ä¸ªæœ€å¤§çš„å¥½å¤„æ˜¯ï¼šå¤§å¤§å‡å°‘äº†è¿æ¥çš„å»ºç«‹ä»¥åŠå…³é—­æ—¶å»¶ã€‚ HTTP1.1 ä¸­æœ‰ä¸€ä¸ª Transport æ®µã€‚ä¼šæºå¸¦ä¸€ä¸ª <strong>Connection:Keep-Alive</strong>ï¼Œè¡¨ç¤ºå¸Œæœ›å°†æ­¤æ¡è¿æ¥ ä½œä¸ºæŒä¹…è¿æ¥ã€‚</p><p>HTTP/1.1 æŒä¹…è¿æ¥åœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯æ¿€æ´»çš„ï¼Œé™¤éç‰¹åˆ«æŒ‡æ˜ï¼Œå¦åˆ™ HTTP/1.1 å‡å®šæ‰€æœ‰çš„è¿æ¥éƒ½ æ˜¯æŒä¹…çš„ï¼Œè¦åœ¨äº‹åŠ¡å¤„ç†ç»“æŸä¹‹åå°†è¿æ¥å…³é—­ï¼ŒHTTP/1.1 åº”ç”¨ç¨‹åºå¿…é¡»å‘æŠ¥æ–‡ä¸­æ˜¾ç¤ºåœ°æ·»åŠ  ä¸€ä¸ª Connectionï¼šclose é¦–éƒ¨ã€‚</p><p>HTTP1.1 å®¢æˆ·ç«¯åŠ è½½åœ¨æ”¶åˆ°å“åº”åï¼Œé™¤éå“åº”ä¸­åŒ…å«äº† Connectionï¼šclose é¦–éƒ¨ï¼Œä¸ç„¶ HTTP/1.1 è¿æ¥å°±ä»ç„¶ç»´æŒåœ¨æ‰“å¼€çŠ¶æ€ã€‚ä½†æ˜¯ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä»ç„¶å¯ä»¥éšæ—¶å…³é—­ç©ºé—²çš„è¿æ¥ã€‚ä¸å‘é€ Connectionï¼šclose å¹¶ä¸æ„å‘³è¿™æœåŠ¡å™¨æ‰¿è¯ºæ°¸è¿œå°†è¿æ¥ä¿æŒåœ¨æ‰“å¼€çŠ¶æ€ã€‚</p><p><strong>ç®¡é“åŒ–è¿æ¥</strong>ï¼šhttp/1.1 å…è®¸åœ¨æŒä¹…è¿æ¥ä¸Šä½¿ç”¨è¯·æ±‚ç®¡é“ã€‚ä»¥å‰å‘é€è¯·æ±‚åéœ€ç­‰å¾…å¹¶æ”¶åˆ°å“åº”ï¼Œ æ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚ç®¡çº¿åŒ–æŠ€æœ¯å‡ºç°åï¼Œä¸ç”¨ç­‰å¾…å“åº”äº¦å¯ç›´æ¥å‘é€ä¸‹ä¸€ä¸ªè¯·æ±‚ã€‚è¿™æ ·å°± èƒ½å¤Ÿåšåˆ°åŒæ—¶å¹¶è¡Œå‘é€å¤šä¸ªè¯·æ±‚ï¼Œè€Œä¸éœ€è¦ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç­‰å¾…å“åº”äº†ã€‚</p><p><img src="%E7%AE%A1%E9%81%93%E5%8C%96%E8%BF%9E%E6%8E%A5.png" alt="ç®¡é“åŒ–è¿æ¥"></p><blockquote><p><strong>HTTPåè®®å¦‚ä½•è§£å†³æ— çŠ¶æ€é—®é¢˜</strong></p></blockquote><p>HTTP åè®®æ˜¯æ— çŠ¶æ€çš„ï¼Œä»€ä¹ˆæ˜¯æ— çŠ¶æ€å‘¢ï¼Ÿå°±æ˜¯è¯´ HTTP åè®®æœ¬èº«ä¸ä¼šå¯¹è¯·æ±‚å’Œå“åº”ä¹‹é—´çš„ é€šä¿¡çŠ¶æ€åšä¿å­˜ã€‚ ä½†æ˜¯ç°åœ¨çš„åº”ç”¨éƒ½æ˜¯æœ‰çŠ¶æ€çš„ï¼Œå¦‚æœæ˜¯æ— çŠ¶æ€ï¼Œé‚£è¿™äº›åº”ç”¨åŸºæœ¬æ²¡äººç”¨ï¼Œä½ æƒ³æƒ³ï¼Œè®¿é—®ä¸€ä¸ªç”µå•†ç½‘ç«™ï¼Œå…ˆç™»å½•ï¼Œç„¶åå»é€‰è´­å•†å“ï¼Œå½“ç‚¹å‡»ä¸€ä¸ªå•†å“åŠ å…¥è´­ç‰©è½¦ä»¥ååˆæç¤ºä½ ç™»å½•ã€‚è¿™ç§ç”¨æˆ·ä½“éªŒæ ¹æœ¬ä¸ä¼šæœ‰äººå»ä½¿ç”¨ã€‚é‚£æˆ‘ä»¬æ˜¯å¦‚ä½•å®ç°å¸¦çŠ¶æ€çš„åè®®å‘¢ï¼Ÿ</p><ol><li><strong>å®¢æˆ·ç«¯æ”¯æŒçš„ cookie</strong></li></ol><p>HTTP åè®®ä¸­å¼•å…¥äº† Cookie æŠ€æœ¯ï¼Œç”¨æ¥è§£å†³HTTPåè®®æ— çŠ¶æ€çš„é—®é¢˜ã€‚é€šè¿‡åœ¨è¯·æ±‚å’Œå“åº”æŠ¥æ–‡ä¸­å†™å…¥ Cookie ä¿¡æ¯æ¥æ§åˆ¶å®¢æˆ·ç«¯çš„çŠ¶æ€ï¼›Cookie ä¼šæ ¹æ®ä»æœåŠ¡å™¨ç«¯å‘é€çš„å“åº”æŠ¥æ–‡å†…çš„ä¸€ä¸ªå«åš Set-Cookie çš„é¦–éƒ¨å­—æ®µä¿¡æ¯ï¼Œé€šçŸ¥å®¢æˆ·ç«¯ä¿å­˜ Cookieã€‚å½“ä¸‹æ¬¡å®¢æˆ·ç«¯å†å¾€è¯¥æœåŠ¡å™¨å‘é€è¯·æ±‚æ—¶ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨åœ¨è¯·æ±‚æŠ¥æ–‡ä¸­åŠ å…¥ Cookie å€¼åå‘é€å‡ºå»ã€‚</p><ol start="2"><li><strong>æœåŠ¡ç«¯æ”¯æŒçš„ session</strong></li></ol><p>æœåŠ¡ç«¯æ˜¯é€šè¿‡ä»€ä¹ˆæ–¹å¼æ¥ä¿å­˜çŠ¶æ€çš„å‘¢ï¼Ÿ åœ¨åŸºäº tomcat è¿™ç±»çš„ jsp/servlet å®¹å™¨ä¸­ï¼Œä¼šæä¾› session è¿™æ ·çš„æœºåˆ¶æ¥ä¿å­˜æœåŠ¡ç«¯çš„å¯¹è±¡çŠ¶æ€ï¼ŒæœåŠ¡å™¨ä½¿ç”¨ä¸€ç§ç±»ä¼¼äºæ•£åˆ—è¡¨çš„ç»“æ„æ¥ä¿å­˜ä¿¡æ¯ï¼Œå½“ç¨‹åºéœ€è¦ä¸ºæŸä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚åˆ›å»ºä¸€ä¸ª session çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨é¦–å…ˆæ£€æŸ¥è¿™ä¸ªå®¢æˆ·ç«¯ çš„è¯·æ±‚æ˜¯å¦åŒ…å«äº†ä¸€ä¸ª session æ ‡è¯†- session idï¼› å¦‚æœå·²åŒ…å«ä¸€ä¸ª session id åˆ™è¯´æ˜ä»¥å‰å·²ç»ä¸ºå®¢æˆ·ç«¯åˆ›å»ºè¿‡ sessionï¼ŒæœåŠ¡å™¨å°±æŒ‰ç…§ session id æŠŠè¿™ä¸ª session æ£€ç´¢å‡ºæ¥ä½¿ç”¨ï¼ˆå¦‚æœæ£€ç´¢ä¸åˆ°ï¼Œä¼šæ–°å»ºä¸€ä¸ªï¼‰ï¼› å¦‚æœå®¢æˆ·ç«¯è¯·æ±‚ä¸åŒ…å« sessionidï¼Œåˆ™ä¸ºæ­¤å®¢æˆ·ç«¯åˆ›å»ºä¸€ä¸ª session å¹¶ä¸”ç”Ÿæˆä¸€ä¸ªä¸æ­¤ session ç›¸å…³è”çš„ session idï¼Œ session id çš„å€¼æ˜¯ä¸€ä¸ªæ—¢ä¸ä¼šé‡å¤ï¼Œåˆä¸å®¹æ˜“è¢«æ‰¾åˆ°è§„å¾‹çš„ä»¿é€ å­—ç¬¦ ä¸²ï¼Œè¿™ä¸ª session id å°†ä¼šè¿”å›ç»™å®¢æˆ·ç«¯ä¿å­˜</p><p><img src="Session%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86.png" alt="Sessionå®ç°åŸç†"></p><h1 id="æ›´å¤šâ€¦"><a href="#æ›´å¤šâ€¦" class="headerlink" title="æ›´å¤šâ€¦"></a>æ›´å¤šâ€¦</h1><ul><li><input disabled="" type="checkbox"> HTTP1.0/HTTP1.1/HTTP2.0çš„å¼‚åŒ</li><li><input disabled="" type="checkbox"> HTTPä¸HTTPSçš„ä¸åŒï¼›HTTPSçš„åŸç†</li><li><input disabled="" type="checkbox"> HTTPé•¿è¿æ¥ä¸çŸ­è¿æ¥</li><li><input disabled="" type="checkbox"> GET/POSTåŒºåˆ«è¯¦è§£</li><li><input disabled="" type="checkbox"> Cookieã€Sessionè¯¦è§£</li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://blog.csdn.net/weixin_38087538/article/details/82838762">Httpåè®®è¯¦è§£(æ·±å…¥ç†è§£)</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¼•å…¥&quot;&gt;&lt;a href=&quot;#å¼•å…¥&quot; class=&quot;headerlink&quot; title=&quot;å¼•å…¥&quot;&gt;&lt;/a&gt;å¼•å…¥&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;è¶…æ–‡æœ¬ä¼ è¾“åè®®&lt;/strong&gt;ï¼ˆHTTPï¼ŒHyperText Transfer Protocolï¼‰æ˜¯äº’è”ç½‘ä¸Šåº”ç”¨æœ€ä¸ºå¹¿æ³›çš„</summary>
      
    
    
    
    <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://gmet233.gitee.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="è®¡ç®—æœºç½‘ç»œ" scheme="https://gmet233.gitee.io/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/"/>
    
    <category term="HTTP" scheme="https://gmet233.gitee.io/tags/HTTP/"/>
    
  </entry>
  
  <entry>
    <title>ä»å †æ’åºåˆ°ä¼˜å…ˆçº§é˜Ÿåˆ—</title>
    <link href="https://gmet233.gitee.io/2021/12/29/%E4%BB%8E%E5%A0%86%E6%8E%92%E5%BA%8F%E5%88%B0%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/"/>
    <id>https://gmet233.gitee.io/2021/12/29/%E4%BB%8E%E5%A0%86%E6%8E%92%E5%BA%8F%E5%88%B0%E4%BC%98%E5%85%88%E7%BA%A7%E9%98%9F%E5%88%97/</id>
    <published>2021-12-29T12:47:48.000Z</published>
    <updated>2021-12-29T14:41:29.954Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>æœ¬æ–‡åŒ…å«ä»¥ä¸‹å‡ éƒ¨åˆ†å†…å®¹</p><ul><li><input checked="" disabled="" type="checkbox"> äºŒå‰å †</li><li><input checked="" disabled="" type="checkbox"> å †æ’åº</li><li><input checked="" disabled="" type="checkbox"> äºŒå‰å †åº”ç”¨ï¼šä¼˜å…ˆçº§é˜Ÿåˆ—</li><li><input checked="" disabled="" type="checkbox"> Java PriorityQueue</li></ul><h1 id="æ­£æ–‡"><a href="#æ­£æ–‡" class="headerlink" title="æ­£æ–‡"></a>æ­£æ–‡</h1><h2 id="äºŒå‰å †"><a href="#äºŒå‰å †" class="headerlink" title="äºŒå‰å †"></a>äºŒå‰å †</h2><p>äºŒå‰å †æ˜¯å †æ’åºå®ç°çš„åº•å±‚é€»è¾‘ç»“æ„ã€‚äºŒå‰å †æ˜¯ä¸€ç§ç‰¹æ®Šçš„äºŒå‰æ ‘ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰ï¼Œä¸€èˆ¬å­˜å‚¨åœ¨æ•°ç»„ä¸­ã€‚</p><p>å¯¹äºé“¾è¡¨äºŒå‰æ ‘ï¼Œä¸€èˆ¬æ˜¯æ“ä½œèŠ‚ç‚¹æŒ‡é’ˆï¼Œè€Œå¯¹äºäºŒå‰å †ï¼Œæˆ‘ä»¬ä½¿ç”¨æ•°ç»„ç´¢å¼•ä½œä¸ºæŒ‡é’ˆã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// çˆ¶èŠ‚ç‚¹çš„ç´¢å¼•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">parent</span><span class="params">(<span class="keyword">int</span> root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> root / <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å·¦å­©å­çš„ç´¢å¼•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">left</span><span class="params">(<span class="keyword">int</span> root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> root * <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å³å­©å­çš„ç´¢å¼•</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">right</span><span class="params">(<span class="keyword">int</span> root)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> root * <span class="number">2</span> + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸‹é¢æ˜¯äºŒå‰å †ç‰©ç†å­˜å‚¨ç»“æ„ç¤ºæ„å›¾ï¼Œæ³¨æ„è¿™é‡Œç´¢å¼•0ç©ºç€ä¸ç”¨ã€‚</p><p><img src="1.png" alt="äºŒå‰å †ç¤ºæ„å›¾"></p><p>äºŒå‰å †è®¾è®¡çš„å·§å¦™ä¹‹å¤„å°±åœ¨äºï¼Œå¯¹äºä¸€ä¸ªèŠ‚ç‚¹ï¼Œåªéœ€è¦é€šè¿‡ç®€å•çš„è¿ç®—å°±å¯ä»¥å¾—åˆ°å…¶çˆ¶ã€å·¦å³å­©å­èŠ‚ç‚¹ã€‚</p><p>äºŒå‰å †åˆ†ä¸ºå¤§é¡¶å †å’Œå°é¡¶å †ã€‚å¤§é¡¶å †çš„æ€§è´¨æ˜¯<strong>æ¯ä¸ªèŠ‚ç‚¹éƒ½å¤§äºç­‰äºä»–çš„ä¸¤ä¸ªå­èŠ‚ç‚¹</strong>ï¼Œå°é¡¶å †çš„æ€§è´¨ç›¸åã€‚</p><p>æœ¬æ–‡ä»¥å¤§é¡¶å †ä¸ºä¾‹ã€‚æ­¤å¤–ï¼Œä¸ºäº†æ›´åŠ ç›´è§‚ï¼Œä¸‹é¢ä¼šç”»çš„å›¾éƒ½æ˜¯äºŒå‰æ ‘ç»“æ„ã€‚ç”±äºå¤§é¡¶å †çš„æ€§è´¨ï¼Œå †é¡¶å…ƒç´ arr[1]ä¸€å®šæ˜¯æ‰€æœ‰å…ƒç´ ä¸­æœ€å¤§çš„å…ƒç´ ã€‚</p><h2 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h2><p>å †æ’åºå°±æ˜¯åˆ©ç”¨å †è¿™ç§æ•°æ®ç»“æ„è®¾è®¡çš„ä¸€ç§æ’åºç®—æ³•ã€‚</p><blockquote><p><strong>å †æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯ï¼šå°†å¾…æ’åºåºåˆ—æ„é€ æˆä¸€ä¸ªå¤§é¡¶å †ï¼Œæ­¤æ—¶ï¼Œæ•´ä¸ªåºåˆ—çš„æœ€å¤§å€¼å°±æ˜¯å †é¡¶çš„æ ¹èŠ‚ç‚¹ã€‚å°†å…¶ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œæ­¤æ—¶æœ«å°¾å°±ä¸ºæœ€å¤§å€¼ã€‚ç„¶åå°†å‰©ä½™n-1ä¸ªå…ƒç´ é‡æ–°æ„é€ æˆä¸€ä¸ªå †ï¼Œè¿™æ ·ä¼šå¾—åˆ°nä¸ªå…ƒç´ çš„æ¬¡å°å€¼ã€‚å¦‚æ­¤åå¤æ‰§è¡Œï¼Œä¾¿èƒ½å¾—åˆ°ä¸€ä¸ªæœ‰åºåºåˆ—äº†</strong></p></blockquote><p>å †æ’åºæ˜¯ä¸€ç§<strong>é€‰æ‹©æ’åºï¼Œ</strong>å®ƒçš„æœ€åï¼Œæœ€å¥½ï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦å‡ä¸º**O(nlogn)**ï¼Œå®ƒæ˜¯<a href="https://baike.baidu.com/item/%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95%E7%A8%B3%E5%AE%9A%E6%80%A7/9763250"><strong>ä¸ç¨³å®šæ’åº</strong></a>ã€‚</p><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥äº†è§£å †æ’åºçš„è¿‡ç¨‹ã€‚</p><p>åºåˆ—ï¼š4ï¼Œ6ï¼Œ8ï¼Œ5ï¼Œ9ã€‚</p><p><strong>æ­¥éª¤ä¸€</strong>ï¼š æ„é€ åˆå§‹å †ã€‚</p><p><img src="2.png" alt="åˆå§‹å †"></p><p><strong>æ­¥éª¤äºŒ</strong>ï¼šç”±<strong>ä¸‹å‘ä¸Šï¼Œç”±å³å‘å·¦</strong>ä¸æ–­è°ƒæ•´ï¼Œä½¿å…¶æ»¡è¶³å¤§é¡¶å †çš„è¦æ±‚ã€‚</p><p><img src="3.png" alt="æ„é€ å¤§é¡¶å †çš„è¿‡ç¨‹ç¤ºæ„"></p><ol><li>å…ˆçœ‹ã€6ï¼Œ5ï¼Œ9ã€‘ï¼Œ9ä¸ºè¿™æ£µæ ‘çš„æœ€å¤§å€¼èŠ‚ç‚¹ï¼Œå› æ­¤å°†9å’Œæ ¹èŠ‚ç‚¹6äº’æ¢ï¼›</li><li>å†çœ‹ã€4ï¼Œ9ï¼Œ8ã€‘ï¼Œ9ä¸ºè¿™æ£µæ ‘çš„æœ€å¤§å€¼èŠ‚ç‚¹ï¼Œå› æ­¤å°†9å’Œæ ¹èŠ‚ç‚¹4äº’æ¢ï¼›</li><li>ç”±äºåˆšæ‰çš„äº¤æ¢ï¼Œã€4ï¼Œ5ï¼Œ6ã€‘ä¸å†æ»¡è¶³å¤§é¡¶å †çš„æ€§è´¨ï¼Œ6ä¸ºè¿™æ£µæ ‘çš„æœ€å¤§å€¼èŠ‚ç‚¹ï¼Œå› æ­¤å°†4å’Œæ ¹èŠ‚ç‚¹6äº’æ¢ã€‚</li><li>æ­¤æ—¶æ•´æ£µæ ‘éƒ½æ»¡è¶³äº†å¤§é¡¶å †çš„æ€§è´¨ã€‚</li></ol><p><strong>æ­¥éª¤ä¸‰</strong>ï¼šå°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œä½¿æœ«å°¾å…ƒç´ æœ€å¤§ã€‚å¼¹å‡ºæœ«å°¾æœ€å¤§å…ƒç´ ã€‚é‡å¤<strong>æ­¥éª¤äºŒ</strong>ä½¿å…¶æ»¡è¶³å¤§é¡¶å †ã€‚å¦‚æ­¤åå¤è¿›è¡Œäº¤æ¢ã€é‡å»ºã€äº¤æ¢â€¦â€¦ç›´åˆ°å †ç©ºï¼Œå…ƒç´ å¼¹å‡ºå †çš„é¡ºåºå³ä¸ºæ’åºåçš„é¡ºåºã€‚</p><p><img src="4.png" alt="æ­¥éª¤ä¸‰ç¤ºæ„"></p><p>æ€»ç»“å †æ’åºç®—æ³•æ­¥éª¤ï¼š</p><ol><li>å°†æ— éœ€åºåˆ—æ„å»ºæˆä¸€ä¸ªå †ï¼Œæ ¹æ®å‡åºé™åºéœ€æ±‚é€‰æ‹©å¤§é¡¶å †æˆ–å°é¡¶å †ï¼›</li><li>ç”±ä¸‹å‘ä¸Šï¼Œç”±å³å‘å·¦ä¸æ–­è°ƒæ•´ï¼Œä½¿åˆå§‹å †æ»¡è¶³å¤§é¡¶å †çš„è¦æ±‚ã€‚</li><li>å°†å †é¡¶å…ƒç´ ä¸æœ«å°¾å…ƒç´ è¿›è¡Œäº¤æ¢ï¼Œä½¿æœ«å°¾å…ƒç´ æœ€å¤§ã€‚å¼¹å‡ºæœ«å°¾æœ€å¤§å…ƒç´ ã€‚é‡å¤<strong>æ­¥éª¤äºŒ</strong>ä½¿å…¶æ»¡è¶³å¤§é¡¶å †ã€‚å¦‚æ­¤åå¤è¿›è¡Œäº¤æ¢ã€é‡å»ºã€äº¤æ¢â€¦â€¦ç›´åˆ°å †ç©ºã€‚å…ƒç´ å¼¹å‡ºå †çš„é¡ºåºå³ä¸ºæ’åºåçš„é¡ºåºã€‚</li></ol><h3 id="ä»£ç å®ç°"><a href="#ä»£ç å®ç°" class="headerlink" title="ä»£ç å®ç°"></a>ä»£ç å®ç°</h3><p>//TODO</p><h2 id="ä¼˜å…ˆçº§é˜Ÿåˆ—"><a href="#ä¼˜å…ˆçº§é˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆçº§é˜Ÿåˆ—"></a>ä¼˜å…ˆçº§é˜Ÿåˆ—</h2><p>ä¼˜å…ˆçº§é˜Ÿåˆ—çš„æ€§è´¨æ˜¯ï¼Œå‡ºé˜Ÿå…ƒç´ æ€»æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚ä¼˜å…ˆçº§é˜Ÿåˆ—çš„åº•å±‚å°±æ˜¯ä½¿ç”¨äºŒå‰å †å’Œå †æ’åºå®ç°äº†è¿™ä¸€æ€§è´¨ã€‚å½“å…ƒç´ æ’å…¥/åˆ é™¤æ—¶ï¼Œä¼˜å…ˆçº§é˜Ÿåˆ—çš„å…ƒç´ ä¼šè‡ªåŠ¨æ’åºã€‚</p><h3 id="ä»£ç æ¡†æ¶"><a href="#ä»£ç æ¡†æ¶" class="headerlink" title="ä»£ç æ¡†æ¶"></a>ä»£ç æ¡†æ¶</h3><p>ä¼˜å…ˆçº§é˜Ÿåˆ—æœ‰ä¸¤ä¸ªä¸»è¦ APIï¼Œåˆ†åˆ«æ˜¯<code>insert</code>æ’å…¥ä¸€ä¸ªå…ƒç´ å’Œ<code>delMax</code>åˆ é™¤æœ€å¤§å…ƒç´ ã€‚</p><p>ä¸‹é¢ç»™å‡ºä¼˜å…ˆçº§é˜Ÿåˆ—çš„ä»£ç æ¡†æ¶ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MaxPQ</span> &lt;<span class="title">Key</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">Key</span>&gt;&gt; </span>&#123; <span class="comment">//Keyæ˜¯å¯æ¯”è¾ƒå¤§å°çš„æ³›å‹</span></span><br><span class="line">    <span class="comment">//äºŒå‰å †ï¼Œå¤§é¡¶å †</span></span><br><span class="line">    <span class="keyword">private</span> Key[] pq;</span><br><span class="line">    <span class="comment">//å½“å‰priority queueä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> N = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MaxPQ</span><span class="params">(<span class="keyword">int</span> cap)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//ç´¢å¼•0ä¸ç”¨ï¼Œæ‰€ä»¥å¤šä¸€ä¸ªåˆ†é…ç©ºé—´</span></span><br><span class="line">        pq = (Key[]) <span class="keyword">new</span> Comparable[cap + <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//è¿”å›å½“å‰é˜Ÿåˆ—ä¸­çš„æœ€å¤§å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">max</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pq[<span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//æ’å…¥å…ƒç´ e</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span> <span class="params">(Key e)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//åˆ é™¤å¹¶è¿”å›å½“å‰é˜Ÿåˆ—ä¸­çš„æœ€å¤§å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Key <span class="title">delMax</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¸Šæµ®ç¬¬kä¸ªå…ƒç´ ï¼Œä»¥ç»´æŠ¤æœ€å¤§å †çš„æ€§è´¨</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//ä¸‹æ²‰ç¬¬kä¸ªå…ƒç´ ï¼Œä»¥ç»´æŠ¤æœ€å¤§å †çš„æ€§è´¨</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line"><span class="comment">//TODO</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//äº¤æ¢æ•°ç»„çš„ä¸¤ä¸ªå…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">exch</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span></span>&#123;</span><br><span class="line">        Key tmp = pq[i];</span><br><span class="line">        pq[i] = pq[j];</span><br><span class="line">        pq[j] = tmp;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//pq[i]æ˜¯å¦æ¯”pq[j]å°</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">less</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pq[i].compareTo(pq[j]) &lt; <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°swimå’Œsink"><a href="#å®ç°swimå’Œsink" class="headerlink" title="å®ç°swimå’Œsink"></a>å®ç°swimå’Œsink</h3><p>å…ƒç´ çš„swimï¼ˆä¸Šæµ®ï¼‰å’Œsinkï¼ˆä¸‹æ²‰ï¼‰éƒ½æ˜¯ä¸ºäº†ç»´æŠ¤å †çš„æ€§è´¨ã€‚</p><p>æˆ‘ä»¬è¦è®²çš„æ˜¯æœ€å¤§å †ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ¯”å®ƒçš„ä¸¤ä¸ªå­èŠ‚ç‚¹å¤§ï¼Œä½†æ˜¯åœ¨æ’å…¥å…ƒç´ å’Œåˆ é™¤å…ƒç´ æ—¶ï¼Œéš¾å…ç ´åå †çš„æ€§è´¨ï¼Œè¿™å°±éœ€è¦é€šè¿‡è¿™ä¸¤ä¸ªæ“ä½œæ¥æ¢å¤å †çš„æ€§è´¨äº†ã€‚</p><p>å¯¹äºæœ€å¤§å †ï¼Œä¼šç ´åå †æ€§è´¨çš„æœ‰æœ‰ä¸¤ç§æƒ…å†µï¼š</p><ol><li>å¦‚æœæŸä¸ªèŠ‚ç‚¹ A æ¯”å®ƒçš„å­èŠ‚ç‚¹ï¼ˆä¸­çš„ä¸€ä¸ªï¼‰å°ï¼Œé‚£ä¹ˆ A å°±ä¸é…åšçˆ¶èŠ‚ç‚¹ï¼Œåº”è¯¥ä¸‹å»ï¼Œä¸‹é¢é‚£ä¸ªæ›´å¤§çš„èŠ‚ç‚¹ä¸Šæ¥åšçˆ¶èŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯å¯¹ A è¿›è¡Œ<strong>ä¸‹æ²‰</strong>ã€‚</li><li>å¦‚æœæŸä¸ªèŠ‚ç‚¹ A æ¯”å®ƒçš„çˆ¶èŠ‚ç‚¹å¤§ï¼Œé‚£ä¹ˆ A ä¸åº”è¯¥åšå­èŠ‚ç‚¹ï¼Œåº”è¯¥æŠŠçˆ¶èŠ‚ç‚¹æ¢ä¸‹æ¥ï¼Œè‡ªå·±å»åšçˆ¶èŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯å¯¹ A çš„<strong>ä¸Šæµ®</strong>ã€‚</li></ol><p>swimä»£ç å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæµ®åˆ°äº†å †é¡¶ï¼Œå°±ä¸éœ€è¦å†ä¸Šæµ®äº†</span></span><br><span class="line">    <span class="keyword">while</span>(k &gt; <span class="number">1</span> &amp;&amp; less(parent(k), k)) &#123;</span><br><span class="line">        <span class="comment">//å¦‚æœç¬¬kä¸ªå…ƒç´ æ¯”ä¸Šå±‚å¤§ï¼Œå°±å°†kæ¢ä¸Šå»</span></span><br><span class="line">        exch(parent(k), k);</span><br><span class="line">        k = parent(k);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>sinkä»£ç å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ä¸‹æ²‰ç¬¬kä¸ªå…ƒç´ ï¼Œä»¥ç»´æŠ¤æœ€å¤§å †æ€§è´¨</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">sink</span><span class="params">(<span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//å¦‚æœæ²‰åˆ°å †åº•ï¼Œå°±æ²‰ä¸ä¸‹å»äº†</span></span><br><span class="line">    <span class="keyword">while</span>(left(k) &lt;= N) &#123;</span><br><span class="line">        <span class="comment">//å‡è®¾å·¦è¾¹èŠ‚ç‚¹æ¯”è¾ƒå¤§</span></span><br><span class="line">        <span class="keyword">int</span> older = left(k);</span><br><span class="line">        <span class="comment">//å¦‚æœå³è¾¹èŠ‚ç‚¹å­˜åœ¨ï¼Œåˆ™å·¦å³èŠ‚ç‚¹æ¯”ä¸€ä¸‹å¤§å°</span></span><br><span class="line">        <span class="keyword">if</span>(right(k) &lt;= N &amp;&amp; less(older, right(k))) &#123;</span><br><span class="line">            older = right(k);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//èŠ‚ç‚¹kæ¯”å·¦å³å­©å­éƒ½å¤§ï¼Œå°±ä¸å¿…ä¸‹æ²‰äº†</span></span><br><span class="line">        <span class="keyword">if</span>(less(older, k))  <span class="keyword">break</span>;</span><br><span class="line">        <span class="comment">//å¦åˆ™ï¼Œä¸ç¬¦åˆå¤§é¡¶å †æ€§è´¨ï¼Œä¸‹æ²‰kèŠ‚ç‚¹</span></span><br><span class="line">        exch(k, older);</span><br><span class="line">        k = older;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="å®ç°delMaxå’Œinsert"><a href="#å®ç°delMaxå’Œinsert" class="headerlink" title="å®ç°delMaxå’Œinsert"></a>å®ç°delMaxå’Œinsert</h3><p>delMaxå’Œinsertå°±æ˜¯å»ºç«‹åœ¨swimå’ŒsinkåŸºç¡€ä¸Šã€‚</p><p><code>insert</code>æ–¹æ³•å…ˆæŠŠè¦æ’å…¥çš„å…ƒç´ æ·»åŠ åˆ°å †åº•çš„æœ€åï¼Œç„¶åè®©å…¶ä¸Šæµ®åˆ°æ­£ç¡®ä½ç½®ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">insert</span><span class="params">(Key e)</span> </span>&#123;</span><br><span class="line">    N++;</span><br><span class="line">    <span class="comment">// å…ˆæŠŠæ–°å…ƒç´ åŠ åˆ°æœ€å</span></span><br><span class="line">    pq[N] = e;</span><br><span class="line">    <span class="comment">// ç„¶åè®©å®ƒä¸Šæµ®åˆ°æ­£ç¡®çš„ä½ç½®</span></span><br><span class="line">    swim(N);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>delMax</code>æ–¹æ³•å…ˆæŠŠå †é¡¶å…ƒç´  A å’Œå †åº•æœ€åçš„å…ƒç´  B å¯¹è°ƒï¼Œç„¶ååˆ é™¤ Aï¼Œæœ€åè®© B ä¸‹æ²‰åˆ°æ­£ç¡®ä½ç½®ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Key <span class="title">delMax</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æœ€å¤§å †çš„å †é¡¶å°±æ˜¯æœ€å¤§å…ƒç´ </span></span><br><span class="line">    Key max = pq[<span class="number">1</span>];</span><br><span class="line">    <span class="comment">// æŠŠè¿™ä¸ªæœ€å¤§å…ƒç´ æ¢åˆ°æœ€åï¼Œåˆ é™¤ä¹‹</span></span><br><span class="line">    exch(<span class="number">1</span>, N);</span><br><span class="line">    pq[N] = <span class="keyword">null</span>;</span><br><span class="line">    N--;</span><br><span class="line">    <span class="comment">// è®© pq[1] ä¸‹æ²‰åˆ°æ­£ç¡®ä½ç½®</span></span><br><span class="line">    sink(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è‡³æ­¤ï¼Œä¸€ä¸ªä¼˜å…ˆçº§é˜Ÿåˆ—å°±å®ç°äº†ï¼Œæ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º *O(logK)*ï¼ŒKä¸ºå½“å‰äºŒå‰å †ï¼ˆä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰ä¸­çš„å…ƒç´ æ€»æ•°ã€‚å› ä¸ºæˆ‘ä»¬æ—¶é—´å¤æ‚åº¦ä¸»è¦èŠ±è´¹åœ¨<code>sink</code>æˆ–è€…<code>swim</code>ä¸Šï¼Œè€Œä¸ç®¡ä¸Šæµ®è¿˜æ˜¯ä¸‹æ²‰ï¼Œæœ€å¤šä¹Ÿå°±æ ‘ï¼ˆå †ï¼‰çš„é«˜åº¦ï¼Œä¹Ÿå°±æ˜¯ log çº§åˆ«ã€‚</p><h2 id="Java-PriorityQueue"><a href="#Java-PriorityQueue" class="headerlink" title="Java PriorityQueue"></a>Java PriorityQueue</h2><p>Java PriorityQueueçš„ä»‹ç»è¯·çœ‹æˆ‘çš„å¦ä¸€ç¯‡åšå®¢<a href="https://gmet233.gitee.io/2021/12/19/PriorityQueue-%E6%A6%82%E8%BF%B0/#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8">PriorityQueue æ¦‚è¿°</a></p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://mp.weixin.qq.com/s/o7tdyLiYm668dpUWd-x7Lg">labuladong: å›¾æ–‡è¯¦è§£äºŒå‰å †ï¼Œå®ç°ä¼˜å…ˆçº§é˜Ÿåˆ—</a></li><li>ã€Šç®—æ³•ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹</li><li><a href="https://www.cnblogs.com/chengxiao/p/6129630.html">å›¾è§£æ’åºç®—æ³•(ä¸‰)ä¹‹å †æ’åº</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;æœ¬æ–‡åŒ…å«ä»¥ä¸‹å‡ éƒ¨åˆ†å†…å®¹&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;input checked=&quot;&quot; disabled=&quot;&quot; type=&quot;checkbox&quot;</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ’åº" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ’åº" scheme="https://gmet233.gitee.io/tags/%E6%8E%92%E5%BA%8F/"/>
    
    <category term="é˜Ÿåˆ—" scheme="https://gmet233.gitee.io/tags/%E9%98%9F%E5%88%97/"/>
    
  </entry>
  
  <entry>
    <title>ç»Ÿè®¡æ–‡ä»¶å¤¹ä¸‹å„ç§åç¼€åçš„æ–‡ä»¶ä¸ªæ•°</title>
    <link href="https://gmet233.gitee.io/2021/12/29/%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E5%90%84%E7%A7%8D%E5%90%8E%E7%BC%80%E5%90%8D%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%AA%E6%95%B0/"/>
    <id>https://gmet233.gitee.io/2021/12/29/%E7%BB%9F%E8%AE%A1%E6%96%87%E4%BB%B6%E5%A4%B9%E4%B8%8B%E5%90%84%E7%A7%8D%E5%90%8E%E7%BC%80%E5%90%8D%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%AA%E6%95%B0/</id>
    <published>2021-12-29T12:40:52.000Z</published>
    <updated>2021-12-29T12:42:55.243Z</updated>
    
    <content type="html"><![CDATA[<p>testæ–‡ä»¶å¤¹ç»„ç»‡ç»“æ„å¦‚ä¸‹ï¼š</p><blockquote><p>test/<br>   -1.jpg<br>   -dd/<br>       -2.jpg<br>       -e/<br>           -3.jpg<br>           -4.jpg<br>           -5.txt<br>   -ll.dir/<br>       -5.rar</p></blockquote><p>ç°åœ¨æƒ³ç»Ÿè®¡testç›®å½•ä¸‹ä¸åŒ<strong>æ–‡ä»¶</strong>åç¼€åçš„ä¸ªæ•°ã€‚</p><p>ä¸‹é¢é€šè¿‡ä¸¤ç§æ–¹æ¡ˆè§£å†³ã€‚</p><h1 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h1><p>shellä¸€è¡Œå‘½ä»¤æå®šï¼Œ<strong>ä½†å¯¹äºå¸¦ç‚¹å·çš„ç›®å½•ï¼Œè¿™ç§æ–¹æ³•ä¼šå‡ºBug</strong>ã€‚åº”è¯¥å¯ä»¥å¯¹æ­¤æ”¹è¿›ï¼Œä½†åé¢æ‰¾åˆ°äº†Pythonçš„æ–¹å¼ã€‚</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">find -type f -name &quot;*.*&quot; | cut -f3 -d&#x27;.&#x27; | sort | uniq -c -i  (é€’å½’æŸ¥æ‰¾å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰å­æ–‡ä»¶å¤¹)</span><br></pre></td></tr></table></figure><p>ä¸‹é¢å¯¹è¯¥å‘½ä»¤è¿›è¡Œåˆ†è§£è§£é‡Šã€‚</p><h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><p>findå‘½ä»¤å‚æ•°è¯´æ˜</p><blockquote><p>  -type c<br>        File is of type c:<br>            d      directory<br>            f      regular file<br>  -name pattern<br>        Base of file name (the path with the leading directories  removed)  matches  shell  pattern  pattern.  </p></blockquote><ul><li>åªæŸ¥æ‰¾æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦å…³å¿ƒæ–‡ä»¶å¤¹ï¼Œæ‰€ä»¥ä½¿ç”¨-type få‚æ•°(æ³¨æ„ï¼Œåœ¨linuxä¸Šä¼šæœ‰é“¾æ¥æ–‡ä»¶ã€å—æ–‡ä»¶ç­‰å…¶å®ƒæ ¼å¼çš„æ–‡ä»¶ç±»å‹ï¼Œè€Œä¸”Windowç³»ç»Ÿä¸Šçš„å¿«æ·æ–¹å¼å…¶æ ¼å¼ä¹Ÿæ˜¯ä¸€èˆ¬æ–‡ä»¶)</li><li>åªè¿‡æ»¤å‡ºæœ‰åç¼€åçš„æ–‡ä»¶ï¼Œæ‰€ä»¥ä½¿ç”¨-name â€œ<em>.</em>â€œå‚æ•°(æ³¨æ„ï¼Œä½¿ç”¨-name â€œ<em>.</em>â€œå‚æ•°ä¹Ÿä¼šè¿‡æ»¤å‡º.nameå’Œname.è¿™æ ·çš„æ–‡ä»¶ï¼Œå› æ­¤è¦ä¸¥æ ¼è¿‡æ»¤å‡º*.*ä¸”â€.â€å‰åéƒ½æœ‰å­—ç¬¦çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨-regex â€œ./.+..+â€å‚æ•°ï¼Œå…·ä½“ä½œç”¨è¯·ç™¾åº¦â€œfindæ­£åˆ™è¡¨è¾¾å¼â€)</li></ul><h2 id="cut"><a href="#cut" class="headerlink" title="cut"></a>cut</h2><p>cutå‘½ä»¤å‚æ•°è¯´æ˜</p><blockquote><p>   -f, â€“fields=LIST<br>          select  only  these fields;  also print any line that contains no delimiter character, unless the -s option is specified<br>   -d, â€“delimiter=DELIM<br>          use DELIM instead of TAB for field delimiter</p></blockquote><ul><li>-f3è¡¨ç¤ºæˆªå–ç¬¬ä¸‰éƒ¨åˆ†</li></ul><h2 id="sortå’Œuniq"><a href="#sortå’Œuniq" class="headerlink" title="sortå’Œuniq"></a>sortå’Œuniq</h2><p>sortå‘½ä»¤å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å¯¹å‰é¢çš„è¾“å‡ºè¿›è¡Œä¸€ä¸‹æ’åºï¼Œä»¥ä¾¿ä¸uniqå‘½ä»¤æ“ä½œã€‚</p><p>uniqå‘½ä»¤è¯´æ˜</p><blockquote><p>uniq - report or omit repeated lines</p><p>-c, â€“count<br>   prefix lines by the number of occurrences<br>-i, â€“ignore-case<br>   ignore differences in case when comparing</p></blockquote><ul><li>uniqçš„ä½œç”¨å°±æ˜¯æ‰¾åˆ°<strong>è¿ç»­é‡å¤çš„è¡Œ</strong></li><li>-c ç»Ÿè®¡æ¬¡æ•°</li><li>-i å¿½ç•¥å¤§å°å†™</li></ul><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&quot;count suffix from dir&quot;</span>)</span><br><span class="line"><span class="comment"># è®¾ç½®è„šæœ¬ä¼ å‚ï¼Œä¼ å…¥éœ€è¦ç»Ÿè®¡åç¼€åçš„æ–‡ä»¶å¤¹</span></span><br><span class="line">parser.add_argument(<span class="string">&#x27;-d&#x27;</span>, <span class="string">&#x27;--directory&#x27;</span>, required=<span class="literal">True</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;need a full path&#x27;</span>)</span><br><span class="line">args = parser.parse_args()</span><br><span class="line">directory = args.directory</span><br><span class="line"><span class="comment"># ç»“æœdict</span></span><br><span class="line">res = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;suffix : count&quot;</span>)</span><br><span class="line"><span class="comment"># print(directory)</span></span><br><span class="line"><span class="comment"># å¦‚æœç›®å½•ä¸å­˜åœ¨åˆ™é€€å‡º</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(directory):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;dir does not exist&quot;</span>)</span><br><span class="line">    exit(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># å¦‚æœä¼ é€’çš„ä¸æ˜¯ç›®å½•åˆ™é€€å‡º</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(directory):</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;need a dir not a file&quot;</span>)</span><br><span class="line">    exit(<span class="number">1</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">os.walkå¾—åˆ°çš„ä¸‰å…ƒç»„åˆ—è¡¨ï¼šåˆ†åˆ«æŒ‡å‡ºäº†ç›®å½•ï¼Œç›®å½•ä¸‹ç›®å½•åˆ—è¡¨ï¼Œç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨</span></span><br><span class="line"><span class="string">(&#x27;.&#x27;, [&#x27;dd&#x27;, &#x27;ll.dir&#x27;], [&#x27;1.jpg&#x27;])</span></span><br><span class="line"><span class="string">(&#x27;./dd&#x27;, [&#x27;e&#x27;], [&#x27;2.jpg&#x27;])</span></span><br><span class="line"><span class="string">(&#x27;./dd/e&#x27;, [], [&#x27;3.jpg&#x27;, &#x27;4.jpg&#x27;, &#x27;5.txt&#x27;])</span></span><br><span class="line"><span class="string">(&#x27;./ll.dir&#x27;, [], [&#x27;5.rar&#x27;])</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> path, dirs, files <span class="keyword">in</span> os.walk(directory):</span><br><span class="line">    <span class="comment"># print(str(files))</span></span><br><span class="line">    <span class="keyword">for</span> file <span class="keyword">in</span> files:</span><br><span class="line">        file = file.lower()  <span class="comment"># éƒ½ç»Ÿä¸€è½¬æ¢æˆå°å†™</span></span><br><span class="line">        <span class="comment"># å¦‚æœæ²¡æœ‰åç¼€ååˆ™ä¸çº³å…¥ç»Ÿè®¡èŒƒå›´</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> re.match(<span class="string">r&#x27;[\s\S]*\.[\s\S]*&#x27;</span>, file):</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        <span class="comment"># å¾—åˆ°åç¼€å­—ç¬¦ä¸²</span></span><br><span class="line">        suffix = file.split(<span class="string">&quot;.&quot;</span>)[-<span class="number">1</span>]</span><br><span class="line">        <span class="comment"># ä»å­—å…¸ä¸­å–å‡ºåç¼€å¯¹åº”çš„countï¼Œå¦‚æœæ²¡æœ‰åˆ™é»˜è®¤ä¸º0</span></span><br><span class="line">        count = res.setdefault(suffix, <span class="number">0</span>)</span><br><span class="line">        <span class="comment"># count ++</span></span><br><span class="line">        count += <span class="number">1</span></span><br><span class="line">        <span class="comment"># å°†æ›´æ–°çš„countæ”¾å›å­—å…¸</span></span><br><span class="line">        res[suffix] = count</span><br><span class="line"></span><br><span class="line"><span class="comment"># print</span></span><br><span class="line"><span class="keyword">for</span> key <span class="keyword">in</span> res.keys():</span><br><span class="line">    <span class="built_in">print</span>(key + <span class="string">&quot; : &quot;</span> + <span class="built_in">str</span>(res[key]))</span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°ä»£ç ä¿å­˜ä¸º<code>.py</code>æ–‡ä»¶ï¼Œç„¶åå‘½ä»¤è¡Œæ‰§è¡Œ<code>python xxx.py -d &lt;ç›®å½•&gt;</code></p><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æœ¬æ–‡æ¶‰åŠåˆ°çš„çŸ¥è¯†ç‚¹ï¼š</p><ul><li>Shell<ul><li>findå‘½ä»¤ï¼ŒæŸ¥è¯¢ç›®å½•/æ–‡ä»¶</li><li>cutå‘½ä»¤ï¼Œåˆ†å‰²å­—ç¬¦ä¸²</li><li>sortå‘½ä»¤ï¼Œæ’åº</li><li>uniqå‘½ä»¤ï¼Œæ‰¾åˆ°è¿ç»­é‡å¤çš„è¡Œ</li></ul></li><li>Python<ul><li>dict åŸºæœ¬æ“ä½œ</li><li>argparseåº“ï¼Œè„šæœ¬ä¼ å‚</li><li>osåº“ï¼Œè¯»ç›®å½•/æ–‡ä»¶</li><li>reåº“ï¼Œæ­£åˆ™åŒ¹é…</li></ul></li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://blog.csdn.net/nfer_zhuang/article/details/42582425">ä¸€å¥è¯è„šæœ¬ç³»åˆ—ä¹‹ç»Ÿè®¡æ–‡ä»¶å¤¹ä¸‹å„ç§åç¼€åçš„æ–‡ä»¶ä¸ªæ•°</a></li><li><a href="https://www.runoob.com/python/os-walk.html">Python os.walk() æ–¹æ³•</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;testæ–‡ä»¶å¤¹ç»„ç»‡ç»“æ„å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;test/&lt;br&gt;   -1.jpg&lt;br&gt;   -dd/&lt;br&gt;       -2.jpg&lt;br&gt;       -e/&lt;br&gt;           -3.jpg&lt;br&gt;           -4.jpg</summary>
      
    
    
    
    <category term="Linux" scheme="https://gmet233.gitee.io/categories/Linux/"/>
    
    <category term="Scripts" scheme="https://gmet233.gitee.io/categories/Linux/Scripts/"/>
    
    
    <category term="Linux" scheme="https://gmet233.gitee.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Python dict ç¬”è®°</title>
    <link href="https://gmet233.gitee.io/2021/12/28/Python-dict-%E7%AC%94%E8%AE%B0/"/>
    <id>https://gmet233.gitee.io/2021/12/28/Python-dict-%E7%AC%94%E8%AE%B0/</id>
    <published>2021-12-28T12:50:46.000Z</published>
    <updated>2021-12-28T12:52:17.784Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>å­—å…¸ï¼ˆdictï¼‰æ˜¯Pythonå†…ç½®æä¾›çš„ä¸€ç§å¸¸ç”¨æ•°æ®ç»“æ„ï¼Œä»–ç”¨äºå­˜æ”¾å…·æœ‰æ˜ å°„ï¼ˆmappingï¼‰å…³ç³»çš„æ•°æ®ã€‚</p><p>å¯å˜å¯¹è±¡ã€‚</p><h1 id="dict-å¸¸ç”¨æ“ä½œ"><a href="#dict-å¸¸ç”¨æ“ä½œ" class="headerlink" title="dict å¸¸ç”¨æ“ä½œ"></a>dict å¸¸ç”¨æ“ä½œ</h1><h2 id="åˆ›å»º"><a href="#åˆ›å»º" class="headerlink" title="åˆ›å»º"></a>åˆ›å»º</h2><p>ä¸¤ç§æ–¹å¼ï¼Œä½¿ç”¨dict()å‡½æ•°åˆ›å»ºå­—å…¸ï¼›ä½¿ç”¨èŠ±æ‹¬å·è¯­æ³•åˆ›å»ºå­—å…¸ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">dict1 = &#123;&#125;</span><br><span class="line">dict2 = <span class="built_in">dict</span>()  <span class="comment"># åˆ›å»ºäº†ä¸€ä¸ªç©ºå­—å…¸</span></span><br></pre></td></tr></table></figure><blockquote><p>dictçš„keyå¿…é¡»ä¸ºä¸å¯å˜ç±»å‹ï¼Œæ‰€ä»¥å­—ç¬¦ä¸²ã€å…ƒç»„ç­‰ç±»å‹å¯ä»¥ä½œä¸ºdictçš„keyï¼Œä½†åƒåˆ—è¡¨è¿™ç§å¯å˜ç±»å‹ï¼Œä¸èƒ½ä½œä¸ºdictçš„key</p></blockquote><p>åœ¨ä½¿ç”¨ dict() å‡½æ•°åˆ›å»ºå­—å…¸æ—¶ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ªåˆ—è¡¨æˆ–å…ƒç»„å‚æ•°ä½œä¸º key-value å¯¹ï¼Œæ¯ä¸ªåˆ—è¡¨æˆ–å…ƒç»„å°†è¢«å½“æˆä¸€ä¸ª key-value å¯¹ï¼Œå› æ­¤è¿™äº›åˆ—è¡¨æˆ–å…ƒç»„éƒ½åªèƒ½åŒ…å«ä¸¤ä¸ªå…ƒç´ ã€‚ä¾‹å¦‚å¦‚ä¸‹ä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>person = [(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>), (<span class="string">&#x27;sex&#x27;</span>, <span class="string">&#x27;male&#x27;</span>), (<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;gyj&#x27;</span>)]  <span class="comment"># è¿™é‡Œæ¢æˆperson = [[&#x27;age&#x27;, 18], [&#x27;sex&#x27;, &#x27;male&#x27;], [&#x27;name&#x27;, &#x27;gyj&#x27;]]ä¹Ÿæ˜¯å¯ä»¥çš„</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict3 = <span class="built_in">dict</span>(person)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dict3</span><br><span class="line">&#123;<span class="string">&#x27;age&#x27;</span>: <span class="number">18</span>, <span class="string">&#x27;sex&#x27;</span>: <span class="string">&#x27;male&#x27;</span>, <span class="string">&#x27;name&#x27;</span>: <span class="string">&#x27;gyj&#x27;</span>&#125;</span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡keyè®¿é—®value"><a href="#é€šè¿‡keyè®¿é—®value" class="headerlink" title="é€šè¿‡keyè®¿é—®value"></a>é€šè¿‡keyè®¿é—®value</h2><p>ä¸‰ç§æ–¹å¼ï¼š</p><ul><li>é€šè¿‡æ–¹æ‹¬å·è¯­æ³•è®¿é—®</li><li>ä½¿ç”¨getæ–¹æ³•</li><li>ä½¿ç”¨setdefault()æ–¹æ³•</li></ul><p>è¿™ä¸‰è€…ä¸åŒçš„åœ°æ–¹åœ¨äºï¼š</p><ul><li>ä½¿ç”¨æ–¹æ‹¬å·è¯­æ³•è®¿é—®å¹¶ä¸å­˜åœ¨çš„keyæ—¶ï¼Œå­—å…¸ä¼šå¼•å‘KeyErroré”™è¯¯</li><li>ä½†å¦‚æœä½¿ç”¨get()æ–¹æ³•è®¿é—®ä¸å­˜åœ¨çš„keyï¼Œè¯¥æ–¹æ³•ä¼šç®€å•åœ°è¿”å›Noneï¼Œä¸ä¼šå¯¼è‡´é”™è¯¯</li><li>ä½¿ç”¨setdefault()ï¼Œå½“ç¨‹åºè¦è·å–çš„ key åœ¨å­—å…¸ä¸­ä¸å­˜åœ¨æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šå…ˆä¸ºè¿™ä¸ªä¸å­˜åœ¨çš„ key è®¾ç½®ä¸€ä¸ªé»˜è®¤çš„ valueï¼Œç„¶åå†è¿”å›è¯¥ key å¯¹åº”çš„ valueã€‚</li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">scores = &#123;<span class="string">&#x27;è¯­æ–‡&#x27;</span>: <span class="number">89</span>&#125;</span><br><span class="line"><span class="comment"># é€šè¿‡keyè®¿é—®value</span></span><br><span class="line">scores.get(<span class="string">&#x27;è¯­æ–‡&#x27;</span>) <span class="comment"># 89</span></span><br><span class="line">scores.get(<span class="string">&#x27;æ•°å­¦&#x27;</span>) <span class="comment"># None</span></span><br><span class="line">scores[<span class="string">&#x27;æ•°å­¦&#x27;</span>] <span class="comment"># KeyError</span></span><br><span class="line">scores.setdefault(<span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="number">0</span>)  <span class="comment"># 0</span></span><br><span class="line">scores.setdefault(<span class="string">&#x27;è¯­æ–‡&#x27;</span>, <span class="number">0</span>)  <span class="comment"># 89</span></span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡keyæ·»åŠ k-vå¯¹"><a href="#é€šè¿‡keyæ·»åŠ k-vå¯¹" class="headerlink" title="é€šè¿‡keyæ·»åŠ k-vå¯¹"></a>é€šè¿‡keyæ·»åŠ k-vå¯¹</h2><p>ä¾‹å¦‚ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">scores[<span class="string">&#x27;æ•°å­¦&#x27;</span>] = <span class="number">93</span></span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡keyåˆ é™¤k-vå¯¹"><a href="#é€šè¿‡keyåˆ é™¤k-vå¯¹" class="headerlink" title="é€šè¿‡keyåˆ é™¤k-vå¯¹"></a>é€šè¿‡keyåˆ é™¤k-vå¯¹</h2><p>ä½¿ç”¨delè¯­å¥åˆ é™¤k-vå¯¹</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">del</span> scores[<span class="string">&#x27;è¯­æ–‡&#x27;</span>]</span><br></pre></td></tr></table></figure><h2 id="é€šè¿‡keyä¿®æ”¹k-vå¯¹"><a href="#é€šè¿‡keyä¿®æ”¹k-vå¯¹" class="headerlink" title="é€šè¿‡keyä¿®æ”¹k-vå¯¹"></a>é€šè¿‡keyä¿®æ”¹k-vå¯¹</h2><p>ä¸¤ç§æ–¹å¼ï¼šå¯¹å­˜åœ¨çš„key-valueå¯¹èµ‹å€¼ï¼Œæ”¹å˜key-valueå¯¹ï¼›ä½¿ç”¨updateæ–¹æ³•</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">scores[<span class="string">&#x27;æ•°å­¦&#x27;</span>] = <span class="number">95</span></span><br><span class="line">scores.update(&#123;<span class="string">&#x27;æ•°å­¦&#x27;</span>:<span class="number">100</span>&#125;)  <span class="comment"># å¦‚æœupdateçš„keyä¸å­˜åœ¨ï¼Œé‚£ä¹ˆä¼šå¢åŠ ä¸€ä¸ªæ–°çš„k-vå¯¹</span></span><br></pre></td></tr></table></figure><h2 id="åˆ¤æ–­æŒ‡å®škeyæ˜¯å¦å­˜åœ¨"><a href="#åˆ¤æ–­æŒ‡å®škeyæ˜¯å¦å­˜åœ¨" class="headerlink" title="åˆ¤æ–­æŒ‡å®škeyæ˜¯å¦å­˜åœ¨"></a>åˆ¤æ–­æŒ‡å®škeyæ˜¯å¦å­˜åœ¨</h2><p>ä½¿ç”¨inæˆ–not in è¿ç®—ç¬¦åˆ¤æ–­keyæ˜¯å¦å­˜åœ¨</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="string">&#x27;æ•°å­¦&#x27;</span> <span class="keyword">in</span> scores  <span class="comment"># True</span></span><br><span class="line"><span class="string">&#x27;æ•°å­¦&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> scores    <span class="comment"># False</span></span><br></pre></td></tr></table></figure><h2 id="æ¸…ç©ºå­—å…¸ä¸­æ‰€æœ‰çš„k-vå¯¹"><a href="#æ¸…ç©ºå­—å…¸ä¸­æ‰€æœ‰çš„k-vå¯¹" class="headerlink" title="æ¸…ç©ºå­—å…¸ä¸­æ‰€æœ‰çš„k-vå¯¹"></a>æ¸…ç©ºå­—å…¸ä¸­æ‰€æœ‰çš„k-vå¯¹</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">scores.clear()</span><br></pre></td></tr></table></figure><h2 id="è·å–dictæ‰€æœ‰k-vå¯¹ï¼Œæ‰€æœ‰keyï¼Œæ‰€æœ‰value"><a href="#è·å–dictæ‰€æœ‰k-vå¯¹ï¼Œæ‰€æœ‰keyï¼Œæ‰€æœ‰value" class="headerlink" title="è·å–dictæ‰€æœ‰k-vå¯¹ï¼Œæ‰€æœ‰keyï¼Œæ‰€æœ‰value"></a>è·å–dictæ‰€æœ‰k-vå¯¹ï¼Œæ‰€æœ‰keyï¼Œæ‰€æœ‰value</h2><p>items()ï¼šè·å–å­—å…¸ä¸­çš„æ‰€æœ‰ key-value å¯¹</p><p>keys()ï¼šè·å–å­—å…¸ä¸­çš„æ‰€æœ‰ key</p><p>values()ï¼šè·å–å­—å…¸ä¸­çš„æ‰€æœ‰ value</p><p>è¿™ä¸‰ä¸ªæ–¹æ³•ä¾æ¬¡è¿”å› dict_itemsã€dict_keys å’Œ dict_values å¯¹è±¡ï¼ŒPython ä¸å¸Œæœ›ç”¨æˆ·ç›´æ¥æ“ä½œè¿™å‡ ä¸ªæ–¹æ³•ï¼Œä½†å¯é€šè¿‡ list() å‡½æ•°æŠŠå®ƒä»¬è½¬æ¢æˆåˆ—è¡¨ã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores = &#123;<span class="string">&#x27;æ•°å­¦&#x27;</span>: <span class="number">96</span>, <span class="string">&#x27;è‹±è¯­&#x27;</span>: <span class="number">88</span>&#125;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>scores.items()</span><br><span class="line">dict_items([(<span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="number">96</span>), (<span class="string">&#x27;è‹±è¯­&#x27;</span>, <span class="number">88</span>)])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="built_in">list</span>(scores.items())</span><br><span class="line">[(<span class="string">&#x27;æ•°å­¦&#x27;</span>, <span class="number">96</span>), (<span class="string">&#x27;è‹±è¯­&#x27;</span>, <span class="number">88</span>)]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="å¼¹å‡ºæŒ‡å®škeyçš„k-vå¯¹"><a href="#å¼¹å‡ºæŒ‡å®škeyçš„k-vå¯¹" class="headerlink" title="å¼¹å‡ºæŒ‡å®škeyçš„k-vå¯¹"></a>å¼¹å‡ºæŒ‡å®škeyçš„k-vå¯¹</h2><p>pop() æ–¹æ³•ç”¨äºè·å–æŒ‡å®š key å¯¹åº”çš„ valueï¼Œå¹¶åˆ é™¤è¿™ä¸ª key-value å¯¹ã€‚ä¾‹å¦‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">math_score = scores.pop(<span class="string">&#x27;æ•°å­¦&#x27;</span>)</span><br></pre></td></tr></table></figure><h2 id="éšæœºå¼¹å‡ºk-vå¯¹"><a href="#éšæœºå¼¹å‡ºk-vå¯¹" class="headerlink" title="éšæœºå¼¹å‡ºk-vå¯¹"></a>éšæœºå¼¹å‡ºk-vå¯¹</h2><p>popitem() æ–¹æ³•ç”¨äºéšæœºå¼¹å‡ºå­—å…¸ä¸­çš„ä¸€ä¸ª key-value å¯¹ã€‚</p><blockquote><p>æ­¤å¤„çš„éšæœºå…¶å®æ˜¯å‡çš„ï¼Œæ­£å¦‚åˆ—è¡¨çš„ pop() æ–¹æ³•æ€»æ˜¯å¼¹å‡ºåˆ—è¡¨ä¸­æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå®é™…ä¸Šå­—å…¸çš„ popitem() å…¶å®ä¹Ÿæ˜¯å¼¹å‡ºå­—å…¸ä¸­æœ€åä¸€ä¸ª key-value å¯¹ã€‚ç”±äºå­—å…¸å­˜å‚¨ key-value å¯¹çš„é¡ºåºæ˜¯ä¸å¯çŸ¥çš„ï¼Œå› æ­¤å¼€å‘è€…æ„Ÿè§‰å­—å…¸çš„ popitem() æ–¹æ³•æ˜¯â€œéšæœºâ€å¼¹å‡ºçš„ï¼Œä½†å®é™…ä¸Šå­—å…¸çš„ popitem() æ–¹æ³•æ€»æ˜¯å¼¹å‡ºåº•å±‚å­˜å‚¨çš„æœ€åä¸€ä¸ª key-value å¯¹ã€‚</p></blockquote><h2 id="æ ¹æ®ç»™å®šçš„å¤šä¸ªkeyåˆ›å»ºå­—å…¸"><a href="#æ ¹æ®ç»™å®šçš„å¤šä¸ªkeyåˆ›å»ºå­—å…¸" class="headerlink" title="æ ¹æ®ç»™å®šçš„å¤šä¸ªkeyåˆ›å»ºå­—å…¸"></a>æ ¹æ®ç»™å®šçš„å¤šä¸ªkeyåˆ›å»ºå­—å…¸</h2><p>fromkeys() æ–¹æ³•ä½¿ç”¨ç»™å®šçš„å¤šä¸ª key åˆ›å»ºå­—å…¸ï¼Œå‚æ•°å¯ä»¥æ˜¯listä¹Ÿå¯ä»¥æ˜¯tupleï¼Œè¿™äº› key å¯¹åº”çš„ value é»˜è®¤éƒ½æ˜¯ Noneï¼›ä¹Ÿå¯ä»¥é¢å¤–ä¼ å…¥ä¸€ä¸ªå‚æ•°ä½œä¸ºé»˜è®¤çš„ valueã€‚</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># ä½¿ç”¨åˆ—è¡¨åˆ›å»ºåŒ…å«2ä¸ªkeyçš„å­—å…¸</span></span><br><span class="line">a_dict = <span class="built_in">dict</span>.fromkeys([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>])</span><br><span class="line"><span class="built_in">print</span>(a_dict) <span class="comment"># &#123;&#x27;a&#x27;: None, &#x27;b&#x27;: None&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ä½¿ç”¨å…ƒç»„åˆ›å»ºåŒ…å«2ä¸ªkeyçš„å­—å…¸ï¼ŒæŒ‡å®šé»˜è®¤çš„value</span></span><br><span class="line">c_dict = <span class="built_in">dict</span>.fromkeys((<span class="number">13</span>, <span class="number">17</span>), <span class="string">&#x27;good&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(c_dict) <span class="comment"># &#123;13: &#x27;good&#x27;, 17: &#x27;good&#x27;&#125;</span></span><br></pre></td></tr></table></figure><h2 id="ä½¿ç”¨å­—å…¸æ ¼å¼åŒ–å­—ç¬¦ä¸²"><a href="#ä½¿ç”¨å­—å…¸æ ¼å¼åŒ–å­—ç¬¦ä¸²" class="headerlink" title="ä½¿ç”¨å­—å…¸æ ¼å¼åŒ–å­—ç¬¦ä¸²"></a>ä½¿ç”¨å­—å…¸æ ¼å¼åŒ–å­—ç¬¦ä¸²</h2><p>ä¸¾ä¾‹ï¼š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å­—ç¬¦ä¸²æ¨¡æ¿ä¸­ä½¿ç”¨key</span></span><br><span class="line">temp = <span class="string">&#x27;æ•™ç¨‹æ˜¯:%(name)s, ä»·æ ¼æ˜¯:%(price)010.2f, å‡ºç‰ˆç¤¾æ˜¯:%(publish)s&#x27;</span></span><br><span class="line">book = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;PythonåŸºç¡€æ•™ç¨‹&#x27;</span>, <span class="string">&#x27;price&#x27;</span>: <span class="number">99</span>, <span class="string">&#x27;publish&#x27;</span>: <span class="string">&#x27;Cè¯­è¨€ä¸­æ–‡ç½‘&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># ä½¿ç”¨å­—å…¸ä¸ºå­—ç¬¦ä¸²æ¨¡æ¿ä¸­çš„keyä¼ å…¥å€¼</span></span><br><span class="line"><span class="built_in">print</span>(temp % book)</span><br><span class="line">book = &#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;Cè¯­è¨€å°ç™½å˜æ€ªå…½&#x27;</span>, <span class="string">&#x27;price&#x27;</span>:<span class="number">159</span>, <span class="string">&#x27;publish&#x27;</span>: <span class="string">&#x27;Cè¯­è¨€ä¸­æ–‡ç½‘&#x27;</span>&#125;</span><br><span class="line"><span class="comment"># ä½¿ç”¨å­—å…¸ä¸ºå­—ç¬¦ä¸²æ¨¡æ¿ä¸­çš„keyä¼ å…¥å€¼</span></span><br><span class="line"><span class="built_in">print</span>(temp % book)</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="http://c.biancheng.net/view/2212.html">Pythonå­—å…¸åŠåŸºæœ¬æ“ä½œï¼ˆè¶…çº§è¯¦ç»†ï¼‰</a></li><li>ã€ŠPython å­¦ä¹ æ‰‹å†Œï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h1&gt;&lt;p&gt;å­—å…¸ï¼ˆdictï¼‰æ˜¯Pythonå†…ç½®æä¾›çš„ä¸€ç§å¸¸ç”¨æ•°æ®ç»“æ„ï¼Œä»–ç”¨äºå­˜æ”¾å…·æœ‰æ˜ å°„ï¼ˆmappingï¼‰å…³ç³»çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;å¯å˜å¯¹è±¡ã€‚&lt;/p&gt;</summary>
      
    
    
    
    <category term="Python" scheme="https://gmet233.gitee.io/categories/Python/"/>
    
    <category term="åŸºç¡€" scheme="https://gmet233.gitee.io/categories/Python/%E5%9F%BA%E7%A1%80/"/>
    
    
    <category term="Python" scheme="https://gmet233.gitee.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>LRU: ç¼“å­˜æ·˜æ±°ç®—æ³•</title>
    <link href="https://gmet233.gitee.io/2021/12/26/LRU-%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95/"/>
    <id>https://gmet233.gitee.io/2021/12/26/LRU-%E7%BC%93%E5%AD%98%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95/</id>
    <published>2021-12-26T11:54:01.000Z</published>
    <updated>2021-12-26T14:38:19.460Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œç”±äºç¼“å­˜å®¹é‡æœ‰é™ï¼Œå½“ç¼“å­˜å®¹é‡åˆ°è¾¾ä¸Šé™ï¼Œå°±éœ€è¦åˆ é™¤éƒ¨åˆ†æ•°æ®æŒªå‡ºç©ºé—´ã€‚ä½†æ˜¯ç¼“å­˜æ•°æ®ä¸èƒ½éšæœºåˆ é™¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦æ ¹æ®æŸç§ç®—æ³•åˆ é™¤ç¼“å­˜æ•°æ®ã€‚</p><p>å¸¸ç”¨çš„æ·˜æ±°ç®—æ³•æœ‰LRU, LFU, FIFOï¼Œæœ¬ç¯‡ä»‹ç»LRUç®—æ³•å¹¶é‡ç‚¹è®²è¿°LRUçš„å®ç°ã€‚å®Œæ•´ä»£ç ä¹Ÿæ˜¯<a href="https://leetcode-cn.com/problems/lru-cache/">LeetCode 146. LRUç¼“å­˜</a>çš„ç­”æ¡ˆã€‚</p><h1 id="LRU-ç®€ä»‹"><a href="#LRU-ç®€ä»‹" class="headerlink" title="LRU ç®€ä»‹"></a>LRU ç®€ä»‹</h1><p>LRUæ˜¯Least recently usedçš„ç¼©å†™ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯â€œå¦‚æœæ•°æ®æœ€è¿‘è¢«è®¿é—®è¿‡ï¼Œé‚£ä¹ˆå°†æ¥è¢«è®¿é—®çš„å‡ ç‡ä¹Ÿæ›´é«˜â€ã€‚å½“ç¼“å­˜å®¹é‡æ»¡çš„æ—¶å€™ï¼Œä¼˜å…ˆæ·˜æ±°æœ€è¿‘æœ€å°‘è¢«ä½¿ç”¨çš„æ•°æ®ã€‚</p><p>æ ¹æ®ä»¥ä¸Šç­–ç•¥ï¼Œç»™å‡ºä½¿ç”¨LRUæ·˜æ±°ç®—æ³•æ—¶çš„ç¤ºä¾‹ã€‚</p><p><img src="LRU%E6%B7%98%E6%B1%B0%E7%AE%97%E6%B3%95%E7%A4%BA%E4%BE%8B.jpg" alt="LRUæ·˜æ±°ç®—æ³•ç¤ºä¾‹"></p><p>é€šè¿‡ä¸Šå›¾å¯ä»¥çœ‹åˆ°LRUç®—æ³•çš„å…·ä½“æ­¥éª¤æ˜¯ï¼š</p><ol><li>æ–°æ•°æ®ç›´æ¥æ’å…¥åˆ°åˆ—è¡¨å¤´éƒ¨</li><li>ç¼“å­˜æ•°æ®è¢«å‘½ä¸­ï¼Œå°†æ•°æ®ç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨</li><li>ç¼“å­˜å·²æ»¡ï¼Œç§»é™¤åˆ—è¡¨å°¾éƒ¨æ•°æ®ã€‚</li></ol><h1 id="LRU-ç®—æ³•å®ç°"><a href="#LRU-ç®—æ³•å®ç°" class="headerlink" title="LRU ç®—æ³•å®ç°"></a>LRU ç®—æ³•å®ç°</h1><p>ä¸Šé¢çœ‹åˆ°LRUç®—æ³•éœ€è¦æ·»åŠ å¤´èŠ‚ç‚¹ï¼Œåˆ é™¤å°¾èŠ‚ç‚¹ã€‚è€Œé“¾è¡¨æ·»åŠ /åˆ é™¤èŠ‚ç‚¹çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ï¼Œä½†è¿™é‡Œä¸èƒ½ä½¿ç”¨æ™®é€šçš„å•å‘é“¾è¡¨ï¼ŒåŸå› åœ¨äºï¼š</p><ul><li>è™½ç„¶å•å‘é“¾è¡¨æ·»åŠ /åˆ é™¤/ç§»åŠ¨å…ƒç´ æ¯”è¾ƒæ–¹ä¾¿ï¼Œä½†æ˜¯å†æŸ¥è¯¢å…ƒç´ æ—¶çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(N)</li><li>ç§»åŠ¨ä¸­é—´èŠ‚ç‚¹åˆ°å¤´èŠ‚ç‚¹éœ€è¦çŸ¥é“å‰ä¸€ä¸ªèŠ‚ç‚¹å’Œåä¸€ä¸ªèŠ‚ç‚¹çš„ä¿¡æ¯ï¼Œå•å‘é“¾è¡¨å°±ä¸å¾—ä¸å†æ¬¡éå†è·å–ä¿¡æ¯ã€‚</li></ul><p>é’ˆå¯¹ä»¥ä¸Šé—®é¢˜çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼š</p><ul><li>ä½¿ç”¨æ•£åˆ—è¡¨å­˜å‚¨èŠ‚ç‚¹ï¼Œè·å–èŠ‚ç‚¹çš„å¤æ‚åº¦å°†ä¸ºO(1)ï¼Œ</li><li>ä½¿ç”¨åŒå‘é“¾è¡¨ç”¨æ¥è·å¾—å‰é©±èŠ‚ç‚¹çš„ä¿¡æ¯ã€‚</li></ul><p><img src="LRU%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.png" alt="LRUæ•°æ®ç»“æ„"></p><p>åœ¨è¿™é‡Œï¼Œå¢åŠ äº†ä¸¤ä¸ªã€å“¨å…µã€‘èŠ‚ç‚¹ï¼Œä¸ç”¨æ¥å­˜å‚¨ä»»ä½•æ•°æ®ï¼Œç›®çš„æ˜¯å†å¢åŠ ã€åˆ é™¤ç»“ç‚¹çš„æ—¶å€™ä¸ç”¨è€ƒè™‘èŠ‚ç‚¹ä¸å­˜åœ¨çš„æƒ…å†µã€‚ç®€åŒ–ç¼–ç¨‹éš¾åº¦ã€‚</p><p>åœ¨ç®—æ³•å®ç°çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘ç°LeetCode 146æ˜¯ç±»ä¼¼çš„é¢˜ç›®ï¼Œæ•…æŠŠè¯¥é¢˜ç›´æ¥æ‹¿æ¥ä½¿ç”¨ã€‚</p><p>è¯¥é¢˜çš„ç®—æ³•ç­¾åæ˜¯</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Your LRUCache object will be instantiated and called as such:</span></span><br><span class="line"><span class="comment"> * LRUCache obj = new LRUCache(capacity);</span></span><br><span class="line"><span class="comment"> * int param_1 = obj.get(key);</span></span><br><span class="line"><span class="comment"> * obj.put(key,value);</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡è°ƒç”¨put\getæ–¹æ³•å®ç°å­˜å–ç¼“å­˜çš„ç›®çš„ã€‚ä¸‹é¢æ˜¯å¯¹ä»£ç çš„é€æ­¥åˆ†æã€‚</p><h2 id="åŒå‘é“¾è¡¨æ•°æ®ç»“æ„"><a href="#åŒå‘é“¾è¡¨æ•°æ®ç»“æ„" class="headerlink" title="åŒå‘é“¾è¡¨æ•°æ®ç»“æ„"></a>åŒå‘é“¾è¡¨æ•°æ®ç»“æ„</h2><p>è¿™é‡Œä½¿ç”¨ä¸€ä¸ªå†…éƒ¨ç±»ä½œä¸ºåŒå‘é“¾è¡¨çš„æ•°æ®ç»“æ„ã€‚æ¯”è¾ƒç®€å•ï¼Œç›´æ¥ç»™å‡ºä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">   <span class="comment">//å®šä¹‰ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œä½œä¸ºç¼“å­˜åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span></span>&#123;</span><br><span class="line">       <span class="keyword">public</span> Entry pre; <span class="comment">//æŒ‡å‘å‰é©±çš„æŒ‡é’ˆ</span></span><br><span class="line">       <span class="keyword">public</span> Entry next; <span class="comment">//æŒ‡å‘åç»§çš„æŒ‡é’ˆ</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">int</span> key; <span class="comment">//ç¼“å­˜çš„key</span></span><br><span class="line">       <span class="keyword">public</span> <span class="keyword">int</span> value; <span class="comment">//ç¼“å­˜çš„value</span></span><br><span class="line"></span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Entry</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">           <span class="keyword">this</span>.key = key;</span><br><span class="line">           <span class="keyword">this</span>.value = value;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="function"><span class="keyword">public</span> <span class="title">Entry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="å®šä¹‰æˆå‘˜å˜é‡å’Œæ„é€ å‡½æ•°"><a href="#å®šä¹‰æˆå‘˜å˜é‡å’Œæ„é€ å‡½æ•°" class="headerlink" title="å®šä¹‰æˆå‘˜å˜é‡å’Œæ„é€ å‡½æ•°"></a>å®šä¹‰æˆå‘˜å˜é‡å’Œæ„é€ å‡½æ•°</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">private</span> Entry head, tail; <span class="comment">//å¤´å°¾ä¸¤ä¸ªå“¨å…µèŠ‚ç‚¹</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">int</span> capacity; <span class="comment">// å®¹é‡</span></span><br><span class="line"><span class="keyword">int</span> size; <span class="comment">//å½“å‰ç¼“å­˜å¤§å°</span></span><br><span class="line">Map&lt;Integer, Entry&gt; cache; <span class="comment">//ç¼“å­˜æ•£åˆ—è¡¨</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line">    <span class="comment">//åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">    initLinkedList();</span><br><span class="line">    size = <span class="number">0</span>;</span><br><span class="line">    cache = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹åŒ–æ“ä½œå‡½æ•°<code>initLinkedList()</code>çš„å®ç°æ˜¯å°†headå’Œtailé€šè¿‡æŒ‡é’ˆè¿æ¥èµ·æ¥ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">       head = <span class="keyword">new</span> Entry();</span><br><span class="line">       tail = <span class="keyword">new</span> Entry();</span><br><span class="line"></span><br><span class="line">       head.next = tail;</span><br><span class="line">       tail.pre = head;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="putæ“ä½œ"><a href="#putæ“ä½œ" class="headerlink" title="putæ“ä½œ"></a>putæ“ä½œ</h2><p>putæ“ä½œå¯ä»¥åˆ†ä¸‰ç§æƒ…å†µï¼š</p><ol><li>å¦‚æœkeyå·²ç»å­˜åœ¨ä¸ç¼“å­˜ä¸­ï¼Œåˆ™å°†keyå¯¹åº”çš„èŠ‚ç‚¹ç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨ï¼Œå¹¶é‡è®¾value</li><li>å¦‚æœkeyåœ¨ç¼“å­˜ä¸­ä¸å­˜åœ¨ï¼Œé‚£ä¹ˆæ£€æŸ¥ç¼“å­˜æ˜¯å¦å·²æ»¡<ol><li>å¦‚æœæœªæ»¡ï¼Œå°±ç›´æ¥å°†æ–°èŠ‚ç‚¹åŠ å…¥åˆ°é“¾è¡¨å¤´éƒ¨</li><li>å¦‚æœå·²æ»¡ï¼Œå°±å…ˆåˆ é™¤å°¾èŠ‚ç‚¹ï¼Œå†å°†æ–°èŠ‚ç‚¹åŠ å…¥åˆ°é“¾è¡¨å¤´éƒ¨</li></ol></li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">    Entry node = cache.get(key);</span><br><span class="line">    <span class="comment">//å¦‚æœkeyåœ¨ç¼“å­˜ä¸­å·²ç»å­˜åœ¨ï¼Œåˆ™ç§»åŠ¨åˆ°å¤´éƒ¨</span></span><br><span class="line">    <span class="keyword">if</span>(node != <span class="keyword">null</span>) &#123;</span><br><span class="line">        node.value = value;</span><br><span class="line">        move2Head(node);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//å®¹é‡å·²æ»¡å…ˆåˆ é™¤å°¾èŠ‚ç‚¹</span></span><br><span class="line">    <span class="keyword">if</span>(size == capacity) &#123;</span><br><span class="line">        Entry lastNode = tail.pre;</span><br><span class="line">        deleteNode(lastNode);</span><br><span class="line">        cache.remove(lastNode.key);</span><br><span class="line">        size --;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//add new Node</span></span><br><span class="line">    Entry newNode = <span class="keyword">new</span> Entry();</span><br><span class="line">    newNode.key = key;</span><br><span class="line">    newNode.value = value;</span><br><span class="line">    addNode(newNode);</span><br><span class="line">    cache.put(key, newNode);</span><br><span class="line">    size ++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¯¹äº<code>move2Head</code>æ“ä½œï¼Œæ— éæ˜¯å…ˆåˆ é™¤åŸæ¥çš„èŠ‚ç‚¹å…³ç³»<code>deleteNode</code>ï¼Œå†æ·»åŠ åˆ°é˜Ÿåˆ—å¤´éƒ¨<code>addNode</code></p><p>è€Œ<code>deleteNode</code>å’Œ<code>addNode</code>æ˜¯æ¯”è¾ƒåŸºç¡€çš„åŒå‘é“¾è¡¨æ“ä½œï¼Œè¿™é‡Œå°±ä¸å†åšè¿‡å¤šè§£é‡Šã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addNode</span><span class="params">(Entry node)</span> </span>&#123;</span><br><span class="line">    head.next.pre = node;</span><br><span class="line">    node.next = head.next;</span><br><span class="line"></span><br><span class="line">    node.pre = head;</span><br><span class="line">    head.next = node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteNode</span><span class="params">(Entry node)</span> </span>&#123;</span><br><span class="line">    node.pre.next = node.next;</span><br><span class="line">    node.next.pre = node.pre;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">move2Head</span><span class="params">(Entry node)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//åˆ é™¤åŸæ¥çš„èŠ‚ç‚¹å…³ç³»</span></span><br><span class="line">    deleteNode(node);</span><br><span class="line">    addNode(node);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="get-æ“ä½œ"><a href="#get-æ“ä½œ" class="headerlink" title="get æ“ä½œ"></a>get æ“ä½œ</h2><p>å½“keyä¸åœ¨ç¼“å­˜ä¸­ï¼Œè¿”å›-1ï¼Œå½“keyå­˜åœ¨äºç¼“å­˜æ—¶ï¼Œå°±å°†è¯¥å…ƒç´ ç§»åŠ¨åˆ°é“¾è¡¨å¤´éƒ¨ï¼Œå¹¶è¿”å›å¯¹åº”çš„valueã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">       Entry node = cache.get(key);</span><br><span class="line">       <span class="keyword">if</span>(node == <span class="keyword">null</span>) &#123;</span><br><span class="line">           <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       move2Head(node);</span><br><span class="line">       <span class="keyword">return</span> node.value;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h2 id="å®Œæ•´ä»£ç "><a href="#å®Œæ•´ä»£ç " class="headerlink" title="å®Œæ•´ä»£ç "></a>å®Œæ•´ä»£ç </h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LRUCache</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Entry head, tail;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> capacity; <span class="comment">// å®¹é‡</span></span><br><span class="line">    <span class="keyword">int</span> size;</span><br><span class="line">    Map&lt;Integer, Entry&gt; cache;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRUCache</span><span class="params">(<span class="keyword">int</span> capacity)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.capacity = capacity;</span><br><span class="line">        <span class="comment">//åˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">        initLinkedList();</span><br><span class="line">        size = <span class="number">0</span>;</span><br><span class="line">        cache = <span class="keyword">new</span> HashMap&lt;&gt;(capacity + <span class="number">2</span>); <span class="comment">//è¿™é‡Œä¸ºä»€ä¹ˆè¦+2</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initLinkedList</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        head = <span class="keyword">new</span> Entry();</span><br><span class="line">        tail = <span class="keyword">new</span> Entry();</span><br><span class="line"></span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.pre = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">get</span><span class="params">(<span class="keyword">int</span> key)</span> </span>&#123;</span><br><span class="line">        Entry node = cache.get(key);</span><br><span class="line">        <span class="keyword">if</span>(node == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        move2Head(node);</span><br><span class="line">        <span class="keyword">return</span> node.value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * å°†èŠ‚ç‚¹æ’å…¥åˆ°å¤´èŠ‚ç‚¹ï¼Œå¦‚æœå®¹é‡å·²æ»¡ï¼Œåˆ™ä¼šåˆ é™¤å°¾èŠ‚ç‚¹</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">        Entry node = cache.get(key);</span><br><span class="line">        <span class="comment">//å¦‚æœkeyåœ¨ç¼“å­˜ä¸­å·²ç»å­˜åœ¨ï¼Œåˆ™ç§»åŠ¨åˆ°å¤´éƒ¨</span></span><br><span class="line">        <span class="keyword">if</span>(node != <span class="keyword">null</span>) &#123;</span><br><span class="line">            node.value = value;</span><br><span class="line">            move2Head(node);</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//å®¹é‡å·²æ»¡å…ˆåˆ é™¤å°¾èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">if</span>(size == capacity) &#123;</span><br><span class="line">            Entry lastNode = tail.pre;</span><br><span class="line">            deleteNode(lastNode);</span><br><span class="line">            cache.remove(lastNode.key);</span><br><span class="line">            size --;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//add new Node</span></span><br><span class="line">        Entry newNode = <span class="keyword">new</span> Entry();</span><br><span class="line">        newNode.key = key;</span><br><span class="line">        newNode.value = value;</span><br><span class="line">        addNode(newNode);</span><br><span class="line">        cache.put(key, newNode);</span><br><span class="line">        size ++;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">addNode</span><span class="params">(Entry node)</span> </span>&#123;</span><br><span class="line">        head.next.pre = node;</span><br><span class="line">        node.next = head.next;</span><br><span class="line"></span><br><span class="line">        node.pre = head;</span><br><span class="line">        head.next = node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">deleteNode</span><span class="params">(Entry node)</span> </span>&#123;</span><br><span class="line">        node.pre.next = node.next;</span><br><span class="line">        node.next.pre = node.pre;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">move2Head</span><span class="params">(Entry node)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//åˆ é™¤åŸæ¥çš„èŠ‚ç‚¹å…³ç³»</span></span><br><span class="line">        deleteNode(node);</span><br><span class="line">        addNode(node);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//å®šä¹‰ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œä½œä¸ºç¼“å­˜é“¾è¡¨</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Entry</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> Entry pre; <span class="comment">//æŒ‡å‘å‰é©±çš„æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">public</span> Entry next; <span class="comment">//æŒ‡å‘åç»§çš„æŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> key; <span class="comment">//ç¼“å­˜çš„key</span></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> value; <span class="comment">//ç¼“å­˜çš„value</span></span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Entry</span><span class="params">(<span class="keyword">int</span> key, <span class="keyword">int</span> value)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.key = key;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Entry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.bilibili.com/video/BV1Va411677h">æ‰‹å†™LRUç®—æ³• - ITè€å“¥</a></li><li><a href="https://zhuanlan.zhihu.com/p/34133067">LRUåŸç†å’ŒRediså®ç°â€”â€”ä¸€ä¸ªä»Šæ—¥å¤´æ¡çš„é¢è¯•é¢˜</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;åœ¨ä½¿ç”¨ç¼“å­˜æ—¶ï¼Œç”±äºç¼“å­˜å®¹é‡æœ‰é™ï¼Œå½“ç¼“å­˜å®¹é‡åˆ°è¾¾ä¸Šé™ï¼Œå°±éœ€è¦åˆ é™¤éƒ¨åˆ†æ•°æ®æŒªå‡ºç©ºé—´ã€‚ä½†æ˜¯ç¼“å­˜æ•°æ®ä¸èƒ½éšæœºåˆ é™¤ï¼Œä¸€èˆ¬æƒ…å†µä¸‹éœ€è¦æ ¹æ®æŸç§ç®—æ³•åˆ é™¤ç¼“å­˜</summary>
      
    
    
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://gmet233.gitee.io/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ“ä½œç³»ç»Ÿ" scheme="https://gmet233.gitee.io/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"/>
    
  </entry>
  
  <entry>
    <title>Tmux ç®€ä»‹</title>
    <link href="https://gmet233.gitee.io/2021/12/26/Tmux-%E7%AE%80%E4%BB%8B/"/>
    <id>https://gmet233.gitee.io/2021/12/26/Tmux-%E7%AE%80%E4%BB%8B/</id>
    <published>2021-12-26T03:07:45.000Z</published>
    <updated>2022-01-06T14:17:39.257Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»€ä¹ˆæ˜¯Tmux"><a href="#ä»€ä¹ˆæ˜¯Tmux" class="headerlink" title="ä»€ä¹ˆæ˜¯Tmux"></a>ä»€ä¹ˆæ˜¯Tmux</h1><p>æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼ˆterminal windowï¼Œä»¥ä¸‹ç®€ç§°â€çª—å£â€ï¼‰ï¼Œåœ¨é‡Œé¢è¾“å…¥å‘½ä»¤ã€‚</p><p>ç”¨æˆ·ä¸è®¡ç®—æœºçš„è¿™ç§ä¸´æ—¶çš„äº¤äº’ï¼Œç§°ä¸ºä¸€æ¬¡â€ä¼šè¯â€ï¼ˆsessionï¼‰ ã€‚</p><p>ä¼šè¯çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯ï¼Œçª—å£ä¸å…¶ä¸­å¯åŠ¨çš„è¿›ç¨‹æ˜¯<a href="https://www.ruanyifeng.com/blog/2016/02/linux-daemon.html">è¿åœ¨ä¸€èµ·</a>çš„ã€‚æ‰“å¼€çª—å£ï¼Œä¼šè¯å¼€å§‹ï¼›å…³é—­çª—å£ï¼Œä¼šè¯ç»“æŸã€‚</p><p>ä¸€ä¸ªå…¸å‹çš„ä¾‹å­ï¼Œæ‰“å¼€ä¸€ä¸ªè¿œç¨‹çª—å£æ‰§è¡Œå‘½ä»¤ï¼Œè¿™æ—¶å…³é—­çª—å£ï¼Œé‚£ä¹ˆä¼šè¯ä¹Ÿå°±ç»ˆæ­¢ï¼Œé‡Œé¢çš„è¿›ç¨‹ä¹Ÿéšä¹‹ç»ˆæ­¢ã€‚</p><p>ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¼šè¯ä¸çª—å£å¯ä»¥â€è§£ç»‘â€ï¼šçª—å£å…³é—­æ—¶ï¼Œä¼šè¯å¹¶ä¸ç»ˆæ­¢ï¼Œè€Œæ˜¯ç»§ç»­è¿è¡Œï¼Œç­‰åˆ°ä»¥åéœ€è¦çš„æ—¶å€™ï¼Œå†è®©ä¼šè¯â€ç»‘å®šâ€å…¶ä»–çª—å£ã€‚</p><p><strong>Tmux å°±æ˜¯ä¼šè¯ä¸çª—å£çš„â€è§£ç»‘â€å·¥å…·</strong>ã€‚</p><h1 id="ä½¿ç”¨Tmux"><a href="#ä½¿ç”¨Tmux" class="headerlink" title="ä½¿ç”¨Tmux"></a>ä½¿ç”¨Tmux</h1><h2 id="å®‰è£…Tmux"><a href="#å®‰è£…Tmux" class="headerlink" title="å®‰è£…Tmux"></a>å®‰è£…Tmux</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> Ubuntu æˆ– Debian</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo apt-get install tmux</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> CentOS æˆ– Fedora</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo yum install tmux</span></span><br></pre></td></tr></table></figure><h2 id="æ“ä½œæµç¨‹"><a href="#æ“ä½œæµç¨‹" class="headerlink" title="æ“ä½œæµç¨‹"></a>æ“ä½œæµç¨‹</h2><p>ç›´æ¥ç»™å‡ºæœ€å¸¸ç”¨çš„æ“ä½œæµç¨‹å¦‚ä¸‹ï¼š</p><ul><li>æ–°å»ºä¼šè¯<code>tmux new -s &lt;session_name&gt;</code>ã€‚ï¼ˆç¬¬ä¸€ä¸ªå¯åŠ¨çš„ Tmux çª—å£ï¼Œç¼–å·æ˜¯0ï¼Œç¬¬äºŒä¸ªçª—å£çš„ç¼–å·æ˜¯1ï¼Œä»¥æ­¤ç±»æ¨ã€‚ï¼‰</li><li>åœ¨ Tmux çª—å£è¿è¡Œæ‰€éœ€çš„ç¨‹åºã€‚</li><li>æŒ‰ä¸‹å¿«æ·é”®<code>Ctrl+b d</code>å°†ä¼šè¯åˆ†ç¦»ã€‚</li><li>ä¸‹æ¬¡ä½¿ç”¨æ—¶ï¼Œé‡æ–°è¿æ¥åˆ°ä¼šè¯<code>tmux a -t &lt;session_name&gt;</code>ã€‚</li></ul><h2 id="å…¶ä»–Tricks"><a href="#å…¶ä»–Tricks" class="headerlink" title="å…¶ä»–Tricks"></a>å…¶ä»–Tricks</h2><ul><li><code>Ctrl+b s</code>ï¼šåˆ—å‡ºæ‰€æœ‰ä¼šè¯ã€‚</li><li><code>tmux rename-session -t 0 &lt;new-name&gt;</code>ï¼šé‡å‘½åä¼šè¯ã€‚</li><li><code>tmux kill-session -t &lt;session-name&gt;</code>ï¼šæ€æ­»ä¼šè¯ã€‚</li><li><code>Ctrl+b [</code>ï¼šè¿›å…¥ä¼šè¯åï¼Œä½¿ç”¨è¯¥å¿«æ·å‘½ä»¤æŸ¥çœ‹æ§åˆ¶å°å†å²æ¶ˆæ¯ï¼Œå¯é€šè¿‡é”®ç›˜ä¸Šçš„ä¸Šä¸‹å·¦å³é”®æ¥æ»šåŠ¨å†å²è¾“å‡ºä¿¡æ¯ã€‚å¦‚æœè¦é€€å‡ºæŸ¥çœ‹æ¨¡å¼ï¼ŒæŒ‰ä¸‹qå³å¯ã€‚</li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.ruanyifeng.com/blog/2019/10/tmux.html">Tmux ä½¿ç”¨æ•™ç¨‹</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä»€ä¹ˆæ˜¯Tmux&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯Tmux&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯Tmux&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯Tmux&lt;/h1&gt;&lt;p&gt;æ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼ˆterminal windowï¼Œä»¥ä¸‹ç®€ç§°â€çª—å£â€ï¼‰ï¼Œåœ¨é‡Œé¢è¾“å…¥å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p</summary>
      
    
    
    
    <category term="Linux" scheme="https://gmet233.gitee.io/categories/Linux/"/>
    
    <category term="å¼€å‘å·¥å…·" scheme="https://gmet233.gitee.io/categories/Linux/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
    
    <category term="Linux" scheme="https://gmet233.gitee.io/tags/Linux/"/>
    
    <category term="å¼€å‘å·¥å…·" scheme="https://gmet233.gitee.io/tags/%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7/"/>
    
  </entry>
  
  <entry>
    <title>ç«è½¦ç«™å°æ•°é‡é—®é¢˜</title>
    <link href="https://gmet233.gitee.io/2021/12/25/%E7%81%AB%E8%BD%A6%E7%AB%99%E5%8F%B0%E6%95%B0%E9%87%8F%E9%97%AE%E9%A2%98/"/>
    <id>https://gmet233.gitee.io/2021/12/25/%E7%81%AB%E8%BD%A6%E7%AB%99%E5%8F%B0%E6%95%B0%E9%87%8F%E9%97%AE%E9%A2%98/</id>
    <published>2021-12-25T13:34:56.000Z</published>
    <updated>2021-12-25T13:39:27.993Z</updated>
    
    <content type="html"><![CDATA[<h1 id="é¢˜å¹²"><a href="#é¢˜å¹²" class="headerlink" title="é¢˜å¹²"></a>é¢˜å¹²</h1><p>å‡è®¾å·²çŸ¥æŸä¸ªç«è½¦ç«™çš„æ‰€æœ‰è¿‡å¾€åˆ—è½¦çš„åˆ°è¾¾arrivalå’Œç¦»å¼€departureæ—¶é—´ï¼ˆåŒä¸€å¤©ï¼‰ï¼Œå¦‚æœè¦æ±‚æ‰€æœ‰åˆ—è½¦éƒ½ä¸ç­‰å¾…ç›´æ¥è¿›ç«™ï¼Œé—®è‡³å°‘éœ€è¦å¤šå°‘ä¸ªç«™å°ã€‚æ— éœ€è€ƒè™‘æ™šç‚¹ç­‰ç‰¹æ®Šæƒ…å†µã€‚</p><p>ä¾‹å¦‚ï¼Œ<br> Inputï¼š<br> åˆ°è¾¾æ—¶é—´ï¼š  arr[]  = {9:00,  9:40, 9:50,  11:00, 15:00, 18:00}<br> ç¦»å¼€æ—¶é—´ï¼š  dep[]  = {9:10, 12:00, 11:20, 11:30, 19:00, 20:00}</p><p><em>æ³¨ï¼šæ–¹ä¾¿èµ·è§ï¼Œè¾“å…¥ä¸ºintï¼Œä¾‹å¦‚ï¼š9:00çš„è¾“å…¥æ˜¯900</em></p><p>Outputï¼š<br> 3  ï¼ˆæœ€å¤šæœ‰3è¾†åˆ—è½¦åŒæ—¶è¿›ç«™ï¼ˆåœ¨11:00åˆ°11:20ä¹‹é—´ï¼‰ï¼‰</p><h1 id="è§£æ³•1"><a href="#è§£æ³•1" class="headerlink" title="è§£æ³•1"></a>è§£æ³•1</h1><p>æš´åŠ›è§£æ³•ã€‚é€ä¸ªæ£€æŸ¥æ¯ä¸ªè½¦è¾†çš„<strong>åœå‘æ—¶é—´æ®µ</strong>ï¼Œç„¶åçœ‹æœ‰å¤šå°‘ä¸ªæ—¶é—´æ®µåŒºé—´ä¸å…¶æœ‰é‡åˆï¼Œè®°å½•æœ€å¤šçš„é‡åˆåŒºé—´æ•°ç›®ï¼Œå³ä¸ºå¾…æ±‚è§£çš„ç­”æ¡ˆã€‚æ˜“çŸ¥ï¼Œæ­¤æ–¹æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(n^2)ã€‚</p><p>ä¸‹é¢ç»™å‡ºä»£ç ï¼Œ<em>ä»£ç åªç»è¿‡ç®€å•æµ‹è¯•ï¼Œå¦‚æœ‰è¯¯è¯·é€šè¿‡é‚®ç®±è”ç³»æˆ‘</em></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> typing <span class="keyword">import</span> <span class="type">List</span></span><br><span class="line"><span class="keyword">from</span> traitlets <span class="keyword">import</span> Int</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">maxPlatform</span>(<span class="params">self, arr: <span class="type">List</span>[Int], dep: <span class="type">List</span>[Int]</span>) -&gt; Int:</span></span><br><span class="line">        n = <span class="built_in">len</span>(arr)</span><br><span class="line">        max_platform = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">            now_platform = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(i+<span class="number">1</span>, n):</span><br><span class="line">                <span class="keyword">if</span> dep[i] &gt; arr[j]:</span><br><span class="line">                    now_platform += <span class="number">1</span></span><br><span class="line">                max_platform = <span class="built_in">max</span>(max_platform, now_platform)</span><br><span class="line">        <span class="keyword">return</span> max_platform</span><br></pre></td></tr></table></figure><h1 id="è§£æ³•2"><a href="#è§£æ³•2" class="headerlink" title="è§£æ³•2"></a>è§£æ³•2</h1><p>å°†æ‰€æœ‰çš„<strong>äº‹ä»¶</strong> (åˆ°è¾¾æˆ–ç¦»å¼€)æŒ‰æ—¶é—´é¡ºåºæ’åºï¼Œç„¶ååªè®°å½•å½“å‰è¿˜åœ¨è½¦ç«™ï¼ˆæœªç¦»å¼€çš„ï¼‰åˆ—è½¦ã€‚æ‰€æœ‰æ—¶é—´ç‚¹ä¸­æœ€å¤šæ•°é‡åˆ—è½¦å³å¾…æ±‚è§£çš„ç­”æ¡ˆã€‚è¯¥è§£æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ºO(nÂ·logn)</p><p>ä¾‹å¦‚ä¸Šè¿°å‡ºå‘åˆ°è¾¾æ—¶é—´æ’åºå¾—åˆ°ä¸‹è¡¨ï¼š</p><table><thead><tr><th>æ—¶é—´</th><th>äº‹ä»¶</th><th>ç«™å°æ•°</th></tr></thead><tbody><tr><td>9:00</td><td>Arrival</td><td>1</td></tr><tr><td>9:10</td><td>Departure</td><td>0</td></tr><tr><td>9:40</td><td>Arrival</td><td>1</td></tr><tr><td>9:50</td><td>Arrival</td><td>2</td></tr><tr><td>11:00</td><td>Arrival</td><td><strong>3</strong></td></tr><tr><td>11:20</td><td>Departure</td><td>2</td></tr><tr><td>11:30</td><td>Departure</td><td>1</td></tr><tr><td>12:00</td><td>Departure</td><td>0</td></tr><tr><td>15:00</td><td>Arrival</td><td>1</td></tr><tr><td>18:00</td><td>Arrival</td><td>2</td></tr><tr><td>19:00</td><td>Departure</td><td>1</td></tr><tr><td>20:00</td><td>Departure</td><td>0</td></tr></tbody></table><p>æœ€å¤šéœ€è¦3ç«™å°ã€‚</p><p>åœ¨ç®—æ³•å®ç°æ—¶ï¼Œåªéœ€è¦å¯¹arrã€depæ•°ç»„å•ç‹¬æ’åºï¼Œç„¶ååœ¨è¿›è¡Œæœ‰åºæ•°ç»„çš„å½’å¹¶æ’åºã€‚ä¸‹é¢ç»™å‡ºä»£ç ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxPlatform</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span>[] dep)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> n = arr.length;</span><br><span class="line">        Arrays.sort(arr);</span><br><span class="line">        Arrays.sort(dep); <span class="comment">//åˆ†åˆ«å¯¹åˆ°è¾¾å’Œç¦»å¼€æ’åº</span></span><br><span class="line">        <span class="keyword">int</span> numPlatform = <span class="number">0</span>, maxPlatform = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>, j = <span class="number">0</span>; <span class="comment">//ä¸¤ä¸ªæŒ‡é’ˆ</span></span><br><span class="line">        <span class="keyword">while</span>(i &lt; n || j &lt; n) &#123;</span><br><span class="line">            <span class="keyword">if</span>(i &lt; n &amp;&amp; j &lt; n) &#123;</span><br><span class="line">                <span class="keyword">if</span>(arr[i] &lt; dep[j]) &#123;</span><br><span class="line">                    numPlatform++;</span><br><span class="line">                    i++;</span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span>(arr[i] &gt; dep[j])&#123;</span><br><span class="line">                    numPlatform--;</span><br><span class="line">                    j++;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    i++;</span><br><span class="line">                    j++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span>(j&gt;=n) &#123; <span class="comment">// æ­¤æ—¶è¿˜å°†ç»§ç»­æœ‰ç«è½¦è¿›ç«™</span></span><br><span class="line">                numPlatform++;</span><br><span class="line">                i++;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123; <span class="comment">// æ­¤æ—¶åªæœ‰ç«è½¦å‡ºç«™</span></span><br><span class="line">                numPlatform--;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            maxPlatform = Math.max(maxPlatform, numPlatform);</span><br><span class="line"><span class="comment">//            System.out.println(numPlatform);</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxPlatform;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>è¿™æ˜¯ä¹‹å‰é‡åˆ°çš„ä¸€é“é¢è¯•é¢˜ï¼ŒæŒºå·§å¦™çš„ã€‚å½“æ—¶æ²¡åšå‡ºæ¥ï¼Œæ•…åšä¸€ä¸ªå°ç»“ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.jianshu.com/p/3948fda91d3d">ç«è½¦ç«™å°æ•°é‡é—®é¢˜</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;é¢˜å¹²&quot;&gt;&lt;a href=&quot;#é¢˜å¹²&quot; class=&quot;headerlink&quot; title=&quot;é¢˜å¹²&quot;&gt;&lt;/a&gt;é¢˜å¹²&lt;/h1&gt;&lt;p&gt;å‡è®¾å·²çŸ¥æŸä¸ªç«è½¦ç«™çš„æ‰€æœ‰è¿‡å¾€åˆ—è½¦çš„åˆ°è¾¾arrivalå’Œç¦»å¼€departureæ—¶é—´ï¼ˆåŒä¸€å¤©ï¼‰ï¼Œå¦‚æœè¦æ±‚æ‰€æœ‰åˆ—è½¦éƒ½ä¸ç­‰å¾…ç›´æ¥è¿›ç«™ï¼Œé—®è‡³å°‘éœ€è¦å¤šå°‘</summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Java-åˆè¯†æ³¨è§£</title>
    <link href="https://gmet233.gitee.io/2021/12/23/Java-%E5%88%9D%E8%AF%86%E6%B3%A8%E8%A7%A3/"/>
    <id>https://gmet233.gitee.io/2021/12/23/Java-%E5%88%9D%E8%AF%86%E6%B3%A8%E8%A7%A3/</id>
    <published>2021-12-23T12:45:17.000Z</published>
    <updated>2021-12-26T14:35:27.532Z</updated>
    
    <content type="html"><![CDATA[<h1 id="åˆè¯†æ³¨è§£"><a href="#åˆè¯†æ³¨è§£" class="headerlink" title="åˆè¯†æ³¨è§£"></a>åˆè¯†æ³¨è§£</h1><h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><ul><li>Annotationæä¾›äº†ä¸€ç§ä¸ºæ’æ—­å…ƒç´ è®¾ç½®å…ƒæ•°æ®çš„æ–¹æ³•ã€‚</li><li>ç±»ä¼¼äºä¿®é¥°ç¬¦ï¼Œå¯ç”¨äºä¿®é¥°åŒ…ã€ç±»ã€æ„é€ å™¨ã€æ–¹æ³•ã€æˆå‘˜å˜é‡ã€å‚æ•°ã€å±€éƒ¨å˜é‡çš„å£°æ˜ã€‚</li><li>Annotationæ˜¯ä¸€ä¸ªæ¥å£ï¼Œç¨‹åºå¯ä»¥é€šè¿‡åå°„æ¥è·å–æŒ‡å®šç¨‹åºå…ƒç´ çš„Annotationå¯¹è±¡ã€‚</li><li>Annotationä¸å½±å“ç¨‹åºä»£ç çš„è¿è¡Œã€‚</li><li>å¦‚æœå¸Œæœ›Annotationåœ¨ç¨‹åºè¿è¡Œæ—¶èµ·ä½œç”¨ï¼Œåªæœ‰é€šè¿‡æŸç§é…å¥—å·¥å…·å¯¹Annotationçš„ä¿¡æ¯è¿›è¡Œè®¿é—®å’Œå¤„ç†ã€‚è®¿é—®å’Œå¤„ç†Annotationçš„å·¥å…·ç»Ÿç§°ä¸ºAPTã€‚</li></ul><h2 id="å†…ç½®æ³¨è§£"><a href="#å†…ç½®æ³¨è§£" class="headerlink" title="å†…ç½®æ³¨è§£"></a>å†…ç½®æ³¨è§£</h2><p>Javaå®šä¹‰äº†ä¸€å¥—æ³¨è§£å¦‚ä¸‹ã€‚</p><ul><li>ä»¥ä¸‹æ³¨è§£åœ¨java.langä¸­ï¼š<ul><li><strong>@Override</strong> - æ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦æ˜¯é‡å†™æ–¹æ³•ã€‚å¦‚æœå‘ç°å…¶çˆ¶ç±»ï¼Œæˆ–è€…æ˜¯å¼•ç”¨çš„æ¥å£ä¸­å¹¶æ²¡æœ‰è¯¥æ–¹æ³•æ—¶ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯ã€‚</li><li><strong>@Deprecated</strong> - æ ‡è®°è¿‡æ—¶æ–¹æ³•ã€‚å¦‚æœä½¿ç”¨è¯¥æ–¹æ³•ï¼Œä¼šæŠ¥ç¼–è¯‘è­¦å‘Šã€‚</li><li><strong>@SuppressWarnings</strong> - æŒ‡ç¤ºç¼–è¯‘å™¨å»å¿½ç•¥æ³¨è§£ä¸­å£°æ˜çš„è­¦å‘Šã€‚</li><li>@SafeVarargs - Java 7 å¼€å§‹æ”¯æŒï¼Œå¿½ç•¥ä»»ä½•ä½¿ç”¨å‚æ•°ä¸ºæ³›å‹å˜é‡çš„æ–¹æ³•æˆ–æ„é€ å‡½æ•°è°ƒç”¨äº§ç”Ÿçš„è­¦å‘Šã€‚</li><li><strong>@FunctionalInterface</strong> - Java 8 å¼€å§‹æ”¯æŒï¼Œæ ‡è¯†ä¸€ä¸ªåŒ¿åå‡½æ•°æˆ–å‡½æ•°å¼æ¥å£ã€‚</li></ul></li><li>ä»¥ä¸‹æ³¨è§£åœ¨java.lang.annotationä¸­ï¼Œä»–ä»¬ä½œç”¨åœ¨å…¶ä»–æ³¨è§£ä¸­ï¼Œä¹Ÿæˆä¸º<strong>å…ƒæ³¨è§£</strong>ï¼š<ul><li><strong>@Retention</strong> - æ ‡è¯†è¿™ä¸ªæ³¨è§£æ€ä¹ˆä¿å­˜ï¼Œæ˜¯åªåœ¨ä»£ç ä¸­ï¼Œè¿˜æ˜¯ç¼–å…¥classæ–‡ä»¶ä¸­ï¼Œæˆ–è€…æ˜¯åœ¨è¿è¡Œæ—¶å¯ä»¥é€šè¿‡åå°„è®¿é—®ã€‚</li><li>@Documented - æ ‡è®°è¿™äº›æ³¨è§£æ˜¯å¦åŒ…å«åœ¨ç”¨æˆ·æ–‡æ¡£ä¸­ã€‚</li><li><strong>@Target</strong> - æ ‡è®°è¿™ä¸ªæ³¨è§£åº”è¯¥æ˜¯å“ªç§ Java æˆå‘˜ã€‚</li><li><strong>@Inherited</strong> - æ ‡è®°è¿™ä¸ªæ³¨è§£æ˜¯ç»§æ‰¿äºå“ªä¸ªæ³¨è§£ç±»(é»˜è®¤ æ³¨è§£å¹¶æ²¡æœ‰ç»§æ‰¿äºä»»ä½•å­ç±»)<ul><li>è¯¦è§£ï¼šå‡è®¾ï¼Œæˆ‘ä»¬å®šä¹‰äº†æŸä¸ª Annotaionï¼Œå®ƒçš„åç§°æ˜¯ MyAnnotationï¼Œå¹¶ä¸” MyAnnotation è¢«æ ‡æ³¨ä¸º @Inheritedã€‚ç°åœ¨ï¼ŒæŸä¸ªç±» Base ä½¿ç”¨äº†MyAnnotationï¼Œåˆ™ Base â€œå…·æœ‰äº†æ³¨è§£ MyAnnotationâ€ï¼›ç°åœ¨ï¼ŒSub ç»§æ‰¿äº† Baseï¼Œç”±äº MyAnnotation æ˜¯ @Inheritedçš„(å…·æœ‰ç»§æ‰¿æ€§)ï¼Œæ‰€ä»¥ï¼ŒSub ä¹Ÿ â€œå…·æœ‰äº†æ³¨è§£ MyAnnotationâ€ã€‚</li></ul></li><li>@Repeatable - Java 8 å¼€å§‹æ”¯æŒï¼Œæ ‡è¯†æŸæ³¨è§£å¯ä»¥åœ¨åŒä¸€ä¸ªå£°æ˜ä¸Šä½¿ç”¨å¤šæ¬¡ã€‚</li></ul></li></ul><h2 id="Annotationæ¶æ„"><a href="#Annotationæ¶æ„" class="headerlink" title="Annotationæ¶æ„"></a>Annotationæ¶æ„</h2><p><img src="1.jpg" alt="Annotationæ¶æ„"></p><p>ä»ä¸­å¯ä»¥çœ‹å‡ºï¼š</p><ol><li>1ä¸ªAnnotationå¯¹è±¡ï¼Œéƒ½ä¼šæœ‰å”¯ä¸€çš„RetentionPolicyå±æ€§ã€‚</li><li>1 ä¸ª Annotation å¯¹è±¡ï¼Œå¯ä»¥æœ‰è‹¥å¹²ä¸ª ElementType å±æ€§ã€‚</li><li>Annotation æœ‰è®¸å¤šå®ç°ç±»ï¼ŒåŒ…æ‹¬ï¼šDeprecated, Documented, Inherited, Override ç­‰ç­‰ã€‚</li></ol><p>ä¸‹é¢ä»‹ç»ï¼Œåœ¨java Annotationçš„ç»„æˆä¸­ï¼Œæœ‰ä¸‰ä¸ªé‡è¦çš„ä¸»å¹²ç±»ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//Annotation.java</span></span><br><span class="line"><span class="keyword">package</span> java.lang.annotation;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Annotation</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">toString</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    Class&lt;? extends Annotation&gt; annotationType();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//ElementType.java</span></span><br><span class="line"><span class="keyword">package</span> java.lang.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">ElementType</span> </span>&#123;</span><br><span class="line">    TYPE,               <span class="comment">/* ç±»ã€æ¥å£ï¼ˆåŒ…æ‹¬æ³¨é‡Šç±»å‹ï¼‰æˆ–æšä¸¾å£°æ˜  */</span></span><br><span class="line"></span><br><span class="line">    FIELD,              <span class="comment">/* å­—æ®µå£°æ˜ï¼ˆåŒ…æ‹¬æšä¸¾å¸¸é‡ï¼‰  */</span></span><br><span class="line"></span><br><span class="line">    METHOD,             <span class="comment">/* æ–¹æ³•å£°æ˜  */</span></span><br><span class="line"></span><br><span class="line">    PARAMETER,          <span class="comment">/* å‚æ•°å£°æ˜  */</span></span><br><span class="line"></span><br><span class="line">    CONSTRUCTOR,        <span class="comment">/* æ„é€ æ–¹æ³•å£°æ˜  */</span></span><br><span class="line"></span><br><span class="line">    LOCAL_VARIABLE,     <span class="comment">/* å±€éƒ¨å˜é‡å£°æ˜  */</span></span><br><span class="line"></span><br><span class="line">    ANNOTATION_TYPE,    <span class="comment">/* æ³¨é‡Šç±»å‹å£°æ˜  */</span></span><br><span class="line"></span><br><span class="line">    PACKAGE             <span class="comment">/* åŒ…å£°æ˜  */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//RetentionPolicy.java</span></span><br><span class="line"><span class="keyword">package</span> java.lang.annotation;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">RetentionPolicy</span> </span>&#123;</span><br><span class="line">    SOURCE,            <span class="comment">/* Annotationä¿¡æ¯ä»…å­˜åœ¨äºç¼–è¯‘å™¨å¤„ç†æœŸé—´ï¼Œç¼–è¯‘å™¨å¤„ç†å®Œä¹‹åå°±æ²¡æœ‰è¯¥Annotationä¿¡æ¯äº†  */</span></span><br><span class="line"></span><br><span class="line">    CLASS,             <span class="comment">/* ç¼–è¯‘å™¨å°†Annotationå­˜å‚¨äºç±»å¯¹åº”çš„.classæ–‡ä»¶ä¸­ã€‚é»˜è®¤è¡Œä¸º  */</span></span><br><span class="line"></span><br><span class="line">    RUNTIME            <span class="comment">/* ç¼–è¯‘å™¨å°†Annotationå­˜å‚¨äºclassæ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å¯ç”±JVMè¯»å…¥ */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼š</p><ol><li>Annotationæ˜¯ä¸€ä¸ªæ¥å£ï¼Œç»§æ‰¿è¿™ä¸ªæ¥å£çš„å°±æ˜¯æ³¨è§£ã€‚</li><li><strong>ElementType æ˜¯ Enum æšä¸¾ç±»å‹ï¼Œå®ƒç”¨æ¥æŒ‡å®š Annotation çš„ç±»å‹ã€‚</strong><ol><li>ä¾‹å¦‚ï¼Œè‹¥ä¸€ä¸ª Annotation å¯¹è±¡æ˜¯ METHOD ç±»å‹ï¼Œåˆ™è¯¥ Annotation åªèƒ½ç”¨æ¥ä¿®é¥°æ–¹æ³•ã€‚</li></ol></li><li><strong>RetentionPolicy æ˜¯ Enum æšä¸¾ç±»å‹ï¼Œå®ƒç”¨æ¥æŒ‡å®š Annotation çš„ç­–ç•¥ã€‚é€šä¿—ç‚¹è¯´ï¼Œå°±æ˜¯ä¸åŒ RetentionPolicy ç±»å‹çš„ Annotation çš„ä½œç”¨åŸŸä¸åŒã€‚</strong><ol><li>è‹¥ Annotation çš„ç±»å‹ä¸º SOURCEï¼Œåˆ™æ„å‘³ç€ï¼šAnnotation ä»…å­˜åœ¨äºç¼–è¯‘å™¨å¤„ç†æœŸé—´ï¼Œç¼–è¯‘å™¨å¤„ç†å®Œä¹‹åï¼Œè¯¥ Annotation å°±æ²¡ç”¨äº†ã€‚ ä¾‹å¦‚ï¼Œâ€ @Overrideâ€ æ ‡å¿—å°±æ˜¯ä¸€ä¸ª Annotationã€‚å½“å®ƒä¿®é¥°ä¸€ä¸ªæ–¹æ³•çš„æ—¶å€™ï¼Œå°±æ„å‘³ç€è¯¥æ–¹æ³•è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼›å¹¶ä¸”åœ¨ç¼–è¯‘æœŸé—´ä¼šè¿›è¡Œè¯­æ³•æ£€æŸ¥ï¼ç¼–è¯‘å™¨å¤„ç†å®Œåï¼Œâ€@Overrideâ€ å°±æ²¡æœ‰ä»»ä½•ä½œç”¨äº†ã€‚</li><li>è‹¥ Annotation çš„ç±»å‹ä¸º CLASSï¼Œåˆ™æ„å‘³ç€ï¼šç¼–è¯‘å™¨å°† Annotation å­˜å‚¨äºç±»å¯¹åº”çš„ .class æ–‡ä»¶ä¸­ï¼Œå®ƒæ˜¯ Annotation çš„é»˜è®¤è¡Œä¸ºã€‚</li><li>è‹¥ Annotation çš„ç±»å‹ä¸º RUNTIMEï¼Œåˆ™æ„å‘³ç€ï¼šç¼–è¯‘å™¨å°† Annotation å­˜å‚¨äº class æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”å¯ç”±JVMè¯»å…¥ã€‚</li></ol></li></ol><h2 id="æ³¨è§£é€šç”¨å®šä¹‰"><a href="#æ³¨è§£é€šç”¨å®šä¹‰" class="headerlink" title="æ³¨è§£é€šç”¨å®šä¹‰"></a>æ³¨è§£é€šç”¨å®šä¹‰</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Target(ElementType.TYPE)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation1 &#123;</span><br><span class="line">    <span class="comment">//å±æ€§åˆ—è¡¨</span></span><br><span class="line">    <span class="comment">//Annotationçš„æˆå‘˜å˜é‡åœ¨Annotationå®šä¹‰ä¸­ä»¥æ— å½¢å‚æ–¹æ³•å½¢å¼æ¥å£°æ˜ï¼Œå…¶æ–¹æ³•åå’Œè¿”å›å€¼å®šä¹‰äº†è¯¥æˆå‘˜å˜é‡çš„åå­—å’Œç±»å‹ã€‚</span></span><br><span class="line">    <span class="comment">//æ³¨è§£å…ƒç´ çš„ç±»å‹å¯ä»¥ä¸ºï¼šåŸºæœ¬ç±»å‹ï¼ŒStringï¼ŒClassï¼Œæšä¸¾ç±»å‹ï¼Œæ³¨è§£ç±»å‹ï¼Œä»¥åŠå‰é¢æ‰€è¿°ç±»å‹ç»„æˆçš„æ•°ç»„</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯´æ˜ï¼šä¸Šé¢çš„ä½œç”¨æ˜¯å®šä¹‰äº†ä¸€ä¸ªæ³¨è§£ï¼Œåä¸ºMyAnnotation1ã€‚å®šä¹‰äº†MyAnnotation1ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»£ç ä¸­é€šè¿‡@MyAnnotation1ä½¿ç”¨å®ƒã€‚å…¶ä»–çš„ï¼Œ@Documented, @Target, @Retention, @interfaceéƒ½æ˜¯æ¥ä¿®é¥°MyAnnotation1çš„ã€‚</p><ul><li><p><strong>@interface</strong>ï¼šä½¿ç”¨ @interface <strong>å…³é”®å­—</strong>å®šä¹‰æ³¨è§£æ—¶ï¼Œæ„å‘³ç€å®ƒå®ç°äº†java.lang.annotation.Annotation æ¥å£ï¼Œå³è¯¥æ³¨è§£å°±æ˜¯ä¸€ä¸ªAnnotationã€‚</p></li><li><p><strong>@Documented</strong>ï¼šç±»å’Œæ–¹æ³•çš„ Annotation åœ¨ç¼ºçœæƒ…å†µä¸‹æ˜¯ä¸å‡ºç°åœ¨ javadoc ä¸­çš„ã€‚å¦‚æœä½¿ç”¨ @Documented ä¿®é¥°è¯¥ Annotationï¼Œåˆ™è¡¨ç¤ºå®ƒå¯ä»¥å‡ºç°åœ¨ javadoc ä¸­ã€‚å®šä¹‰ Annotation æ—¶ï¼Œ@Documented å¯æœ‰å¯æ— ï¼›è‹¥æ²¡æœ‰å®šä¹‰ï¼Œåˆ™ Annotation ä¸ä¼šå‡ºç°åœ¨ javadoc ä¸­ã€‚</p></li><li><p>**@Target(ElementType.TYPE)**ï¼šElementType æ˜¯ Annotation çš„ç±»å‹å±æ€§ã€‚è€Œ @Target çš„ä½œç”¨ï¼Œå°±æ˜¯æ¥æŒ‡å®š Annotation çš„ç±»å‹å±æ€§ã€‚</p><p>@Target(ElementType.TYPE) çš„æ„æ€å°±æ˜¯æŒ‡å®šè¯¥ Annotation çš„ç±»å‹æ˜¯ ElementType.TYPEã€‚è¿™å°±æ„å‘³ç€ï¼ŒMyAnnotation1 æ˜¯æ¥ä¿®é¥°â€ç±»ã€æ¥å£ï¼ˆåŒ…æ‹¬æ³¨é‡Šç±»å‹ï¼‰æˆ–æšä¸¾å£°æ˜â€çš„æ³¨è§£ã€‚</p><p>å®šä¹‰ Annotation æ—¶ï¼Œ@Target å¯æœ‰å¯æ— ã€‚è‹¥æœ‰ @Targetï¼Œåˆ™è¯¥ Annotation åªèƒ½ç”¨äºå®ƒæ‰€æŒ‡å®šçš„åœ°æ–¹ï¼›è‹¥æ²¡æœ‰ @Targetï¼Œåˆ™è¯¥ Annotation å¯ä»¥ç”¨äºä»»ä½•åœ°æ–¹ã€‚</p></li><li><p>**@Retention(RetentionPolicy.RUNTIME)**ï¼šå‰é¢æˆ‘ä»¬è¯´è¿‡ï¼ŒRetentionPolicy æ˜¯ Annotation çš„ç­–ç•¥å±æ€§ï¼Œè€Œ @Retention çš„ä½œç”¨ï¼Œå°±æ˜¯æŒ‡å®š Annotation çš„ç­–ç•¥å±æ€§ã€‚</p><p>@Retention(RetentionPolicy.RUNTIME) çš„æ„æ€å°±æ˜¯æŒ‡å®šè¯¥ Annotation çš„ç­–ç•¥æ˜¯ RetentionPolicy.RUNTIMEã€‚è¿™å°±æ„å‘³ç€ï¼Œç¼–è¯‘å™¨ä¼šå°†è¯¥ Annotation ä¿¡æ¯ä¿ç•™åœ¨ .class æ–‡ä»¶ä¸­ï¼Œå¹¶ä¸”èƒ½è¢«è™šæ‹Ÿæœºè¯»å–ã€‚</p><p>å®šä¹‰ Annotation æ—¶ï¼Œ@Retention å¯æœ‰å¯æ— ã€‚è‹¥æ²¡æœ‰ @Retentionï¼Œåˆ™é»˜è®¤æ˜¯ RetentionPolicy.CLASSã€‚</p></li></ul><p>æ ¹æ®æ³¨è§£æ˜¯å¦åŒ…å«æˆå‘˜å˜é‡ï¼Œå¯ä»¥æŠŠæ³¨è§£åˆ†ä¸º</p><ul><li>æ ‡è®°æ³¨è§£ï¼šæ²¡æœ‰æˆå‘˜å˜é‡çš„æ³¨è§£ï¼Œè¿™ç§æ³¨è§£ä»…åˆ©ç”¨è‡ªèº«æ˜¯å¦å­˜åœ¨æ¥æä¾›ä¿¡æ¯ã€‚</li><li>å…ƒæ•°æ®æ³¨è§£ï¼šåŒ…å«æˆå‘˜å˜é‡çš„æ³¨è§£ï¼Œå› ä¸ºå®ƒå¯ä»¥æ¥å—æ›´å¤šçš„å…ƒæ•°æ®ï¼Œæ‰€ä»¥ä¹Ÿè¢«ç§°ä¸ºå…ƒæ•°æ®æ³¨è§£ã€‚</li></ul><h2 id="Annotationä½œç”¨"><a href="#Annotationä½œç”¨" class="headerlink" title="Annotationä½œç”¨"></a>Annotationä½œç”¨</h2><h3 id="ç¼–è¯‘æ£€æŸ¥"><a href="#ç¼–è¯‘æ£€æŸ¥" class="headerlink" title="ç¼–è¯‘æ£€æŸ¥"></a>ç¼–è¯‘æ£€æŸ¥</h3><p>Annotation å…·æœ‰â€è®©ç¼–è¯‘å™¨è¿›è¡Œç¼–è¯‘æ£€æŸ¥çš„ä½œç”¨â€ã€‚@SuppressWarnings, @Deprecated å’Œ @Override éƒ½å…·æœ‰ç¼–è¯‘æ£€æŸ¥ä½œç”¨ã€‚</p><h3 id="â˜†åœ¨åå°„ä¸­è§£æå¹¶ä½¿ç”¨-Annotation"><a href="#â˜†åœ¨åå°„ä¸­è§£æå¹¶ä½¿ç”¨-Annotation" class="headerlink" title="â˜†åœ¨åå°„ä¸­è§£æå¹¶ä½¿ç”¨ Annotation"></a>â˜†åœ¨åå°„ä¸­è§£æå¹¶ä½¿ç”¨ Annotation</h3><p>ç¨‹åºé€šè¿‡åå°„æœºåˆ¶å¯ä»¥è§£æè¢«ä¿®é¥°çš„æ–¹æ³•ä¸­çš„æ³¨è§£æ•°æ®ï¼Œå½“ç¨‹åºè·å–ç‰¹æ®Šæ ‡è®°åï¼Œå¯ä»¥åšå‡ºç›¸åº”çš„å¤„ç†ã€‚è¿™åœ¨Springç­‰æ¡†æ¶ä¸­ç»å¸¸ä½¿ç”¨ã€‚è¯¦è§ä¸‹é¢ä»£ç ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">//AnnotationTest.java</span></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Inherited;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Annotationåœ¨åå°„å‡½æ•°ä¸­çš„ä½¿ç”¨ç¤ºä¾‹</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">     * è¯´æ˜ï¼šåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä¸èƒ½æŠŠvalue()çœ‹æˆä¸€ä¸ªæ–¹æ³•ï¼Œè€Œæ˜¯ä¸€ä¸ªåŒåçš„å˜é‡</span></span><br><span class="line"><span class="comment">     * åœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥é€šè¿‡@MyAnnotation(value=&#123;&quot;a&quot;,&quot;b&quot;&#125;æ¥èµ‹å€¼</span></span><br><span class="line"><span class="comment">     * default ç»™valueåˆ¶å®šäº†é»˜è®¤å€¼</span></span><br><span class="line"><span class="comment">     * å¦‚æœæ³¨è§£çš„å±æ€§åªæœ‰ä¸€ä¸ªï¼Œä¸”å«valueï¼Œé‚£ä¹ˆä½¿ç”¨è¯¥æ³¨è§£æ—¶ï¼Œå¯ä»¥ä¸ç”¨æŒ‡å®šå±æ€§åï¼Œå› ä¸ºé»˜è®¤å°±æ˜¯ç»™valueèµ‹å€¼ï¼š</span></span><br><span class="line"><span class="comment">     * @MyAnnotation(&#123;&quot;a&quot;,&quot;b&quot;&#125;) //è¿™æ ·ä¹Ÿæ˜¯å¯ä»¥çš„</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">    String[] value() default &quot;unknown&quot;;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Personç±»ã€‚å®ƒä¼šä½¿ç”¨MyAnnotationæ³¨è§£ã€‚</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * empty()æ–¹æ³•åŒæ—¶è¢« &quot;<span class="doctag">@Deprecated</span>&quot; å’Œ &quot;<span class="doctag">@MyAnnotation</span>(value=&#123;&quot;a&quot;,&quot;b&quot;&#125;)&quot;æ‰€æ ‡æ³¨</span></span><br><span class="line"><span class="comment">     * (01) <span class="doctag">@Deprecated</span>ï¼Œæ„å‘³ç€empty()æ–¹æ³•ï¼Œä¸å†è¢«å»ºè®®ä½¿ç”¨</span></span><br><span class="line"><span class="comment">     * (02) <span class="doctag">@MyAnnotation</span>, æ„å‘³ç€empty() æ–¹æ³•å¯¹åº”çš„MyAnnotationçš„valueå€¼æ˜¯é»˜è®¤å€¼&quot;unknown&quot;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@MyAnnotation</span></span><br><span class="line">    <span class="meta">@Deprecated</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">empty</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\nempty&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * sombody() è¢« <span class="doctag">@MyAnnotation</span>(value=&#123;&quot;girl&quot;,&quot;boy&quot;&#125;) æ‰€æ ‡æ³¨ï¼Œ</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@MyAnnotation</span>(value=&#123;&quot;girl&quot;,&quot;boy&quot;&#125;), æ„å‘³ç€MyAnnotationçš„valueå€¼æ˜¯&#123;&quot;girl&quot;,&quot;boy&quot;&#125;</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@MyAnnotation(value=&#123;&quot;girl&quot;,&quot;boy&quot;&#125;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">somebody</span><span class="params">(String name, <span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;\nsomebody: &quot;</span>+name+<span class="string">&quot;, &quot;</span>+age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationTest</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       </span><br><span class="line">        <span class="comment">// æ–°å»ºPerson</span></span><br><span class="line">        Person person = <span class="keyword">new</span> Person();</span><br><span class="line">        <span class="comment">// è·å–Personçš„Classå®ä¾‹</span></span><br><span class="line">        Class&lt;Person&gt; c = Person.class;</span><br><span class="line">        <span class="comment">// è·å– somebody() æ–¹æ³•çš„Methodå®ä¾‹</span></span><br><span class="line">        Method mSomebody = c.getMethod(<span class="string">&quot;somebody&quot;</span>, <span class="keyword">new</span> Class[]&#123;String.class, <span class="keyword">int</span>.class&#125;);</span><br><span class="line">        <span class="comment">// æ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line">        mSomebody.invoke(person, <span class="keyword">new</span> Object[]&#123;<span class="string">&quot;lily&quot;</span>, <span class="number">18</span>&#125;);</span><br><span class="line">        iteratorAnnotations(mSomebody);</span><br><span class="line">       </span><br><span class="line"></span><br><span class="line">        <span class="comment">// è·å– somebody() æ–¹æ³•çš„Methodå®ä¾‹</span></span><br><span class="line">        Method mEmpty = c.getMethod(<span class="string">&quot;empty&quot;</span>, <span class="keyword">new</span> Class[]&#123;&#125;);</span><br><span class="line">        <span class="comment">// æ‰§è¡Œè¯¥æ–¹æ³•</span></span><br><span class="line">        mEmpty.invoke(person, <span class="keyword">new</span> Object[]&#123;&#125;);        </span><br><span class="line">        iteratorAnnotations(mEmpty);</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">iteratorAnnotations</span><span class="params">(Method method)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// åˆ¤æ–­ somebody() æ–¹æ³•æ˜¯å¦åŒ…å«MyAnnotationæ³¨è§£</span></span><br><span class="line">        <span class="keyword">if</span>(method.isAnnotationPresent(MyAnnotation.class))&#123;</span><br><span class="line">            <span class="comment">// è·å–è¯¥æ–¹æ³•çš„MyAnnotationæ³¨è§£å®ä¾‹</span></span><br><span class="line">            MyAnnotation myAnnotation = method.getAnnotation(MyAnnotation.class);</span><br><span class="line">            <span class="comment">// è·å– myAnnotationçš„å€¼ï¼Œå¹¶æ‰“å°å‡ºæ¥</span></span><br><span class="line">            String[] values = myAnnotation.value();</span><br><span class="line">            <span class="keyword">for</span> (String str:values)</span><br><span class="line">                System.out.printf(str+<span class="string">&quot;, &quot;</span>);</span><br><span class="line">            System.out.println();</span><br><span class="line">        &#125;</span><br><span class="line">       </span><br><span class="line">        <span class="comment">// è·å–æ–¹æ³•ä¸Šçš„æ‰€æœ‰æ³¨è§£ï¼Œå¹¶æ‰“å°å‡ºæ¥</span></span><br><span class="line">        Annotation[] annotations = method.getAnnotations();</span><br><span class="line">        <span class="keyword">for</span>(Annotation annotation : annotations)&#123;</span><br><span class="line">            System.out.println(annotation);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç»“æœï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">somebody: lily, 18</span><br><span class="line">girl, boy, </span><br><span class="line">@com.skywang.annotation.MyAnnotation(value=[girl, boy])</span><br><span class="line"></span><br><span class="line">empty</span><br><span class="line">unknown, </span><br><span class="line">@com.skywang.annotation.MyAnnotation(value=[unknown])</span><br><span class="line">@java.lang.Deprecated()</span><br></pre></td></tr></table></figure><h3 id="æ ¹æ®Annotationç”Ÿæˆå¸®åŠ©æ–‡æ¡£"><a href="#æ ¹æ®Annotationç”Ÿæˆå¸®åŠ©æ–‡æ¡£" class="headerlink" title="æ ¹æ®Annotationç”Ÿæˆå¸®åŠ©æ–‡æ¡£"></a>æ ¹æ®Annotationç”Ÿæˆå¸®åŠ©æ–‡æ¡£</h3><p>@Documented</p><h3 id="å¸®å¿™æŸ¥çœ‹ä»£ç "><a href="#å¸®å¿™æŸ¥çœ‹ä»£ç " class="headerlink" title="å¸®å¿™æŸ¥çœ‹ä»£ç "></a>å¸®å¿™æŸ¥çœ‹ä»£ç </h3><p>é€šè¿‡ @Override, @Deprecated ç­‰ï¼Œæˆ‘ä»¬èƒ½å¾ˆæ–¹ä¾¿çš„äº†è§£ç¨‹åºçš„å¤§è‡´ç»“æ„ã€‚</p><h3 id="é™„å±æ–‡ä»¶çš„è‡ªåŠ¨ç”Ÿæˆ"><a href="#é™„å±æ–‡ä»¶çš„è‡ªåŠ¨ç”Ÿæˆ" class="headerlink" title="é™„å±æ–‡ä»¶çš„è‡ªåŠ¨ç”Ÿæˆ"></a>é™„å±æ–‡ä»¶çš„è‡ªåŠ¨ç”Ÿæˆ</h3><p>ä¾‹å¦‚éƒ¨ç½²æè¿°ç¬¦æˆ–è€…beanä¿¡æ¯ç±»ã€‚</p><h3 id="æµ‹è¯•ã€æ—¥å¿—ç­‰ä»£ç çš„è‡ªåŠ¨ç”Ÿæˆ"><a href="#æµ‹è¯•ã€æ—¥å¿—ç­‰ä»£ç çš„è‡ªåŠ¨ç”Ÿæˆ" class="headerlink" title="æµ‹è¯•ã€æ—¥å¿—ç­‰ä»£ç çš„è‡ªåŠ¨ç”Ÿæˆ"></a>æµ‹è¯•ã€æ—¥å¿—ç­‰ä»£ç çš„è‡ªåŠ¨ç”Ÿæˆ</h3><p>//TODO</p><h2 id="æ¡†æ¶ä¸­å¸¸ç”¨çš„æ³¨è§£"><a href="#æ¡†æ¶ä¸­å¸¸ç”¨çš„æ³¨è§£" class="headerlink" title="æ¡†æ¶ä¸­å¸¸ç”¨çš„æ³¨è§£"></a>æ¡†æ¶ä¸­å¸¸ç”¨çš„æ³¨è§£</h2><h3 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h3><p>//TODO</p><h3 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h3><p>//TODO</p><h2 id="å°ç»“"><a href="#å°ç»“" class="headerlink" title="å°ç»“"></a>å°ç»“</h2><ul><li><p>æ³¨è§£å°±åƒæ ‡ç­¾ï¼Œæ˜¯ç¨‹åºåˆ¤æ–­æ‰§è¡Œçš„ä¾æ®ã€‚æ¯”å¦‚ï¼Œç¨‹åºè¯»åˆ°@Testå°±çŸ¥é“è¿™ä¸ªæ–¹æ³•æ˜¯å¾…æµ‹è¯•æ–¹æ³•ï¼Œè€Œ@Beforeçš„æ–¹æ³•è¦åœ¨æµ‹è¯•æ–¹æ³•ä¹‹å‰æ‰§è¡Œ</p></li><li><p>æ³¨è§£éœ€è¦ä¸‰è¦ç´ ï¼šå®šä¹‰ã€ä½¿ç”¨ã€<strong>è¯»å–å¹¶æ‰§è¡Œ</strong></p></li><li><p>æ³¨è§£åˆ†ä¸ºè‡ªå®šä¹‰æ³¨è§£ã€JDKå†…ç½®æ³¨è§£å’Œç¬¬ä¸‰æ–¹æ³¨è§£ï¼ˆæ¡†æ¶ï¼‰ã€‚è‡ªå®šä¹‰æ³¨è§£ä¸€èˆ¬è¦æˆ‘ä»¬è‡ªå·±å®šä¹‰ã€ä½¿ç”¨ã€å¹¶å†™ç¨‹åºè¯»å–ï¼Œè€ŒJDKå†…ç½®æ³¨è§£å’Œç¬¬ä¸‰æ–¹æ³¨è§£æˆ‘ä»¬åªè¦ä½¿ç”¨ï¼Œå®šä¹‰å’Œè¯»å–éƒ½äº¤ç»™å®ƒä»¬</p></li><li><p>å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä¸‰è§’å…³ç³»ä¸­æˆ‘ä»¬åªè´Ÿè´£ä½¿ç”¨æ³¨è§£ï¼Œæ— éœ€å®šä¹‰å’Œæ‰§è¡Œï¼Œæ¡†æ¶ä¼šå°†æ³¨è§£ç±»å’Œè¯»å–æ³¨è§£çš„ç¨‹åºéšè—èµ·æ¥ï¼Œé™¤éé˜…è¯»æºç ï¼Œå¦åˆ™æ ¹æœ¬çœ‹ä¸åˆ°ã€‚å¹³æ—¶è§ä¸åˆ°å®šä¹‰å’Œè¯»å–çš„è¿‡ç¨‹ï¼Œå…‰é¡¾ç€ä½¿ç”¨æ³¨è§£ï¼Œä¹…è€Œä¹…ä¹‹å¾ˆå¤šäººå°±å¿˜äº†æ³¨è§£å¦‚ä½•èµ·ä½œç”¨äº†ï¼</p></li></ul><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.zhihu.com/question/47449512/answer/658228092">æ€æ ·ç†è§£ Java æ³¨è§£å’Œè¿ç”¨æ³¨è§£ç¼–ç¨‹ï¼Ÿ</a></li><li><a href="https://www.runoob.com/w3cnote/java-annotation.html">èœé¸Ÿæ•™ç¨‹-Java æ³¨è§£ï¼ˆAnnotationï¼‰</a></li><li>ã€ŠJavaç–¯ç‹‚è®²ä¹‰ ç¬¬åå››ç«  æ³¨è§£ã€‹</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;åˆè¯†æ³¨è§£&quot;&gt;&lt;a href=&quot;#åˆè¯†æ³¨è§£&quot; class=&quot;headerlink&quot; title=&quot;åˆè¯†æ³¨è§£&quot;&gt;&lt;/a&gt;åˆè¯†æ³¨è§£&lt;/h1&gt;&lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h</summary>
      
    
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/categories/Java/"/>
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>ç¼–å†™è„šæœ¬è¯»å–æ–‡ä»¶å¹¶æ‰§è¡Œå‘½ä»¤</title>
    <link href="https://gmet233.gitee.io/2021/12/21/%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4/"/>
    <id>https://gmet233.gitee.io/2021/12/21/%E7%BC%96%E5%86%99%E8%84%9A%E6%9C%AC%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%B9%B6%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4/</id>
    <published>2021-12-21T13:38:58.000Z</published>
    <updated>2021-12-21T13:41:30.569Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘é‡åˆ°å¦‚ä¸‹éœ€æ±‚ï¼š</p><blockquote><p>æœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶æ ¼å¼å¤§æ¦‚æ˜¯è¿™æ ·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;filename1&gt;\t&lt;download_url1&gt;</span><br><span class="line"></span><br><span class="line">&lt;filename2&gt;\t&lt;download_url2&gt;</span><br></pre></td></tr></table></figure><p>ç¼–å†™ä¸€ä¸ªè„šæœ¬å¾ªç¯è¯»å–è¯¥æ–‡ä»¶çš„æ¯ä¸€è¡Œï¼Œä½¿ç”¨<code>axel</code>å‘½ä»¤å°†<code>download_url</code>ä¸‹è½½ä¸‹æ¥ï¼Œä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶<code>filename</code></p></blockquote><h1 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h1><p>å…ˆç»™å‡ºCodeï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ./download.sh &lt;filename&gt;</span></span><br><span class="line"></span><br><span class="line">cat <span class="variable">$1</span> | <span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    <span class="comment"># echo $&#123;line&#125;</span></span><br><span class="line">    array=(<span class="variable">$&#123;line// / &#125;</span>) <span class="comment"># array=($&#123;line//\t/ &#125;) ä¸ç”Ÿæ•ˆ</span></span><br><span class="line">    <span class="comment"># echo $&#123;array[0]&#125; + &quot;;&quot; + $&#123;array[1]&#125; </span></span><br><span class="line">    cmd=<span class="string">&#x27;axel -o &#x27;</span><span class="variable">$&#123;array[0]&#125;</span><span class="string">&#x27; &quot;&#x27;</span><span class="variable">$&#123;array[1]&#125;</span><span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">    <span class="built_in">eval</span> <span class="variable">$cmd</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>ä¸‹é¢å¯¹codeé€ä¸€è§£é‡Š</p><h2 id="bin-bash"><a href="#bin-bash" class="headerlink" title="#! /bin/bash"></a>#! /bin/bash</h2><p><strong>#!/bin/bash</strong>æ˜¯æŒ‡æ­¤è„šæœ¬ä½¿ç”¨**/bin/bash**æ¥è§£é‡Šæ‰§è¡Œï¼ŒBashè„šæœ¬é¦–è¡Œå›ºå®šå†™æ³•ã€‚</p><h2 id="Bashæ³¨é‡Š"><a href="#Bashæ³¨é‡Š" class="headerlink" title="Bashæ³¨é‡Š"></a>Bashæ³¨é‡Š</h2><p>Bashä¸­ä½¿ç”¨<code>#</code>è¿›è¡Œå•è¡Œæ³¨é‡Šï¼Œè§å¦‚ä¸Šä»£ç ç¬¬ä¸‰è¡Œ</p><h2 id="Bash-æ¥æ”¶å¤–éƒ¨å‚æ•°"><a href="#Bash-æ¥æ”¶å¤–éƒ¨å‚æ•°" class="headerlink" title="Bash æ¥æ”¶å¤–éƒ¨å‚æ•°"></a>Bash æ¥æ”¶å¤–éƒ¨å‚æ•°</h2><p>æˆ‘ä»¬å¯ä»¥åœ¨æ‰§è¡Œ Shell è„šæœ¬æ—¶ï¼Œå‘è„šæœ¬ä¼ é€’å‚æ•°ï¼Œè„šæœ¬å†…è·å–å‚æ•°çš„æ ¼å¼ä¸ºï¼š**$n<strong>ã€‚</strong>n** ä»£è¡¨ä¸€ä¸ªæ•°å­—ï¼Œ1 ä¸ºæ‰§è¡Œè„šæœ¬çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œ2 ä¸ºæ‰§è¡Œè„šæœ¬çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œä»¥æ­¤ç±»æ¨â€¦â€¦</p><p>ç‰¹æ®Šçš„ ï¼Œ**$0** è¡¨ç¤ºè„šæœ¬åç§°ï¼ˆå«è·¯å¾„ï¼‰ã€‚</p><p>å¦å¤–ï¼Œ**$#** è¡¨ç¤ºä¼ é€’å‚æ•°çš„ä¸ªæ•°ã€‚</p><p>ä¸Šé¢ä»£ç ä¸­<code>cat $1 |</code>å°±æ˜¯å°†ç¬¬ä¸€ä¸ªå‚æ•°ä½œä¸ºæ–‡ä»¶åï¼Œè¯»å–æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œé€šè¿‡ç®¡é“å‘½ä»¤<code>|</code>å°†æ–‡ä»¶å†…å®¹ä¼ ç»™whileå¾ªç¯</p><h2 id="Bash-å¾ªç¯è¯»å–æ¯ä¸€è¡Œ"><a href="#Bash-å¾ªç¯è¯»å–æ¯ä¸€è¡Œ" class="headerlink" title="Bash å¾ªç¯è¯»å–æ¯ä¸€è¡Œ"></a>Bash å¾ªç¯è¯»å–æ¯ä¸€è¡Œ</h2><p>æœ€ç®€å•çš„</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> line</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$line</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>è¿˜å¯ä»¥ä½¿ç”¨forå¾ªç¯ç­‰ï¼Œè¯¦ç»†å¯å‚è§å‚è€ƒèµ„æ–™1ã€‚</p><h2 id="BashæŒ‰æŒ‡å®šå­—ç¬¦åˆ†å‰²å­—ç¬¦ä¸²"><a href="#BashæŒ‰æŒ‡å®šå­—ç¬¦åˆ†å‰²å­—ç¬¦ä¸²" class="headerlink" title="BashæŒ‰æŒ‡å®šå­—ç¬¦åˆ†å‰²å­—ç¬¦ä¸²"></a>BashæŒ‰æŒ‡å®šå­—ç¬¦åˆ†å‰²å­—ç¬¦ä¸²</h2><p>æ¥ä¸Šæ–‡ï¼Œlineæ˜¯å¾…å¤„ç†çš„å­—ç¬¦ä¸²ï¼Œåˆ™æŒ‡å®šåˆ†éš”ç¬¦<code>\t</code>å°†lineåˆ†å‰²åçš„å­—ç¬¦ä¸²æ•°ç»„å­˜æ”¾åˆ°arrayï¼Œ</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">array=(<span class="variable">$&#123;line// / &#125;</span>)</span><br></pre></td></tr></table></figure><p>æ³¨æ„è¿™é‡Œ<code>//</code>å’Œ<code>/</code>ä¹‹é—´æ˜¯ä¸€ä¸ªåˆ¶è¡¨ç¬¦ï¼Œè€Œä¸æ˜¯ç©ºæ ¼ã€‚</p><p>æˆ‘ä¹Ÿæ›¾ä½¿ç”¨<code>array=($&#123;line//\t/ &#125;)</code>æ¥è¿›è¡Œåˆ†å‰²ï¼Œä½†æ˜¯æµ‹è¯•åå‘ç°å®ƒä¼šæŒ‰ç…§å­—ç¬¦<code>t</code>å¯¹å­—ç¬¦ä¸²è¿›è¡Œåˆ†å‰²ã€‚</p><p><em>è¿˜æ²¡å¼„æ˜ç™½è¯­æ³•è§„åˆ™</em></p><h2 id="Bashå­—ç¬¦ä¸²æ‹¼æ¥"><a href="#Bashå­—ç¬¦ä¸²æ‹¼æ¥" class="headerlink" title="Bashå­—ç¬¦ä¸²æ‹¼æ¥"></a>Bashå­—ç¬¦ä¸²æ‹¼æ¥</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">cmd=<span class="string">&#x27;axel -o &#x27;</span><span class="variable">$&#123;array[0]&#125;</span><span class="string">&#x27; &quot;&#x27;</span><span class="variable">$&#123;array[1]&#125;</span><span class="string">&#x27;&quot;&#x27;</span></span><br></pre></td></tr></table></figure><p>è¿™ä¸€è¡Œå°±æ˜¯å–arrayä¸­çš„å€¼è¿›è¡Œå­—ç¬¦ä¸²æ‹¼æ¥ï¼Œæ³¨æ„å–å€¼çš„è¯­æ³•<code>$&#123;&#125;</code></p><ul><li><p>Bashä¸­å¯¹å­—ç¬¦ä¸²æ‹¼æ¥ä¸éœ€è¦ä½¿ç”¨<code>+</code>è¿›è¡Œè¿æ¥</p></li><li><p>è¿™é‡Œä½¿ç”¨å•å¼•å·æ˜¯ä¸ºäº†é¿å…å¯¹åŒå¼•å·è½¬ä¹‰</p></li></ul><h2 id="Bashæ‰§è¡Œcmd"><a href="#Bashæ‰§è¡Œcmd" class="headerlink" title="Bashæ‰§è¡Œcmd"></a>Bashæ‰§è¡Œcmd</h2><p><code>eval $cmd</code>æ˜¯è¯»å–å˜é‡cmdçš„å€¼å½“ä½œä¸€æ¡Shellå‘½ä»¤è¿›è¡Œæ‰§è¡Œ</p><h2 id="æ”¹è¿›"><a href="#æ”¹è¿›" class="headerlink" title="æ”¹è¿›"></a>æ”¹è¿›</h2><p>ä¸Šé¢çš„ä»£ç å…ˆè¯»å–æ¯ä¸€è¡Œï¼Œåœ¨å¯¹è¡ŒæŒ‰ç…§åˆ¶è¡¨ç¬¦è¿›è¡Œåˆ†å‰²ã€‚å…¶å®å¯ä»¥æ›´ç®€æ´ï¼š</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="built_in">read</span> filenameurl</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="comment">#echo $filename</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><p>åŒæ ·çš„éœ€è¦æ³¨æ„<code>filename</code>ï¼Œ<code>url</code>ä¹‹é—´æ˜¯ä¸€ä¸ªåˆ¶è¡¨ç¬¦è€Œä¸æ˜¯ç©ºæ ¼ã€‚</p><h2 id="é—®é¢˜"><a href="#é—®é¢˜" class="headerlink" title="é—®é¢˜"></a>é—®é¢˜</h2><p>å½“urlè¿‡é•¿æ—¶ï¼Œè¯¥è„šæœ¬å¹¶ä¸èƒ½å®Œæ•´çš„è¯»å–urlã€‚ä¾‹å¦‚ï¼Œå½“æ–‡ä»¶å¦‚ä¸‹æ—¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">covid19-image-dataset-collection-volumes-folder.ziphttps://storage.googleapis.com/kaggle-data-sets/862993/1470970/bundle/archive.zip?X-Goog-Algorithm=GOOG4-RSA-SHA256&amp;X-Goog-Credential=gcp-kaggle-com%40kaggle-161607.iam.gserviceaccount.com%2F20211221%2Fauto%2Fstorage%2Fgoog4_request&amp;X-Goog-Date=20211221T052609Z&amp;X-Goog-Expires=259199&amp;X-Goog-SignedHeaders=host&amp;X-Goog-Signature=6549111df89ca0440058e7061ba9a13d72ea22ed7bcfdbcfc56ddadaf7a54ec4d3285487b269808d60cf0568264db1803899989475d8ca0aeec0777891f54df612a6a8f7ba808c8df3899feda1a94ca0507a580e407c0e42371d97e3ce1c75d598bed1f693bf841f7d4660294488e99fc944d6e1498c5ec38b431b969e5f13eda5f2d8029e855ea368c57eab60897a32f7556df116a96bfd321dd4d214dfe847d4c8ca11fdb7c3472ebac9f7a9eb20b44a148df51ecb2f93acdc5459800a894cdc2d62a0cc2c2e42e6711e568827f44b82d6faaa02aa1357c8d93140eb2c72bde9b8c1716e565800ac3ff812df304ce7a54c2a83896696ac5fa935329afa66ef</span><br></pre></td></tr></table></figure><p>è¯»å–å¹¶æ‹¼æ¥åçš„å‘½ä»¤å­—ç¬¦ä¸²å¦‚ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">axel -o covid19-image-dataset-collection-volumes-folder.zip &quot;https://storage.googleapis.com/kaggle-data-sets/862993/1470970/bundle/archive.zip?X-Goog-Algorithm=GOOG4-RSA-SHA256&amp;X-Goog-Credential=gcp-kaggle-com%40kaggle-161607.iam.gserviceaccount.com%2F20211221%2Fauto%2Fstorage%2Fgoog4_request&amp;X-Goog-Date=20211221T052609Z&amp;X-Goog-Expires=259199&amp;X-Goog-SignedHeaders=host&amp;X-Goog-Signature=6549111df89ca0440058e7061ba9a13d72ea22ed7bcfdbcfc56ddadaf7a54ec4d3285487b269808d60cf0568264db1803899989475d8ca0aeec0777891f54df612a6a8f7ba808c8df3899feda1a94ca0507a580e407c0e42371d97e3ce1c75d598bed1f693bf841f7d4660294488e99fc944d6e1498c5ec38b431b969e5f13eda5f2d8029e855ea368c57eab60897a32f7556df116a96bfd321dd4d214dfe847d4c8ca11fdb7c3472ebac9f7a9eb20b44a148df51ecb2f93acdc5459800a894cdc2d62a0cc2c2e42e6711e568827f44b82d6faaa02aa1357c8d93140eb2c72bde9b8c1716e565800ac3ff812df304ce7a54c2a83896696ac5fa9353&quot;9afa66ef</span><br></pre></td></tr></table></figure><p>æ³¨æ„å¼•å·å¤–é¢è¿˜æœ‰æ•°æ®ï¼Œè¿™æ˜¯ä¸ç¬¦åˆé¢„æœŸçš„ã€‚</p><p><em>ç›®å‰è¿˜æ²¡æœ‰è§£å†³è¯¥é—®é¢˜</em></p><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><p>ç”±äºæœ¬äººå¯¹Bashä¸æ˜¯å¾ˆç†Ÿæ‚‰ï¼Œæ‰€ä»¥æ”¹ç”¨Pythonæ¥å®Œæˆè¿™ä¸€éœ€æ±‚ã€‚</p><p>ä¸‹é¢ç»™å‡ºå®Œæ•´ä»£ç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#python download.py -f list</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&quot;download kaggle dataset according to file&quot;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;--filename&#x27;</span>, required=<span class="literal">True</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;filename&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    filename = args.filename</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(filename, <span class="string">&quot;r&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        lines = f.readlines()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> line <span class="keyword">in</span> lines:</span><br><span class="line">        arr = line.split(<span class="string">&#x27;\t&#x27;</span>)</span><br><span class="line">        save_name = arr[<span class="number">0</span>]</span><br><span class="line">        url = arr[<span class="number">1</span>].replace(<span class="string">&quot;\n&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">        cmd = <span class="string">&#x27;axel -o &#x27;</span> + save_name + <span class="string">&#x27; &quot;&#x27;</span> + url + <span class="string">&#x27;&quot;&#x27;</span></span><br><span class="line">        <span class="comment"># print(cmd)</span></span><br><span class="line">        res_f = os.popen(cmd)  <span class="comment"># è¿”å›çš„æ˜¯ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡</span></span><br><span class="line">        <span class="built_in">print</span>(res_f.read())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><h2 id="Python-mainå‡½æ•°"><a href="#Python-mainå‡½æ•°" class="headerlink" title="Python mainå‡½æ•°"></a>Python mainå‡½æ•°</h2><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯Pythonçš„mainå‡½æ•°ï¼ŒPythonè„šæœ¬æ€»ä¼šä»è¯¥â€œå‡½æ•°â€œè¿›å…¥ã€‚</p><h2 id="Python-æ¥æ”¶å¤–éƒ¨å‚æ•°"><a href="#Python-æ¥æ”¶å¤–éƒ¨å‚æ•°" class="headerlink" title="Python æ¥æ”¶å¤–éƒ¨å‚æ•°"></a>Python æ¥æ”¶å¤–éƒ¨å‚æ•°</h2><p>ä½¿ç”¨ç±»åº“<code>argparse</code>æ¥è¯»å–å¤–éƒ¨å‚æ•°ã€‚ä¸Šè¿°ä»£ç ç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">parser = argparse.ArgumentParser(description=<span class="string">&quot;download kaggle dataset according to file&quot;</span>)</span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">ç¬¬ä¸€ã€äºŒä¸ªå‚æ•°æ˜¯æŒ‡å®šå‚æ•°åï¼Œç¬¬ä¸€ä¸ªæ˜¯ç®€å†™å½¢å¼</span></span><br><span class="line"><span class="string">åœ¨è°ƒç”¨å‘½ä»¤çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨python script.py -f &lt;param&gt;æˆ–è€…python script.py --filename &lt;param&gt;</span></span><br><span class="line"><span class="string">required=True è¡¨ç¤ºè¯¥å‚æ•°å¿…å¡«</span></span><br><span class="line"><span class="string">type=str æŒ‡å®šå‚æ•°ç±»å‹</span></span><br><span class="line"><span class="string">help=&#x27;filename&#x27; æŒ‡å®šæç¤ºè¯­</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">parser.add_argument(<span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;--filename&#x27;</span>, required=<span class="literal">True</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, <span class="built_in">help</span>=<span class="string">&#x27;filename&#x27;</span> æŒ‡å®šæç¤ºè¯­)</span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">filename = args.filename  <span class="comment"># filenameå­˜æ”¾äº†å¤–éƒ¨å‚æ•°çš„å€¼</span></span><br></pre></td></tr></table></figure><p>è¯¦ç»†è¯·å‚è§<code>å‚è€ƒèµ„æ–™2</code></p><h2 id="Pythonæ–‡ä»¶ã€å­—ç¬¦ä¸²æ“ä½œ"><a href="#Pythonæ–‡ä»¶ã€å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="Pythonæ–‡ä»¶ã€å­—ç¬¦ä¸²æ“ä½œ"></a>Pythonæ–‡ä»¶ã€å­—ç¬¦ä¸²æ“ä½œ</h2><p>ç•¥</p><h2 id="åœ¨Pythonä¸­æ‰§è¡ŒShellå‘½ä»¤"><a href="#åœ¨Pythonä¸­æ‰§è¡ŒShellå‘½ä»¤" class="headerlink" title="åœ¨Pythonä¸­æ‰§è¡ŒShellå‘½ä»¤"></a>åœ¨Pythonä¸­æ‰§è¡ŒShellå‘½ä»¤</h2><p>æœ‰ä¸¤ç§æ–¹å¼ã€‚ä½¿ç”¨<code>os.system(&quot;command&quot;)</code>æ‰§è¡Œæ— è¿”å›å€¼çš„Shellå‘½ä»¤ï¼›ä½¿ç”¨<code>f = os.popen(&quot;command&quot;)</code>æ‰§è¡Œæœ‰è¾“å‡ºçš„Shellå‘½ä»¤ï¼Œå…¶è¿”å›å€¼<code>f</code>æ˜¯ä¸€ä¸ªæ–‡ä»¶å¯¹è±¡ï¼Œé€šè¿‡<code>f.read()</code>æ¥è¯»å–å‘½ä»¤è¾“å‡ºå†…å®¹ã€‚</p><hr><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="http://c.biancheng.net/shell/">Shell è„šæœ¬å­¦ä¹ æŒ‡å—</a></li><li><a href="https://docs.python.org/zh-cn/3/howto/argparse.html">Python Argparse æ•™ç¨‹</a></li><li><a href="https://blog.csdn.net/qq_27825451/article/details/102909772">pythonæ‰§è¡Œshellè„šæœ¬çš„å‡ ç§æ–¹æ³•</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ€è¿‘é‡åˆ°å¦‚ä¸‹éœ€æ±‚ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªæ–‡ä»¶ï¼Œæ–‡ä»¶æ ¼å¼å¤§æ¦‚æ˜¯è¿™æ ·&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;</summary>
      
    
    
    
    <category term="Linux" scheme="https://gmet233.gitee.io/categories/Linux/"/>
    
    <category term="Scripts" scheme="https://gmet233.gitee.io/categories/Linux/Scripts/"/>
    
    
    <category term="Linux Bash" scheme="https://gmet233.gitee.io/tags/Linux-Bash/"/>
    
    <category term="Python" scheme="https://gmet233.gitee.io/tags/Python/"/>
    
  </entry>
  
  <entry>
    <title>ç”°å¿Œèµ›é©¬ä¸è´ªå¿ƒæ³•åˆ™</title>
    <link href="https://gmet233.gitee.io/2021/12/20/%E7%94%B0%E5%BF%8C%E8%B5%9B%E9%A9%AC%E4%B8%8E%E8%B4%AA%E5%BF%83%E6%B3%95%E5%88%99/"/>
    <id>https://gmet233.gitee.io/2021/12/20/%E7%94%B0%E5%BF%8C%E8%B5%9B%E9%A9%AC%E4%B8%8E%E8%B4%AA%E5%BF%83%E6%B3%95%E5%88%99/</id>
    <published>2021-12-20T13:59:45.000Z</published>
    <updated>2021-12-20T14:01:55.082Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡æ¶‰åŠ*<a href="https://leetcode-cn.com/problems/advantage-shuffle/">LeetCode 870. ä¼˜åŠ¿æ´—ç‰Œ</a>*</p><blockquote><p>ç»™å®šä¸¤ä¸ªå¤§å°ç›¸ç­‰çš„æ•°ç»„ A å’Œ Bï¼ŒA ç›¸å¯¹äº B çš„ä¼˜åŠ¿å¯ä»¥ç”¨æ»¡è¶³ A[i] &gt; B[i] çš„ç´¢å¼• i çš„æ•°ç›®æ¥æè¿°ã€‚è¿”å› A çš„ä»»æ„æ’åˆ—ï¼Œä½¿å…¶ç›¸å¯¹äº B çš„ä¼˜åŠ¿æœ€å¤§åŒ–ã€‚</p><p>ç¤ºä¾‹ 1ï¼š</p><p>è¾“å…¥ï¼šA = [2,7,11,15], B = [1,10,4,11]<br>è¾“å‡ºï¼š[2,11,7,15]<br>ç¤ºä¾‹ 2ï¼š</p><p>è¾“å…¥ï¼šA = [12,24,8,32], B = [13,25,32,11]<br>è¾“å‡ºï¼š[24,32,8,12]</p></blockquote><p>è¿™å°±åƒâ½¥å¿Œèµ›â»¢çš„æƒ…æ™¯ï¼Œnums1 å°±æ˜¯â½¥å¿Œçš„â»¢ï¼Œnums2 å°±æ˜¯â»¬ç‹çš„â»¢ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ å°±æ˜¯â»¢çš„æˆ˜â½ƒâ¼’ï¼š</p><p>ç®—æ³•ç­–ç•¥æ˜¯ï¼š<strong>å°†â»¬ç‹å’Œâ½¥å¿Œçš„â»¢æŒ‰ç…§æˆ˜â½ƒâ¼’æ’åºï¼Œç„¶åæŒ‰ç…§æ’åâ¼€â¼€å¯¹â½ã€‚å¦‚æœâ½¥å¿Œçš„â»¢èƒ½èµ¢ï¼Œé‚£å°±â½èµ›ï¼Œå¦‚æœèµ¢ä¸äº†ï¼Œé‚£å°±æ¢ä¸ªå«åº•çš„æ¥é€â¼ˆå¤´ï¼Œä¿å­˜å®â¼’ã€‚</strong></p><p>è¿™é‡Œè¦æ³¨æ„ä¸€ä¸ªé—®é¢˜ï¼šæ˜¯å¦éœ€è¦ä¿å­˜å®åŠ›ï¼Œå³å¦‚æœâ½¥å¿Œçš„â¼†å·é€‰â¼¿ä¹Ÿèƒ½â¼²å¾—è¿‡â»¬ç‹çš„â¼€å·é€‰â¼¿ï¼Œæ­¤æ—¶è®©â¼†å·é€‰â¼¿å»å¯¹å†³â»¬ç‹çš„â¼€å·é€‰â¼¿ï¼Œä¸æ˜¯æ›´èŠ‚çº¦ï¼Ÿ</p><p>è¿™ç§èŠ‚çº¦çš„ç­–ç•¥æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯<strong>æ²¡æœ‰å¿…è¦</strong>ã€‚</p><p>æˆ‘ä»¬æš‚ä¸”æŠŠâ½¥å¿Œçš„â¼€å·é€‰â¼¿ç§°ä¸º T1ï¼Œâ¼†å·é€‰â¼¿ç§°ä¸º T2ï¼Œâ»¬ç‹çš„â¼€å·é€‰â¼¿ç§°ä¸º Q1ã€‚å¦‚æœ T2 èƒ½èµ¢ Q1ï¼Œä½ è¯•å›¾ä¿å­˜â¼°â½…å®â¼’ï¼Œè®© T2 å»æˆ˜ Q1ï¼ŒæŠŠ T1 ç•™ç€æ˜¯ä¸ºäº†å¯¹ä»˜è°ï¼Ÿæ˜¾ç„¶ï¼Œä½ æ‹…â¼¼â»¬ç‹è¿˜æœ‰æˆ˜â¼’â¼¤äº T2 çš„â»¢ï¼Œå¯ä»¥è®© T1 å»å¯¹ä»˜ã€‚ä½†æ˜¯ä½ ä»”ç»†æƒ³æƒ³ï¼Œç°åœ¨ T2 å·²ç»æ˜¯å¯ä»¥æˆ˜èƒœ Q1 çš„ï¼ŒQ1 å¯æ˜¯â»¬ç‹çš„æœ€å¿«çš„â»¢ï¼Œâ»¬ç‹å‰©ä¸‹çš„é‚£äº›â»¢â¾¥ï¼Œæ€ä¹ˆå¯èƒ½è¿˜æœ‰â½ T2 æ›´å¼ºçš„â»¢ï¼Ÿ</p><p>æ‰€ä»¥æ²¡å¿…è¦èŠ‚çº¦ã€‚</p><p>æ ¹æ®ä¸Šè¿°æ€è·¯å¾—åˆ°çš„ä»£ç é€»è¾‘å¦‚ä¸‹ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¯¹ä¸¤ä¸ªæ•°ç»„nums1å’Œnums2æ’åº</span><br><span class="line">å¯¹ä¸¤ä¸ªæ•°ç»„çš„å…ƒç´ æŒ¨ä¸ªæ¯”è¾ƒï¼Œå¦‚æœnums1[i]&gt;nums2[i]é‚£å°±æ¯”ï¼Œå¦åˆ™å°±æ¢ä¸Šnums1æœ€å°çš„å…ƒç´ è¿›è¡Œæ¯”è¾ƒã€‚</span><br></pre></td></tr></table></figure><p>ç”±äºéœ€è¦å¯¹ä¸¤ä¸ªæ•°ç»„æ’åºï¼Œä½†æ˜¯è¿”å›ç»“æœä¾èµ–nums2çš„é¡ºåºï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥å¯¹nums2è¿›è¡Œæ’åºï¼Œè€Œæ˜¯åˆ©ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ã€‚ï¼ˆå°†(index, nums2[index]æ”¾å…¥ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œå‡ºé˜Ÿä¼˜å…ˆçº§æŒ‰ç…§nums2[index]å¤§å°ï¼Œindexè®°å½•ç´¢å¼•å€¼ï¼‰</p><p>æ­¤å¤–ï¼Œè§£æ³•è¿˜æ˜¯ç”¨åˆ°åŒæŒ‡é’ˆæŠ€å·§ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">int</span>[] advantageCount(<span class="keyword">int</span>[] nums1, <span class="keyword">int</span>[] nums2) &#123;</span><br><span class="line">    <span class="keyword">int</span> n = nums1.length;</span><br><span class="line">    <span class="comment">// ç»™ nums2 é™åºæ’åº</span></span><br><span class="line">    PriorityQueue&lt;<span class="keyword">int</span>[]&gt; maxpq = <span class="keyword">new</span> PriorityQueue&lt;&gt;(</span><br><span class="line">        (<span class="keyword">int</span>[] pair1, <span class="keyword">int</span>[] pair2) -&gt; &#123; </span><br><span class="line">            <span class="keyword">return</span> pair2[<span class="number">1</span>] - pair1[<span class="number">1</span>];</span><br><span class="line">        &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">        maxpq.offer(<span class="keyword">new</span> <span class="keyword">int</span>[]&#123;i, nums2[i]&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ç»™ nums1 å‡åºæ’åº</span></span><br><span class="line">    Arrays.sort(nums1);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// nums1[left] æ˜¯æœ€å°å€¼ï¼Œnums1[right] æ˜¯æœ€å¤§å€¼</span></span><br><span class="line">    <span class="keyword">int</span> left = <span class="number">0</span>, right = n - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span>[] res = <span class="keyword">new</span> <span class="keyword">int</span>[n];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (!maxpq.isEmpty()) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] pair = maxpq.poll();</span><br><span class="line">        <span class="comment">// maxval æ˜¯ nums2 ä¸­çš„æœ€å¤§å€¼ï¼Œi æ˜¯å¯¹åº”ç´¢å¼•</span></span><br><span class="line">        <span class="keyword">int</span> i = pair[<span class="number">0</span>], maxval = pair[<span class="number">1</span>];</span><br><span class="line">        <span class="keyword">if</span> (maxval &lt; nums1[right]) &#123;</span><br><span class="line">            <span class="comment">// å¦‚æœ nums1[right] èƒ½èƒœè¿‡ maxvalï¼Œé‚£å°±è‡ªå·±ä¸Š</span></span><br><span class="line">            res[i] = nums1[right];</span><br><span class="line">            right--;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">// å¦åˆ™ç”¨æœ€å°å€¼å»æ¢nums2çš„æœ€å¤§å€¼</span></span><br><span class="line">            res[i] = nums1[left];</span><br><span class="line">            left++;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://mp.weixin.qq.com/s?__biz=MzAxODQxMDM0Mw==&mid=2247491139&idx=1&sn=10cb35e0056ac8f8c540fccd0156f333&scene=21&ascene=7&devicetype=iOS15.2&version=1800103a&nettype=WIFI&abtest_cookie=AAACAA==&lang=zh_CN&fontScale=100&exportkey=A2t5E2fVKmwEJxWEKsScbfU=&pass_ticket=n3zshxiiR8IMf1IfoZgzB+PSm6RatluaPa8vtuS3bDtR2ttHhdhxmZkQCXMUyC9L&wx_header=1">labuladong: ç®—æ³•å¤§å¸ˆâ€”â€”å­™è†‘</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ¬æ–‡æ¶‰åŠ*&lt;a href=&quot;https://leetcode-cn.com/problems/advantage-shuffle/&quot;&gt;LeetCode 870. ä¼˜åŠ¿æ´—ç‰Œ&lt;/a&gt;*&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»™å®šä¸¤ä¸ªå¤§å°ç›¸ç­‰çš„æ•°ç»„ A å’Œ Bï¼ŒA ç›¸å¯¹äº B </summary>
      
    
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="æ•°ç»„/é“¾è¡¨" scheme="https://gmet233.gitee.io/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/%E6%95%B0%E7%BB%84-%E9%93%BE%E8%A1%A8/"/>
    
    
    <category term="æ•°æ®ç»“æ„ä¸ç®—æ³•" scheme="https://gmet233.gitee.io/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B8%8E%E7%AE%97%E6%B3%95/"/>
    
    <category term="è´ªå¿ƒ" scheme="https://gmet233.gitee.io/tags/%E8%B4%AA%E5%BF%83/"/>
    
  </entry>
  
  <entry>
    <title>PriorityQueue æ¦‚è¿°</title>
    <link href="https://gmet233.gitee.io/2021/12/19/PriorityQueue-%E6%A6%82%E8%BF%B0/"/>
    <id>https://gmet233.gitee.io/2021/12/19/PriorityQueue-%E6%A6%82%E8%BF%B0/</id>
    <published>2021-12-19T08:58:37.000Z</published>
    <updated>2021-12-19T09:06:39.869Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h1><p><code>Queue</code>æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—ã€‚</p><p>ä½†æœ‰æ—¶å€™è¿™å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚å½“æˆ‘ä»¬éœ€è¦å¯¹é˜Ÿåˆ—ä¸­çš„å…ƒç´ é‡æ’ï¼ŒæŒ‰ç…§é‡æ’åçš„å…ƒç´ é¡ºåºå‡ºé˜Ÿæ—¶ï¼Œè¿™æ—¶å€™å°±éœ€è¦<code>PriorityQueue</code>ã€‚</p><p><code>PriorityQueue</code>å’Œ<code>Queue</code>çš„åŒºåˆ«åœ¨äºï¼Œå®ƒçš„å‡ºé˜Ÿé¡ºåºä¸å…ƒç´ çš„ä¼˜å…ˆçº§æœ‰å…³ï¼Œå¯¹<code>PriorityQueue</code>è°ƒç”¨<code>remove()</code>æˆ–<code>poll()</code>æ–¹æ³•ï¼Œè¿”å›çš„æ€»æ˜¯ä¼˜å…ˆçº§æœ€é«˜çš„å…ƒç´ ã€‚</p><p>è¦ä½¿ç”¨<code>PriorityQueue</code>ï¼Œæˆ‘ä»¬å°±å¿…é¡»ç»™æ¯ä¸ªå…ƒç´ å®šä¹‰â€œä¼˜å…ˆçº§â€ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.PriorityQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.Queue;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyPriorityQueue</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Queue&lt;User&gt; queue = <span class="keyword">new</span> PriorityQueue&lt;&gt;(</span><br><span class="line">                (User user1, User user2) -&gt; &#123;</span><br><span class="line">                    <span class="keyword">return</span> user2.getLevel() - user1.getLevel();</span><br><span class="line">                &#125;</span><br><span class="line">        );</span><br><span class="line">        queue.offer(<span class="keyword">new</span> User(<span class="string">&quot;sb_1&quot;</span>, <span class="number">1</span>)); <span class="comment">//ä¼˜å…ˆçº§ä½</span></span><br><span class="line">        queue.offer(<span class="keyword">new</span> User(<span class="string">&quot;vip_1&quot;</span>, <span class="number">2</span>)); <span class="comment">//ä¼˜å…ˆçº§é«˜</span></span><br><span class="line">        <span class="keyword">while</span>(!queue.isEmpty()) &#123;</span><br><span class="line">            User user = queue.poll();</span><br><span class="line">            System.out.println(user.getName());</span><br><span class="line">        &#125; <span class="comment">//å‡ºé˜Ÿçš„é¡ºåºæ˜¯vip_1, sb_1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> level;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(String name, <span class="keyword">int</span> level)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.level = level;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//getterã€setter</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸Šé¢çš„ä¾‹å­ä½¿ç”¨lambdaè¡¨è¾¾å¼å®ç°äº†æ’åºã€‚ä½ ä¹Ÿå¯ä»¥è‡ªå®šä¹‰æ’åºå™¨ï¼ˆå®ç°Comparableæ¥å£ï¼‰ï¼Œç„¶åå°†æ’åºå™¨å¯¹è±¡ä¼ é€’ç»™<code>PriorityQueue</code>æ„é€ å™¨ã€‚æ„é€ å‡½æ•°ç­¾åå¦‚ä¸‹ï¼š</p><p><code>public PriorityQueue(Comparator&lt;? super E&gt; comparator)</code></p><h1 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h1><p>é€šè¿‡å †å®ç°ï¼Œå…·ä½“è¯´æ˜¯é€šè¿‡å®Œå…¨äºŒå‰æ ‘ï¼ˆ<em>complete binary tree</em>ï¼‰å®ç°çš„<strong>å°é¡¶å †</strong>ï¼ˆä»»æ„ä¸€ä¸ªéå¶å­èŠ‚ç‚¹çš„æƒå€¼ï¼Œéƒ½ä¸å¤§äºå…¶å·¦å³å­èŠ‚ç‚¹çš„æƒå€¼ï¼‰ã€‚</p><p>å…·ä½“è¯·å‚è€ƒ<strong>å †æ’åº</strong>ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ol><li><a href="https://www.liaoxuefeng.com/wiki/1252599548343744/1265120632401152">https://www.liaoxuefeng.com/wiki/1252599548343744/1265120632401152</a></li><li><a href="https://www.cnblogs.com/CarpenterLee/p/5488070.html">https://www.cnblogs.com/CarpenterLee/p/5488070.html</a></li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;å¿«é€Ÿå…¥é—¨&quot;&gt;&lt;a href=&quot;#å¿«é€Ÿå…¥é—¨&quot; class=&quot;headerlink&quot; title=&quot;å¿«é€Ÿå…¥é—¨&quot;&gt;&lt;/a&gt;å¿«é€Ÿå…¥é—¨&lt;/h1&gt;&lt;p&gt;&lt;code&gt;Queue&lt;/code&gt;æ˜¯ä¸€ä¸ªä¸¥æ ¼çš„å…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æœ‰æ—¶å€™è¿™å¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</summary>
      
    
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/categories/Java/"/>
    
    <category term="é›†åˆ" scheme="https://gmet233.gitee.io/categories/Java/%E9%9B%86%E5%90%88/"/>
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/tags/Java/"/>
    
  </entry>
  
  <entry>
    <title>å•ä¾‹è®¾è®¡æ¨¡å¼</title>
    <link href="https://gmet233.gitee.io/2021/12/16/%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    <id>https://gmet233.gitee.io/2021/12/16/%E5%8D%95%E4%BE%8B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/</id>
    <published>2021-12-16T13:19:39.000Z</published>
    <updated>2021-12-16T13:48:11.500Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ä»‹ç»"><a href="#ä»‹ç»" class="headerlink" title="ä»‹ç»"></a>ä»‹ç»</h1><p>å•ä¾‹æ¨¡å¼ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚</p><h1 id="åº”ç”¨"><a href="#åº”ç”¨" class="headerlink" title="åº”ç”¨"></a>åº”ç”¨</h1><p>çº¿ç¨‹æ± ï¼Œæ•°æ®åº“è¿æ¥å¯¹è±¡ã€‚</p><h1 id="ç»å…¸å•ä¾‹æ¨¡å¼"><a href="#ç»å…¸å•ä¾‹æ¨¡å¼" class="headerlink" title="ç»å…¸å•ä¾‹æ¨¡å¼"></a>ç»å…¸å•ä¾‹æ¨¡å¼</h1><p>ä¸€ä¸ªç»å…¸çš„å•ä¾‹æ¨¡å¼å®ç°ï¼š</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">// <span class="doctag">NOTE:</span> This is not thread safe!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> uniqueInstance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥å®ç°æ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„ã€‚å¯ä»¥æƒ³è±¡æœ‰ä¸¤ä¸ªçº¿ç¨‹åŒæ—¶è¿›å…¥äº†getInstance()æ–¹æ³•ã€‚</p><h1 id="è§£å†³ç»å…¸å•ä¾‹æ¨¡å¼çº¿ç¨‹å®‰å…¨é—®é¢˜"><a href="#è§£å†³ç»å…¸å•ä¾‹æ¨¡å¼çº¿ç¨‹å®‰å…¨é—®é¢˜" class="headerlink" title="è§£å†³ç»å…¸å•ä¾‹æ¨¡å¼çº¿ç¨‹å®‰å…¨é—®é¢˜"></a>è§£å†³ç»å…¸å•ä¾‹æ¨¡å¼çº¿ç¨‹å®‰å…¨é—®é¢˜</h1><p>è§£å†³æ–¹æ¡ˆï¼Œç»™getInstanceæ–¹æ³•åŠ ä¸Šsynchronizedå…³é”®å­—ï¼Œè¿«ä½¿æ¯ä¸ªçº¿ç¨‹è¿›å…¥è¯¥æ–¹æ³•å‰éƒ½éœ€è¦ç­‰å¾…åˆ«çš„çº¿ç¨‹ç¦»å¼€è¯¥æ–¹æ³•ã€‚</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> Singleton uniqueInstance;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">synchronized</span> Singleton <span class="title">getInstance</span><span class="params">()</span> </span>&#123;</span><br><span class="line"><span class="keyword">if</span> (uniqueInstance == <span class="keyword">null</span>) &#123;</span><br><span class="line">uniqueInstance = <span class="keyword">new</span> Singleton();</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span> uniqueInstance;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¯¥è§£å†³æ–¹æ¡ˆå¾—ç¼ºç‚¹å°±æ˜¯åªæœ‰ç¬¬ä¸€æ¬¡æ‰§è¡Œè¯¥æ–¹æ³•æ‰çœŸæ­£éœ€è¦çº¿ç¨‹åŒæ­¥ã€‚</p><h1 id="æ›´è¿›ä¸€æ­¥â€¦"><a href="#æ›´è¿›ä¸€æ­¥â€¦" class="headerlink" title="æ›´è¿›ä¸€æ­¥â€¦"></a>æ›´è¿›ä¸€æ­¥â€¦</h1><p>è¿™é‡Œç»™å‡ºä¸‰ç§æ”¹å–„æ–¹æ¡ˆï¼š</p><ol><li>å¦‚æœgetInstanceå¾—æ€§èƒ½å¯¹äºåº”ç”¨ç¨‹åºä¸æ˜¯å¾ˆå…³é”®ï¼Œå°±ä»€ä¹ˆä¹Ÿåˆ«åšã€‚</li><li>ä½¿ç”¨â€œæ€¥åˆ‡â€åˆ›å»ºå®ä¾‹ï¼Œè€Œä¸ç”¨å»¶è¿Ÿå®ä¾‹åŒ–çš„åšæ³•ã€‚</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>ä½¿ç”¨<strong>åŒé‡æ£€æŸ¥åŠ é”</strong>ï¼Œåœ¨getInstanceä¸­å‡å°‘ä½¿ç”¨åŒæ­¥ã€‚</li></ol><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="keyword">static</span> Singleton instance;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Singleton <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span>(instance == <span class="keyword">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> Singleton();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¤‡æ³¨ï¼š</p><ul><li>é¦–å…ˆæ£€æŸ¥å®ä¾‹æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœä¸å­˜åœ¨å†è¿›å…¥åŒæ­¥ä»£ç å—ã€‚</li><li>è¿›å…¥åŒºå—ååœ¨æ£€æŸ¥ä¸€æ¬¡ï¼Œå¦‚æœä»ç„¶æ˜¯nullåˆ™åˆ›å»ºå®ä¾‹ã€‚</li><li>volatileå…³é”®å­—ç¡®ä¿ï¼šå½“instanceå˜é‡åˆå§‹åŒ–åï¼Œå¤šä¸ªçº¿ç¨‹æ­£ç¡®çš„å¤„ç†instanceå˜é‡ã€‚</li></ul><h1 id="æ€è€ƒ"><a href="#æ€è€ƒ" class="headerlink" title="æ€è€ƒ"></a>æ€è€ƒ</h1><blockquote><p>ä¸¤ä¸ªç±»åŠ è½½å™¨å¯èƒ½æœ‰æœºä¼šåˆ›å»ºè‡ªå·±çš„å•ä¾‹å®ä¾‹ï¼Ÿ</p></blockquote><p>æ˜¯çš„ã€‚æ‰€ä»¥å¦‚æœä½ çš„ç¨‹åºæœ‰å¤šä¸ªç±»åŠ è½½å™¨åˆåŒæ—¶ä½¿ç”¨äº†å•ä¾‹æ¨¡å¼ï¼Œè¯·å°å¿ƒã€‚è§£å†³æ–¹æ³•æ˜¯è‡ªè¡ŒæŒ‡å®šç±»åŠ è½½å™¨ï¼Œå¹¶æŒ‡å®šåŒä¸€ä¸ªç±»åŠ è½½å™¨ã€‚</p><blockquote><p>ç±»å¦‚æœèƒ½åšä¸¤ä»¶äº‹ï¼Œå°±è¿åäº†OOè®¾è®¡ã€‚å•ä¾‹æ¨¡å¼æ˜¯å¦è¿åäº†è¿™æ ·çš„è§‚å¿µå‘¢ï¼Ÿ</p></blockquote><p>å•ä¾‹ç±»ä¸æ­¢è´Ÿè´£ç®¡ç†è‡ªå·±çš„å®ä¾‹ï¼Œè¿˜åœ¨åº”ç”¨ç¨‹åºä¸­æ‹…ä»»è§’è‰²ï¼Œæ‰€ä»¥å¯ä»¥è§†ä¸ºæ˜¯ä¸¤ä¸ªè´£ä»»ã€‚ä½†æ˜¯ç”±ç±»ç®¡ç†è‡ªå·±çš„å®ä¾‹çš„åšæ³•å¹¶ä¸å°‘è§ï¼Œä¹Ÿå¯ä»¥è®©è®¾è®¡æ›´ç®€å•ã€‚</p><blockquote><p>æˆ‘æƒ³æŠŠå•ä¾‹ç±»å½“æˆè¶…ç±»ï¼Œè®¾è®¡å‡ºå­ç±»ã€‚ç©¶ç«Ÿå¯ä¸å¯ä»¥ç»§æ‰¿å•ä¾‹ç±»ã€‚</p></blockquote><p>ä¸èƒ½ã€‚ç»§æ‰¿å•ä¾‹ç±»é‡åˆ°çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯æ„é€ å™¨æ˜¯ç§æœ‰çš„ã€‚ä½ ä¸èƒ½ç”¨ç§æœ‰æ„é€ å™¨æ¥æ‰©å±•ç±»ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul><li>ã€ŠHead Firstè®¾è®¡æ¨¡å¼ã€‹(ä¸­æ–‡ç‰ˆ)</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;ä»‹ç»&quot;&gt;&lt;a href=&quot;#ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;ä»‹ç»&quot;&gt;&lt;/a&gt;ä»‹ç»&lt;/h1&gt;&lt;p&gt;å•ä¾‹æ¨¡å¼ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹ã€‚&lt;/p&gt;
&lt;h1 id=&quot;åº”ç”¨&quot;&gt;&lt;a href=&quot;#åº”ç”¨&quot; class=&quot;head</summary>
      
    
    
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://gmet233.gitee.io/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
    
    <category term="Java" scheme="https://gmet233.gitee.io/tags/Java/"/>
    
    <category term="è®¾è®¡æ¨¡å¼" scheme="https://gmet233.gitee.io/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"/>
    
  </entry>
  
</feed>
